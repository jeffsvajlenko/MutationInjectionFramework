#!/bin/bash
# $1 = system directory
# $2 = language {java, c, cs, py}
# $3 = frameowkr install dir
# $4 = tool dir
# $5 = fragmnet type (function|block)
# $6 = tool runner directory
# $7 = minlines

#Usage: simcad2 [-version] [-v] -s source_path -l language
#               [-g granularity] [-t clone_type]
#               [-c clone_grouping] [-x source_transform]
#               [-o output_path]
#-------------DESCRIPTION--------------
#-version          = display simcad version
#-v                = verbose mode, shows the detection in progress
#language          = c | java | cs | py
#granularity       = (block | b ) | (function | f) : default = (function | f)
#clone_type        = 1 | 2 | 3 | 12 | (23 | nearmiss) | 13 | (123 | all) : default = (123 | all)
#clone_grouping    = (group | cg) | (pair | cp) : default = (group | cg)
#source_transform  = (generous | g) | (greedy | G) : default = (generous | g)
#source_path       = absolute path to source folder
#output_path       = absolute path to output folder : default = {source_path}_simcad_clones

outfile=$6/clones.txt
sysdir=$1
tooldir=$4
language=$2

if [ $5 == "functions" ]; then
granularity=f
else
granularity=b
fi
cloneType=all
cloneGrouping=cp
srcTransform=generous
outPath=$4/temp
cd $6
java -jar SimCadRunner.jar $sysdir $tooldir $language $granularity $cloneType $cloneGrouping $srcTransform $outPath $outfile

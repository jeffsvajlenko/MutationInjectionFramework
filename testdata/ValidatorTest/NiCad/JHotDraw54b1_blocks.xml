<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="68" endline="94">
{
    createIconkit ();
    getVersionControlStrategy ().assertCompatibleVersion ();
    setUndoManager (new UndoManager ());
    getContentPane ().setLayout (new BorderLayout ());
    fView = createDrawingView ();
    JPanel attributes = createAttributesPanel ();
    createAttributeChoices (attributes);
    getContentPane ().add ("North", attributes);
    JPanel toolPanel = createToolPalette ();
    createTools (toolPanel);
    getContentPane ().add ("West", toolPanel);
    getContentPane ().add ("Center", (Component) view ());
    JPanel buttonPalette = createButtonPanel ();
    createButtons (buttonPalette);
    getContentPane ().add ("South", buttonPalette);
    initDrawing ();
    setupAttributes ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="97" endline="98">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="101" endline="102">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="105" endline="107">
{
    return new Iconkit (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="128" endline="132">
{
    JPanel panel = new JPanel ();
    panel.setLayout (new PaletteLayout (2, new Point (2, 2), false));
    return panel;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="139" endline="165">
{
    panel.add (new JLabel ("Fill"));
    fFillColor = createColorChoice (FigureAttributeConstant.FILL_COLOR);
    panel.add (fFillColor);
    panel.add (new JLabel ("Text"));
    fTextColor = createColorChoice (FigureAttributeConstant.TEXT_COLOR);
    panel.add (fTextColor);
    panel.add (new JLabel ("Pen"));
    fFrameColor = createColorChoice (FigureAttributeConstant.FRAME_COLOR);
    panel.add (fFrameColor);
    panel.add (new JLabel ("Arrow"));
    CommandChoice choice = new CommandChoice ();
    fArrowChoice = choice;
    FigureAttributeConstant arrowMode = FigureAttributeConstant.ARROW_MODE;
    choice.addItem (new ChangeAttributeCommand ("none", arrowMode, new Integer (PolyLineFigure.ARROW_TIP_NONE), this));
    choice.addItem (new ChangeAttributeCommand ("at Start", arrowMode, new Integer (PolyLineFigure.ARROW_TIP_START), this));
    choice.addItem (new ChangeAttributeCommand ("at End", arrowMode, new Integer (PolyLineFigure.ARROW_TIP_END), this));
    choice.addItem (new ChangeAttributeCommand ("at Both", arrowMode, new Integer (PolyLineFigure.ARROW_TIP_BOTH), this));
    panel.add (fArrowChoice);
    panel.add (new JLabel ("Font"));
    fFontChoice = createFontChoice ();
    panel.add (fFontChoice);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="171" endline="183">
{
    CommandChoice choice = new CommandChoice ();
    for (int i = 0;
    i < ColorMap.size (); i ++) choice.addItem (new ChangeAttributeCommand (ColorMap.name (i), attribute, ColorMap.color (i), this));

    return choice;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="190" endline="198">
{
    CommandChoice choice = new CommandChoice ();
    String fonts [] = Toolkit.getDefaultToolkit ().getFontList ();
    for (int i = 0;
    i < fonts.length; i ++) {
        choice.addItem (new ChangeAttributeCommand (fonts [i], FigureAttributeConstant.FONT_NAME, fonts [i], this));
    }

    return choice;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="194" endline="196">
{
    choice.addItem (new ChangeAttributeCommand (fonts [i], FigureAttributeConstant.FONT_NAME, fonts [i], this));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="204" endline="208">
{
    JPanel panel = new JPanel ();
    panel.setLayout (new PaletteLayout (2, new Point (2, 2), false));
    return panel;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="216" endline="301">
{
    panel.add (new Filler (24, 20));
    JComboBox drawingChoice = new JComboBox ();
    drawingChoice.addItem (fgUntitled);
    String param = getParameter ("DRAWINGS");
    if (param == null) {
        param = "";
    }

    StringTokenizer st = new StringTokenizer (param);
    while (st.hasMoreTokens ()) {
        drawingChoice.addItem (st.nextToken ());
    }

    if (drawingChoice.getItemCount () > 1) {
        panel.add (drawingChoice);
    }
    else {
        panel.add (new JLabel (fgUntitled));
    }

    drawingChoice.addItemListener (new ItemListener () {

        public void itemStateChanged (ItemEvent e) {
            if (e.getStateChange () == ItemEvent.SELECTED) {
                loadDrawing ((String) e.getItem ());
            }

        }

    }

    );
    panel.add (new Filler (6, 20));
    JButton button;
    button = new CommandButton (new DeleteCommand ("Delete", this));
    panel.add (button);
    button = new CommandButton (new DuplicateCommand ("Duplicate", this));
    panel.add (button);
    button = new CommandButton (new GroupCommand ("Group", this));
    panel.add (button);
    button = new CommandButton (new UngroupCommand ("Ungroup", this));
    panel.add (button);
    button = new JButton ("Help");
    button.addActionListener (new ActionListener () {

        public void actionPerformed (ActionEvent event) {
            showHelp ();
        }

    }

    );
    panel.add (button);
    fUpdateButton = new JButton ("Simple Update");
    fUpdateButton.addActionListener (new ActionListener () {

        public void actionPerformed (ActionEvent event) {
            if (fSimpleUpdate) {
                setBufferedDisplayUpdate ();
            }
            else {
                setSimpleDisplayUpdate ();
            }

        }

    }

    );
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="224" endline="226">
{
    param = "";
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="229" endline="231">
{
    drawingChoice.addItem (st.nextToken ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="234" endline="236">
{
    panel.add (drawingChoice);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="238" endline="240">
{
    panel.add (new JLabel (fgUntitled));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="246" endline="251">
{
    if (e.getStateChange () == ItemEvent.SELECTED) {
        loadDrawing ((String) e.getItem ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="248" endline="250">
{
    loadDrawing ((String) e.getItem ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="275" endline="277">
{
    showHelp ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="287" endline="296">
{
    if (fSimpleUpdate) {
        setBufferedDisplayUpdate ();
    }
    else {
        setSimpleDisplayUpdate ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="289" endline="291">
{
    setBufferedDisplayUpdate ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="293" endline="295">
{
    setSimpleDisplayUpdate ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="307" endline="311">
{
    JPanel palette = new JPanel ();
    palette.setLayout (new PaletteLayout (2, new Point (2, 2)));
    return palette;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="320" endline="325">
{
    Tool tool = createSelectionTool ();
    fDefaultToolButton = createToolButton (IMAGES + "SEL", "Selection Tool", tool);
    palette.add (fDefaultToolButton);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="332" endline="334">
{
    return new SelectionTool (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="340" endline="342">
{
    return new ToolButton (this, iconName, toolName, tool);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="351" endline="353">
{
    return new StandardDrawing ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="362" endline="364">
{
    return new StandardDrawingView (this, 410, 370);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="371" endline="375">
{
    ToolButton toolButton = (ToolButton) button;
    setTool (toolButton.tool (), toolButton.name ());
    setSelected (toolButton);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="382" endline="391">
{
    if (inside) {
        showStatus (button.name ());
    }
    else if (fSelectedToolButton != null) {
        showStatus (fSelectedToolButton.name ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="384" endline="386">
{
    showStatus (button.name ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="388" endline="390">
{
    showStatus (fSelectedToolButton.name ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="398" endline="400">
{
    return fDrawing;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="407" endline="409">
{
    return fTool;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="416" endline="418">
{
    return fView;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="421" endline="423">
{
    return new DrawingView [] {view ()};
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="430" endline="433">
{
    setTool (fDefaultToolButton.tool (), fDefaultToolButton.name ());
    setSelected (fDefaultToolButton);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="441" endline="443">
{
    setupAttributes ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="446" endline="447">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="450" endline="454">
{
    fDrawing = createDrawing ();
    view ().setDrawing (fDrawing);
    toolDone ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="457" endline="468">
{
    if (fTool != null) {
        fTool.deactivate ();
    }

    fTool = t;
    if (fTool != null) {
        showStatus (name);
        fTool.activate ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="459" endline="461">
{
    fTool.deactivate ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="464" endline="467">
{
    showStatus (name);
    fTool.activate ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="471" endline="481">
{
    if (fSelectedToolButton != null) {
        fSelectedToolButton.reset ();
    }

    fSelectedToolButton = button;
    if (fSelectedToolButton != null) {
        fSelectedToolButton.select ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="473" endline="475">
{
    fSelectedToolButton.reset ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="478" endline="480">
{
    fSelectedToolButton.select ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="484" endline="497">
{
    if (param == fgUntitled) {
        fDrawing.release ();
        initDrawing ();
        return;
    }

    String filename = getParameter (param);
    if (filename != null) {
        readDrawing (filename);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="486" endline="490">
{
    fDrawing.release ();
    initDrawing ();
    return;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="494" endline="496">
{
    readDrawing (filename);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="500" endline="515">
{
    toolDone ();
    String type = guessType (filename);
    if (type.equals ("storable")) {
        readFromStorableInput (filename);
    }
    else if (type.equals ("serialized")) {
        readFromObjectInput (filename);
    }
    else {
        showStatus ("Unknown file type");
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="504" endline="506">
{
    readFromStorableInput (filename);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="508" endline="510">
{
    readFromObjectInput (filename);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="512" endline="514">
{
    showStatus ("Unknown file type");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="518" endline="534">
{
    try {
        URL url = new URL (getCodeBase (), filename);
        InputStream stream = url.openStream ();
        StorableInput input = new StorableInput (stream);
        fDrawing.release ();
        fDrawing = (Drawing) input.readStorable ();
        view ().setDrawing (fDrawing);
    }
    catch (IOException e) {
        initDrawing ();
        showStatus ("Error:" + e);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="520" endline="528">
{
    URL url = new URL (getCodeBase (), filename);
    InputStream stream = url.openStream ();
    StorableInput input = new StorableInput (stream);
    fDrawing.release ();
    fDrawing = (Drawing) input.readStorable ();
    view ().setDrawing (fDrawing);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="530" endline="533">
{
    initDrawing ();
    showStatus ("Error:" + e);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="537" endline="557">
{
    try {
        URL url = new URL (getCodeBase (), filename);
        InputStream stream = url.openStream ();
        ObjectInput input = new ObjectInputStream (stream);
        fDrawing.release ();
        fDrawing = (Drawing) input.readObject ();
        view ().setDrawing (fDrawing);
    }
    catch (IOException e) {
        initDrawing ();
        showStatus ("Error: " + e);
    }
    catch (ClassNotFoundException e) {
        initDrawing ();
        showStatus ("Class not found: " + e);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="539" endline="546">
{
    URL url = new URL (getCodeBase (), filename);
    InputStream stream = url.openStream ();
    ObjectInput input = new ObjectInputStream (stream);
    fDrawing.release ();
    fDrawing = (Drawing) input.readObject ();
    view ().setDrawing (fDrawing);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="548" endline="551">
{
    initDrawing ();
    showStatus ("Error: " + e);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="553" endline="556">
{
    initDrawing ();
    showStatus ("Class not found: " + e);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="560" endline="570">
{
    if (file.endsWith (".draw")) {
        return "storable";
    }

    if (file.endsWith (".ser")) {
        return "serialized";
    }

    return "unknown";
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="562" endline="564">
{
    return "storable";
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="566" endline="568">
{
    return "serialized";
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="573" endline="602">
{
    Color frameColor = (Color) AttributeFigure.getDefaultAttribute (FigureAttributeConstant.FRAME_COLOR);
    Color fillColor = (Color) AttributeFigure.getDefaultAttribute (FigureAttributeConstant.FILL_COLOR);
    Color textColor = (Color) AttributeFigure.getDefaultAttribute (FigureAttributeConstant.TEXT_COLOR);
    Integer arrowMode = (Integer) AttributeFigure.getDefaultAttribute (FigureAttributeConstant.ARROW_MODE);
    String fontName = (String) AttributeFigure.getDefaultAttribute (FigureAttributeConstant.FONT_NAME);
    FigureEnumeration fe = view ().selection ();
    while (fe.hasNextFigure ()) {
        Figure f = fe.nextFigure ();
        frameColor = (Color) f.getAttribute (FigureAttributeConstant.FRAME_COLOR);
        fillColor = (Color) f.getAttribute (FigureAttributeConstant.FILL_COLOR);
        textColor = (Color) f.getAttribute (FigureAttributeConstant.TEXT_COLOR);
        arrowMode = (Integer) f.getAttribute (FigureAttributeConstant.ARROW_MODE);
        fontName = (String) f.getAttribute (FigureAttributeConstant.FONT_NAME);
    }

    fFrameColor.setSelectedIndex (ColorMap.colorIndex (frameColor));
    fFillColor.setSelectedIndex (ColorMap.colorIndex (fillColor));
    if (arrowMode != null) {
        fArrowChoice.setSelectedIndex (arrowMode.intValue ());
    }

    if (fontName != null) {
        fFontChoice.setSelectedItem (fontName);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="582" endline="589">
{
    Figure f = fe.nextFigure ();
    frameColor = (Color) f.getAttribute (FigureAttributeConstant.FRAME_COLOR);
    fillColor = (Color) f.getAttribute (FigureAttributeConstant.FILL_COLOR);
    textColor = (Color) f.getAttribute (FigureAttributeConstant.TEXT_COLOR);
    arrowMode = (Integer) f.getAttribute (FigureAttributeConstant.ARROW_MODE);
    fontName = (String) f.getAttribute (FigureAttributeConstant.FONT_NAME);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="595" endline="597">
{
    fArrowChoice.setSelectedIndex (arrowMode.intValue ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="599" endline="601">
{
    fFontChoice.setSelectedItem (fontName);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="605" endline="609">
{
    view ().setDisplayUpdate (new SimpleUpdateStrategy ());
    fUpdateButton.setText ("Simple Update");
    fSimpleUpdate = true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="612" endline="616">
{
    view ().setDisplayUpdate (new BufferedUpdateStrategy ());
    fUpdateButton.setText ("Buffered Update");
    fSimpleUpdate = false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="623" endline="635">
{
    try {
        String appletPath = getClass ().getName ().replace ('.', '/');
        URL url = new URL (getCodeBase (), appletPath + "Help.html");
        getAppletContext ().showDocument (url, "Help");
    }
    catch (IOException e) {
        showStatus ("Help file not found");
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="625" endline="629">
{
    String appletPath = getClass ().getName ().replace ('.', '/');
    URL url = new URL (getCodeBase (), appletPath + "Help.html");
    getAppletContext ().showDocument (url, "Help");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="631" endline="633">
{
    showStatus ("Help file not found");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="638" endline="640">
{
    myUndoManager = newUndoManager;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="643" endline="645">
{
    return myUndoManager;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="648" endline="650">
{
    return new StandardVersionControlStrategy (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="661" endline="666">
{
    String [] requiredVersions = new String [1];
    requiredVersions [0] = VersionManagement.getPackageVersion (DrawApplet.class.getPackage ());
    return requiredVersions;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="672" endline="678">
{
    if (fSleeper == null) {
        fSleeper = new SleeperThread (this);
    }

    fSleeper.start ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="674" endline="676">
{
    fSleeper = new SleeperThread (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="681" endline="686">
{
    if (fSleeper != null) {
        fSleeper.stop ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="683" endline="685">
{
    fSleeper.stop ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="696" endline="698">
{
    fApplet = applet;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="701" endline="714">
{
    try {
        for (;;) {
            fApplet.showStatus ("loading icons...");
            sleep (50);
        }

    }
    catch (InterruptedException e) {
        return;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="703" endline="709">
{
    for (;;) {
        fApplet.showStatus ("loading icons...");
        sleep (50);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="705" endline="708">
{
    fApplet.showStatus ("loading icons...");
    sleep (50);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/applet/DrawApplet.java" startline="711" endline="713">
{
    return;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="91" endline="93">
{
    this ("JHotDraw");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="99" endline="103">
{
    super (title);
    setApplicationName (title);
    winCount ++;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="112" endline="114">
{
    return new DrawApplication ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="121" endline="136">
{
    if (view () == null) {
        return;
    }

    DrawApplication window = createApplication ();
    window.open (view ());
    if (view ().drawing ().getTitle () != null) {
        window.setDrawingTitle (view ().drawing ().getTitle () + " (View)");
    }
    else {
        window.setDrawingTitle (getDefaultDrawingTitle () + " (View)");
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="123" endline="125">
{
    return;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="129" endline="131">
{
    window.setDrawingTitle (view ().drawing ().getTitle () + " (View)");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="133" endline="135">
{
    window.setDrawingTitle (getDefaultDrawingTitle () + " (View)");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="143" endline="153">
{
    DrawApplication window = createApplication ();
    if (initialDrawing == null) {
        window.open ();
    }
    else {
        window.open (window.createDrawingView (initialDrawing));
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="146" endline="148">
{
    window.open ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="150" endline="152">
{
    window.open (window.createDrawingView (initialDrawing));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="156" endline="158">
{
    newWindow (createDrawing ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="163" endline="165">
{
    open (createInitialDrawingView ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="171" endline="252">
{
    getVersionControlStrategy ().assertCompatibleVersion ();
    setUndoManager (new UndoManager ());
    setIconkit (createIconkit ());
    getContentPane ().setLayout (new BorderLayout ());
    setStatusLine (createStatusLine ());
    getContentPane ().add (getStatusLine (), BorderLayout.SOUTH);
    setTool (new NullTool (this), "");
    setView (newDrawingView);
    JToolBar tools = createToolPalette ();
    createTools (tools);
    JPanel activePanel = new JPanel ();
    activePanel.setAlignmentX (LEFT_ALIGNMENT);
    activePanel.setAlignmentY (TOP_ALIGNMENT);
    activePanel.setLayout (new BorderLayout ());
    activePanel.add (tools, BorderLayout.NORTH);
    setDesktopListener (createDesktopListener ());
    setDesktop (createDesktop ());
    activePanel.add ((Component) getDesktop (), BorderLayout.CENTER);
    getContentPane ().add (activePanel, BorderLayout.CENTER);
    JMenuBar mb = new JMenuBar ();
    createMenus (mb);
    setJMenuBar (mb);
    Dimension d = defaultSize ();
    if (d.width > mb.getPreferredSize ().width) {
        setSize (d.width, d.height);
    }
    else {
        setSize (mb.getPreferredSize ().width, d.height);
    }

    addListeners ();
    setStorageFormatManager (createStorageFormatManager ());
    Runnable r = new Runnable () {

        public void run () {
            if (newDrawingView.isInteractive ()) {
                getDesktop ().addToDesktop (newDrawingView, Desktop.PRIMARY);
            }

            toolDone ();
        }

    }

    ;
    if (java.awt.EventQueue.isDispatchThread () == false) {
        try {
            java.awt.EventQueue.invokeAndWait (r);
        }
        catch (java.lang.InterruptedException ie) {
            System.err.println (ie.getMessage ());
            exit ();
        }
        catch (java.lang.reflect.InvocationTargetException ite) {
            System.err.println (ite.getMessage ());
            exit ();
        }

    }
    else {
        r.run ();
    }

    setVisible (true);
    toolDone ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="204" endline="206">
{
    setSize (d.width, d.height);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="208" endline="210">
{
    setSize (mb.getPreferredSize ().width, d.height);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="219" endline="225">
{
    if (newDrawingView.isInteractive ()) {
        getDesktop ().addToDesktop (newDrawingView, Desktop.PRIMARY);
    }

    toolDone ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="221" endline="223">
{
    getDesktop ().addToDesktop (newDrawingView, Desktop.PRIMARY);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="229" endline="244">
{
    try {
        java.awt.EventQueue.invokeAndWait (r);
    }
    catch (java.lang.InterruptedException ie) {
        System.err.println (ie.getMessage ());
        exit ();
    }
    catch (java.lang.reflect.InvocationTargetException ite) {
        System.err.println (ite.getMessage ());
        exit ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="231" endline="233">
{
    java.awt.EventQueue.invokeAndWait (r);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="235" endline="238">
{
    System.err.println (ie.getMessage ());
    exit ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="240" endline="243">
{
    System.err.println (ite.getMessage ());
    exit ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="246" endline="248">
{
    r.run ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="258" endline="268">
{
    addWindowListener (new WindowAdapter () {

        public void windowClosing (WindowEvent event) {
            exit ();
        }

    }

    );
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="263" endline="265">
{
    exit ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="275" endline="281">
{
    addMenuIfPossible (mb, createFileMenu ());
    addMenuIfPossible (mb, createEditMenu ());
    addMenuIfPossible (mb, createAlignmentMenu ());
    addMenuIfPossible (mb, createAttributesMenu ());
    addMenuIfPossible (mb, createDebugMenu ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="284" endline="289">
{
    if (newMenu != null) {
        mb.add (newMenu);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="286" endline="288">
{
    mb.add (newMenu);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="296" endline="345">
{
    CommandMenu menu = new CommandMenu ("File");
    Command cmd = new AbstractCommand ("New", this, false) {

        public void execute () {
            promptNew ();
        }

    }

    ;
    menu.add (cmd, new MenuShortcut ('n'));
    cmd = new AbstractCommand ("Open...", this, false) {

        public void execute () {
            promptOpen ();
        }

    }

    ;
    menu.add (cmd, new MenuShortcut ('o'));
    cmd = new AbstractCommand ("Save As...", this, true) {

        public void execute () {
            promptSaveAs ();
        }

    }

    ;
    menu.add (cmd, new MenuShortcut ('s'));
    menu.addSeparator ();
    cmd = new AbstractCommand ("Print...", this, true) {

        public void execute () {
            print ();
        }

    }

    ;
    menu.add (cmd, new MenuShortcut ('p'));
    menu.addSeparator ();
    cmd = new AbstractCommand ("Exit", this, true) {

        public void execute () {
            exit ();
        }

    }

    ;
    menu.add (cmd);
    return menu;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="301" endline="303">
{
    promptNew ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="310" endline="312">
{
    promptOpen ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="319" endline="321">
{
    promptSaveAs ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="329" endline="331">
{
    print ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="339" endline="341">
{
    exit ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="352" endline="376">
{
    CommandMenu menu = new CommandMenu ("Edit");
    menu.add (new UndoableCommand (new SelectAllCommand ("Select All", this)), new MenuShortcut ('a'));
    menu.addSeparator ();
    menu.add (new UndoableCommand (new CutCommand ("Cut", this)), new MenuShortcut ('x'));
    menu.add (new CopyCommand ("Copy", this), new MenuShortcut ('c'));
    menu.add (new UndoableCommand (new PasteCommand ("Paste", this)), new MenuShortcut ('v'));
    menu.addSeparator ();
    menu.add (new UndoableCommand (new DuplicateCommand ("Duplicate", this)), new MenuShortcut ('d'));
    menu.add (new UndoableCommand (new DeleteCommand ("Delete", this)));
    menu.addSeparator ();
    menu.add (new UndoableCommand (new GroupCommand ("Group", this)));
    menu.add (new UndoableCommand (new UngroupCommand ("Ungroup", this)));
    menu.addSeparator ();
    menu.add (new UndoableCommand (new SendToBackCommand ("Send to Back", this)));
    menu.add (new UndoableCommand (new BringToFrontCommand ("Bring to Front", this)));
    menu.addSeparator ();
    menu.add (new UndoCommand ("Undo Command", this));
    menu.add (new RedoCommand ("Redo Command", this));
    return menu;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="383" endline="401">
{
    CommandMenu menu = new CommandMenu ("Align");
    menu.addCheckItem (new ToggleGridCommand ("Toggle Snap to Grid", this, new Point (4, 4)));
    menu.addSeparator ();
    menu.add (new UndoableCommand (new AlignCommand (AlignCommand.Alignment.LEFTS, this)));
    menu.add (new UndoableCommand (new AlignCommand (AlignCommand.Alignment.CENTERS, this)));
    menu.add (new UndoableCommand (new AlignCommand (AlignCommand.Alignment.RIGHTS, this)));
    menu.addSeparator ();
    menu.add (new UndoableCommand (new AlignCommand (AlignCommand.Alignment.TOPS, this)));
    menu.add (new UndoableCommand (new AlignCommand (AlignCommand.Alignment.MIDDLES, this)));
    menu.add (new UndoableCommand (new AlignCommand (AlignCommand.Alignment.BOTTOMS, this)));
    return menu;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="408" endline="429">
{
    CommandMenu menu = new CommandMenu ("Debug");
    Command cmd = new AbstractCommand ("Simple Update", this) {

        public void execute () {
            this.view ().setDisplayUpdate (new SimpleUpdateStrategy ());
        }

    }

    ;
    menu.add (cmd);
    cmd = new AbstractCommand ("Buffered Update", this) {

        public void execute () {
            this.view ().setDisplayUpdate (new BufferedUpdateStrategy ());
        }

    }

    ;
    menu.add (cmd);
    return menu;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="414" endline="416">
{
    this.view ().setDisplayUpdate (new SimpleUpdateStrategy ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="423" endline="425">
{
    this.view ().setDisplayUpdate (new BufferedUpdateStrategy ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="436" endline="447">
{
    JMenu menu = new JMenu ("Attributes");
    menu.add (createColorMenu ("Fill Color", FigureAttributeConstant.FILL_COLOR));
    menu.add (createColorMenu ("Pen Color", FigureAttributeConstant.FRAME_COLOR));
    menu.add (createArrowMenu ());
    menu.addSeparator ();
    menu.add (createFontMenu ());
    menu.add (createFontSizeMenu ());
    menu.add (createFontStyleMenu ());
    menu.add (createColorMenu ("Text Color", FigureAttributeConstant.TEXT_COLOR));
    return menu;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="453" endline="467">
{
    CommandMenu menu = new CommandMenu (title);
    for (int i = 0;
    i < ColorMap.size (); i ++) menu.add (new UndoableCommand (new ChangeAttributeCommand (ColorMap.name (i), attribute, ColorMap.color (i), this)));

    return menu;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="473" endline="485">
{
    FigureAttributeConstant arrowMode = FigureAttributeConstant.ARROW_MODE;
    CommandMenu menu = new CommandMenu ("Arrow");
    menu.add (new UndoableCommand (new ChangeAttributeCommand ("none", arrowMode, new Integer (PolyLineFigure.ARROW_TIP_NONE), this)));
    menu.add (new UndoableCommand (new ChangeAttributeCommand ("at Start", arrowMode, new Integer (PolyLineFigure.ARROW_TIP_START), this)));
    menu.add (new UndoableCommand (new ChangeAttributeCommand ("at End", arrowMode, new Integer (PolyLineFigure.ARROW_TIP_END), this)));
    menu.add (new UndoableCommand (new ChangeAttributeCommand ("at Both", arrowMode, new Integer (PolyLineFigure.ARROW_TIP_BOTH), this)));
    return menu;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="492" endline="501">
{
    CommandMenu menu = new CommandMenu ("Font");
    String fonts [] = Toolkit.getDefaultToolkit ().getFontList ();
    for (int i = 0;
    i < fonts.length; i ++) {
        menu.add (new UndoableCommand (new ChangeAttributeCommand (fonts [i], FigureAttributeConstant.FONT_NAME, fonts [i], this)));
    }

    return menu;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="496" endline="499">
{
    menu.add (new UndoableCommand (new ChangeAttributeCommand (fonts [i], FigureAttributeConstant.FONT_NAME, fonts [i], this)));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="507" endline="517">
{
    FigureAttributeConstant fontStyle = FigureAttributeConstant.FONT_STYLE;
    CommandMenu menu = new CommandMenu ("Font Style");
    menu.add (new UndoableCommand (new ChangeAttributeCommand ("Plain", fontStyle, new Integer (Font.PLAIN), this)));
    menu.add (new UndoableCommand (new ChangeAttributeCommand ("Italic", fontStyle, new Integer (Font.ITALIC), this)));
    menu.add (new UndoableCommand (new ChangeAttributeCommand ("Bold", fontStyle, new Integer (Font.BOLD), this)));
    return menu;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="523" endline="540">
{
    CommandMenu menu = new CommandMenu ("Font Size");
    int sizes [] = {9, 10, 12, 14, 18, 24, 36, 48, 72};
    for (int i = 0;
    i < sizes.length; i ++) {
        menu.add (new UndoableCommand (new ChangeAttributeCommand (Integer.toString (sizes [i]), FigureAttributeConstant.FONT_SIZE, new Integer (sizes [i]), this)));
    }

    return menu;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="527" endline="538">
{
    menu.add (new UndoableCommand (new ChangeAttributeCommand (Integer.toString (sizes [i]), FigureAttributeConstant.FONT_SIZE, new Integer (sizes [i]), this)));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="546" endline="564">
{
    CommandMenu menu = new CommandMenu ("Look'n'Feel");
    UIManager.LookAndFeelInfo [] lafs = UIManager.getInstalledLookAndFeels ();
    for (int i = 0;
    i < lafs.length; i ++) {
        final String lnfClassName = lafs [i].getClassName ();
        Command cmd = new AbstractCommand (lafs [i].getName (), this) {

            public void execute () {
                newLookAndFeel (lnfClassName);
            }

        }

        ;
        menu.add (cmd);
    }

    return menu;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="552" endline="562">
{
    final String lnfClassName = lafs [i].getClassName ();
    Command cmd = new AbstractCommand (lafs [i].getName (), this) {

        public void execute () {
            newLookAndFeel (lnfClassName);
        }

    }

    ;
    menu.add (cmd);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="557" endline="559">
{
    newLookAndFeel (lnfClassName);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="570" endline="576">
{
    JToolBar palette = new JToolBar ();
    palette.setBackground (Color.lightGray);
    return palette;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="585" endline="588">
{
    setDefaultTool (createDefaultTool ());
    palette.add (fDefaultToolButton);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="595" endline="597">
{
    return new SelectionTool (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="600" endline="602">
{
    return createSelectionTool ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="605" endline="614">
{
    if (newDefaultTool != null) {
        fDefaultToolButton = createToolButton (IMAGES + "SEL", "Selection Tool", newDefaultTool);
    }
    else {
        fDefaultToolButton = null;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="607" endline="609">
{
    fDefaultToolButton = createToolButton (IMAGES + "SEL", "Selection Tool", newDefaultTool);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="611" endline="613">
{
    fDefaultToolButton = null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="617" endline="626">
{
    if (fDefaultToolButton != null) {
        return fDefaultToolButton.tool ();
    }
    else {
        return null;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="619" endline="621">
{
    return fDefaultToolButton.tool ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="623" endline="625">
{
    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="632" endline="634">
{
    return new ToolButton (this, iconName, toolName, tool);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="643" endline="647">
{
    DrawingView createdDrawingView = createDrawingView (createDrawing ());
    createdDrawingView.drawing ().setTitle (getDefaultDrawingTitle ());
    return createdDrawingView;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="650" endline="657">
{
    Dimension d = getDrawingViewSize ();
    DrawingView newDrawingView = new StandardDrawingView (this, d.width, d.height);
    newDrawingView.setDrawing (newDrawing);
    return newDrawingView;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="670" endline="672">
{
    return createDrawingView ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="678" endline="680">
{
    return new Dimension (800, 800);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="689" endline="691">
{
    return new StandardDrawing ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="694" endline="697">
{
    return new JPanelDesktop (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="700" endline="703">
{
    newDesktop.addDesktopListener (getDesktopListener ());
    fDesktop = newDesktop;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="710" endline="712">
{
    return fDesktop;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="720" endline="727">
{
    StorageFormatManager storageFormatManager = new StorageFormatManager ();
    storageFormatManager.setDefaultStorageFormat (new StandardStorageFormat ());
    storageFormatManager.addStorageFormat (storageFormatManager.getDefaultStorageFormat ());
    storageFormatManager.addStorageFormat (new SerializationStorageFormat ());
    return storageFormatManager;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="734" endline="736">
{
    fStorageFormatManager = newStorageFormatManager;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="743" endline="745">
{
    return fStorageFormatManager;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="751" endline="753">
{
    return new Dimension (600, 450);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="759" endline="764">
{
    JTextField field = new JTextField ("No Tool", 40);
    field.setBackground (Color.white);
    field.setEditable (false);
    return field;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="767" endline="769">
{
    fStatusLine = newStatusLine;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="772" endline="774">
{
    return fStatusLine;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="781" endline="785">
{
    ToolButton toolButton = (ToolButton) paletteButton;
    setTool (toolButton.tool (), toolButton.name ());
    setSelected (toolButton);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="792" endline="802">
{
    ToolButton toolButton = (ToolButton) paletteButton;
    if (inside) {
        showStatus (toolButton.name ());
    }
    else if (fSelectedToolButton != null) {
        showStatus (fSelectedToolButton.name ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="795" endline="797">
{
    showStatus (toolButton.name ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="799" endline="801">
{
    showStatus (fSelectedToolButton.name ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="809" endline="811">
{
    return fTool;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="819" endline="821">
{
    return fView;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="824" endline="828">
{
    DrawingView oldView = fView;
    fView = newView;
    fireViewSelectionChangedEvent (oldView, view ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="831" endline="833">
{
    return new DrawingView [] {view ()};
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="840" endline="847">
{
    System.out.println ("ToolDone");
    if (fDefaultToolButton != null) {
        setTool (fDefaultToolButton.tool (), fDefaultToolButton.name ());
        setSelected (fDefaultToolButton);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="843" endline="846">
{
    setTool (fDefaultToolButton.tool (), fDefaultToolButton.name ());
    setSelected (fDefaultToolButton);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="859" endline="861">
{
    checkCommandMenus ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="864" endline="875">
{
    JMenuBar mb = getJMenuBar ();
    for (int x = 0;
    x < mb.getMenuCount (); x ++) {
        JMenu jm = mb.getMenu (x);
        if (CommandMenu.class.isInstance (jm)) {
            checkCommandMenu ((CommandMenu) jm);
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="868" endline="874">
{
    JMenu jm = mb.getMenu (x);
    if (CommandMenu.class.isInstance (jm)) {
        checkCommandMenu ((CommandMenu) jm);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="871" endline="873">
{
    checkCommandMenu ((CommandMenu) jm);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="878" endline="888">
{
    cm.checkEnabled ();
    for (int y = 0;
    y < cm.getItemCount (); y ++) {
        JMenuItem jmi = cm.getItem (y);
        if (CommandMenu.class.isInstance (jmi)) {
            checkCommandMenu ((CommandMenu) jmi);
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="881" endline="887">
{
    JMenuItem jmi = cm.getItem (y);
    if (CommandMenu.class.isInstance (jmi)) {
        checkCommandMenu ((CommandMenu) jmi);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="884" endline="886">
{
    checkCommandMenu ((CommandMenu) jmi);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="895" endline="897">
{
    listenerList.add (ViewChangeListener.class, vsl);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="903" endline="905">
{
    listenerList.remove (ViewChangeListener.class, vsl);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="914" endline="925">
{
    final Object [] listeners = listenerList.getListenerList ();
    ViewChangeListener vsl = null;
    for (int i = listeners.length - 2;
    i >= 0; i -= 2) {
        if (listeners [i] == ViewChangeListener.class) {
            vsl = (ViewChangeListener) listeners [i + 1];
            vsl.viewSelectionChanged (oldView, newView);
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="918" endline="924">
{
    if (listeners [i] == ViewChangeListener.class) {
        vsl = (ViewChangeListener) listeners [i + 1];
        vsl.viewSelectionChanged (oldView, newView);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="920" endline="923">
{
    vsl = (ViewChangeListener) listeners [i + 1];
    vsl.viewSelectionChanged (oldView, newView);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="928" endline="939">
{
    final Object [] listeners = listenerList.getListenerList ();
    ViewChangeListener vsl = null;
    for (int i = listeners.length - 2;
    i >= 0; i -= 2) {
        if (listeners [i] == ViewChangeListener.class) {
            vsl = (ViewChangeListener) listeners [i + 1];
            vsl.viewCreated (view);
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="932" endline="938">
{
    if (listeners [i] == ViewChangeListener.class) {
        vsl = (ViewChangeListener) listeners [i + 1];
        vsl.viewCreated (view);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="934" endline="937">
{
    vsl = (ViewChangeListener) listeners [i + 1];
    vsl.viewCreated (view);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="942" endline="953">
{
    final Object [] listeners = listenerList.getListenerList ();
    ViewChangeListener vsl = null;
    for (int i = listeners.length - 2;
    i >= 0; i -= 2) {
        if (listeners [i] == ViewChangeListener.class) {
            vsl = (ViewChangeListener) listeners [i + 1];
            vsl.viewDestroying (view);
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="946" endline="952">
{
    if (listeners [i] == ViewChangeListener.class) {
        vsl = (ViewChangeListener) listeners [i + 1];
        vsl.viewDestroying (view);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="948" endline="951">
{
    vsl = (ViewChangeListener) listeners [i + 1];
    vsl.viewDestroying (view);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="960" endline="962">
{
    getStatusLine ().setText (string);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="973" endline="987">
{
    if ((tool () != null) && (tool ().isActive ())) {
        tool ().deactivate ();
    }

    fTool = t;
    if (tool () != null) {
        showStatus (name);
        tool ().activate ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="978" endline="980">
{
    tool ().deactivate ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="983" endline="986">
{
    showStatus (name);
    tool ().activate ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="990" endline="1000">
{
    if (fSelectedToolButton != null) {
        fSelectedToolButton.reset ();
    }

    fSelectedToolButton = button;
    if (fSelectedToolButton != null) {
        fSelectedToolButton.select ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="992" endline="994">
{
    fSelectedToolButton.reset ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="997" endline="999">
{
    fSelectedToolButton.select ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="1006" endline="1015">
{
    destroy ();
    setVisible (false);
    dispose ();
    winCount --;
    if (winCount == 0) {
        System.exit (0);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="1012" endline="1014">
{
    System.exit (0);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="1022" endline="1023">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="1029" endline="1033">
{
    newWindow (createDrawing ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="1039" endline="1055">
{
    toolDone ();
    JFileChooser openDialog = createOpenFileChooser ();
    getStorageFormatManager ().registerFileFilters (openDialog);
    if (openDialog.showOpenDialog (this) == JFileChooser.APPROVE_OPTION) {
        StorageFormat foundFormat = getStorageFormatManager ().findStorageFormat (openDialog.getFileFilter ());
        if (foundFormat != null) {
            loadDrawing (foundFormat, openDialog.getSelectedFile ().getAbsolutePath ());
        }
        else {
            showStatus ("Not a valid file format: " + openDialog.getFileFilter ().getDescription ());
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="1044" endline="1054">
{
    StorageFormat foundFormat = getStorageFormatManager ().findStorageFormat (openDialog.getFileFilter ());
    if (foundFormat != null) {
        loadDrawing (foundFormat, openDialog.getSelectedFile ().getAbsolutePath ());
    }
    else {
        showStatus ("Not a valid file format: " + openDialog.getFileFilter ().getDescription ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="1047" endline="1049">
{
    loadDrawing (foundFormat, openDialog.getSelectedFile ().getAbsolutePath ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="1051" endline="1053">
{
    showStatus ("Not a valid file format: " + openDialog.getFileFilter ().getDescription ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="1061" endline="1081">
{
    if (view () != null) {
        toolDone ();
        JFileChooser saveDialog = createSaveFileChooser ();
        getStorageFormatManager ().registerFileFilters (saveDialog);
        if (saveDialog.showSaveDialog (this) == JFileChooser.APPROVE_OPTION) {
            StorageFormat foundFormat = getStorageFormatManager ().findStorageFormat (saveDialog.getFileFilter ());
            if (foundFormat != null) {
                saveDrawing (foundFormat, saveDialog.getSelectedFile ().getAbsolutePath ());
            }
            else {
                showStatus ("Not a valid file format: " + saveDialog.getFileFilter ().getDescription ());
            }

        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="1063" endline="1080">
{
    toolDone ();
    JFileChooser saveDialog = createSaveFileChooser ();
    getStorageFormatManager ().registerFileFilters (saveDialog);
    if (saveDialog.showSaveDialog (this) == JFileChooser.APPROVE_OPTION) {
        StorageFormat foundFormat = getStorageFormatManager ().findStorageFormat (saveDialog.getFileFilter ());
        if (foundFormat != null) {
            saveDrawing (foundFormat, saveDialog.getSelectedFile ().getAbsolutePath ());
        }
        else {
            showStatus ("Not a valid file format: " + saveDialog.getFileFilter ().getDescription ());
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="1069" endline="1079">
{
    StorageFormat foundFormat = getStorageFormatManager ().findStorageFormat (saveDialog.getFileFilter ());
    if (foundFormat != null) {
        saveDrawing (foundFormat, saveDialog.getSelectedFile ().getAbsolutePath ());
    }
    else {
        showStatus ("Not a valid file format: " + saveDialog.getFileFilter ().getDescription ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="1072" endline="1074">
{
    saveDrawing (foundFormat, saveDialog.getSelectedFile ().getAbsolutePath ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="1076" endline="1078">
{
    showStatus ("Not a valid file format: " + saveDialog.getFileFilter ().getDescription ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="1088" endline="1092">
{
    JFileChooser openDialog = new JFileChooser ();
    openDialog.setDialogTitle ("Open File...");
    return openDialog;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="1099" endline="1103">
{
    JFileChooser saveDialog = new JFileChooser ();
    saveDialog.setDialogTitle ("Save File...");
    return saveDialog;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="1109" endline="1125">
{
    tool ().deactivate ();
    PrintJob printJob = getToolkit ().getPrintJob (this, "Print Drawing", null);
    if (printJob != null) {
        Graphics pg = printJob.getGraphics ();
        if (pg != null) {
            ((StandardDrawingView) view ()).printAll (pg);
            pg.dispose ();
        }

        printJob.end ();
    }

    tool ().activate ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="1114" endline="1123">
{
    Graphics pg = printJob.getGraphics ();
    if (pg != null) {
        ((StandardDrawingView) view ()).printAll (pg);
        pg.dispose ();
    }

    printJob.end ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="1118" endline="1121">
{
    ((StandardDrawingView) view ()).printAll (pg);
    pg.dispose ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="1131" endline="1147">
{
    if (view () == null) {
        return;
    }

    try {
        String name = storeFormat.store (file, view ().drawing ());
        view ().drawing ().setTitle (name);
        setDrawingTitle (name);
    }
    catch (IOException e) {
        showStatus (e.toString ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="1134" endline="1136">
{
    return;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="1138" endline="1142">
{
    String name = storeFormat.store (file, view ().drawing ());
    view ().drawing ().setTitle (name);
    setDrawingTitle (name);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="1144" endline="1146">
{
    showStatus (e.toString ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="1153" endline="1171">
{
    try {
        Drawing restoredDrawing = restoreFormat.restore (file);
        if (restoredDrawing != null) {
            restoredDrawing.setTitle (file);
            newWindow (restoredDrawing);
        }
        else {
            showStatus ("Unknown file type: could not open file '" + file + "'");
        }

    }
    catch (IOException e) {
        showStatus ("Error: " + e);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="1155" endline="1166">
{
    Drawing restoredDrawing = restoreFormat.restore (file);
    if (restoredDrawing != null) {
        restoredDrawing.setTitle (file);
        newWindow (restoredDrawing);
    }
    else {
        showStatus ("Unknown file type: could not open file '" + file + "'");
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="1158" endline="1161">
{
    restoredDrawing.setTitle (file);
    newWindow (restoredDrawing);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="1163" endline="1165">
{
    showStatus ("Unknown file type: could not open file '" + file + "'");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="1168" endline="1170">
{
    showStatus ("Error: " + e);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="1177" endline="1187">
{
    try {
        UIManager.setLookAndFeel (landf);
        SwingUtilities.updateComponentTreeUI (this);
    }
    catch (Exception e) {
        System.err.println (e);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="1179" endline="1182">
{
    UIManager.setLookAndFeel (landf);
    SwingUtilities.updateComponentTreeUI (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="1184" endline="1186">
{
    System.err.println (e);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="1193" endline="1202">
{
    if (getDefaultDrawingTitle ().equals (drawingTitle)) {
        setTitle (getApplicationName ());
    }
    else {
        setTitle (getApplicationName () + " - " + drawingTitle);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="1195" endline="1197">
{
    setTitle (getApplicationName ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="1199" endline="1201">
{
    setTitle (getApplicationName () + " - " + drawingTitle);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="1208" endline="1210">
{
    return view ().drawing ().getTitle ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="1216" endline="1218">
{
    fApplicationName = applicationName;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="1224" endline="1226">
{
    return fApplicationName;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="1229" endline="1231">
{
    myUndoManager = newUndoManager;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="1234" endline="1236">
{
    return myUndoManager;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="1239" endline="1241">
{
    return new StandardVersionControlStrategy (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="1252" endline="1257">
{
    String [] requiredVersions = new String [1];
    requiredVersions [0] = VersionManagement.getPackageVersion (DrawApplication.class.getPackage ());
    return requiredVersions;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="1260" endline="1262">
{
    return fgUntitled;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="1265" endline="1267">
{
    return fDesktopListener;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="1270" endline="1272">
{
    fDesktopListener = desktopPaneListener;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="1275" endline="1304">
{
    return new DesktopListener () {

        public void drawingViewAdded (DesktopEvent dpe) {
            DrawingView dv = dpe.getDrawingView ();
            fireViewCreatedEvent (dv);
        }

        public void drawingViewRemoved (DesktopEvent dpe) {
            DrawingView dv = dpe.getDrawingView ();
            getUndoManager ().clearUndos (dv);
            getUndoManager ().clearRedos (dv);
            fireViewDestroyingEvent (dv);
            checkCommandMenus ();
        }

        public void drawingViewSelected (DesktopEvent dpe) {
            DrawingView dv = dpe.getDrawingView ();
            if (dv != null) {
                if (dv.drawing () != null) dv.unfreezeView ();

            }

            setView (dv);
        }

    }

    ;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="1279" endline="1282">
{
    DrawingView dv = dpe.getDrawingView ();
    fireViewCreatedEvent (dv);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="1284" endline="1291">
{
    DrawingView dv = dpe.getDrawingView ();
    getUndoManager ().clearUndos (dv);
    getUndoManager ().clearRedos (dv);
    fireViewDestroyingEvent (dv);
    checkCommandMenus ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="1293" endline="1302">
{
    DrawingView dv = dpe.getDrawingView ();
    if (dv != null) {
        if (dv.drawing () != null) dv.unfreezeView ();

    }

    setView (dv);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="1297" endline="1300">
{
    if (dv.drawing () != null) dv.unfreezeView ();

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="1307" endline="1309">
{
    return new Iconkit (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="1312" endline="1314">
{
    fIconkit = newIconkit;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/application/DrawApplication.java" startline="1317" endline="1319">
{
    return fIconkit;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/AutoscrollHelper.java" startline="27" endline="29">
{
    autoscrollMargin = margin;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/AutoscrollHelper.java" startline="31" endline="33">
{
    autoscrollMargin = margin;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/AutoscrollHelper.java" startline="35" endline="37">
{
    return autoscrollMargin;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/AutoscrollHelper.java" startline="62" endline="80">
{
    int top = 0, left = 0, bottom = 0, right = 0;
    Dimension size = getSize ();
    Rectangle rect = getVisibleRect ();
    int bottomEdge = rect.y + rect.height;
    int rightEdge = rect.x + rect.width;
    if (location.y - rect.y <= autoscrollMargin && rect.y > 0) top = autoscrollMargin;

    if (location.x - rect.x <= autoscrollMargin && rect.x > 0) left = autoscrollMargin;

    if (bottomEdge - location.y <= autoscrollMargin && bottomEdge < size.height) bottom = autoscrollMargin;

    if (rightEdge - location.x <= autoscrollMargin && rightEdge < size.width) right = autoscrollMargin;

    rect.x += right - left;
    rect.y += bottom - top;
    scrollRectToVisible (rect);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/AutoscrollHelper.java" startline="82" endline="90">
{
    Dimension size = getSize ();
    Rectangle rect = getVisibleRect ();
    autoscrollInsets.top = rect.y + autoscrollMargin;
    autoscrollInsets.left = rect.x + autoscrollMargin;
    autoscrollInsets.bottom = size.height - (rect.y + rect.height) + autoscrollMargin;
    autoscrollInsets.right = size.width - (rect.x + rect.width) + autoscrollMargin;
    return autoscrollInsets;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CTXCommandMenu.java" startline="37" endline="39">
{
    super (name);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CTXCommandMenu.java" startline="46" endline="48">
{
    addMenuItem (new CommandMenuItem (command));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CTXCommandMenu.java" startline="55" endline="57">
{
    addMenuItem (new CommandMenuItem (command, shortcut.getKey ()));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CTXCommandMenu.java" startline="64" endline="66">
{
    addMenuItem (new CommandCheckBoxMenuItem (command));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CTXCommandMenu.java" startline="74" endline="76">
{
    addMenuItem (item);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CTXCommandMenu.java" startline="84" endline="86">
{
    addMenuItem (checkItem);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CTXCommandMenu.java" startline="94" endline="98">
{
    m.addActionListener (this);
    add (m);
    ((CommandHolder) m).getCommand ().addCommandListener (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CTXCommandMenu.java" startline="106" endline="108">
{
    throw new JHotDrawRuntimeException ("not implemented");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CTXCommandMenu.java" startline="116" endline="118">
{
    throw new JHotDrawRuntimeException ("not implemented");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CTXCommandMenu.java" startline="127" endline="137">
{
    for (int i = 0;
    i < getItemCount (); i ++) {
        JMenuItem item = getItem (i);
        if (name.equals (item.getLabel ())) {
            item.setEnabled (state);
            return;
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CTXCommandMenu.java" startline="129" endline="136">
{
    JMenuItem item = getItem (i);
    if (name.equals (item.getLabel ())) {
        item.setEnabled (state);
        return;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CTXCommandMenu.java" startline="132" endline="135">
{
    item.setEnabled (state);
    return;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CTXCommandMenu.java" startline="141" endline="164">
{
    int j = 0;
    for (int i = 0;
    i < getMenuComponentCount (); i ++) {
        JMenuItem currentItem = getItem (i);
        if (currentItem instanceof CommandMenu) {
            ((CommandMenu) currentItem).checkEnabled ();
        }
        else if (currentItem instanceof CTXCommandMenu) {
            ((CTXCommandMenu) currentItem).checkEnabled ();
        }
        else if (currentItem instanceof CommandHolder) {
            currentItem.setEnabled (((CommandHolder) currentItem).getCommand ().isExecutable ());
        }
        else if (currentItem instanceof Command) {
            currentItem.setEnabled (((Command) currentItem).isExecutable ());
        }

        j ++;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CTXCommandMenu.java" startline="144" endline="163">
{
    JMenuItem currentItem = getItem (i);
    if (currentItem instanceof CommandMenu) {
        ((CommandMenu) currentItem).checkEnabled ();
    }
    else if (currentItem instanceof CTXCommandMenu) {
        ((CTXCommandMenu) currentItem).checkEnabled ();
    }
    else if (currentItem instanceof CommandHolder) {
        currentItem.setEnabled (((CommandHolder) currentItem).getCommand ().isExecutable ());
    }
    else if (currentItem instanceof Command) {
        currentItem.setEnabled (((Command) currentItem).isExecutable ());
    }

    j ++;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CTXCommandMenu.java" startline="147" endline="149">
{
    ((CommandMenu) currentItem).checkEnabled ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CTXCommandMenu.java" startline="151" endline="153">
{
    ((CTXCommandMenu) currentItem).checkEnabled ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CTXCommandMenu.java" startline="155" endline="157">
{
    currentItem.setEnabled (((CommandHolder) currentItem).getCommand ().isExecutable ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CTXCommandMenu.java" startline="159" endline="161">
{
    currentItem.setEnabled (((Command) currentItem).isExecutable ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CTXCommandMenu.java" startline="172" endline="192">
{
    int j = 0;
    Object source = e.getSource ();
    for (int i = 0;
    i < getItemCount (); i ++) {
        if (getMenuComponent (i) instanceof JSeparator) {
            continue;
        }

        JMenuItem item = getItem (i);
        if (source == item) {
            Command cmd = ((CommandHolder) item).getCommand ();
            cmd.execute ();
            break;
        }

        j ++;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CTXCommandMenu.java" startline="176" endline="191">
{
    if (getMenuComponent (i) instanceof JSeparator) {
        continue;
    }

    JMenuItem item = getItem (i);
    if (source == item) {
        Command cmd = ((CommandHolder) item).getCommand ();
        cmd.execute ();
        break;
    }

    j ++;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CTXCommandMenu.java" startline="180" endline="182">
{
    continue;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CTXCommandMenu.java" startline="185" endline="189">
{
    Command cmd = ((CommandHolder) item).getCommand ();
    cmd.execute ();
    break;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CTXCommandMenu.java" startline="200" endline="202">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CTXCommandMenu.java" startline="210" endline="212">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CTXCommandMenu.java" startline="220" endline="222">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CTXWindowMenu.java" startline="48" endline="144">
{
    super (newText);
    this.desktop = newDesktop;
    cascadeCommand = new CommandMenuItem (new AbstractCommand ("Cascade", newEditor) {

        public void execute () {
            CTXWindowMenu.this.desktop.cascadeFrames ();
        }

        public boolean isExecutable () {
            return super.isExecutable () && (CTXWindowMenu.this.desktop.getAllFrames ().length > 0);
        }

    }

    );
    tileHCommand = new CommandMenuItem (new AbstractCommand ("Tile Horizontally", newEditor) {

        public void execute () {
            CTXWindowMenu.this.desktop.tileFramesHorizontally ();
        }

        public boolean isExecutable () {
            return super.isExecutable () && (CTXWindowMenu.this.desktop.getAllFrames ().length > 0);
        }

    }

    );
    tileVCommand = new CommandMenuItem (new AbstractCommand ("Tile Vertically", newEditor) {

        public void execute () {
            CTXWindowMenu.this.desktop.tileFramesVertically ();
        }

        public boolean isExecutable () {
            return super.isExecutable () && (CTXWindowMenu.this.desktop.getAllFrames ().length > 0);
        }

    }

    );
    arrangeHCommand = new CommandMenuItem (new AbstractCommand ("Arrange Horizontally", newEditor) {

        public void execute () {
            CTXWindowMenu.this.desktop.arrangeFramesHorizontally ();
        }

        public boolean isExecutable () {
            return super.isExecutable () && (CTXWindowMenu.this.desktop.getAllFrames ().length > 0);
        }

    }

    );
    arrangeVCommand = new CommandMenuItem (new AbstractCommand ("Arrange Vertically", newEditor) {

        public void execute () {
            CTXWindowMenu.this.desktop.arrangeFramesVertically ();
        }

        public boolean isExecutable () {
            return super.isExecutable () && (CTXWindowMenu.this.desktop.getAllFrames ().length > 0);
        }

    }

    );
    addMenuListener (new MenuListener () {

        public void menuCanceled (MenuEvent e) {
        }

        public void menuDeselected (MenuEvent e) {
            removeWindowsList ();
        }

        public void menuSelected (MenuEvent e) {
            buildChildMenus ();
        }

    }

    );
    add (cascadeCommand);
    add (tileHCommand);
    add (tileVCommand);
    add (arrangeHCommand);
    add (arrangeVCommand);
    staticItems = 5;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CTXWindowMenu.java" startline="56" endline="58">
{
    CTXWindowMenu.this.desktop.cascadeFrames ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CTXWindowMenu.java" startline="61" endline="63">
{
    return super.isExecutable () && (CTXWindowMenu.this.desktop.getAllFrames ().length > 0);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CTXWindowMenu.java" startline="70" endline="72">
{
    CTXWindowMenu.this.desktop.tileFramesHorizontally ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CTXWindowMenu.java" startline="75" endline="77">
{
    return super.isExecutable () && (CTXWindowMenu.this.desktop.getAllFrames ().length > 0);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CTXWindowMenu.java" startline="84" endline="86">
{
    CTXWindowMenu.this.desktop.tileFramesVertically ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CTXWindowMenu.java" startline="89" endline="91">
{
    return super.isExecutable () && (CTXWindowMenu.this.desktop.getAllFrames ().length > 0);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CTXWindowMenu.java" startline="98" endline="100">
{
    CTXWindowMenu.this.desktop.arrangeFramesHorizontally ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CTXWindowMenu.java" startline="103" endline="105">
{
    return super.isExecutable () && (CTXWindowMenu.this.desktop.getAllFrames ().length > 0);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CTXWindowMenu.java" startline="112" endline="114">
{
    CTXWindowMenu.this.desktop.arrangeFramesVertically ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CTXWindowMenu.java" startline="117" endline="119">
{
    return super.isExecutable () && (CTXWindowMenu.this.desktop.getAllFrames ().length > 0);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CTXWindowMenu.java" startline="125" endline="125">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CTXWindowMenu.java" startline="128" endline="130">
{
    removeWindowsList ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CTXWindowMenu.java" startline="133" endline="135">
{
    buildChildMenus ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CTXWindowMenu.java" startline="148" endline="154">
{
    while (this.getItemCount () > staticItems) {
        remove (staticItems);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CTXWindowMenu.java" startline="151" endline="153">
{
    remove (staticItems);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CTXWindowMenu.java" startline="161" endline="202">
{
    JInternalFrame [] array = desktop.getAllFrames ();
    cascadeCommand.setEnabled (array.length > 0);
    tileHCommand.setEnabled (array.length > 0);
    tileVCommand.setEnabled (array.length > 0);
    arrangeHCommand.setEnabled (array.length > 0);
    arrangeVCommand.setEnabled (array.length > 0);
    if (array.length == 0) {
        return;
    }

    addSeparator ();
    for (int i = 0;
    i < array.length; i ++) {
        ChildMenuItem menu = new ChildMenuItem (array [i]);
        menu.setState (i == 0);
        menu.addActionListener (new ActionListener () {

            public void actionPerformed (ActionEvent ae) {
                JInternalFrame frame = ((ChildMenuItem) ae.getSource ()).getFrame ();
                frame.moveToFront ();
                try {
                    frame.setSelected (true);
                }
                catch (PropertyVetoException e) {
                    e.printStackTrace ();
                }

            }

        }

        );
        menu.setIcon (array [i].getFrameIcon ());
        add (menu);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CTXWindowMenu.java" startline="172" endline="174">
{
    return;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CTXWindowMenu.java" startline="179" endline="201">
{
    ChildMenuItem menu = new ChildMenuItem (array [i]);
    menu.setState (i == 0);
    menu.addActionListener (new ActionListener () {

        public void actionPerformed (ActionEvent ae) {
            JInternalFrame frame = ((ChildMenuItem) ae.getSource ()).getFrame ();
            frame.moveToFront ();
            try {
                frame.setSelected (true);
            }
            catch (PropertyVetoException e) {
                e.printStackTrace ();
            }

        }

    }

    );
    menu.setIcon (array [i].getFrameIcon ());
    add (menu);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CTXWindowMenu.java" startline="186" endline="197">
{
    JInternalFrame frame = ((ChildMenuItem) ae.getSource ()).getFrame ();
    frame.moveToFront ();
    try {
        frame.setSelected (true);
    }
    catch (PropertyVetoException e) {
        e.printStackTrace ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CTXWindowMenu.java" startline="190" endline="192">
{
    frame.setSelected (true);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CTXWindowMenu.java" startline="194" endline="196">
{
    e.printStackTrace ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CTXWindowMenu.java" startline="218" endline="221">
{
    super (frame.getTitle ());
    this.frame = frame;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CTXWindowMenu.java" startline="229" endline="231">
{
    return frame;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/ChopDiamondConnector.java" startline="38" endline="40">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/ChopDiamondConnector.java" startline="43" endline="45">
{
    super (owner);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/ChopDiamondConnector.java" startline="51" endline="104">
{
    Rectangle r = target.displayBox ();
    Point c1 = new Point (r.x + r.width / 2, r.y + (r.height / 2));
    Point p2 = new Point (r.x + r.width / 2, r.y + r.height);
    Point p4 = new Point (r.x + r.width / 2, r.y);
    if (r.contains (from)) {
        if (from.y > r.y && from.y < (r.y + r.height / 2)) {
            return p2;
        }
        else {
            return p4;
        }

    }

    double ang = Geom.pointToAngle (r, from);
    Point p1 = new Point (r.x + r.width, r.y + (r.height / 2));
    Point p3 = new Point (r.x, r.y + (r.height / 2));
    Point rp = null;
    if (ang > 0 && ang < 1.57) {
        rp = Geom.intersect (p1.x, p1.y, p2.x, p2.y, c1.x, c1.y, from.x, from.y);
    }
    else if (ang > 1.575 && ang < 3.14) {
        rp = Geom.intersect (p2.x, p2.y, p3.x, p3.y, c1.x, c1.y, from.x, from.y);
    }
    else if (ang > - 3.14 && ang < - 1.575) {
        rp = Geom.intersect (p3.x, p3.y, p4.x, p4.y, c1.x, c1.y, from.x, from.y);
    }
    else if (ang > - 1.57 && ang < 0) {
        rp = Geom.intersect (p4.x, p4.y, p1.x, p1.y, c1.x, c1.y, from.x, from.y);
    }

    if (rp == null) {
        rp = Geom.angleToPoint (r, ang);
    }

    return rp;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/ChopDiamondConnector.java" startline="60" endline="69">
{
    if (from.y > r.y && from.y < (r.y + r.height / 2)) {
        return p2;
    }
    else {
        return p4;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/ChopDiamondConnector.java" startline="62" endline="64">
{
    return p2;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/ChopDiamondConnector.java" startline="66" endline="68">
{
    return p4;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/ChopDiamondConnector.java" startline="81" endline="83">
{
    rp = Geom.intersect (p1.x, p1.y, p2.x, p2.y, c1.x, c1.y, from.x, from.y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/ChopDiamondConnector.java" startline="85" endline="87">
{
    rp = Geom.intersect (p2.x, p2.y, p3.x, p3.y, c1.x, c1.y, from.x, from.y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/ChopDiamondConnector.java" startline="89" endline="91">
{
    rp = Geom.intersect (p3.x, p3.y, p4.x, p4.y, c1.x, c1.y, from.x, from.y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/ChopDiamondConnector.java" startline="93" endline="95">
{
    rp = Geom.intersect (p4.x, p4.y, p1.x, p1.y, c1.x, c1.y, from.x, from.y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/ChopDiamondConnector.java" startline="99" endline="101">
{
    rp = Geom.angleToPoint (r, ang);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/ChopPolygonConnector.java" startline="34" endline="35">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/ChopPolygonConnector.java" startline="38" endline="40">
{
    super (owner);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/ChopPolygonConnector.java" startline="43" endline="45">
{
    return ((PolygonFigure) target).chop (from);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/ClippingUpdateStrategy.java" startline="21" endline="23">
{
    super ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/ClippingUpdateStrategy.java" startline="29" endline="74">
{
    Rectangle viewClipRectangle = g.getClipBounds ();
    if (viewClipRectangle == null) {
        view.drawAll (g);
        return;
    }

    FigureEnumeration fe = view.drawing ().figures ();
    Vector v = new Vector (1000);
    while (fe.hasNextFigure ()) {
        Figure fig = fe.nextFigure ();
        Rectangle r = fig.displayBox ();
        if (r.width <= 0) {
            r.width = 1;
        }

        if (r.height <= 0) {
            r.height = 1;
        }

        if (r.intersects (viewClipRectangle)) {
            v.add (fig);
        }

    }

    FigureEnumeration clippedFE = new FigureEnumerator (v);
    view.draw (g, clippedFE);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/ClippingUpdateStrategy.java" startline="33" endline="37">
{
    view.drawAll (g);
    return;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/ClippingUpdateStrategy.java" startline="46" endline="69">
{
    Figure fig = fe.nextFigure ();
    Rectangle r = fig.displayBox ();
    if (r.width <= 0) {
        r.width = 1;
    }

    if (r.height <= 0) {
        r.height = 1;
    }

    if (r.intersects (viewClipRectangle)) {
        v.add (fig);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/ClippingUpdateStrategy.java" startline="57" endline="59">
{
    r.width = 1;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/ClippingUpdateStrategy.java" startline="61" endline="63">
{
    r.height = 1;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/ClippingUpdateStrategy.java" startline="66" endline="68">
{
    v.add (fig);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CommandCheckBoxMenuItem.java" startline="35" endline="38">
{
    super (command.name ());
    setCommand (command);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CommandCheckBoxMenuItem.java" startline="47" endline="50">
{
    super (command.name (), icon);
    setCommand (command);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CommandCheckBoxMenuItem.java" startline="59" endline="62">
{
    super (command.name (), b);
    setCommand (command);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CommandCheckBoxMenuItem.java" startline="72" endline="75">
{
    super (command.name (), icon, b);
    setCommand (command);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CommandCheckBoxMenuItem.java" startline="84" endline="86">
{
    return fCommand;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CommandCheckBoxMenuItem.java" startline="95" endline="97">
{
    fCommand = newCommand;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CommandMenuItem.java" startline="36" endline="40">
{
    super (command.name ());
    setCommand (command);
    addActionListener (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CommandMenuItem.java" startline="48" endline="52">
{
    super (command.name (), icon);
    setCommand (command);
    addActionListener (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CommandMenuItem.java" startline="62" endline="65">
{
    super (command.name (), mnemonic);
    setCommand (command);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CommandMenuItem.java" startline="73" endline="75">
{
    return fCommand;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CommandMenuItem.java" startline="83" endline="85">
{
    fCommand = newCommand;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CommandMenuItem.java" startline="91" endline="93">
{
    getCommand ().execute ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/ComponentFigure.java" startline="38" endline="40">
{
    bounds = new Rectangle ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/ComponentFigure.java" startline="46" endline="49">
{
    this ();
    setComponent (newComponent);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/ComponentFigure.java" startline="64" endline="67">
{
    bounds = new Rectangle (origin);
    bounds.add (corner);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/ComponentFigure.java" startline="76" endline="78">
{
    bounds.translate (dx, dy);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/ComponentFigure.java" startline="85" endline="87">
{
    return new Rectangle (bounds);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/ComponentFigure.java" startline="98" endline="102">
{
    List handles = CollectionsFactory.current ().createList ();
    BoxHandleKit.addHandles (this, handles);
    return new HandleEnumerator (handles);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/ComponentFigure.java" startline="109" endline="111">
{
    return this.component;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/ComponentFigure.java" startline="119" endline="121">
{
    this.component = newComponent;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/ComponentFigure.java" startline="128" endline="134">
{
    getComponent ().setBounds (displayBox ());
    Graphics componentG = g.create (bounds.x, bounds.y, bounds.width, bounds.height);
    getComponent ().paint (componentG);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CompositeFigureCreationTool.java" startline="32" endline="34">
{
    super (newDrawingEditor, prototype);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CompositeFigureCreationTool.java" startline="37" endline="59">
{
    setView ((DrawingView) e.getSource ());
    Figure figure = drawing ().findFigure (e.getX (), e.getY ());
    if (figure != null) {
        figure = figure.getDecoratedFigure ();
        if (figure instanceof CompositeFigure) {
            setContainerFigure ((CompositeFigure) figure);
            setCreatedFigure (createFigure ());
            setAddedFigure ((getContainerFigure ().add (getCreatedFigure ())));
            getAddedFigure ().displayBox (new Point (x, y), new Point (x, y));
        }
        else {
            toolDone ();
        }

    }
    else {
        toolDone ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CompositeFigureCreationTool.java" startline="41" endline="54">
{
    figure = figure.getDecoratedFigure ();
    if (figure instanceof CompositeFigure) {
        setContainerFigure ((CompositeFigure) figure);
        setCreatedFigure (createFigure ());
        setAddedFigure ((getContainerFigure ().add (getCreatedFigure ())));
        getAddedFigure ().displayBox (new Point (x, y), new Point (x, y));
    }
    else {
        toolDone ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CompositeFigureCreationTool.java" startline="44" endline="49">
{
    setContainerFigure ((CompositeFigure) figure);
    setCreatedFigure (createFigure ());
    setAddedFigure ((getContainerFigure ().add (getCreatedFigure ())));
    getAddedFigure ().displayBox (new Point (x, y), new Point (x, y));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CompositeFigureCreationTool.java" startline="51" endline="53">
{
    toolDone ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CompositeFigureCreationTool.java" startline="56" endline="58">
{
    toolDone ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CompositeFigureCreationTool.java" startline="62" endline="73">
{
    if ((getContainerFigure () != null) && ! getContainerFigure ().containsPoint (e.getX (), e.getY ())) {
        toolDone ();
    }
    else {
        super.mouseMove (e, x, y);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CompositeFigureCreationTool.java" startline="64" endline="68">
{
    toolDone ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CompositeFigureCreationTool.java" startline="70" endline="72">
{
    super.mouseMove (e, x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CompositeFigureCreationTool.java" startline="76" endline="78">
{
    myContainerFigure = newContainerFigure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CompositeFigureCreationTool.java" startline="81" endline="83">
{
    return myContainerFigure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CompositeFigureCreationTool.java" startline="86" endline="91">
{
    setCreatedFigure (null);
    setAddedFigure (null);
    setContainerFigure (null);
    editor ().toolDone ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CustomSelectionTool.java" startline="40" endline="42">
{
    super (editor);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CustomSelectionTool.java" startline="53" endline="65">
{
    setView ((DrawingView) e.getSource ());
    if (e.isPopupTrigger ()) {
        handlePopupMenu (e, x, y);
    }
    else {
        super.mouseDown (e, x, y);
        handleMouseDown (e, x, y);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CustomSelectionTool.java" startline="57" endline="59">
{
    handlePopupMenu (e, x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CustomSelectionTool.java" startline="61" endline="64">
{
    super.mouseDown (e, x, y);
    handleMouseDown (e, x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CustomSelectionTool.java" startline="76" endline="81">
{
    if (! e.isPopupTrigger ()) {
        super.mouseDrag (e, x, y);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CustomSelectionTool.java" startline="78" endline="80">
{
    super.mouseDrag (e, x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CustomSelectionTool.java" startline="94" endline="111">
{
    if (e.isPopupTrigger ()) {
        handlePopupMenu (e, x, y);
        super.mouseUp (e, x, y);
    }
    else if (e.getClickCount () == 2) {
        super.mouseUp (e, x, y);
        handleMouseDoubleClick (e, x, y);
    }
    else {
        super.mouseUp (e, x, y);
        handleMouseUp (e, x, y);
        handleMouseClick (e, x, y);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CustomSelectionTool.java" startline="96" endline="99">
{
    handlePopupMenu (e, x, y);
    super.mouseUp (e, x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CustomSelectionTool.java" startline="101" endline="104">
{
    super.mouseUp (e, x, y);
    handleMouseDoubleClick (e, x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CustomSelectionTool.java" startline="106" endline="110">
{
    super.mouseUp (e, x, y);
    handleMouseUp (e, x, y);
    handleMouseClick (e, x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CustomSelectionTool.java" startline="118" endline="119">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CustomSelectionTool.java" startline="126" endline="127">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CustomSelectionTool.java" startline="134" endline="135">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CustomSelectionTool.java" startline="142" endline="143">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CustomSelectionTool.java" startline="150" endline="164">
{
    Figure figure = drawing ().findFigure (e.getX (), e.getY ());
    if (figure != null) {
        Object attribute = figure.getAttribute (Figure.POPUP_MENU);
        if (attribute == null) {
            figure = drawing ().findFigureInside (e.getX (), e.getY ());
        }

        if (figure != null) {
            showPopupMenu (figure, e.getX (), e.getY (), e.getComponent ());
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CustomSelectionTool.java" startline="153" endline="163">
{
    Object attribute = figure.getAttribute (Figure.POPUP_MENU);
    if (attribute == null) {
        figure = drawing ().findFigureInside (e.getX (), e.getY ());
    }

    if (figure != null) {
        showPopupMenu (figure, e.getX (), e.getY (), e.getComponent ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CustomSelectionTool.java" startline="156" endline="158">
{
    figure = drawing ().findFigureInside (e.getX (), e.getY ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CustomSelectionTool.java" startline="160" endline="162">
{
    showPopupMenu (figure, e.getX (), e.getY (), e.getComponent ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CustomSelectionTool.java" startline="177" endline="193">
{
    Object attribute = figure.getAttribute (Figure.POPUP_MENU);
    if ((attribute != null) && (attribute instanceof JPopupMenu)) {
        JPopupMenu popup = (JPopupMenu) attribute;
        if (popup instanceof PopupMenuFigureSelection) {
            ((PopupMenuFigureSelection) popup).setSelectedFigure (figure);
        }

        Point newLocation = new Point (x, y);
        adjustOffsets (comp.getParent (), newLocation);
        popup.setLocation (newLocation);
        popup.setInvoker (comp);
        popup.setVisible (true);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CustomSelectionTool.java" startline="180" endline="192">
{
    JPopupMenu popup = (JPopupMenu) attribute;
    if (popup instanceof PopupMenuFigureSelection) {
        ((PopupMenuFigureSelection) popup).setSelectedFigure (figure);
    }

    Point newLocation = new Point (x, y);
    adjustOffsets (comp.getParent (), newLocation);
    popup.setLocation (newLocation);
    popup.setInvoker (comp);
    popup.setVisible (true);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CustomSelectionTool.java" startline="183" endline="185">
{
    ((PopupMenuFigureSelection) popup).setSelectedFigure (figure);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CustomSelectionTool.java" startline="202" endline="209">
{
    if (comp != null) {
        Point compLocation = comp.getLocation ();
        offsetPoint.translate (compLocation.x, compLocation.y);
        adjustOffsets (comp.getParent (), offsetPoint);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CustomSelectionTool.java" startline="204" endline="208">
{
    Point compLocation = comp.getLocation ();
    offsetPoint.translate (compLocation.x, compLocation.y);
    adjustOffsets (comp.getParent (), offsetPoint);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CustomToolBar.java" startline="58" endline="64">
{
    super ();
    standardTools = CollectionsFactory.current ().createList ();
    editTools = CollectionsFactory.current ().createList ();
    currentTools = standardTools;
    needsUpdate = false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CustomToolBar.java" startline="70" endline="79">
{
    if (currentTools == standardTools) {
        switchToEditTools ();
    }
    else {
        switchToStandardTools ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CustomToolBar.java" startline="72" endline="74">
{
    switchToEditTools ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CustomToolBar.java" startline="76" endline="78">
{
    switchToStandardTools ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CustomToolBar.java" startline="85" endline="91">
{
    if (currentTools != editTools) {
        currentTools = editTools;
        needsUpdate = true;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CustomToolBar.java" startline="87" endline="90">
{
    currentTools = editTools;
    needsUpdate = true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CustomToolBar.java" startline="97" endline="103">
{
    if (currentTools != standardTools) {
        currentTools = standardTools;
        needsUpdate = true;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CustomToolBar.java" startline="99" endline="102">
{
    currentTools = standardTools;
    needsUpdate = true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CustomToolBar.java" startline="109" endline="128">
{
    if (! needsUpdate) {
        return;
    }
    else {
        removeAll ();
        JComponent currentTool = null;
        Iterator iter = currentTools.iterator ();
        while (iter.hasNext ()) {
            currentTool = (JComponent) iter.next ();
            super.add (currentTool);
        }

        validate ();
        needsUpdate = false;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CustomToolBar.java" startline="111" endline="113">
{
    return;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CustomToolBar.java" startline="115" endline="127">
{
    removeAll ();
    JComponent currentTool = null;
    Iterator iter = currentTools.iterator ();
    while (iter.hasNext ()) {
        currentTool = (JComponent) iter.next ();
        super.add (currentTool);
    }

    validate ();
    needsUpdate = false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CustomToolBar.java" startline="121" endline="124">
{
    currentTool = (JComponent) iter.next ();
    super.add (currentTool);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CustomToolBar.java" startline="134" endline="145">
{
    if (currentTools == editTools) {
        editTools.add (newTool);
    }
    else {
        standardTools.add (newTool);
    }

    needsUpdate = true;
    return super.add (newTool);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CustomToolBar.java" startline="136" endline="138">
{
    editTools.add (newTool);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/CustomToolBar.java" startline="140" endline="142">
{
    standardTools.add (newTool);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/DesktopEvent.java" startline="32" endline="34">
{
    this (source, newDrawingView, null);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/DesktopEvent.java" startline="37" endline="41">
{
    super (source);
    setDrawingView (newDrawingView);
    setPreviousDrawingView (newPreviousDV);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/DesktopEvent.java" startline="44" endline="46">
{
    myDrawingView = newDrawingView;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/DesktopEvent.java" startline="49" endline="51">
{
    return myDrawingView;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/DesktopEvent.java" startline="54" endline="56">
{
    myPreviousDrawingView = newPreviousDrawingView;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/DesktopEvent.java" startline="59" endline="61">
{
    return myPreviousDrawingView;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/DesktopEventService.java" startline="38" endline="42">
{
    setDesktop (newDesktop);
    setContainer (newContainer);
    getContainer ().addContainerListener (createComponentListener ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/DesktopEventService.java" startline="45" endline="47">
{
    myDesktop = newDesktop;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/DesktopEventService.java" startline="50" endline="52">
{
    return myDesktop;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/DesktopEventService.java" startline="55" endline="57">
{
    myContainer = newContainer;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/DesktopEventService.java" startline="60" endline="62">
{
    return myContainer;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/DesktopEventService.java" startline="65" endline="67">
{
    getContainer ().add (newComponent);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/DesktopEventService.java" startline="70" endline="80">
{
    Component [] comps = getContainer ().getComponents ();
    for (int x = 0;
    x < comps.length; x ++) {
        if (dv == Helper.getDrawingView (comps [x])) {
            getContainer ().remove (comps [x]);
            break;
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/DesktopEventService.java" startline="73" endline="79">
{
    if (dv == Helper.getDrawingView (comps [x])) {
        getContainer ().remove (comps [x]);
        break;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/DesktopEventService.java" startline="75" endline="78">
{
    getContainer ().remove (comps [x]);
    break;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/DesktopEventService.java" startline="83" endline="85">
{
    getContainer ().removeAll ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/DesktopEventService.java" startline="88" endline="90">
{
    listenerList.add (DesktopListener.class, dpl);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/DesktopEventService.java" startline="93" endline="95">
{
    listenerList.remove (DesktopListener.class, dpl);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/DesktopEventService.java" startline="98" endline="110">
{
    final Object [] listeners = listenerList.getListenerList ();
    DesktopListener dpl;
    DesktopEvent dpe = createDesktopEvent (getActiveDrawingView (), dv);
    for (int i = listeners.length - 2;
    i >= 0; i -= 2) {
        if (listeners [i] == DesktopListener.class) {
            dpl = (DesktopListener) listeners [i + 1];
            dpl.drawingViewAdded (dpe);
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/DesktopEventService.java" startline="103" endline="109">
{
    if (listeners [i] == DesktopListener.class) {
        dpl = (DesktopListener) listeners [i + 1];
        dpl.drawingViewAdded (dpe);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/DesktopEventService.java" startline="105" endline="108">
{
    dpl = (DesktopListener) listeners [i + 1];
    dpl.drawingViewAdded (dpe);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/DesktopEventService.java" startline="113" endline="125">
{
    final Object [] listeners = listenerList.getListenerList ();
    DesktopListener dpl;
    DesktopEvent dpe = createDesktopEvent (getActiveDrawingView (), dv);
    for (int i = listeners.length - 2;
    i >= 0; i -= 2) {
        if (listeners [i] == DesktopListener.class) {
            dpl = (DesktopListener) listeners [i + 1];
            dpl.drawingViewRemoved (dpe);
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/DesktopEventService.java" startline="118" endline="124">
{
    if (listeners [i] == DesktopListener.class) {
        dpl = (DesktopListener) listeners [i + 1];
        dpl.drawingViewRemoved (dpe);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/DesktopEventService.java" startline="120" endline="123">
{
    dpl = (DesktopListener) listeners [i + 1];
    dpl.drawingViewRemoved (dpe);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/DesktopEventService.java" startline="131" endline="143">
{
    final Object [] listeners = listenerList.getListenerList ();
    DesktopListener dpl;
    DesktopEvent dpe = createDesktopEvent (oldView, newView);
    for (int i = listeners.length - 2;
    i >= 0; i -= 2) {
        if (listeners [i] == DesktopListener.class) {
            dpl = (DesktopListener) listeners [i + 1];
            dpl.drawingViewSelected (dpe);
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/DesktopEventService.java" startline="136" endline="142">
{
    if (listeners [i] == DesktopListener.class) {
        dpl = (DesktopListener) listeners [i + 1];
        dpl.drawingViewSelected (dpe);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/DesktopEventService.java" startline="138" endline="141">
{
    dpl = (DesktopListener) listeners [i + 1];
    dpl.drawingViewSelected (dpe);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/DesktopEventService.java" startline="149" endline="151">
{
    return new DesktopEvent (getDesktop (), newView, oldView);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/DesktopEventService.java" startline="154" endline="167">
{
    List al = CollectionsFactory.current ().createList ();
    for (int x = 0;
    x < comps.length; x ++) {
        DrawingView dv = Helper.getDrawingView (comps [x]);
        if (dv != null) {
            al.add (dv);
        }

    }

    DrawingView [] dvs = new DrawingView [al.size ()];
    al.toArray (dvs);
    return dvs;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/DesktopEventService.java" startline="157" endline="163">
{
    DrawingView dv = Helper.getDrawingView (comps [x]);
    if (dv != null) {
        al.add (dv);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/DesktopEventService.java" startline="160" endline="162">
{
    al.add (dv);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/DesktopEventService.java" startline="170" endline="172">
{
    return mySelectedView;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/DesktopEventService.java" startline="175" endline="177">
{
    mySelectedView = newActiveDrawingView;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/DesktopEventService.java" startline="180" endline="218">
{
    return new ContainerAdapter () {

        public void componentAdded (ContainerEvent e) {
            DrawingView dv = Helper.getDrawingView ((java.awt.Container) e.getChild ());
            DrawingView oldView = getActiveDrawingView ();
            if (dv != null) {
                fireDrawingViewAddedEvent (dv);
                setActiveDrawingView (dv);
                fireDrawingViewSelectedEvent (oldView, getActiveDrawingView ());
            }

        }

        public void componentRemoved (ContainerEvent e) {
            DrawingView dv = Helper.getDrawingView ((java.awt.Container) e.getChild ());
            if (dv != null) {
                DrawingView oldView = getActiveDrawingView ();
                setActiveDrawingView (NullDrawingView.getManagedDrawingView (oldView.editor ()));
                fireDrawingViewSelectedEvent (oldView, getActiveDrawingView ());
                fireDrawingViewRemovedEvent (dv);
            }

        }

    }

    ;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/DesktopEventService.java" startline="189" endline="198">
{
    DrawingView dv = Helper.getDrawingView ((java.awt.Container) e.getChild ());
    DrawingView oldView = getActiveDrawingView ();
    if (dv != null) {
        fireDrawingViewAddedEvent (dv);
        setActiveDrawingView (dv);
        fireDrawingViewSelectedEvent (oldView, getActiveDrawingView ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/DesktopEventService.java" startline="193" endline="197">
{
    fireDrawingViewAddedEvent (dv);
    setActiveDrawingView (dv);
    fireDrawingViewSelectedEvent (oldView, getActiveDrawingView ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/DesktopEventService.java" startline="207" endline="216">
{
    DrawingView dv = Helper.getDrawingView ((java.awt.Container) e.getChild ());
    if (dv != null) {
        DrawingView oldView = getActiveDrawingView ();
        setActiveDrawingView (NullDrawingView.getManagedDrawingView (oldView.editor ()));
        fireDrawingViewSelectedEvent (oldView, getActiveDrawingView ());
        fireDrawingViewRemovedEvent (dv);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/DesktopEventService.java" startline="210" endline="215">
{
    DrawingView oldView = getActiveDrawingView ();
    setActiveDrawingView (NullDrawingView.getManagedDrawingView (oldView.editor ()));
    fireDrawingViewSelectedEvent (oldView, getActiveDrawingView ());
    fireDrawingViewRemovedEvent (dv);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/DiamondFigure.java" startline="28" endline="30">
{
    super (new Point (0, 0), new Point (0, 0));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/DiamondFigure.java" startline="33" endline="35">
{
    super (origin, corner);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/DiamondFigure.java" startline="41" endline="49">
{
    Rectangle r = displayBox ();
    Polygon p = new Polygon ();
    p.addPoint (r.x, r.y + r.height / 2);
    p.addPoint (r.x + r.width / 2, r.y);
    p.addPoint (r.x + r.width, r.y + r.height / 2);
    p.addPoint (r.x + r.width / 2, r.y + r.height);
    return p;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/DiamondFigure.java" startline="52" endline="58">
{
    Polygon p = getPolygon ();
    g.setColor (getFillColor ());
    g.fillPolygon (p);
    g.setColor (getFrameColor ());
    g.drawPolygon (p);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/DiamondFigure.java" startline="61" endline="64">
{
    Rectangle r = displayBox ();
    return new Insets (r.height / 2, r.width / 2, r.height / 2, r.width / 2);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/DiamondFigure.java" startline="67" endline="69">
{
    return getPolygon ().contains (x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/DiamondFigure.java" startline="72" endline="74">
{
    return PolygonFigure.chop (getPolygon (), p);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/DiamondFigure.java" startline="77" endline="79">
{
    return new ChopDiamondConnector (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/FloatingTextArea.java" startline="52" endline="59">
{
    fEditWidget = new JEditorPane ();
    fEditScrollContainer = new JScrollPane (fEditWidget, JScrollPane.VERTICAL_SCROLLBAR_ALWAYS, JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);
    fEditScrollContainer.setCursor (Cursor.getPredefinedCursor (Cursor.DEFAULT_CURSOR));
    fEditScrollContainer.setBorder (BorderFactory.createLineBorder (Color.black));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/FloatingTextArea.java" startline="67" endline="69">
{
    createOverlay (container, null);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/FloatingTextArea.java" startline="79" endline="86">
{
    container.add (fEditScrollContainer, 0);
    if (font != null) {
        fEditWidget.setFont (font);
    }

    fContainer = container;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/FloatingTextArea.java" startline="82" endline="84">
{
    fEditWidget.setFont (font);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/FloatingTextArea.java" startline="95" endline="101">
{
    fEditWidget.setText (text);
    fEditScrollContainer.setBounds (r.x, r.y, r.width, r.height);
    fEditScrollContainer.setVisible (true);
    fEditWidget.setCaretPosition (0);
    fEditWidget.requestFocus ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/FloatingTextArea.java" startline="109" endline="111">
{
    return fEditWidget.getText ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/FloatingTextArea.java" startline="120" endline="122">
{
    return new Dimension (fEditWidget.getWidth (), fEditWidget.getHeight ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/FloatingTextArea.java" startline="129" endline="139">
{
    fContainer.requestFocus ();
    if (fEditScrollContainer != null) {
        fEditScrollContainer.setVisible (false);
        fContainer.remove (fEditScrollContainer);
        Rectangle bounds = fEditScrollContainer.getBounds ();
        fContainer.repaint (bounds.x, bounds.y, bounds.width, bounds.height);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/FloatingTextArea.java" startline="132" endline="138">
{
    fEditScrollContainer.setVisible (false);
    fContainer.remove (fEditScrollContainer);
    Rectangle bounds = fEditScrollContainer.getBounds ();
    fContainer.repaint (bounds.x, bounds.y, bounds.width, bounds.height);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/GraphicalCompositeFigure.java" startline="69" endline="71">
{
    this (new RectangleFigure ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/GraphicalCompositeFigure.java" startline="80" endline="84">
{
    super ();
    setPresentationFigure (newPresentationFigure);
    initialize ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/GraphicalCompositeFigure.java" startline="93" endline="103">
{
    if (getLayouter () != null) {
        setLayouter (getLayouter ().create (this));
    }
    else {
        setLayouter (new StandardLayouter (this));
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/GraphicalCompositeFigure.java" startline="95" endline="98">
{
    setLayouter (getLayouter ().create (this));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/GraphicalCompositeFigure.java" startline="100" endline="102">
{
    setLayouter (new StandardLayouter (this));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/GraphicalCompositeFigure.java" startline="111" endline="115">
{
    Object cloneObject = super.clone ();
    ((GraphicalCompositeFigure) cloneObject).initialize ();
    return cloneObject;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/GraphicalCompositeFigure.java" startline="121" endline="123">
{
    return getPresentationFigure ().displayBox ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/GraphicalCompositeFigure.java" startline="129" endline="139">
{
    Rectangle r = getLayouter ().layout (origin, corner);
    getPresentationFigure ().basicDisplayBox (r.getLocation (), new Point ((int) r.getMaxX (), (int) r.getMaxY ()));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/GraphicalCompositeFigure.java" startline="146" endline="149">
{
    super.basicMoveBy (dx, dy);
    getPresentationFigure ().moveBy (dx, dy);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/GraphicalCompositeFigure.java" startline="155" endline="160">
{
    willChange ();
    layout ();
    change ();
    changed ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/GraphicalCompositeFigure.java" startline="166" endline="169">
{
    getPresentationFigure ().draw (g);
    super.draw (g);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/GraphicalCompositeFigure.java" startline="175" endline="180">
{
    List handles = CollectionsFactory.current ().createList ();
    BoxHandleKit.addHandles (this, handles);
    return new HandleEnumerator (handles);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/GraphicalCompositeFigure.java" startline="194" endline="203">
{
    if (getPresentationFigure () != null) {
        return getPresentationFigure ().getAttribute (name);
    }
    else {
        return super.getAttribute (name);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/GraphicalCompositeFigure.java" startline="196" endline="198">
{
    return getPresentationFigure ().getAttribute (name);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/GraphicalCompositeFigure.java" startline="200" endline="202">
{
    return super.getAttribute (name);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/GraphicalCompositeFigure.java" startline="215" endline="224">
{
    if (getPresentationFigure () != null) {
        return getPresentationFigure ().getAttribute (attributeConstant);
    }
    else {
        return super.getAttribute (attributeConstant);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/GraphicalCompositeFigure.java" startline="217" endline="219">
{
    return getPresentationFigure ().getAttribute (attributeConstant);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/GraphicalCompositeFigure.java" startline="221" endline="223">
{
    return super.getAttribute (attributeConstant);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/GraphicalCompositeFigure.java" startline="238" endline="247">
{
    if (getPresentationFigure () != null) {
        getPresentationFigure ().setAttribute (name, value);
    }
    else {
        super.setAttribute (name, value);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/GraphicalCompositeFigure.java" startline="240" endline="242">
{
    getPresentationFigure ().setAttribute (name, value);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/GraphicalCompositeFigure.java" startline="244" endline="246">
{
    super.setAttribute (name, value);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/GraphicalCompositeFigure.java" startline="259" endline="268">
{
    if (getPresentationFigure () != null) {
        getPresentationFigure ().setAttribute (attributeConstant, value);
    }
    else {
        super.setAttribute (attributeConstant, value);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/GraphicalCompositeFigure.java" startline="261" endline="263">
{
    getPresentationFigure ().setAttribute (attributeConstant, value);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/GraphicalCompositeFigure.java" startline="265" endline="267">
{
    super.setAttribute (attributeConstant, value);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/GraphicalCompositeFigure.java" startline="278" endline="280">
{
    myPresentationFigure = newPresentationFigure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/GraphicalCompositeFigure.java" startline="290" endline="292">
{
    return myPresentationFigure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/GraphicalCompositeFigure.java" startline="301" endline="307">
{
    if (getLayouter () != null) {
        Rectangle r = getLayouter ().calculateLayout (displayBox ().getLocation (), displayBox ().getLocation ());
        displayBox (r.getLocation (), new Point (r.x + r.width, r.y + r.height));
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/GraphicalCompositeFigure.java" startline="303" endline="306">
{
    Rectangle r = getLayouter ().calculateLayout (displayBox ().getLocation (), displayBox ().getLocation ());
    displayBox (r.getLocation (), new Point (r.x + r.width, r.y + r.height));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/GraphicalCompositeFigure.java" startline="321" endline="323">
{
    myLayouter = newLayouter;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/GraphicalCompositeFigure.java" startline="334" endline="336">
{
    return myLayouter;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/GraphicalCompositeFigure.java" startline="343" endline="348">
{
    if (listener () != null) {
        listener ().figureRequestUpdate (new FigureChangeEvent (this));
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/GraphicalCompositeFigure.java" startline="345" endline="347">
{
    listener ().figureRequestUpdate (new FigureChangeEvent (this));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/GraphicalCompositeFigure.java" startline="354" endline="367">
{
    if (listener () != null) {
        if (includes (e.getFigure ())) {
            Rectangle r = invalidateRectangle (displayBox ());
            listener ().figureRequestRemove (new FigureChangeEvent (this, r, e));
        }
        else {
            super.figureRequestRemove (e);
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/GraphicalCompositeFigure.java" startline="356" endline="366">
{
    if (includes (e.getFigure ())) {
        Rectangle r = invalidateRectangle (displayBox ());
        listener ().figureRequestRemove (new FigureChangeEvent (this, r, e));
    }
    else {
        super.figureRequestRemove (e);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/GraphicalCompositeFigure.java" startline="358" endline="361">
{
    Rectangle r = invalidateRectangle (displayBox ());
    listener ().figureRequestRemove (new FigureChangeEvent (this, r, e));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/GraphicalCompositeFigure.java" startline="363" endline="365">
{
    super.figureRequestRemove (e);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/GraphicalCompositeFigure.java" startline="376" endline="380">
{
    super.read (dr);
    setPresentationFigure ((Figure) dr.readStorable ());
    setLayouter ((Layouter) dr.readStorable ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/GraphicalCompositeFigure.java" startline="389" endline="393">
{
    super.write (dw);
    dw.writeStorable (getPresentationFigure ());
    dw.writeStorable (getLayouter ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/Helper.java" startline="25" endline="44">
{
    DrawingView oldDrawingView = null;
    Component [] components = container.getComponents ();
    for (int i = 0;
    i < components.length; i ++) {
        if (components [i] instanceof DrawingView) {
            return (DrawingView) components [i];
        }
        else if (components [i] instanceof Container) {
            oldDrawingView = getDrawingView ((Container) components [i]);
            if (oldDrawingView != null) {
                return oldDrawingView;
            }

        }

    }

    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/Helper.java" startline="29" endline="42">
{
    if (components [i] instanceof DrawingView) {
        return (DrawingView) components [i];
    }
    else if (components [i] instanceof Container) {
        oldDrawingView = getDrawingView ((Container) components [i]);
        if (oldDrawingView != null) {
            return oldDrawingView;
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/Helper.java" startline="31" endline="33">
{
    return (DrawingView) components [i];
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/Helper.java" startline="35" endline="41">
{
    oldDrawingView = getDrawingView ((Container) components [i]);
    if (oldDrawingView != null) {
        return oldDrawingView;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/Helper.java" startline="38" endline="40">
{
    return oldDrawingView;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/Helper.java" startline="47" endline="60">
{
    if (Container.class.isInstance (component)) {
        return getDrawingView ((Container) component);
    }
    else if (DrawingView.class.isInstance (component)) {
        return (DrawingView) component;
    }
    else {
        return null;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/Helper.java" startline="49" endline="51">
{
    return getDrawingView ((Container) component);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/Helper.java" startline="53" endline="55">
{
    return (DrawingView) component;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/Helper.java" startline="57" endline="59">
{
    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/JPanelDesktop.java" startline="30" endline="35">
{
    setDrawApplication (newDrawApplication);
    setDesktopEventService (createDesktopEventService ());
    setAlignmentX (LEFT_ALIGNMENT);
    setLayout (new BorderLayout ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/JPanelDesktop.java" startline="38" endline="56">
{
    JScrollPane sp = new JScrollPane ((Component) dv);
    sp.setVerticalScrollBarPolicy (JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
    sp.setHorizontalScrollBarPolicy (JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS);
    sp.setAlignmentX (LEFT_ALIGNMENT);
    String applicationTitle;
    if (dv.drawing ().getTitle () == null) {
        applicationTitle = getDrawApplication ().getApplicationName () + " - " + getDrawApplication ().getDefaultDrawingTitle ();
    }
    else {
        applicationTitle = getDrawApplication ().getApplicationName () + " - " + dv.drawing ().getTitle ();
    }

    sp.setName (applicationTitle);
    return sp;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/JPanelDesktop.java" startline="45" endline="48">
{
    applicationTitle = getDrawApplication ().getApplicationName () + " - " + getDrawApplication ().getDefaultDrawingTitle ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/JPanelDesktop.java" startline="50" endline="52">
{
    applicationTitle = getDrawApplication ().getApplicationName () + " - " + dv.drawing ().getTitle ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/JPanelDesktop.java" startline="59" endline="61">
{
    return getDesktopEventService ().getActiveDrawingView ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/JPanelDesktop.java" startline="64" endline="67">
{
    getDesktopEventService ().addComponent (createContents (dv));
    getContainer ().validate ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/JPanelDesktop.java" startline="70" endline="73">
{
    getDesktopEventService ().removeComponent (dv);
    getContainer ().validate ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/JPanelDesktop.java" startline="76" endline="79">
{
    getDesktopEventService ().removeAllComponents ();
    getContainer ().validate ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/JPanelDesktop.java" startline="82" endline="84">
{
    return getDesktopEventService ().getDrawingViews (getComponents ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/JPanelDesktop.java" startline="87" endline="89">
{
    getDesktopEventService ().addDesktopListener (dpl);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/JPanelDesktop.java" startline="92" endline="94">
{
    getDesktopEventService ().removeDesktopListener (dpl);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/JPanelDesktop.java" startline="97" endline="99">
{
    return this;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/JPanelDesktop.java" startline="102" endline="104">
{
    return myDesktopEventService;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/JPanelDesktop.java" startline="107" endline="109">
{
    myDesktopEventService = newDesktopEventService;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/JPanelDesktop.java" startline="112" endline="114">
{
    return new DesktopEventService (this, getContainer ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/JPanelDesktop.java" startline="117" endline="119">
{
    myDrawApplication = newDrawApplication;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/JPanelDesktop.java" startline="122" endline="124">
{
    return myDrawApplication;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/JPanelDesktop.java" startline="127" endline="130">
{
    setName (newDrawingTitle);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/JScrollPaneDesktop.java" startline="29" endline="34">
{
    setDesktopEventService (createDesktopEventService ());
    setAlignmentX (LEFT_ALIGNMENT);
    setVerticalScrollBarPolicy (JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
    setHorizontalScrollBarPolicy (JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/JScrollPaneDesktop.java" startline="37" endline="39">
{
    return (Component) dv;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/JScrollPaneDesktop.java" startline="42" endline="44">
{
    return getDesktopEventService ().getActiveDrawingView ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/JScrollPaneDesktop.java" startline="47" endline="49">
{
    getContainer ().add (createContents (dv));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/JScrollPaneDesktop.java" startline="52" endline="54">
{
    getDesktopEventService ().removeComponent (dv);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/JScrollPaneDesktop.java" startline="57" endline="59">
{
    getDesktopEventService ().removeAllComponents ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/JScrollPaneDesktop.java" startline="62" endline="65">
{
    return getDesktopEventService ().getDrawingViews (getComponents ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/JScrollPaneDesktop.java" startline="68" endline="70">
{
    getDesktopEventService ().addDesktopListener (dpl);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/JScrollPaneDesktop.java" startline="73" endline="75">
{
    getDesktopEventService ().removeDesktopListener (dpl);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/JScrollPaneDesktop.java" startline="78" endline="80">
{
    return getViewport ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/JScrollPaneDesktop.java" startline="83" endline="85">
{
    return myDesktopEventService;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/JScrollPaneDesktop.java" startline="88" endline="90">
{
    myDesktopEventService = newDesktopEventService;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/JScrollPaneDesktop.java" startline="93" endline="95">
{
    return new DesktopEventService (this, getContainer ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/JScrollPaneDesktop.java" startline="98" endline="101">
{
    setName (newDrawingTitle);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="50" endline="56">
{
    setDrawApplication (newDrawApplication);
    manager = new MDIDesktopManager (this);
    setDesktopManager (manager);
    setDragMode (JDesktopPane.OUTLINE_DRAG_MODE);
    setAlignmentX (JComponent.LEFT_ALIGNMENT);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="66" endline="69">
{
    DrawingView dv = Helper.getDrawingView (e.getInternalFrame ());
    fireDrawingViewAddedEvent (dv);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="86" endline="94">
{
    DrawingView dv = Helper.getDrawingView (e.getInternalFrame ());
    if (getComponentCount () == 0) {
        setActiveDrawingView (null);
        fireDrawingViewSelectedEvent (selectedView);
    }

    fireDrawingViewRemovedEvent (dv);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="89" endline="92">
{
    setActiveDrawingView (null);
    fireDrawingViewSelectedEvent (selectedView);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="118" endline="122">
{
    DrawingView dv = Helper.getDrawingView (e.getInternalFrame ());
    setActiveDrawingView (dv);
    fireDrawingViewSelectedEvent (selectedView);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="130" endline="146">
{
    final Object [] listeners = listenerList.getListenerList ();
    DesktopListener dpl;
    DesktopEvent dpe = null;
    for (int i = listeners.length - 2;
    i >= 0; i -= 2) {
        if (listeners [i] == DesktopListener.class) {
            if (dpe == null) {
                dpe = new DesktopEvent (MDIDesktopPane.this, dv);
            }

            dpl = (DesktopListener) listeners [i + 1];
            dpl.drawingViewAdded (dpe);
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="135" endline="145">
{
    if (listeners [i] == DesktopListener.class) {
        if (dpe == null) {
            dpe = new DesktopEvent (MDIDesktopPane.this, dv);
        }

        dpl = (DesktopListener) listeners [i + 1];
        dpl.drawingViewAdded (dpe);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="137" endline="144">
{
    if (dpe == null) {
        dpe = new DesktopEvent (MDIDesktopPane.this, dv);
    }

    dpl = (DesktopListener) listeners [i + 1];
    dpl.drawingViewAdded (dpe);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="139" endline="141">
{
    dpe = new DesktopEvent (MDIDesktopPane.this, dv);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="149" endline="165">
{
    final Object [] listeners = listenerList.getListenerList ();
    DesktopListener dpl;
    DesktopEvent dpe = null;
    for (int i = listeners.length - 2;
    i >= 0; i -= 2) {
        if (listeners [i] == DesktopListener.class) {
            if (dpe == null) {
                dpe = new DesktopEvent (MDIDesktopPane.this, dv);
            }

            dpl = (DesktopListener) listeners [i + 1];
            dpl.drawingViewRemoved (dpe);
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="154" endline="164">
{
    if (listeners [i] == DesktopListener.class) {
        if (dpe == null) {
            dpe = new DesktopEvent (MDIDesktopPane.this, dv);
        }

        dpl = (DesktopListener) listeners [i + 1];
        dpl.drawingViewRemoved (dpe);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="156" endline="163">
{
    if (dpe == null) {
        dpe = new DesktopEvent (MDIDesktopPane.this, dv);
    }

    dpl = (DesktopListener) listeners [i + 1];
    dpl.drawingViewRemoved (dpe);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="158" endline="160">
{
    dpe = new DesktopEvent (MDIDesktopPane.this, dv);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="168" endline="184">
{
    final Object [] listeners = listenerList.getListenerList ();
    DesktopListener dpl;
    DesktopEvent dpe = null;
    for (int i = listeners.length - 2;
    i >= 0; i -= 2) {
        if (listeners [i] == DesktopListener.class) {
            if (dpe == null) {
                dpe = new DesktopEvent (MDIDesktopPane.this, dv);
            }

            dpl = (DesktopListener) listeners [i + 1];
            dpl.drawingViewSelected (dpe);
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="173" endline="183">
{
    if (listeners [i] == DesktopListener.class) {
        if (dpe == null) {
            dpe = new DesktopEvent (MDIDesktopPane.this, dv);
        }

        dpl = (DesktopListener) listeners [i + 1];
        dpl.drawingViewSelected (dpe);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="175" endline="182">
{
    if (dpe == null) {
        dpe = new DesktopEvent (MDIDesktopPane.this, dv);
    }

    dpl = (DesktopListener) listeners [i + 1];
    dpl.drawingViewSelected (dpe);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="177" endline="179">
{
    dpe = new DesktopEvent (MDIDesktopPane.this, dv);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="193" endline="213">
{
    JScrollPane sp = new JScrollPane ((Component) dv);
    sp.setVerticalScrollBarPolicy (JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
    sp.setHorizontalScrollBarPolicy (JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS);
    sp.setAlignmentX (LEFT_ALIGNMENT);
    String applicationTitle;
    if (dv.drawing ().getTitle () == null) {
        applicationTitle = getDrawApplication ().getApplicationName () + " - " + getDrawApplication ().getDefaultDrawingTitle ();
    }
    else {
        applicationTitle = getDrawApplication ().getApplicationName () + " - " + dv.drawing ().getTitle ();
    }

    JInternalFrame internalFrame = new JInternalFrame (applicationTitle, true, true, true, true);
    internalFrame.setName (applicationTitle);
    internalFrame.getContentPane ().add (sp);
    internalFrame.setSize (200, 200);
    return internalFrame;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="201" endline="203">
{
    applicationTitle = getDrawApplication ().getApplicationName () + " - " + getDrawApplication ().getDefaultDrawingTitle ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="205" endline="207">
{
    applicationTitle = getDrawApplication ().getApplicationName () + " - " + dv.drawing ().getTitle ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="216" endline="218">
{
    return selectedView;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="221" endline="223">
{
    selectedView = newSelectedView;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="226" endline="228">
{
    getSelectedFrame ().setTitle (newDrawingTitle);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="244" endline="290">
{
    JInternalFrame frame = (JInternalFrame) createContents (dv);
    JInternalFrame [] array = getAllFrames ();
    Point p = null;
    int w;
    int h;
    frame.addInternalFrameListener (internalFrameListener);
    Component retval = super.add (frame);
    checkDesktopSize ();
    if (array.length > 0) {
        p = array [0].getLocation ();
        p.x = p.x + FRAME_OFFSET;
        p.y = p.y + FRAME_OFFSET;
    }
    else {
        p = new Point (0, 0);
    }

    frame.setLocation (p.x, p.y);
    if (frame.isResizable ()) {
        w = getWidth () - (getWidth () / 3);
        h = getHeight () - (getHeight () / 3);
        if (w < frame.getMinimumSize ().getWidth ()) {
            w = (int) frame.getMinimumSize ().getWidth ();
        }

        if (h < frame.getMinimumSize ().getHeight ()) {
            h = (int) frame.getMinimumSize ().getHeight ();
        }

        frame.setSize (w, h);
    }

    moveToFront (frame);
    frame.setVisible (true);
    try {
        frame.setSelected (true);
    }
    catch (PropertyVetoException e) {
        frame.toBack ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="256" endline="260">
{
    p = array [0].getLocation ();
    p.x = p.x + FRAME_OFFSET;
    p.y = p.y + FRAME_OFFSET;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="262" endline="264">
{
    p = new Point (0, 0);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="267" endline="279">
{
    w = getWidth () - (getWidth () / 3);
    h = getHeight () - (getHeight () / 3);
    if (w < frame.getMinimumSize ().getWidth ()) {
        w = (int) frame.getMinimumSize ().getWidth ();
    }

    if (h < frame.getMinimumSize ().getHeight ()) {
        h = (int) frame.getMinimumSize ().getHeight ();
    }

    frame.setSize (w, h);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="271" endline="273">
{
    w = (int) frame.getMinimumSize ().getWidth ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="275" endline="277">
{
    h = (int) frame.getMinimumSize ().getHeight ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="283" endline="285">
{
    frame.setSelected (true);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="287" endline="289">
{
    frame.toBack ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="293" endline="304">
{
    Component [] comps = getComponents ();
    for (int x = 0;
    x < comps.length; x ++) {
        if (dv == Helper.getDrawingView (comps [x])) {
            ((JInternalFrame) comps [x]).dispose ();
            break;
        }

    }

    checkDesktopSize ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="296" endline="302">
{
    if (dv == Helper.getDrawingView (comps [x])) {
        ((JInternalFrame) comps [x]).dispose ();
        break;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="298" endline="301">
{
    ((JInternalFrame) comps [x]).dispose ();
    break;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="307" endline="313">
{
    JInternalFrame [] jifs = getAllFrames ();
    for (int x = 0;
    x < jifs.length; x ++) {
        jifs [x].dispose ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="310" endline="312">
{
    jifs [x].dispose ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="316" endline="330">
{
    Component [] comps = getComponents ();
    java.util.ArrayList al = new java.util.ArrayList ();
    for (int x = 0;
    x < comps.length; x ++) {
        DrawingView dv = Helper.getDrawingView (comps [x]);
        if (dv != null) {
            al.add (dv);
        }

    }

    DrawingView [] dvs = new DrawingView [al.size ()];
    al.toArray (dvs);
    return dvs;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="320" endline="326">
{
    DrawingView dv = Helper.getDrawingView (comps [x]);
    if (dv != null) {
        al.add (dv);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="323" endline="325">
{
    al.add (dv);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="350" endline="352">
{
    listenerList.add (DesktopListener.class, dpl);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="355" endline="357">
{
    listenerList.remove (DesktopListener.class, dpl);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="363" endline="395">
{
    int x = 0;
    int y = 0;
    JInternalFrame [] allFrames = getAllFrames ();
    if (allFrames.length == 0) {
        return;
    }

    manager.setNormalSize ();
    int frameHeight = (getBounds ().height - 5) - allFrames.length * FRAME_OFFSET;
    int frameWidth = (getBounds ().width - 5) - allFrames.length * FRAME_OFFSET;
    for (int i = allFrames.length - 1;
    i >= 0; i --) {
        try {
            allFrames [i].setMaximum (false);
        }
        catch (PropertyVetoException e) {
            e.printStackTrace ();
        }

        allFrames [i].setBounds (x, y, frameWidth, frameHeight);
        x = x + FRAME_OFFSET;
        y = y + FRAME_OFFSET;
    }

    checkDesktopSize ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="370" endline="372">
{
    return;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="379" endline="392">
{
    try {
        allFrames [i].setMaximum (false);
    }
    catch (PropertyVetoException e) {
        e.printStackTrace ();
    }

    allFrames [i].setBounds (x, y, frameWidth, frameHeight);
    x = x + FRAME_OFFSET;
    y = y + FRAME_OFFSET;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="381" endline="383">
{
    allFrames [i].setMaximum (false);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="385" endline="387">
{
    e.printStackTrace ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="404" endline="406">
{
    tileFramesHorizontally ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="409" endline="438">
{
    Component [] allFrames = getAllFrames ();
    if (allFrames.length == 0) {
        return;
    }

    manager.setNormalSize ();
    int frameHeight = getBounds ().height / allFrames.length;
    int y = 0;
    for (int i = 0;
    i < allFrames.length; i ++) {
        try {
            ((JInternalFrame) allFrames [i]).setMaximum (false);
        }
        catch (PropertyVetoException e) {
            e.printStackTrace ();
        }

        allFrames [i].setBounds (0, y, getBounds ().width, frameHeight);
        y = y + frameHeight;
    }

    checkDesktopSize ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="414" endline="416">
{
    return;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="423" endline="435">
{
    try {
        ((JInternalFrame) allFrames [i]).setMaximum (false);
    }
    catch (PropertyVetoException e) {
        e.printStackTrace ();
    }

    allFrames [i].setBounds (0, y, getBounds ().width, frameHeight);
    y = y + frameHeight;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="425" endline="427">
{
    ((JInternalFrame) allFrames [i]).setMaximum (false);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="429" endline="431">
{
    e.printStackTrace ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="441" endline="469">
{
    Component [] allFrames = getAllFrames ();
    if (allFrames.length == 0) {
        return;
    }

    manager.setNormalSize ();
    int frameWidth = getBounds ().width / allFrames.length;
    int x = 0;
    for (int i = 0;
    i < allFrames.length; i ++) {
        try {
            ((JInternalFrame) allFrames [i]).setMaximum (false);
        }
        catch (PropertyVetoException e) {
            e.printStackTrace ();
        }

        allFrames [i].setBounds (x, 0, frameWidth, getBounds ().height);
        x = x + frameWidth;
    }

    checkDesktopSize ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="446" endline="448">
{
    return;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="454" endline="466">
{
    try {
        ((JInternalFrame) allFrames [i]).setMaximum (false);
    }
    catch (PropertyVetoException e) {
        e.printStackTrace ();
    }

    allFrames [i].setBounds (x, 0, frameWidth, getBounds ().height);
    x = x + frameWidth;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="456" endline="458">
{
    ((JInternalFrame) allFrames [i]).setMaximum (false);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="460" endline="462">
{
    e.printStackTrace ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="477" endline="537">
{
    Component [] allFrames = getAllFrames ();
    if (allFrames.length == 0) {
        return;
    }

    manager.setNormalSize ();
    int vertFrames = (int) Math.floor (Math.sqrt (allFrames.length));
    int horFrames = (int) Math.ceil (Math.sqrt (allFrames.length));
    int frameWidth = getBounds ().width / horFrames;
    int frameHeight = getBounds ().height / vertFrames;
    int x = 0;
    int y = 0;
    int frameIdx = 0;
    for (int horCnt = 0;
    horCnt < horFrames - 1; horCnt ++) {
        y = 0;
        for (int vertCnt = 0;
        vertCnt < vertFrames; vertCnt ++) {
            try {
                ((JInternalFrame) allFrames [frameIdx]).setMaximum (false);
            }
            catch (PropertyVetoException e) {
                e.printStackTrace ();
            }

            allFrames [frameIdx].setBounds (x, y, frameWidth, frameHeight);
            frameIdx ++;
            y = y + frameHeight;
        }

        x = x + frameWidth;
    }

    frameHeight = getBounds ().height / (allFrames.length - frameIdx);
    y = 0;
    for (; frameIdx < allFrames.length; frameIdx ++) {
        try {
            ((JInternalFrame) allFrames [frameIdx]).setMaximum (false);
        }
        catch (PropertyVetoException e) {
            e.printStackTrace ();
        }

        allFrames [frameIdx].setBounds (x, y, frameWidth, frameHeight);
        y = y + frameHeight;
    }

    checkDesktopSize ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="481" endline="483">
{
    return;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="497" endline="515">
{
    y = 0;
    for (int vertCnt = 0;
    vertCnt < vertFrames; vertCnt ++) {
        try {
            ((JInternalFrame) allFrames [frameIdx]).setMaximum (false);
        }
        catch (PropertyVetoException e) {
            e.printStackTrace ();
        }

        allFrames [frameIdx].setBounds (x, y, frameWidth, frameHeight);
        frameIdx ++;
        y = y + frameHeight;
    }

    x = x + frameWidth;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="500" endline="513">
{
    try {
        ((JInternalFrame) allFrames [frameIdx]).setMaximum (false);
    }
    catch (PropertyVetoException e) {
        e.printStackTrace ();
    }

    allFrames [frameIdx].setBounds (x, y, frameWidth, frameHeight);
    frameIdx ++;
    y = y + frameHeight;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="502" endline="504">
{
    ((JInternalFrame) allFrames [frameIdx]).setMaximum (false);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="506" endline="508">
{
    e.printStackTrace ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="522" endline="534">
{
    try {
        ((JInternalFrame) allFrames [frameIdx]).setMaximum (false);
    }
    catch (PropertyVetoException e) {
        e.printStackTrace ();
    }

    allFrames [frameIdx].setBounds (x, y, frameWidth, frameHeight);
    y = y + frameHeight;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="524" endline="526">
{
    ((JInternalFrame) allFrames [frameIdx]).setMaximum (false);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="528" endline="530">
{
    e.printStackTrace ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="545" endline="605">
{
    Component [] allFrames = getAllFrames ();
    if (allFrames.length == 0) {
        return;
    }

    manager.setNormalSize ();
    int vertFrames = (int) Math.ceil (Math.sqrt (allFrames.length));
    int horFrames = (int) Math.floor (Math.sqrt (allFrames.length));
    int frameWidth = getBounds ().width / horFrames;
    int frameHeight = getBounds ().height / vertFrames;
    int x = 0;
    int y = 0;
    int frameIdx = 0;
    for (int vertCnt = 0;
    vertCnt < vertFrames - 1; vertCnt ++) {
        x = 0;
        for (int horCnt = 0;
        horCnt < horFrames; horCnt ++) {
            try {
                ((JInternalFrame) allFrames [frameIdx]).setMaximum (false);
            }
            catch (PropertyVetoException e) {
                e.printStackTrace ();
            }

            allFrames [frameIdx].setBounds (x, y, frameWidth, frameHeight);
            frameIdx ++;
            x = x + frameWidth;
        }

        y = y + frameHeight;
    }

    frameWidth = getBounds ().width / (allFrames.length - frameIdx);
    x = 0;
    for (; frameIdx < allFrames.length; frameIdx ++) {
        try {
            ((JInternalFrame) allFrames [frameIdx]).setMaximum (false);
        }
        catch (PropertyVetoException e) {
            e.printStackTrace ();
        }

        allFrames [frameIdx].setBounds (x, y, frameWidth, frameHeight);
        x = x + frameWidth;
    }

    checkDesktopSize ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="549" endline="551">
{
    return;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="565" endline="583">
{
    x = 0;
    for (int horCnt = 0;
    horCnt < horFrames; horCnt ++) {
        try {
            ((JInternalFrame) allFrames [frameIdx]).setMaximum (false);
        }
        catch (PropertyVetoException e) {
            e.printStackTrace ();
        }

        allFrames [frameIdx].setBounds (x, y, frameWidth, frameHeight);
        frameIdx ++;
        x = x + frameWidth;
    }

    y = y + frameHeight;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="568" endline="581">
{
    try {
        ((JInternalFrame) allFrames [frameIdx]).setMaximum (false);
    }
    catch (PropertyVetoException e) {
        e.printStackTrace ();
    }

    allFrames [frameIdx].setBounds (x, y, frameWidth, frameHeight);
    frameIdx ++;
    x = x + frameWidth;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="570" endline="572">
{
    ((JInternalFrame) allFrames [frameIdx]).setMaximum (false);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="574" endline="576">
{
    e.printStackTrace ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="590" endline="602">
{
    try {
        ((JInternalFrame) allFrames [frameIdx]).setMaximum (false);
    }
    catch (PropertyVetoException e) {
        e.printStackTrace ();
    }

    allFrames [frameIdx].setBounds (x, y, frameWidth, frameHeight);
    x = x + frameWidth;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="592" endline="594">
{
    ((JInternalFrame) allFrames [frameIdx]).setMaximum (false);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="596" endline="598">
{
    e.printStackTrace ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="612" endline="617">
{
    setMinimumSize (d);
    setMaximumSize (d);
    setPreferredSize (d);
    setBounds (0, 0, d.width, d.height);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="624" endline="626">
{
    setAllSize (new Dimension (width, height));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="629" endline="631">
{
    if (getParent () != null && isVisible ()) manager.resizeDesktop ();

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="634" endline="636">
{
    myDrawApplication = newDrawApplication;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="639" endline="641">
{
    return myDrawApplication;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="653" endline="655">
{
    this.desktop = newDesktop;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="658" endline="661">
{
    super.endResizingFrame (f);
    resizeDesktop ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="664" endline="667">
{
    super.endDraggingFrame (f);
    resizeDesktop ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="670" endline="688">
{
    JScrollPane scrollPane = getScrollPane ();
    Insets scrollInsets = getScrollPaneInsets ();
    if (scrollPane != null) {
        Dimension d = scrollPane.getVisibleRect ().getSize ();
        if (scrollPane.getBorder () != null) {
            d.setSize (d.getWidth () - scrollInsets.left - scrollInsets.right, d.getHeight () - scrollInsets.top - scrollInsets.bottom);
        }

        d.setSize (d.getWidth () - 20, d.getHeight () - 20);
        desktop.setAllSize (d);
        scrollPane.invalidate ();
        scrollPane.validate ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="675" endline="687">
{
    Dimension d = scrollPane.getVisibleRect ().getSize ();
    if (scrollPane.getBorder () != null) {
        d.setSize (d.getWidth () - scrollInsets.left - scrollInsets.right, d.getHeight () - scrollInsets.top - scrollInsets.bottom);
    }

    d.setSize (d.getWidth () - 20, d.getHeight () - 20);
    desktop.setAllSize (d);
    scrollPane.invalidate ();
    scrollPane.validate ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="678" endline="681">
{
    d.setSize (d.getWidth () - scrollInsets.left - scrollInsets.right, d.getHeight () - scrollInsets.top - scrollInsets.bottom);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="691" endline="701">
{
    JScrollPane scrollPane = getScrollPane ();
    if ((scrollPane == null) || (getScrollPane ().getBorder () == null)) {
        return new Insets (0, 0, 0, 0);
    }
    else {
        return getScrollPane ().getBorder ().getBorderInsets (scrollPane);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="694" endline="696">
{
    return new Insets (0, 0, 0, 0);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="698" endline="700">
{
    return getScrollPane ().getBorder ().getBorderInsets (scrollPane);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="704" endline="712">
{
    if (desktop.getParent () instanceof JViewport) {
        JViewport viewPort = (JViewport) desktop.getParent ();
        if (viewPort.getParent () instanceof JScrollPane) return (JScrollPane) viewPort.getParent ();

    }

    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="706" endline="710">
{
    JViewport viewPort = (JViewport) desktop.getParent ();
    if (viewPort.getParent () instanceof JScrollPane) return (JScrollPane) viewPort.getParent ();

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="715" endline="754">
{
    int x = 0;
    int y = 0;
    JScrollPane scrollPane = getScrollPane ();
    Insets scrollInsets = getScrollPaneInsets ();
    if (scrollPane != null) {
        JInternalFrame allFrames [] = desktop.getAllFrames ();
        for (int i = 0;
        i < allFrames.length; i ++) {
            if (allFrames [i].getX () + allFrames [i].getWidth () > x) {
                x = allFrames [i].getX () + allFrames [i].getWidth ();
            }

            if (allFrames [i].getY () + allFrames [i].getHeight () > y) {
                y = allFrames [i].getY () + allFrames [i].getHeight ();
            }

        }

        Dimension d = scrollPane.getVisibleRect ().getSize ();
        if (scrollPane.getBorder () != null) {
            d.setSize (d.getWidth () - scrollInsets.left - scrollInsets.right, d.getHeight () - scrollInsets.top - scrollInsets.bottom);
        }

        if (x <= d.getWidth ()) {
            x = ((int) d.getWidth ()) - 20;
        }

        if (y <= d.getHeight ()) {
            y = ((int) d.getHeight ()) - 20;
        }

        desktop.setAllSize (x, y);
        scrollPane.invalidate ();
        scrollPane.validate ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="722" endline="753">
{
    JInternalFrame allFrames [] = desktop.getAllFrames ();
    for (int i = 0;
    i < allFrames.length; i ++) {
        if (allFrames [i].getX () + allFrames [i].getWidth () > x) {
            x = allFrames [i].getX () + allFrames [i].getWidth ();
        }

        if (allFrames [i].getY () + allFrames [i].getHeight () > y) {
            y = allFrames [i].getY () + allFrames [i].getHeight ();
        }

    }

    Dimension d = scrollPane.getVisibleRect ().getSize ();
    if (scrollPane.getBorder () != null) {
        d.setSize (d.getWidth () - scrollInsets.left - scrollInsets.right, d.getHeight () - scrollInsets.top - scrollInsets.bottom);
    }

    if (x <= d.getWidth ()) {
        x = ((int) d.getWidth ()) - 20;
    }

    if (y <= d.getHeight ()) {
        y = ((int) d.getHeight ()) - 20;
    }

    desktop.setAllSize (x, y);
    scrollPane.invalidate ();
    scrollPane.validate ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="725" endline="734">
{
    if (allFrames [i].getX () + allFrames [i].getWidth () > x) {
        x = allFrames [i].getX () + allFrames [i].getWidth ();
    }

    if (allFrames [i].getY () + allFrames [i].getHeight () > y) {
        y = allFrames [i].getY () + allFrames [i].getHeight ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="727" endline="729">
{
    x = allFrames [i].getX () + allFrames [i].getWidth ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="731" endline="733">
{
    y = allFrames [i].getY () + allFrames [i].getHeight ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="737" endline="740">
{
    d.setSize (d.getWidth () - scrollInsets.left - scrollInsets.right, d.getHeight () - scrollInsets.top - scrollInsets.bottom);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="743" endline="745">
{
    x = ((int) d.getWidth ()) - 20;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDIDesktopPane.java" startline="747" endline="749">
{
    y = ((int) d.getHeight ()) - 20;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDI_DrawApplication.java" startline="38" endline="40">
{
    this ("JHotDraw");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDI_DrawApplication.java" startline="46" endline="48">
{
    super (title);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDI_DrawApplication.java" startline="57" endline="59">
{
    return new MDI_DrawApplication ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDI_DrawApplication.java" startline="68" endline="73">
{
    super.createTools (palette);
    Tool tool = new DragNDropTool (this);
    ToolButton tb = createToolButton (IMAGES + "SEL", "Drag N Drop Tool", tool);
    palette.add (tb);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDI_DrawApplication.java" startline="79" endline="81">
{
    newWindow (createDrawing ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDI_DrawApplication.java" startline="88" endline="92">
{
    DrawingView newView = createDrawingView (newDrawing);
    getDesktop ().addToDesktop (newView, Desktop.PRIMARY);
    toolDone ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDI_DrawApplication.java" startline="105" endline="107">
{
    return NullDrawingView.getManagedDrawingView (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDI_DrawApplication.java" startline="114" endline="132">
{
    if (! view ().isInteractive ()) {
        return;
    }

    newWindow (view ().drawing ());
    String copyTitle = getDrawingTitle ();
    if (copyTitle != null) {
        setDrawingTitle (copyTitle);
    }
    else {
        setDrawingTitle (getDefaultDrawingTitle ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDI_DrawApplication.java" startline="116" endline="118">
{
    return;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDI_DrawApplication.java" startline="125" endline="127">
{
    setDrawingTitle (copyTitle);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDI_DrawApplication.java" startline="129" endline="131">
{
    setDrawingTitle (getDefaultDrawingTitle ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDI_DrawApplication.java" startline="138" endline="140">
{
    return new MDIDesktopPane (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDI_DrawApplication.java" startline="146" endline="148">
{
    return getDesktop ().getAllFromDesktop (Desktop.PRIMARY);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDI_DrawApplication.java" startline="151" endline="153">
{
    return super.getDefaultDrawingTitle () + views ().length;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MDI_DrawApplication.java" startline="159" endline="161">
{
    getDesktop ().updateTitle (drawingTitle);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MiniMapView.java" startline="44" endline="53">
{
    m_subjectListener = new SubjectListener ();
    setSubject (subject);
    setMappedDrawingView (newMappedDrawingView);
    myDrawingChangeListener = new MappedDrawingChangeListener ();
    getMappedDrawingView ().drawing ().addDrawingChangeListener (myDrawingChangeListener);
    MouseListener ml = new MouseListener ();
    addMouseListener (new MouseListener ());
    addMouseMotionListener (ml);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MiniMapView.java" startline="56" endline="58">
{
    myMappedDrawingView = newMappedDrawingView;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MiniMapView.java" startline="61" endline="63">
{
    return myMappedDrawingView;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MiniMapView.java" startline="67" endline="80">
{
    if (m_subject != null) {
        m_subject.getViewport ().removeChangeListener (m_subjectListener);
    }

    m_subject = subject;
    if (m_subject != null) {
        m_subject.getViewport ().addChangeListener (m_subjectListener);
    }

    repaint ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MiniMapView.java" startline="69" endline="71">
{
    m_subject.getViewport ().removeChangeListener (m_subjectListener);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MiniMapView.java" startline="75" endline="77">
{
    m_subject.getViewport ().addChangeListener (m_subjectListener);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MiniMapView.java" startline="83" endline="85">
{
    return m_subject;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MiniMapView.java" startline="88" endline="90">
{
    return m_viewBoxColor;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MiniMapView.java" startline="93" endline="96">
{
    m_viewBoxColor = c;
    repaint ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MiniMapView.java" startline="102" endline="104">
{
    return (Component) getMappedDrawingView ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MiniMapView.java" startline="108" endline="120">
{
    Graphics2D g2d = (Graphics2D) g;
    Component mappedComponent = getMappedComponent ();
    AffineTransform at = getViewToMiniMapTransform (mappedComponent);
    g2d.transform (at);
    getMappedDrawingView ().drawAll (g2d);
    drawViewRectangle (g2d, getViewRectangle ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MiniMapView.java" startline="124" endline="131">
{
    AffineTransform at = new AffineTransform ();
    at.setToIdentity ();
    g2d.setTransform (at);
    g2d.setColor (m_viewBoxColor);
    g2d.draw (viewPortRectangle);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MiniMapView.java" startline="134" endline="141">
{
    double scaleX = ((double) getWidth ()) / ((double) mappedComponent.getWidth ());
    double scaleY = ((double) getHeight ()) / ((double) mappedComponent.getHeight ());
    AffineTransform at = getInverseSubjectTransform ();
    at.concatenate (AffineTransform.getScaleInstance (scaleX, scaleY));
    return at;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MiniMapView.java" startline="147" endline="151">
{
    AffineTransform at = new AffineTransform ();
    at.setToIdentity ();
    return at;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MiniMapView.java" startline="157" endline="170">
{
    Rectangle visiblePortion = m_subject.getViewportBorderBounds ();
    Point upperLeftViewPos = m_subject.getViewport ().getViewPosition ();
    double [] srcRecCorners = new double [4];
    double [] dstRecCorners = new double [4];
    srcRecCorners [0] = upperLeftViewPos.x + visiblePortion.getX ();
    srcRecCorners [1] = upperLeftViewPos.y + visiblePortion.getY ();
    srcRecCorners [2] = upperLeftViewPos.x + visiblePortion.getX () + visiblePortion.getWidth ();
    srcRecCorners [3] = upperLeftViewPos.y + visiblePortion.getY () + visiblePortion.getHeight ();
    getViewToMiniMapTransform (getMappedComponent ()).transform (srcRecCorners, 0, dstRecCorners, 0, srcRecCorners.length / 2);
    return new Rectangle ((int) dstRecCorners [0], (int) dstRecCorners [1], (int) (dstRecCorners [2] - dstRecCorners [0]), (int) (dstRecCorners [3] - dstRecCorners [1]));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MiniMapView.java" startline="178" endline="206">
{
    AffineTransform at = null;
    try {
        at = getViewToMiniMapTransform (getMappedComponent ()).createInverse ();
    }
    catch (NoninvertibleTransformException nite) {
        nite.printStackTrace ();
        return;
    }

    double [] srcPoints = new double [2];
    double [] destPoints = new double [2];
    srcPoints [0] = upperLeftX;
    srcPoints [1] = upperLeftY;
    at.transform (srcPoints, 0, destPoints, 0, 1);
    if (destPoints [0] < 0) {
        destPoints [0] = 0;
    }

    if (destPoints [1] < 0) {
        destPoints [1] = 0;
    }

    m_subject.getViewport ().setViewPosition (new Point ((int) destPoints [0], (int) destPoints [1]));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MiniMapView.java" startline="181" endline="183">
{
    at = getViewToMiniMapTransform (getMappedComponent ()).createInverse ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MiniMapView.java" startline="185" endline="188">
{
    nite.printStackTrace ();
    return;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MiniMapView.java" startline="197" endline="199">
{
    destPoints [0] = 0;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MiniMapView.java" startline="201" endline="203">
{
    destPoints [1] = 0;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MiniMapView.java" startline="209" endline="215">
{
    int [] upperLeft = new int [2];
    Rectangle oldRectangle = getViewRectangle ();
    upperLeft [0] = centerX - oldRectangle.width / 2;
    upperLeft [1] = centerY - oldRectangle.height / 2;
    return upperLeft;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MiniMapView.java" startline="221" endline="224">
{
    int [] rectangleUpperLeft = getUpperLeftPointsFromCenter (e.getX (), e.getY ());
    scrollSubjectTo (rectangleUpperLeft [0], rectangleUpperLeft [1]);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MiniMapView.java" startline="227" endline="230">
{
    int [] rectangleUpperLeft = getUpperLeftPointsFromCenter (e.getX (), e.getY ());
    scrollSubjectTo (rectangleUpperLeft [0], rectangleUpperLeft [1]);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MiniMapView.java" startline="233" endline="235">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MiniMapView.java" startline="241" endline="243">
{
    repaint ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MiniMapView.java" startline="252" endline="254">
{
    repaint ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MiniMapView.java" startline="260" endline="262">
{
    repaint ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/MiniMapView.java" startline="268" endline="269">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/NestedCreationTool.java" startline="30" endline="32">
{
    super (newDrawingEditor, prototype);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/NestedCreationTool.java" startline="35" endline="54">
{
    Figure figure = drawing ().findFigure (e.getX (), e.getY ());
    if (figure != null) {
        figure = figure.getDecoratedFigure ();
        if (figure instanceof CompositeFigure) {
            setContainerFigure ((CompositeFigure) figure);
            super.mouseDown (e, x, y);
        }
        else {
            toolDone ();
        }

    }
    else {
        toolDone ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/NestedCreationTool.java" startline="38" endline="49">
{
    figure = figure.getDecoratedFigure ();
    if (figure instanceof CompositeFigure) {
        setContainerFigure ((CompositeFigure) figure);
        super.mouseDown (e, x, y);
    }
    else {
        toolDone ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/NestedCreationTool.java" startline="41" endline="44">
{
    setContainerFigure ((CompositeFigure) figure);
    super.mouseDown (e, x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/NestedCreationTool.java" startline="46" endline="48">
{
    toolDone ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/NestedCreationTool.java" startline="51" endline="53">
{
    toolDone ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/NestedCreationTool.java" startline="57" endline="68">
{
    if ((getContainerFigure () != null) && ! getContainerFigure ().containsPoint (e.getX (), e.getY ())) {
        toolDone ();
    }
    else {
        super.mouseMove (e, x, y);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/NestedCreationTool.java" startline="59" endline="63">
{
    toolDone ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/NestedCreationTool.java" startline="65" endline="67">
{
    super.mouseMove (e, x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/NestedCreationTool.java" startline="71" endline="78">
{
    if ((getContainerFigure () != null) && (getCreatedFigure () != null) && getContainerFigure ().containsPoint (e.getX (), e.getY ())) {
        getContainerFigure ().add (getCreatedFigure ());
    }

    toolDone ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/NestedCreationTool.java" startline="74" endline="76">
{
    getContainerFigure ().add (getCreatedFigure ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/NestedCreationTool.java" startline="81" endline="83">
{
    myContainerFigure = newContainerFigure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/NestedCreationTool.java" startline="86" endline="88">
{
    return myContainerFigure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/NestedCreationTool.java" startline="91" endline="96">
{
    setCreatedFigure (null);
    setAddedFigure (null);
    setContainerFigure (null);
    editor ().toolDone ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="47" endline="50">
{
    super ();
    setInternalPolygon (new Polygon ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="53" endline="56">
{
    this ();
    getInternalPolygon ().addPoint (x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="59" endline="61">
{
    setInternalPolygon (new Polygon (p.xpoints, p.ypoints, p.npoints));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="64" endline="66">
{
    return bounds (getInternalPolygon ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="70" endline="73">
{
    return ((pointCount () < 3) || ((size ().width < TOO_CLOSE) && (size ().height < TOO_CLOSE)));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="76" endline="84">
{
    List handles = CollectionsFactory.current ().createList (pointCount ());
    for (int i = 0;
    i < pointCount (); i ++) {
        handles.add (new PolygonHandle (this, locator (i), i));
    }

    handles.add (new PolygonScaleHandle (this));
    return new HandleEnumerator (handles);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="79" endline="81">
{
    handles.add (new PolygonHandle (this, locator (i), i));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="88" endline="96">
{
    Rectangle r = displayBox ();
    int dx = origin.x - r.x;
    int dy = origin.y - r.y;
    getInternalPolygon ().translate (dx, dy);
    r = displayBox ();
    Point oldCorner = new Point (r.x + r.width, r.y + r.height);
    scaleRotate (oldCorner, getInternalPolygon (), corner);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="102" endline="104">
{
    return new Polygon (fPoly.xpoints, fPoly.ypoints, fPoly.npoints);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="107" endline="109">
{
    fPoly = newPolygon;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="112" endline="114">
{
    return fPoly;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="117" endline="119">
{
    return center (getInternalPolygon ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="122" endline="130">
{
    List pts = CollectionsFactory.current ().createList (pointCount ());
    for (int i = 0;
    i < pointCount (); ++ i) {
        pts.add (new Point (getInternalPolygon ().xpoints [i], getInternalPolygon ().ypoints [i]));
    }

    return pts.iterator ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="125" endline="128">
{
    pts.add (new Point (getInternalPolygon ().xpoints [i], getInternalPolygon ().ypoints [i]));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="133" endline="135">
{
    return getInternalPolygon ().npoints;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="138" endline="140">
{
    getInternalPolygon ().translate (dx, dy);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="143" endline="145">
{
    g.fillPolygon (getInternalPolygon ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="148" endline="150">
{
    g.drawPolygon (getInternalPolygon ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="153" endline="155">
{
    return getInternalPolygon ().contains (x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="158" endline="160">
{
    return new ChopPolygonConnector (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="166" endline="169">
{
    getInternalPolygon ().addPoint (x, y);
    changed ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="176" endline="181">
{
    willChange ();
    getInternalPolygon ().xpoints [i] = p.x;
    getInternalPolygon ().ypoints [i] = p.y;
    changed ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="187" endline="207">
{
    willChange ();
    int n = pointCount () + 1;
    int [] xs = new int [n];
    int [] ys = new int [n];
    for (int j = 0;
    j < i; ++ j) {
        xs [j] = getInternalPolygon ().xpoints [j];
        ys [j] = getInternalPolygon ().ypoints [j];
    }

    xs [i] = p.x;
    ys [i] = p.y;
    for (int j = i;
    j < pointCount (); ++ j) {
        xs [j + 1] = getInternalPolygon ().xpoints [j];
        ys [j + 1] = getInternalPolygon ().ypoints [j];
    }

    setInternalPolygon (new Polygon (xs, ys, n));
    changed ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="193" endline="196">
{
    xs [j] = getInternalPolygon ().xpoints [j];
    ys [j] = getInternalPolygon ().ypoints [j];
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="200" endline="203">
{
    xs [j + 1] = getInternalPolygon ().xpoints [j];
    ys [j + 1] = getInternalPolygon ().ypoints [j];
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="210" endline="227">
{
    willChange ();
    int n = pointCount () - 1;
    int [] xs = new int [n];
    int [] ys = new int [n];
    for (int j = 0;
    j < i; ++ j) {
        xs [j] = getInternalPolygon ().xpoints [j];
        ys [j] = getInternalPolygon ().ypoints [j];
    }

    for (int j = i;
    j < n; ++ j) {
        xs [j] = getInternalPolygon ().xpoints [j + 1];
        ys [j] = getInternalPolygon ().ypoints [j + 1];
    }

    setInternalPolygon (new Polygon (xs, ys, n));
    changed ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="216" endline="219">
{
    xs [j] = getInternalPolygon ().xpoints [j];
    ys [j] = getInternalPolygon ().ypoints [j];
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="221" endline="224">
{
    xs [j] = getInternalPolygon ().xpoints [j + 1];
    ys [j] = getInternalPolygon ().ypoints [j + 1];
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="233" endline="265">
{
    willChange ();
    Point ctr = center (originalPolygon);
    double anchorLen = Geom.length (ctr.x, ctr.y, anchor.x, anchor.y);
    if (anchorLen > 0.0) {
        double newLen = Geom.length (ctr.x, ctr.y, p.x, p.y);
        double ratio = newLen / anchorLen;
        double anchorAngle = Math.atan2 (anchor.y - ctr.y, anchor.x - ctr.x);
        double newAngle = Math.atan2 (p.y - ctr.y, p.x - ctr.x);
        double rotation = newAngle - anchorAngle;
        int n = originalPolygon.npoints;
        int [] xs = new int [n];
        int [] ys = new int [n];
        for (int i = 0;
        i < n; ++ i) {
            int x = originalPolygon.xpoints [i];
            int y = originalPolygon.ypoints [i];
            double l = Geom.length (ctr.x, ctr.y, x, y) * ratio;
            double a = Math.atan2 (y - ctr.y, x - ctr.x) + rotation;
            xs [i] = (int) (ctr.x + l * Math.cos (a) + 0.5);
            ys [i] = (int) (ctr.y + l * Math.sin (a) + 0.5);
        }

        setInternalPolygon (new Polygon (xs, ys, n));
    }

    changed ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="241" endline="263">
{
    double newLen = Geom.length (ctr.x, ctr.y, p.x, p.y);
    double ratio = newLen / anchorLen;
    double anchorAngle = Math.atan2 (anchor.y - ctr.y, anchor.x - ctr.x);
    double newAngle = Math.atan2 (p.y - ctr.y, p.x - ctr.x);
    double rotation = newAngle - anchorAngle;
    int n = originalPolygon.npoints;
    int [] xs = new int [n];
    int [] ys = new int [n];
    for (int i = 0;
    i < n; ++ i) {
        int x = originalPolygon.xpoints [i];
        int y = originalPolygon.ypoints [i];
        double l = Geom.length (ctr.x, ctr.y, x, y) * ratio;
        double a = Math.atan2 (y - ctr.y, x - ctr.x) + rotation;
        xs [i] = (int) (ctr.x + l * Math.cos (a) + 0.5);
        ys [i] = (int) (ctr.y + l * Math.sin (a) + 0.5);
    }

    setInternalPolygon (new Polygon (xs, ys, n));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="254" endline="261">
{
    int x = originalPolygon.xpoints [i];
    int y = originalPolygon.ypoints [i];
    double l = Geom.length (ctr.x, ctr.y, x, y) * ratio;
    double a = Math.atan2 (y - ctr.y, x - ctr.x) + rotation;
    xs [i] = (int) (ctr.x + l * Math.cos (a) + 0.5);
    ys [i] = (int) (ctr.y + l * Math.sin (a) + 0.5);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="272" endline="313">
{
    willChange ();
    boolean removed = false;
    int n = pointCount ();
    do {
        removed = false;
        int i = 0;
        while (i < n && n >= 3) {
            int nxt = (i + 1) % n;
            int prv = (i - 1 + n) % n;
            if ((Geom.distanceFromLine (getInternalPolygon ().xpoints [prv], getInternalPolygon ().ypoints [prv], getInternalPolygon ().xpoints [nxt], getInternalPolygon ().ypoints [nxt], getInternalPolygon ().xpoints [i], getInternalPolygon ().ypoints [i]) < TOO_CLOSE)) {
                removed = true;
                -- n;
                for (int j = i;
                j < n; ++ j) {
                    getInternalPolygon ().xpoints [j] = getInternalPolygon ().xpoints [j + 1];
                    getInternalPolygon ().ypoints [j] = getInternalPolygon ().ypoints [j + 1];
                }

            }
            else {
                ++ i;
            }

        }

    }
    while (removed);
    if (n != pointCount ()) {
        setInternalPolygon (new Polygon (getInternalPolygon ().xpoints, getInternalPolygon ().ypoints, n));
    }

    changed ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="277" endline="305">
{
    removed = false;
    int i = 0;
    while (i < n && n >= 3) {
        int nxt = (i + 1) % n;
        int prv = (i - 1 + n) % n;
        if ((Geom.distanceFromLine (getInternalPolygon ().xpoints [prv], getInternalPolygon ().ypoints [prv], getInternalPolygon ().xpoints [nxt], getInternalPolygon ().ypoints [nxt], getInternalPolygon ().xpoints [i], getInternalPolygon ().ypoints [i]) < TOO_CLOSE)) {
            removed = true;
            -- n;
            for (int j = i;
            j < n; ++ j) {
                getInternalPolygon ().xpoints [j] = getInternalPolygon ().xpoints [j + 1];
                getInternalPolygon ().ypoints [j] = getInternalPolygon ().ypoints [j + 1];
            }

        }
        else {
            ++ i;
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="281" endline="304">
{
    int nxt = (i + 1) % n;
    int prv = (i - 1 + n) % n;
    if ((Geom.distanceFromLine (getInternalPolygon ().xpoints [prv], getInternalPolygon ().ypoints [prv], getInternalPolygon ().xpoints [nxt], getInternalPolygon ().ypoints [nxt], getInternalPolygon ().xpoints [i], getInternalPolygon ().ypoints [i]) < TOO_CLOSE)) {
        removed = true;
        -- n;
        for (int j = i;
        j < n; ++ j) {
            getInternalPolygon ().xpoints [j] = getInternalPolygon ().xpoints [j + 1];
            getInternalPolygon ().ypoints [j] = getInternalPolygon ().ypoints [j + 1];
        }

    }
    else {
        ++ i;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="291" endline="299">
{
    removed = true;
    -- n;
    for (int j = i;
    j < n; ++ j) {
        getInternalPolygon ().xpoints [j] = getInternalPolygon ().xpoints [j + 1];
        getInternalPolygon ().ypoints [j] = getInternalPolygon ().ypoints [j + 1];
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="295" endline="298">
{
    getInternalPolygon ().xpoints [j] = getInternalPolygon ().xpoints [j + 1];
    getInternalPolygon ().ypoints [j] = getInternalPolygon ().ypoints [j + 1];
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="301" endline="303">
{
    ++ i;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="308" endline="311">
{
    setInternalPolygon (new Polygon (getInternalPolygon ().xpoints, getInternalPolygon ().ypoints, n));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="320" endline="331">
{
    int i = findSegment (x, y);
    if (i != - 1) {
        insertPointAt (new Point (x, y), i + 1);
        return i + 1;
    }
    else {
        return - 1;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="323" endline="326">
{
    insertPointAt (new Point (x, y), i + 1);
    return i + 1;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="328" endline="330">
{
    return - 1;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="334" endline="337">
{
    return new Point (getInternalPolygon ().xpoints [i], getInternalPolygon ().ypoints [i]);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="343" endline="361">
{
    Point ctr = center ();
    int outer = 0;
    long dist = 0;
    for (int i = 0;
    i < pointCount (); ++ i) {
        long d = Geom.length2 (ctr.x, ctr.y, getInternalPolygon ().xpoints [i], getInternalPolygon ().ypoints [i]);
        if (d > dist) {
            dist = d;
            outer = i;
        }

    }

    return new Point (getInternalPolygon ().xpoints [outer], getInternalPolygon ().ypoints [outer]);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="349" endline="358">
{
    long d = Geom.length2 (ctr.x, ctr.y, getInternalPolygon ().xpoints [i], getInternalPolygon ().ypoints [i]);
    if (d > dist) {
        dist = d;
        outer = i;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="354" endline="357">
{
    dist = d;
    outer = i;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="369" endline="387">
{
    double dist = TOO_CLOSE;
    int best = - 1;
    for (int i = 0;
    i < pointCount (); i ++) {
        int n = (i + 1) % pointCount ();
        double d = Geom.distanceFromLine (getInternalPolygon ().xpoints [i], getInternalPolygon ().ypoints [i], getInternalPolygon ().xpoints [n], getInternalPolygon ().ypoints [n], x, y);
        if (d < dist) {
            dist = d;
            best = i;
        }

    }

    return best;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="374" endline="385">
{
    int n = (i + 1) % pointCount ();
    double d = Geom.distanceFromLine (getInternalPolygon ().xpoints [i], getInternalPolygon ().ypoints [i], getInternalPolygon ().xpoints [n], getInternalPolygon ().ypoints [n], x, y);
    if (d < dist) {
        dist = d;
        best = i;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="381" endline="384">
{
    dist = d;
    best = i;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="390" endline="392">
{
    return chop (getInternalPolygon (), p);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="395" endline="403">
{
    super.write (dw);
    dw.writeInt (pointCount ());
    for (int i = 0;
    i < pointCount (); ++ i) {
        dw.writeInt (getInternalPolygon ().xpoints [i]);
        dw.writeInt (getInternalPolygon ().ypoints [i]);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="399" endline="402">
{
    dw.writeInt (getInternalPolygon ().xpoints [i]);
    dw.writeInt (getInternalPolygon ().ypoints [i]);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="406" endline="417">
{
    super.read (dr);
    int size = dr.readInt ();
    int [] xs = new int [size];
    int [] ys = new int [size];
    for (int i = 0;
    i < size; i ++) {
        xs [i] = dr.readInt ();
        ys [i] = dr.readInt ();
    }

    setInternalPolygon (new Polygon (xs, ys, size));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="412" endline="415">
{
    xs [i] = dr.readInt ();
    ys [i] = dr.readInt ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="423" endline="437">
{
    return new AbstractLocator () {

        public Point locate (Figure owner) {
            PolygonFigure plf = (PolygonFigure) owner;
            if (pointIndex < plf.pointCount ()) {
                return ((PolygonFigure) owner).pointAt (pointIndex);
            }

            return new Point (- 1, - 1);
        }

    }

    ;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="427" endline="435">
{
    PolygonFigure plf = (PolygonFigure) owner;
    if (pointIndex < plf.pointCount ()) {
        return ((PolygonFigure) owner).pointAt (pointIndex);
    }

    return new Point (- 1, - 1);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="431" endline="433">
{
    return ((PolygonFigure) owner).pointAt (pointIndex);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="443" endline="472">
{
    int minx = Integer.MAX_VALUE;
    int miny = Integer.MAX_VALUE;
    int maxx = Integer.MIN_VALUE;
    int maxy = Integer.MIN_VALUE;
    int n = p.npoints;
    for (int i = 0;
    i < n; i ++) {
        int x = p.xpoints [i];
        int y = p.ypoints [i];
        if (x > maxx) {
            maxx = x;
        }

        if (x < minx) {
            minx = x;
        }

        if (y > maxy) {
            maxy = y;
        }

        if (y < miny) {
            miny = y;
        }

    }

    return new Rectangle (minx, miny, maxx - minx, maxy - miny);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="450" endline="469">
{
    int x = p.xpoints [i];
    int y = p.ypoints [i];
    if (x > maxx) {
        maxx = x;
    }

    if (x < minx) {
        minx = x;
    }

    if (y > maxy) {
        maxy = y;
    }

    if (y < miny) {
        miny = y;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="454" endline="456">
{
    maxx = x;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="458" endline="460">
{
    minx = x;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="462" endline="464">
{
    maxy = y;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="466" endline="468">
{
    miny = y;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="475" endline="486">
{
    long sx = 0;
    long sy = 0;
    int n = p.npoints;
    for (int i = 0;
    i < n; i ++) {
        sx += p.xpoints [i];
        sy += p.ypoints [i];
    }

    return new Point ((int) (sx / n), (int) (sy / n));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="480" endline="483">
{
    sx += p.xpoints [i];
    sy += p.ypoints [i];
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="489" endline="535">
{
    Point ctr = center (poly);
    int cx = - 1;
    int cy = - 1;
    long len = Long.MAX_VALUE;
    for (int i = 0;
    i < poly.npoints; ++ i) {
        int nxt = (i + 1) % poly.npoints;
        Point chop = Geom.intersect (poly.xpoints [i], poly.ypoints [i], poly.xpoints [nxt], poly.ypoints [nxt], p.x, p.y, ctr.x, ctr.y);
        if (chop != null) {
            long cl = Geom.length2 (chop.x, chop.y, p.x, p.y);
            if (cl < len) {
                len = cl;
                cx = chop.x;
                cy = chop.y;
            }

        }

    }

    {
        for (int i = 0;
        i < poly.npoints; ++ i) {
            long l = Geom.length2 (poly.xpoints [i], poly.ypoints [i], p.x, p.y);
            if (l < len) {
                len = l;
                cx = poly.xpoints [i];
                cy = poly.ypoints [i];
            }

        }

    }
    return new Point (cx, cy);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="498" endline="518">
{
    int nxt = (i + 1) % poly.npoints;
    Point chop = Geom.intersect (poly.xpoints [i], poly.ypoints [i], poly.xpoints [nxt], poly.ypoints [nxt], p.x, p.y, ctr.x, ctr.y);
    if (chop != null) {
        long cl = Geom.length2 (chop.x, chop.y, p.x, p.y);
        if (cl < len) {
            len = cl;
            cx = chop.x;
            cy = chop.y;
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="509" endline="517">
{
    long cl = Geom.length2 (chop.x, chop.y, p.x, p.y);
    if (cl < len) {
        len = cl;
        cx = chop.x;
        cy = chop.y;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="512" endline="516">
{
    len = cl;
    cx = chop.x;
    cy = chop.y;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="521" endline="533">
{
    for (int i = 0;
    i < poly.npoints; ++ i) {
        long l = Geom.length2 (poly.xpoints [i], poly.ypoints [i], p.x, p.y);
        if (l < len) {
            len = l;
            cx = poly.xpoints [i];
            cy = poly.ypoints [i];
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="524" endline="532">
{
    long l = Geom.length2 (poly.xpoints [i], poly.ypoints [i], p.x, p.y);
    if (l < len) {
        len = l;
        cx = poly.xpoints [i];
        cy = poly.ypoints [i];
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonFigure.java" startline="527" endline="531">
{
    len = l;
    cx = poly.xpoints [i];
    cy = poly.ypoints [i];
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonHandle.java" startline="40" endline="44">
{
    super (owner);
    fLocator = l;
    fIndex = index;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonHandle.java" startline="47" endline="51">
{
    setUndoActivity (createUndoActivity (view, fIndex));
    getUndoActivity ().setAffectedFigures (new SingleFigureEnumerator (owner ()));
    ((PolygonHandle.UndoActivity) getUndoActivity ()).setOldPoint (new Point (x, y));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonHandle.java" startline="54" endline="57">
{
    int index = ((PolyLineHandle.UndoActivity) getUndoActivity ()).getPointIndex ();
    myOwner ().setPointAt (new Point (x, y), index);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonHandle.java" startline="60" endline="66">
{
    myOwner ().smoothPoints ();
    if ((x == anchorX) && (y == anchorY)) {
        setUndoActivity (null);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonHandle.java" startline="63" endline="65">
{
    setUndoActivity (null);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonHandle.java" startline="69" endline="71">
{
    return fLocator.locate (owner ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonHandle.java" startline="74" endline="76">
{
    return (PolygonFigure) owner ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonHandle.java" startline="82" endline="84">
{
    return new PolygonHandle.UndoActivity (newView, newPointIndex);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonHandle.java" startline="90" endline="92">
{
    super (newView, newPointIndex);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonHandle.java" startline="95" endline="109">
{
    FigureEnumeration fe = getAffectedFigures ();
    if (! fe.hasNextFigure ()) {
        return false;
    }

    PolygonFigure figure = (PolygonFigure) fe.nextFigure ();
    Point backupPoint = figure.pointAt (getPointIndex ());
    figure.setPointAt (getOldPoint (), getPointIndex ());
    figure.smoothPoints ();
    setOldPoint (backupPoint);
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonHandle.java" startline="98" endline="100">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonScaleHandle.java" startline="34" endline="36">
{
    super (owner);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonScaleHandle.java" startline="44" endline="50">
{
    fCurrent = new Point (x, y);
    PolygonScaleHandle.UndoActivity activity = (PolygonScaleHandle.UndoActivity) createUndoActivity (view);
    setUndoActivity (activity);
    activity.setAffectedFigures (new SingleFigureEnumerator (owner ()));
    activity.setPolygon (((PolygonFigure) (owner ())).getPolygon ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonScaleHandle.java" startline="60" endline="64">
{
    fCurrent = new Point (x, y);
    Polygon polygon = ((PolygonScaleHandle.UndoActivity) getUndoActivity ()).getPolygon ();
    ((PolygonFigure) (owner ())).scaleRotate (new Point (anchorX, anchorY), polygon, fCurrent);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonScaleHandle.java" startline="74" endline="82">
{
    ((PolygonFigure) (owner ())).smoothPoints ();
    if ((fCurrent.x == anchorX) && (fCurrent.y == anchorY)) {
        setUndoActivity (null);
    }

    fCurrent = null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonScaleHandle.java" startline="77" endline="80">
{
    setUndoActivity (null);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonScaleHandle.java" startline="85" endline="94">
{
    if (fCurrent == null) {
        return getOrigin ();
    }
    else {
        return fCurrent;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonScaleHandle.java" startline="87" endline="89">
{
    return getOrigin ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonScaleHandle.java" startline="91" endline="93">
{
    return fCurrent;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonScaleHandle.java" startline="97" endline="122">
{
    Point outer = ((PolygonFigure) (owner ())).outermostPoint ();
    Point ctr = ((PolygonFigure) (owner ())).center ();
    double len = Geom.length (outer.x, outer.y, ctr.x, ctr.y);
    if (len == 0) {
        return new Point (outer.x - HANDLESIZE / 2, outer.y + HANDLESIZE / 2);
    }

    double u = HANDLESIZE / len;
    if (u > 1.0) {
        return new Point ((outer.x * 3 + ctr.x) / 4, (outer.y * 3 + ctr.y) / 4);
    }
    else {
        return new Point ((int) (outer.x * (1.0 - u) + ctr.x * u), (int) (outer.y * (1.0 - u) + ctr.y * u));
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonScaleHandle.java" startline="108" endline="110">
{
    return new Point (outer.x - HANDLESIZE / 2, outer.y + HANDLESIZE / 2);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonScaleHandle.java" startline="114" endline="116">
{
    return new Point ((outer.x * 3 + ctr.x) / 4, (outer.y * 3 + ctr.y) / 4);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonScaleHandle.java" startline="118" endline="121">
{
    return new Point ((int) (outer.x * (1.0 - u) + ctr.x * u), (int) (outer.y * (1.0 - u) + ctr.y * u));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonScaleHandle.java" startline="125" endline="143">
{
    Rectangle r = displayBox ();
    g.setColor (Color.yellow);
    g.fillOval (r.x, r.y, r.width, r.height);
    g.setColor (Color.black);
    g.drawOval (r.x, r.y, r.width, r.height);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonScaleHandle.java" startline="149" endline="151">
{
    return new PolygonScaleHandle.UndoActivity (newView);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonScaleHandle.java" startline="158" endline="162">
{
    super (newView);
    setUndoable (true);
    setRedoable (true);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonScaleHandle.java" startline="165" endline="172">
{
    if (! super.undo ()) {
        return false;
    }

    return resetPolygon ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonScaleHandle.java" startline="167" endline="169">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonScaleHandle.java" startline="175" endline="183">
{
    if (! isRedoable ()) {
        return false;
    }

    return resetPolygon ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonScaleHandle.java" startline="178" endline="180">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonScaleHandle.java" startline="186" endline="199">
{
    FigureEnumeration fe = getAffectedFigures ();
    if (! fe.hasNextFigure ()) {
        return false;
    }

    PolygonFigure figure = (PolygonFigure) fe.nextFigure ();
    Polygon backupPolygon = figure.getPolygon ();
    figure.willChange ();
    figure.setInternalPolygon (getPolygon ());
    figure.changed ();
    setPolygon (backupPolygon);
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonScaleHandle.java" startline="189" endline="191">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonScaleHandle.java" startline="202" endline="204">
{
    myPolygon = newPolygon;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonScaleHandle.java" startline="207" endline="209">
{
    return myPolygon;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonTool.java" startline="40" endline="42">
{
    super (newDrawingEditor);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonTool.java" startline="45" endline="48">
{
    super.activate ();
    fPolygon = null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonTool.java" startline="51" endline="65">
{
    if (fPolygon != null) {
        fPolygon.smoothPoints ();
        if (fPolygon.pointCount () < 3 || fPolygon.size ().width < 4 || fPolygon.size ().height < 4) {
            getActiveView ().drawing ().remove (fPolygon);
            setUndoActivity (null);
        }

    }

    fPolygon = null;
    super.deactivate ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonTool.java" startline="53" endline="62">
{
    fPolygon.smoothPoints ();
    if (fPolygon.pointCount () < 3 || fPolygon.size ().width < 4 || fPolygon.size ().height < 4) {
        getActiveView ().drawing ().remove (fPolygon);
        setUndoActivity (null);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonTool.java" startline="57" endline="61">
{
    getActiveView ().drawing ().remove (fPolygon);
    setUndoActivity (null);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonTool.java" startline="68" endline="82">
{
    if (fPolygon == null) {
        fPolygon = new PolygonFigure (x, y);
        setAddedFigure (view ().add (fPolygon));
        fPolygon.addPoint (x, y);
    }
    else if (fLastX != x || fLastY != y) {
        fPolygon.addPoint (x, y);
    }

    fLastX = x;
    fLastY = y;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonTool.java" startline="70" endline="74">
{
    fPolygon = new PolygonFigure (x, y);
    setAddedFigure (view ().add (fPolygon));
    fPolygon.addPoint (x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonTool.java" startline="76" endline="78">
{
    fPolygon.addPoint (x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonTool.java" startline="85" endline="115">
{
    super.mouseDown (e, x, y);
    x = e.getX ();
    y = e.getY ();
    if (e.getClickCount () >= 2) {
        if (fPolygon != null) {
            fPolygon.smoothPoints ();
            setUndoActivity (createUndoActivity ());
            getUndoActivity ().setAffectedFigures (new SingleFigureEnumerator (getAddedFigure ()));
            editor ().toolDone ();
        }

        fPolygon = null;
    }
    else {
        addPoint (e.getX (), e.getY ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonTool.java" startline="92" endline="107">
{
    if (fPolygon != null) {
        fPolygon.smoothPoints ();
        setUndoActivity (createUndoActivity ());
        getUndoActivity ().setAffectedFigures (new SingleFigureEnumerator (getAddedFigure ()));
        editor ().toolDone ();
    }

    fPolygon = null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonTool.java" startline="94" endline="104">
{
    fPolygon.smoothPoints ();
    setUndoActivity (createUndoActivity ());
    getUndoActivity ().setAffectedFigures (new SingleFigureEnumerator (getAddedFigure ()));
    editor ().toolDone ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonTool.java" startline="109" endline="114">
{
    addPoint (e.getX (), e.getY ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonTool.java" startline="118" endline="130">
{
    if (e.getSource () == getActiveView ()) {
        if (fPolygon != null) {
            if (fPolygon.pointCount () > 1) {
                fPolygon.setPointAt (new Point (x, y), fPolygon.pointCount () - 1);
                getActiveView ().checkDamage ();
            }

        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonTool.java" startline="120" endline="129">
{
    if (fPolygon != null) {
        if (fPolygon.pointCount () > 1) {
            fPolygon.setPointAt (new Point (x, y), fPolygon.pointCount () - 1);
            getActiveView ().checkDamage ();
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonTool.java" startline="122" endline="128">
{
    if (fPolygon.pointCount () > 1) {
        fPolygon.setPointAt (new Point (x, y), fPolygon.pointCount () - 1);
        getActiveView ().checkDamage ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonTool.java" startline="124" endline="127">
{
    fPolygon.setPointAt (new Point (x, y), fPolygon.pointCount () - 1);
    getActiveView ().checkDamage ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonTool.java" startline="133" endline="138">
{
    x = e.getX ();
    y = e.getY ();
    addPoint (x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonTool.java" startline="141" endline="142">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonTool.java" startline="149" endline="151">
{
    return myAddedFigure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonTool.java" startline="154" endline="156">
{
    myAddedFigure = newAddedFigure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/PolygonTool.java" startline="162" endline="164">
{
    return new PasteCommand.UndoActivity (view ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SVGDrawApp.java" startline="18" endline="21">
{
    SVGDrawApp window = new SVGDrawApp ();
    window.open ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SVGDrawApp.java" startline="24" endline="26">
{
    super ("JHotDraw");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SVGDrawApp.java" startline="35" endline="37">
{
    return new SVGDrawApp ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SVGDrawApp.java" startline="47" endline="53">
{
    StorageFormatManager storageFormatManager = new StorageFormatManager ();
    SVGStorageFormat format = new SVGStorageFormat ();
    storageFormatManager.addStorageFormat (format);
    storageFormatManager.setDefaultStorageFormat (format);
    return storageFormatManager;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SVGStorageFormat.java" startline="47" endline="49">
{
    return "svg";
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SVGStorageFormat.java" startline="58" endline="60">
{
    return "Scalable Vector Graphics (svg)";
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SVGStorageFormat.java" startline="72" endline="94">
{
    DOMImplementation domImpl = GenericDOMImplementation.getDOMImplementation ();
    Document document = domImpl.createDocument (null, "svg", null);
    SVGGraphics2D svgGenerator = new SVGGraphics2D (document);
    saveDrawing.draw (svgGenerator);
    fileName = adjustFileName (fileName);
    FileOutputStream fos = new FileOutputStream (fileName);
    Writer out = new OutputStreamWriter (fos, "UTF-8");
    svgGenerator.stream (out, true);
    return fileName;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SVGStorageFormat.java" startline="100" endline="102">
{
    throw new IOException ("Not implemented");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SimpleLayouter.java" startline="42" endline="44">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SimpleLayouter.java" startline="47" endline="50">
{
    setLayoutable (newLayoutable);
    setInsets (new Insets (0, 0, 0, 0));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SimpleLayouter.java" startline="58" endline="60">
{
    return myLayoutable;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SimpleLayouter.java" startline="68" endline="70">
{
    myLayoutable = newLayoutable;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SimpleLayouter.java" startline="78" endline="80">
{
    myInsets = newInsets;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SimpleLayouter.java" startline="88" endline="90">
{
    return myInsets;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SimpleLayouter.java" startline="96" endline="100">
{
    SimpleLayouter newLayouter = new SimpleLayouter (newLayoutable);
    newLayouter.setInsets ((Insets) getInsets ().clone ());
    return newLayouter;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SimpleLayouter.java" startline="103" endline="115">
{
    Rectangle maxRect = new Rectangle (origin);
    maxRect.add (corner);
    FigureEnumeration fe = getLayoutable ().figures ();
    while (fe.hasNextFigure ()) {
        Figure currentFigure = fe.nextFigure ();
        maxRect.union (currentFigure.displayBox ());
    }

    maxRect.width += getInsets ().left + getInsets ().right;
    maxRect.height += getInsets ().top + getInsets ().bottom;
    return maxRect;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SimpleLayouter.java" startline="108" endline="111">
{
    Figure currentFigure = fe.nextFigure ();
    maxRect.union (currentFigure.displayBox ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SimpleLayouter.java" startline="118" endline="120">
{
    return calculateLayout (origin, corner);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SimpleLayouter.java" startline="126" endline="129">
{
    setLayoutable ((Layoutable) dr.readStorable ());
    setInsets (new Insets (dr.readInt (), dr.readInt (), dr.readInt (), dr.readInt ()));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SimpleLayouter.java" startline="135" endline="142">
{
    dw.writeStorable (getLayoutable ());
    Insets i = getInsets ();
    dw.writeInt (i.top);
    dw.writeInt (i.left);
    dw.writeInt (i.bottom);
    dw.writeInt (i.right);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SplitConnectionTool.java" startline="29" endline="31">
{
    super (newDrawingEditor, newPrototype);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SplitConnectionTool.java" startline="34" endline="84">
{
    setView ((DrawingView) e.getSource ());
    int ex = e.getX ();
    int ey = e.getY ();
    if (getTargetFigure () == null) {
        setTargetFigure (findConnectableFigure (ex, ey, drawing ()));
    }
    else {
        if (getAddedFigure () == null) {
            setConnection (createConnection ());
            setStartConnector (findConnector (ex, ey, getTargetFigure ()));
            getConnection ().connectStart (getStartConnector ());
            getConnection ().startPoint (ex, ey);
            setAddedFigure (view ().add (getConnection ()));
        }

        Figure c = findTarget (ex, ey, drawing ());
        if (c != null) {
            setEndConnector (findConnector (ex, ex, c));
            getConnection ().connectEnd (getEndConnector ());
            getConnection ().endPoint (ex, ey);
            setUndoActivity (createUndoActivity ());
            getUndoActivity ().setAffectedFigures (new SingleFigureEnumerator (getAddedFigure ()));
            getConnection ().updateConnection ();
            init ();
            editor ().toolDone ();
        }
        else {
            if (getEndConnector () == null) {
                Figure tempEndFigure = new NullFigure ();
                tempEndFigure.basicDisplayBox (new Point (ex, ey), new Point (ex, ey));
                setEndConnector (new NullConnector (tempEndFigure));
                getConnection ().connectEnd (getEndConnector ());
                getConnection ().endPoint (ex, ey);
                getConnection ().updateConnection ();
            }
            else {
                ((PolyLineFigure) getConnection ()).addPoint (ex, ey);
            }

        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SplitConnectionTool.java" startline="39" endline="41">
{
    setTargetFigure (findConnectableFigure (ex, ey, drawing ()));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SplitConnectionTool.java" startline="43" endline="83">
{
    if (getAddedFigure () == null) {
        setConnection (createConnection ());
        setStartConnector (findConnector (ex, ey, getTargetFigure ()));
        getConnection ().connectStart (getStartConnector ());
        getConnection ().startPoint (ex, ey);
        setAddedFigure (view ().add (getConnection ()));
    }

    Figure c = findTarget (ex, ey, drawing ());
    if (c != null) {
        setEndConnector (findConnector (ex, ex, c));
        getConnection ().connectEnd (getEndConnector ());
        getConnection ().endPoint (ex, ey);
        setUndoActivity (createUndoActivity ());
        getUndoActivity ().setAffectedFigures (new SingleFigureEnumerator (getAddedFigure ()));
        getConnection ().updateConnection ();
        init ();
        editor ().toolDone ();
    }
    else {
        if (getEndConnector () == null) {
            Figure tempEndFigure = new NullFigure ();
            tempEndFigure.basicDisplayBox (new Point (ex, ey), new Point (ex, ey));
            setEndConnector (new NullConnector (tempEndFigure));
            getConnection ().connectEnd (getEndConnector ());
            getConnection ().endPoint (ex, ey);
            getConnection ().updateConnection ();
        }
        else {
            ((PolyLineFigure) getConnection ()).addPoint (ex, ey);
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SplitConnectionTool.java" startline="45" endline="51">
{
    setConnection (createConnection ());
    setStartConnector (findConnector (ex, ey, getTargetFigure ()));
    getConnection ().connectStart (getStartConnector ());
    getConnection ().startPoint (ex, ey);
    setAddedFigure (view ().add (getConnection ()));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SplitConnectionTool.java" startline="54" endline="65">
{
    setEndConnector (findConnector (ex, ex, c));
    getConnection ().connectEnd (getEndConnector ());
    getConnection ().endPoint (ex, ey);
    setUndoActivity (createUndoActivity ());
    getUndoActivity ().setAffectedFigures (new SingleFigureEnumerator (getAddedFigure ()));
    getConnection ().updateConnection ();
    init ();
    editor ().toolDone ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SplitConnectionTool.java" startline="67" endline="82">
{
    if (getEndConnector () == null) {
        Figure tempEndFigure = new NullFigure ();
        tempEndFigure.basicDisplayBox (new Point (ex, ey), new Point (ex, ey));
        setEndConnector (new NullConnector (tempEndFigure));
        getConnection ().connectEnd (getEndConnector ());
        getConnection ().endPoint (ex, ey);
        getConnection ().updateConnection ();
    }
    else {
        ((PolyLineFigure) getConnection ()).addPoint (ex, ey);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SplitConnectionTool.java" startline="70" endline="77">
{
    Figure tempEndFigure = new NullFigure ();
    tempEndFigure.basicDisplayBox (new Point (ex, ey), new Point (ex, ey));
    setEndConnector (new NullConnector (tempEndFigure));
    getConnection ().connectEnd (getEndConnector ());
    getConnection ().endPoint (ex, ey);
    getConnection ().updateConnection ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SplitConnectionTool.java" startline="79" endline="81">
{
    ((PolyLineFigure) getConnection ()).addPoint (ex, ey);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SplitConnectionTool.java" startline="87" endline="94">
{
    if (e.getClickCount () == 2) {
        init ();
        editor ().toolDone ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SplitConnectionTool.java" startline="90" endline="93">
{
    init ();
    editor ().toolDone ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SplitConnectionTool.java" startline="97" endline="99">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SplitConnectionTool.java" startline="102" endline="104">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SplitConnectionTool.java" startline="107" endline="114">
{
    if (getConnection () != null) {
        view ().remove (getConnection ());
    }

    super.deactivate ();
    init ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SplitConnectionTool.java" startline="109" endline="111">
{
    view ().remove (getConnection ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SplitConnectionTool.java" startline="117" endline="123">
{
    setConnection (null);
    setStartConnector (null);
    setEndConnector (null);
    setAddedFigure (null);
    setTargetFigure (null);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SplitPaneDesktop.java" startline="33" endline="39">
{
    setDesktopEventService (createDesktopEventService ());
    setAlignmentX (JSplitPane.LEFT_ALIGNMENT);
    setOneTouchExpandable (true);
    addPropertyChangeListener (createPropertyChangeListener ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SplitPaneDesktop.java" startline="42" endline="57">
{
    return new PropertyChangeListener () {

        public void propertyChange (PropertyChangeEvent evt) {
            if (getRightComponent () != null) {
                getRightComponent ().repaint ();
            }

            if (getLeftComponent () != null) {
                getLeftComponent ().repaint ();
            }

        }

    }

    ;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SplitPaneDesktop.java" startline="46" endline="55">
{
    if (getRightComponent () != null) {
        getRightComponent ().repaint ();
    }

    if (getLeftComponent () != null) {
        getLeftComponent ().repaint ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SplitPaneDesktop.java" startline="48" endline="50">
{
    getRightComponent ().repaint ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SplitPaneDesktop.java" startline="52" endline="54">
{
    getLeftComponent ().repaint ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SplitPaneDesktop.java" startline="60" endline="78">
{
    setRightComponent (createRightComponent (dv));
    setLeftComponent (createLeftComponent (dv));
    switch (location) {
        case Desktop.PRIMARY :
            {
                return getLeftComponent ();
            }
        case Desktop.SECONDARY :
            {
                return getRightComponent ();
            }
        default :
            {
                return null;
            }
    }
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SplitPaneDesktop.java" startline="66" endline="68">
{
    return getLeftComponent ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SplitPaneDesktop.java" startline="70" endline="72">
{
    return getRightComponent ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SplitPaneDesktop.java" startline="74" endline="76">
{
    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SplitPaneDesktop.java" startline="81" endline="87">
{
    JScrollPane sp = new JScrollPane ((Component) dv);
    sp.setVerticalScrollBarPolicy (JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
    sp.setHorizontalScrollBarPolicy (JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS);
    sp.setAlignmentX (LEFT_ALIGNMENT);
    return sp;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SplitPaneDesktop.java" startline="90" endline="92">
{
    return new JScrollPane (new JList ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SplitPaneDesktop.java" startline="95" endline="97">
{
    return getDesktopEventService ().getActiveDrawingView ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SplitPaneDesktop.java" startline="100" endline="115">
{
    createContents (dv, Desktop.PRIMARY);
    setDividerLocation (getInitDividerLocation ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SplitPaneDesktop.java" startline="118" endline="120">
{
    return 150;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SplitPaneDesktop.java" startline="123" endline="133">
{
    Component [] comps = getContainer ().getComponents ();
    for (int x = 0;
    x < comps.length; x ++) {
        if (dv == Helper.getDrawingView (comps [x])) {
            getContainer ().remove (comps [x]);
            break;
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SplitPaneDesktop.java" startline="126" endline="132">
{
    if (dv == Helper.getDrawingView (comps [x])) {
        getContainer ().remove (comps [x]);
        break;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SplitPaneDesktop.java" startline="128" endline="131">
{
    getContainer ().remove (comps [x]);
    break;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SplitPaneDesktop.java" startline="136" endline="138">
{
    getContainer ().removeAll ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SplitPaneDesktop.java" startline="141" endline="143">
{
    return getDesktopEventService ().getDrawingViews (getComponents ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SplitPaneDesktop.java" startline="146" endline="148">
{
    getDesktopEventService ().addDesktopListener (dpl);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SplitPaneDesktop.java" startline="151" endline="153">
{
    getDesktopEventService ().removeDesktopListener (dpl);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SplitPaneDesktop.java" startline="156" endline="158">
{
    return this;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SplitPaneDesktop.java" startline="161" endline="163">
{
    return myDesktopEventService;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SplitPaneDesktop.java" startline="166" endline="168">
{
    myDesktopEventService = newDesktopEventService;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SplitPaneDesktop.java" startline="171" endline="173">
{
    return new DesktopEventService (this, getContainer ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SplitPaneDesktop.java" startline="176" endline="179">
{
    setName (newDrawingTitle);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SplitPaneDrawApplication.java" startline="30" endline="32">
{
    this ("JHotDraw");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SplitPaneDrawApplication.java" startline="38" endline="40">
{
    super (title);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/SplitPaneDrawApplication.java" startline="43" endline="45">
{
    return new SplitPaneDesktop ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/StandardLayouter.java" startline="42" endline="44">
{
    this (null);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/StandardLayouter.java" startline="53" endline="55">
{
    super (newLayoutable);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/StandardLayouter.java" startline="61" endline="63">
{
    return new StandardLayouter (newLayoutable);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/StandardLayouter.java" startline="74" endline="102">
{
    int maxWidth = Math.abs (corner.x - origin.x);
    int maxHeight = 0;
    FigureEnumeration fe = getLayoutable ().figures ();
    while (fe.hasNextFigure ()) {
        Figure currentFigure = fe.nextFigure ();
        Rectangle r = null;
        if (currentFigure instanceof Layoutable) {
            Layouter layoutStrategy = ((Layoutable) currentFigure).getLayouter ();
            r = layoutStrategy.calculateLayout (new Point (0, 0), new Point (0, 0));
            r.grow (layoutStrategy.getInsets ().left + layoutStrategy.getInsets ().right, layoutStrategy.getInsets ().top + layoutStrategy.getInsets ().bottom);
        }
        else {
            r = new Rectangle (currentFigure.displayBox ().getBounds ());
        }

        maxWidth = Math.max (maxWidth, r.width);
        maxHeight += r.height;
    }

    return new Rectangle (origin.x, origin.y, maxWidth, maxHeight);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/StandardLayouter.java" startline="81" endline="99">
{
    Figure currentFigure = fe.nextFigure ();
    Rectangle r = null;
    if (currentFigure instanceof Layoutable) {
        Layouter layoutStrategy = ((Layoutable) currentFigure).getLayouter ();
        r = layoutStrategy.calculateLayout (new Point (0, 0), new Point (0, 0));
        r.grow (layoutStrategy.getInsets ().left + layoutStrategy.getInsets ().right, layoutStrategy.getInsets ().top + layoutStrategy.getInsets ().bottom);
    }
    else {
        r = new Rectangle (currentFigure.displayBox ().getBounds ());
    }

    maxWidth = Math.max (maxWidth, r.width);
    maxHeight += r.height;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/StandardLayouter.java" startline="85" endline="92">
{
    Layouter layoutStrategy = ((Layoutable) currentFigure).getLayouter ();
    r = layoutStrategy.calculateLayout (new Point (0, 0), new Point (0, 0));
    r.grow (layoutStrategy.getInsets ().left + layoutStrategy.getInsets ().right, layoutStrategy.getInsets ().top + layoutStrategy.getInsets ().bottom);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/StandardLayouter.java" startline="94" endline="96">
{
    r = new Rectangle (currentFigure.displayBox ().getBounds ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/StandardLayouter.java" startline="115" endline="143">
{
    Rectangle r = calculateLayout (origin, corner);
    int maxHeight = getInsets ().top;
    FigureEnumeration fe = getLayoutable ().figures ();
    while (fe.hasNextFigure ()) {
        Figure currentFigure = fe.nextFigure ();
        Point partOrigin = new Point (r.x + getInsets ().left, r.y + maxHeight);
        Point partCorner = new Point (r.x + getInsets ().left - getInsets ().right + r.width, r.y + currentFigure.displayBox ().height);
        currentFigure.displayBox (partOrigin, partCorner);
        maxHeight += currentFigure.displayBox ().height;
    }

    return new Rectangle (r.x, r.y, r.width, maxHeight + getInsets ().bottom);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/StandardLayouter.java" startline="122" endline="135">
{
    Figure currentFigure = fe.nextFigure ();
    Point partOrigin = new Point (r.x + getInsets ().left, r.y + maxHeight);
    Point partCorner = new Point (r.x + getInsets ().left - getInsets ().right + r.width, r.y + currentFigure.displayBox ().height);
    currentFigure.displayBox (partOrigin, partCorner);
    maxHeight += currentFigure.displayBox ().height;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="100" endline="105">
{
    initDefaultAttribute ("LeftMargin", new Float (5));
    initDefaultAttribute ("RightMargin", new Float (5));
    initDefaultAttribute ("TopMargin", new Float (5));
    initDefaultAttribute ("TabSize", new Float (8));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="110" endline="119">
{
    fParagraphs = CollectionsFactory.current ().createList ();
    fDisplayBox = new Rectangle (0, 0, 30, 15);
    fFont = createFont ();
    fText = new String ("");
    fSizeIsDirty = true;
    fTextIsDirty = true;
    fFontIsDirty = true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="128" endline="130">
{
    return fText;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="139" endline="146">
{
    if (! newText.equals (fText)) {
        markTextDirty ();
        fText = newText;
        changed ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="141" endline="145">
{
    markTextDirty ();
    fText = newText;
    changed ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="154" endline="156">
{
    return displayBox ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="164" endline="169">
{
    return new Font ((String) getAttribute ("FontName"), ((Integer) getAttribute ("FontStyle")).intValue (), ((Integer) getAttribute ("FontSize")).intValue ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="172" endline="174">
{
    return fIsReadOnly;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="177" endline="179">
{
    fIsReadOnly = newReadOnly;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="187" endline="189">
{
    return ! isReadOnly ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="196" endline="198">
{
    setTextDirty (true);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="207" endline="209">
{
    fTextIsDirty = newTextDirty;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="218" endline="220">
{
    return fTextIsDirty;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="227" endline="229">
{
    setSizeDirty (true);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="238" endline="240">
{
    fSizeIsDirty = newSizeIsDirty;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="249" endline="251">
{
    return fSizeIsDirty;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="259" endline="261">
{
    return fFont;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="269" endline="277">
{
    willChange ();
    fFont = newFont;
    markSizeDirty ();
    markFontDirty ();
    attributesMap = new Hashtable (1);
    attributesMap.put (TextAttribute.FONT, newFont);
    changed ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="288" endline="290">
{
    return 0;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="300" endline="308">
{
    Dimension prevSize = fDisplayBox.getSize ();
    fDisplayBox = new Rectangle (origin);
    fDisplayBox.add (corner);
    if (! fDisplayBox.getSize ().equals (prevSize)) {
        markSizeDirty ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="305" endline="307">
{
    markSizeDirty ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="316" endline="320">
{
    List handles = CollectionsFactory.current ().createList ();
    BoxHandleKit.addHandles (this, handles);
    return new HandleEnumerator (handles);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="328" endline="334">
{
    return new Rectangle (fDisplayBox.x, fDisplayBox.y, fDisplayBox.width, fDisplayBox.height);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="344" endline="352">
{
    willChange ();
    basicMoveBy (x, y);
    if (fLocator != null) {
        fLocator.moveBy (x, y);
    }

    changed ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="348" endline="350">
{
    fLocator.moveBy (x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="361" endline="363">
{
    fDisplayBox.translate (x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="372" endline="375">
{
    Rectangle r = displayBox ();
    g.fillRect (r.x, r.y, r.width, r.height);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="384" endline="387">
{
    super.draw (g);
    drawText (g, displayBox ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="395" endline="399">
{
    Rectangle r = displayBox ();
    g.setColor ((Color) getAttribute ("FrameColor"));
    g.drawRect (r.x, r.y, r.width, r.height);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="411" endline="627">
{
    Graphics2D g2 = null;
    Shape savedClipArea = null;
    Color savedFontColor = null;
    Rectangle2D clipRect = null;
    RenderingHints savedRenderingHints = null;
    if (g != null) {
        g2 = (Graphics2D) g;
        savedRenderingHints = g2.getRenderingHints ();
        g2.setRenderingHint (RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
        g2.setRenderingHint (RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);
        Font savedFont = g2.getFont ();
        savedFontColor = g2.getColor ();
        savedClipArea = g2.getClip ();
        if (savedClipArea != null) {
            clipRect = displayBox.createIntersection ((Rectangle2D) savedClipArea);
        }
        else {
            clipRect = displayBox;
        }

        g2.setClip (clipRect);
        Color textColor = getTextColor ();
        if (! ColorMap.isTransparent (textColor)) {
            g2.setColor (textColor);
        }

        g2.setFont (getFont ());
    }

    FontRenderContext fontRenderCtx = new FontRenderContext (null, false, false);
    prepareText ();
    float leftMargin = displayBox.x + ((Float) getAttribute ("LeftMargin")).floatValue ();
    float rightMargin = displayBox.x + displayBox.width - ((Float) getAttribute ("RightMargin")).floatValue ();
    float topMargin = displayBox.y + ((Float) getAttribute ("TopMargin")).floatValue ();
    float [] tabStops = new float [40];
    float tabSize = ((Float) getAttribute ("TabSize")).floatValue () * getFontWidth ();
    float tabPos = tabSize;
    for (int tabCnt = 0;
    tabCnt < 40; tabCnt ++) {
        tabStops [tabCnt] = tabPos + leftMargin;
        tabPos += tabSize;
    }

    float verticalPos = topMargin;
    Iterator paragraphs = fParagraphs.iterator ();
    while (paragraphs.hasNext ()) {
        String paragraphText = (String) paragraphs.next ();
        AttributedString attrText = new AttributedString (paragraphText);
        AttributedCharacterIterator paragraphIter = attrText.getIterator ();
        int [] tabLocations = new int [paragraphText.length ()];
        int tabCount = 0;
        for (char c = paragraphIter.first ();
        c != paragraphIter.DONE; c = paragraphIter.next ()) {
            if (c == '\t') {
                tabLocations [tabCount ++] = paragraphIter.getIndex ();
            }

        }

        tabLocations [tabCount] = paragraphIter.getEndIndex () - 1;
        paragraphText = paragraphText.replace ('\t', ' ');
        attrText = new AttributedString (paragraphText, attributesMap);
        paragraphIter = attrText.getIterator ();
        LineBreakMeasurer measurer = new LineBreakMeasurer (paragraphIter, fontRenderCtx);
        int currentTab = 0;
        while (measurer.getPosition () < paragraphIter.getEndIndex ()) {
            boolean lineContainsText = false;
            boolean lineComplete = false;
            float maxAscent = 0;
            float maxDescent = 0;
            float horizontalPos = leftMargin;
            List layouts = CollectionsFactory.current ().createList (1);
            List penPositions = CollectionsFactory.current ().createList (1);
            while (! lineComplete) {
                float wrappingWidth = rightMargin - horizontalPos;
                wrappingWidth = Math.max (1, wrappingWidth);
                TextLayout layout = measurer.nextLayout (wrappingWidth, tabLocations [currentTab] + 1, lineContainsText);
                if (layout != null) {
                    layouts.add (layout);
                    penPositions.add (new Float (horizontalPos));
                    horizontalPos += layout.getAdvance ();
                    maxAscent = Math.max (maxAscent, layout.getAscent ());
                    maxDescent = Math.max (maxDescent, layout.getDescent () + layout.getLeading ());
                }
                else {
                    lineComplete = true;
                }

                lineContainsText = true;
                if (measurer.getPosition () == tabLocations [currentTab] + 1) {
                    currentTab ++;
                }

                if (measurer.getPosition () == paragraphIter.getEndIndex ()) {
                    lineComplete = true;
                }
                else if (horizontalPos >= tabStops [tabStops.length - 1]) {
                    lineComplete = true;
                }

                if (! lineComplete) {
                    int j;
                    for (j = 0; horizontalPos >= tabStops [j]; j ++) {
                    }

                    horizontalPos = tabStops [j];
                }

            }

            verticalPos += maxAscent;
            Iterator layoutEnum = layouts.iterator ();
            Iterator positionEnum = penPositions.iterator ();
            while (layoutEnum.hasNext ()) {
                TextLayout nextLayout = (TextLayout) layoutEnum.next ();
                Float nextPosition = (Float) positionEnum.next ();
                if (g2 != null) {
                    nextLayout.draw (g2, nextPosition.floatValue (), verticalPos);
                }

            }

            verticalPos += maxDescent;
        }

    }

    if (g2 != null && verticalPos > clipRect.getMaxY () && clipRect.getMaxY () == displayBox.getMaxY ()) {
        Stroke savedStroke = g2.getStroke ();
        float [] dash = new float [2];
        dash [0] = 2f;
        dash [1] = 4f;
        g2.setStroke (new BasicStroke (1f, BasicStroke.CAP_SQUARE, BasicStroke.JOIN_MITER, 1f, dash, 0f));
        g2.setColor (Color.red);
        g2.drawLine ((int) clipRect.getMinX () + 1, (int) clipRect.getMaxY () - 1, (int) clipRect.getMaxX () - 1, (int) clipRect.getMaxY () - 1);
        g2.setStroke (savedStroke);
    }

    if (g2 != null) {
        if (savedClipArea != null) {
            g2.setClip (savedClipArea);
        }

        g2.setColor (savedFontColor);
        g2.setRenderingHints (savedRenderingHints);
    }

    return verticalPos;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="419" endline="444">
{
    g2 = (Graphics2D) g;
    savedRenderingHints = g2.getRenderingHints ();
    g2.setRenderingHint (RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
    g2.setRenderingHint (RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);
    Font savedFont = g2.getFont ();
    savedFontColor = g2.getColor ();
    savedClipArea = g2.getClip ();
    if (savedClipArea != null) {
        clipRect = displayBox.createIntersection ((Rectangle2D) savedClipArea);
    }
    else {
        clipRect = displayBox;
    }

    g2.setClip (clipRect);
    Color textColor = getTextColor ();
    if (! ColorMap.isTransparent (textColor)) {
        g2.setColor (textColor);
    }

    g2.setFont (getFont ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="430" endline="432">
{
    clipRect = displayBox.createIntersection ((Rectangle2D) savedClipArea);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="434" endline="436">
{
    clipRect = displayBox;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="440" endline="442">
{
    g2.setColor (textColor);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="463" endline="466">
{
    tabStops [tabCnt] = tabPos + leftMargin;
    tabPos += tabSize;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="472" endline="595">
{
    String paragraphText = (String) paragraphs.next ();
    AttributedString attrText = new AttributedString (paragraphText);
    AttributedCharacterIterator paragraphIter = attrText.getIterator ();
    int [] tabLocations = new int [paragraphText.length ()];
    int tabCount = 0;
    for (char c = paragraphIter.first ();
    c != paragraphIter.DONE; c = paragraphIter.next ()) {
        if (c == '\t') {
            tabLocations [tabCount ++] = paragraphIter.getIndex ();
        }

    }

    tabLocations [tabCount] = paragraphIter.getEndIndex () - 1;
    paragraphText = paragraphText.replace ('\t', ' ');
    attrText = new AttributedString (paragraphText, attributesMap);
    paragraphIter = attrText.getIterator ();
    LineBreakMeasurer measurer = new LineBreakMeasurer (paragraphIter, fontRenderCtx);
    int currentTab = 0;
    while (measurer.getPosition () < paragraphIter.getEndIndex ()) {
        boolean lineContainsText = false;
        boolean lineComplete = false;
        float maxAscent = 0;
        float maxDescent = 0;
        float horizontalPos = leftMargin;
        List layouts = CollectionsFactory.current ().createList (1);
        List penPositions = CollectionsFactory.current ().createList (1);
        while (! lineComplete) {
            float wrappingWidth = rightMargin - horizontalPos;
            wrappingWidth = Math.max (1, wrappingWidth);
            TextLayout layout = measurer.nextLayout (wrappingWidth, tabLocations [currentTab] + 1, lineContainsText);
            if (layout != null) {
                layouts.add (layout);
                penPositions.add (new Float (horizontalPos));
                horizontalPos += layout.getAdvance ();
                maxAscent = Math.max (maxAscent, layout.getAscent ());
                maxDescent = Math.max (maxDescent, layout.getDescent () + layout.getLeading ());
            }
            else {
                lineComplete = true;
            }

            lineContainsText = true;
            if (measurer.getPosition () == tabLocations [currentTab] + 1) {
                currentTab ++;
            }

            if (measurer.getPosition () == paragraphIter.getEndIndex ()) {
                lineComplete = true;
            }
            else if (horizontalPos >= tabStops [tabStops.length - 1]) {
                lineComplete = true;
            }

            if (! lineComplete) {
                int j;
                for (j = 0; horizontalPos >= tabStops [j]; j ++) {
                }

                horizontalPos = tabStops [j];
            }

        }

        verticalPos += maxAscent;
        Iterator layoutEnum = layouts.iterator ();
        Iterator positionEnum = penPositions.iterator ();
        while (layoutEnum.hasNext ()) {
            TextLayout nextLayout = (TextLayout) layoutEnum.next ();
            Float nextPosition = (Float) positionEnum.next ();
            if (g2 != null) {
                nextLayout.draw (g2, nextPosition.floatValue (), verticalPos);
            }

        }

        verticalPos += maxDescent;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="482" endline="487">
{
    if (c == '\t') {
        tabLocations [tabCount ++] = paragraphIter.getIndex ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="484" endline="486">
{
    tabLocations [tabCount ++] = paragraphIter.getIndex ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="506" endline="594">
{
    boolean lineContainsText = false;
    boolean lineComplete = false;
    float maxAscent = 0;
    float maxDescent = 0;
    float horizontalPos = leftMargin;
    List layouts = CollectionsFactory.current ().createList (1);
    List penPositions = CollectionsFactory.current ().createList (1);
    while (! lineComplete) {
        float wrappingWidth = rightMargin - horizontalPos;
        wrappingWidth = Math.max (1, wrappingWidth);
        TextLayout layout = measurer.nextLayout (wrappingWidth, tabLocations [currentTab] + 1, lineContainsText);
        if (layout != null) {
            layouts.add (layout);
            penPositions.add (new Float (horizontalPos));
            horizontalPos += layout.getAdvance ();
            maxAscent = Math.max (maxAscent, layout.getAscent ());
            maxDescent = Math.max (maxDescent, layout.getDescent () + layout.getLeading ());
        }
        else {
            lineComplete = true;
        }

        lineContainsText = true;
        if (measurer.getPosition () == tabLocations [currentTab] + 1) {
            currentTab ++;
        }

        if (measurer.getPosition () == paragraphIter.getEndIndex ()) {
            lineComplete = true;
        }
        else if (horizontalPos >= tabStops [tabStops.length - 1]) {
            lineComplete = true;
        }

        if (! lineComplete) {
            int j;
            for (j = 0; horizontalPos >= tabStops [j]; j ++) {
            }

            horizontalPos = tabStops [j];
        }

    }

    verticalPos += maxAscent;
    Iterator layoutEnum = layouts.iterator ();
    Iterator positionEnum = penPositions.iterator ();
    while (layoutEnum.hasNext ()) {
        TextLayout nextLayout = (TextLayout) layoutEnum.next ();
        Float nextPosition = (Float) positionEnum.next ();
        if (g2 != null) {
            nextLayout.draw (g2, nextPosition.floatValue (), verticalPos);
        }

    }

    verticalPos += maxDescent;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="524" endline="573">
{
    float wrappingWidth = rightMargin - horizontalPos;
    wrappingWidth = Math.max (1, wrappingWidth);
    TextLayout layout = measurer.nextLayout (wrappingWidth, tabLocations [currentTab] + 1, lineContainsText);
    if (layout != null) {
        layouts.add (layout);
        penPositions.add (new Float (horizontalPos));
        horizontalPos += layout.getAdvance ();
        maxAscent = Math.max (maxAscent, layout.getAscent ());
        maxDescent = Math.max (maxDescent, layout.getDescent () + layout.getLeading ());
    }
    else {
        lineComplete = true;
    }

    lineContainsText = true;
    if (measurer.getPosition () == tabLocations [currentTab] + 1) {
        currentTab ++;
    }

    if (measurer.getPosition () == paragraphIter.getEndIndex ()) {
        lineComplete = true;
    }
    else if (horizontalPos >= tabStops [tabStops.length - 1]) {
        lineComplete = true;
    }

    if (! lineComplete) {
        int j;
        for (j = 0; horizontalPos >= tabStops [j]; j ++) {
        }

        horizontalPos = tabStops [j];
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="535" endline="542">
{
    layouts.add (layout);
    penPositions.add (new Float (horizontalPos));
    horizontalPos += layout.getAdvance ();
    maxAscent = Math.max (maxAscent, layout.getAscent ());
    maxDescent = Math.max (maxDescent, layout.getDescent () + layout.getLeading ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="544" endline="546">
{
    lineComplete = true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="551" endline="553">
{
    currentTab ++;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="556" endline="558">
{
    lineComplete = true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="560" endline="562">
{
    lineComplete = true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="565" endline="572">
{
    int j;
    for (j = 0; horizontalPos >= tabStops [j]; j ++) {
    }

    horizontalPos = tabStops [j];
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="569" endline="570">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="582" endline="589">
{
    TextLayout nextLayout = (TextLayout) layoutEnum.next ();
    Float nextPosition = (Float) positionEnum.next ();
    if (g2 != null) {
        nextLayout.draw (g2, nextPosition.floatValue (), verticalPos);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="586" endline="588">
{
    nextLayout.draw (g2, nextPosition.floatValue (), verticalPos);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="600" endline="612">
{
    Stroke savedStroke = g2.getStroke ();
    float [] dash = new float [2];
    dash [0] = 2f;
    dash [1] = 4f;
    g2.setStroke (new BasicStroke (1f, BasicStroke.CAP_SQUARE, BasicStroke.JOIN_MITER, 1f, dash, 0f));
    g2.setColor (Color.red);
    g2.drawLine ((int) clipRect.getMinX () + 1, (int) clipRect.getMaxY () - 1, (int) clipRect.getMaxX () - 1, (int) clipRect.getMaxY () - 1);
    g2.setStroke (savedStroke);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="616" endline="623">
{
    if (savedClipArea != null) {
        g2.setClip (savedClipArea);
    }

    g2.setColor (savedFontColor);
    g2.setRenderingHints (savedRenderingHints);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="618" endline="620">
{
    g2.setClip (savedClipArea);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="635" endline="654">
{
    if (! isTextDirty ()) {
        return;
    }

    fParagraphs = CollectionsFactory.current ().createList ();
    String paragraphText;
    Point pos = new Point (- 1, - 1);
    while ((paragraphText = getNextParagraph (fText, pos)) != null) {
        if (paragraphText.length () == 0) {
            paragraphText = " ";
        }

        fParagraphs.add (paragraphText);
    }

    setTextDirty (false);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="637" endline="639">
{
    return;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="646" endline="652">
{
    if (paragraphText.length () == 0) {
        paragraphText = " ";
    }

    fParagraphs.add (paragraphText);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="648" endline="650">
{
    paragraphText = " ";
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="667" endline="691">
{
    int start = pos.y + 1;
    if (start >= text.length ()) {
        return null;
    }

    pos.x = start;
    int end = text.indexOf ('\n', start);
    if (end == - 1) {
        end = text.length ();
    }

    pos.y = end;
    if (text.charAt (end - 1) == '\r') {
        return text.substring (start, end - 1);
    }
    else {
        return text.substring (start, end);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="671" endline="673">
{
    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="678" endline="680">
{
    end = text.length ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="684" endline="686">
{
    return text.substring (start, end - 1);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="688" endline="690">
{
    return text.substring (start, end);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="701" endline="703">
{
    return super.getAttribute (name);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="715" endline="753">
{
    Font font = getFont ();
    if (name.equals ("FontSize")) {
        Integer s = (Integer) value;
        setFont (new Font (font.getName (), font.getStyle (), s.intValue ()));
        super.setAttribute (name, value);
    }
    else if (name.equals ("FontStyle")) {
        Integer s = (Integer) value;
        int style = font.getStyle ();
        if (s.intValue () == Font.PLAIN) {
            style = font.PLAIN;
        }
        else {
            style = style ^ s.intValue ();
        }

        setFont (new Font (font.getName (), style, font.getSize ()));
        super.setAttribute (name, new Integer (style));
    }
    else if (name.equals ("FontName")) {
        String n = (String) value;
        setFont (new Font (n, font.getStyle (), font.getSize ()));
        super.setAttribute (name, value);
    }
    else {
        super.setAttribute (name, value);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="719" endline="724">
{
    Integer s = (Integer) value;
    setFont (new Font (font.getName (), font.getStyle (), s.intValue ()));
    super.setAttribute (name, value);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="726" endline="740">
{
    Integer s = (Integer) value;
    int style = font.getStyle ();
    if (s.intValue () == Font.PLAIN) {
        style = font.PLAIN;
    }
    else {
        style = style ^ s.intValue ();
    }

    setFont (new Font (font.getName (), style, font.getSize ()));
    super.setAttribute (name, new Integer (style));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="730" endline="732">
{
    style = font.PLAIN;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="734" endline="736">
{
    style = style ^ s.intValue ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="742" endline="747">
{
    String n = (String) value;
    setFont (new Font (n, font.getStyle (), font.getSize ()));
    super.setAttribute (name, value);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="749" endline="752">
{
    super.setAttribute (name, value);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="761" endline="771">
{
    super.write (dw);
    dw.writeInt (fDisplayBox.x);
    dw.writeInt (fDisplayBox.y);
    dw.writeInt (fDisplayBox.width);
    dw.writeInt (fDisplayBox.height);
    dw.writeString (fText);
    dw.writeBoolean (fIsReadOnly);
    dw.writeStorable (fObservedFigure);
    dw.writeStorable (fLocator);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="780" endline="802">
{
    super.read (dr);
    markSizeDirty ();
    markTextDirty ();
    markFontDirty ();
    fDisplayBox.x = dr.readInt ();
    fDisplayBox.y = dr.readInt ();
    fDisplayBox.width = dr.readInt ();
    fDisplayBox.height = dr.readInt ();
    fText = dr.readString ();
    fIsReadOnly = dr.readBoolean ();
    fObservedFigure = (Figure) dr.readStorable ();
    if (fObservedFigure != null) {
        fObservedFigure.addFigureChangeListener (this);
    }

    fLocator = (OffsetLocator) dr.readStorable ();
    setFont (createFont ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="796" endline="798">
{
    fObservedFigure.addFigureChangeListener (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="813" endline="824">
{
    s.defaultReadObject ();
    if (fObservedFigure != null) {
        fObservedFigure.addFigureChangeListener (this);
    }

    markSizeDirty ();
    markTextDirty ();
    markFontDirty ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="818" endline="820">
{
    fObservedFigure.addFigureChangeListener (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="832" endline="842">
{
    if (fObservedFigure != null) {
        fObservedFigure.removeFigureChangeListener (this);
    }

    fObservedFigure = figure;
    fLocator = new OffsetLocator (figure.connectedTextLocator (this));
    fObservedFigure.addFigureChangeListener (this);
    updateLocation ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="834" endline="836">
{
    fObservedFigure.removeFigureChangeListener (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="850" endline="856">
{
    if (disconnectFigure != null) {
        disconnectFigure.removeFigureChangeListener (this);
    }

    fLocator = null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="852" endline="854">
{
    disconnectFigure.removeFigureChangeListener (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="865" endline="866">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="874" endline="876">
{
    updateLocation ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="883" endline="897">
{
    if (fLocator != null) {
        Point p = fLocator.locate (fObservedFigure);
        p.x -= size ().width / 2 + fDisplayBox.x;
        p.y -= size ().height / 2 + fDisplayBox.y;
        if (p.x != 0 || p.y != 0) {
            willChange ();
            basicMoveBy (p.x, p.y);
            changed ();
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="885" endline="896">
{
    Point p = fLocator.locate (fObservedFigure);
    p.x -= size ().width / 2 + fDisplayBox.x;
    p.y -= size ().height / 2 + fDisplayBox.y;
    if (p.x != 0 || p.y != 0) {
        willChange ();
        basicMoveBy (p.x, p.y);
        changed ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="891" endline="895">
{
    willChange ();
    basicMoveBy (p.x, p.y);
    changed ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="905" endline="910">
{
    if (listener () != null) {
        listener ().figureRemoved (new FigureChangeEvent (this));
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="907" endline="909">
{
    listener ().figureRemoved (new FigureChangeEvent (this));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="918" endline="923">
{
    if (listener () != null) {
        listener ().figureRequestRemove (new FigureChangeEvent (this));
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="920" endline="922">
{
    listener ().figureRequestRemove (new FigureChangeEvent (this));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="929" endline="931">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="940" endline="943">
{
    updateFontInfo ();
    return fFontWidth;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="947" endline="956">
{
    if (! isFontDirty ()) {
        return;
    }

    FontMetrics metrics = Toolkit.getDefaultToolkit ().getFontMetrics (getFont ());
    fFontWidth = metrics.charWidth ('W');
    setFontDirty (false);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="949" endline="951">
{
    return;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="966" endline="968">
{
    return (Color) getAttribute ("TextColor");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="976" endline="978">
{
    return (fText.length () == 0);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="984" endline="986">
{
    setFontDirty (true);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="994" endline="996">
{
    return fFontIsDirty;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="1004" endline="1006">
{
    fFontIsDirty = newFontIsDirty;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaFigure.java" startline="1017" endline="1019">
{
    return this;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaTool.java" startline="59" endline="61">
{
    super (newDrawingEditor, prototype);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaTool.java" startline="72" endline="114">
{
    setView ((DrawingView) e.getSource ());
    Figure pressedFigure = drawing ().findFigureInside (x, y);
    TextHolder textHolder = null;
    if (pressedFigure != null) {
        textHolder = pressedFigure.getTextHolder ();
    }

    if ((textHolder != null) && (textHolder.acceptsTyping ())) {
        beginEdit (textHolder, pressedFigure);
        return;
    }

    if (getTypingTarget () != null) {
        endEdit ();
        if (getCreatedFigure () != null && getCreatedFigure ().isEmpty ()) {
            drawing ().remove (getAddedFigure ());
            setUndoActivity (null);
        }
        else {
        }

        setTypingTarget (null);
        setCreatedFigure (null);
        setEditedFigure (null);
        setAddedFigure (null);
        editor ().toolDone ();
    }
    else {
        super.mouseDown (e, x, y);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaTool.java" startline="77" endline="79">
{
    textHolder = pressedFigure.getTextHolder ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaTool.java" startline="82" endline="85">
{
    beginEdit (textHolder, pressedFigure);
    return;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaTool.java" startline="87" endline="109">
{
    endEdit ();
    if (getCreatedFigure () != null && getCreatedFigure ().isEmpty ()) {
        drawing ().remove (getAddedFigure ());
        setUndoActivity (null);
    }
    else {
    }

    setTypingTarget (null);
    setCreatedFigure (null);
    setEditedFigure (null);
    setAddedFigure (null);
    editor ().toolDone ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaTool.java" startline="91" endline="95">
{
    drawing ().remove (getAddedFigure ());
    setUndoActivity (null);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaTool.java" startline="97" endline="103">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaTool.java" startline="111" endline="113">
{
    super.mouseDown (e, x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaTool.java" startline="124" endline="131">
{
    if (getCreatedFigure () == null) {
        return;
    }

    super.mouseDrag (e, x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaTool.java" startline="127" endline="129">
{
    return;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaTool.java" startline="141" endline="161">
{
    if (getCreatedFigure () == null) {
        return;
    }

    view ().checkDamage ();
    TextHolder textHolder = (TextHolder) getCreatedFigure ();
    if (textHolder.acceptsTyping ()) {
        beginEdit (textHolder, getCreatedFigure ());
    }
    else {
        editor ().toolDone ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaTool.java" startline="144" endline="146">
{
    return;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaTool.java" startline="154" endline="156">
{
    beginEdit (textHolder, getCreatedFigure ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaTool.java" startline="158" endline="160">
{
    editor ().toolDone ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaTool.java" startline="167" endline="170">
{
    endEdit ();
    super.deactivate ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaTool.java" startline="176" endline="179">
{
    super.activate ();
    getActiveView ().clearSelection ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaTool.java" startline="188" endline="190">
{
    return getTypingTarget () != null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaTool.java" startline="199" endline="216">
{
    if (fTextField == null) {
        fTextField = new FloatingTextArea ();
    }

    if (figure != getTypingTarget () && getTypingTarget () != null) {
        endEdit ();
    }

    fTextField.createOverlay ((Container) view (), getFont (figure));
    fTextField.setBounds (fieldBounds (figure), figure.getText ());
    setTypingTarget (figure);
    setEditedFigure (selectedFigure);
    setUndoActivity (createUndoActivity ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaTool.java" startline="201" endline="203">
{
    fTextField = new FloatingTextArea ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaTool.java" startline="206" endline="208">
{
    endEdit ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaTool.java" startline="225" endline="227">
{
    return figure.getFont ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaTool.java" startline="231" endline="254">
{
    if (getTypingTarget () != null) {
        if (fTextField.getText ().length () > 0) {
            getTypingTarget ().setText (fTextField.getText ());
            getUndoActivity ().setAffectedFigures (new SingleFigureEnumerator (getEditedFigure ()));
            ((TextAreaTool.UndoActivity) getUndoActivity ()).setBackupText (getTypingTarget ().getText ());
        }
        else {
            drawing ().orphan (getAddedFigure ());
        }

        fTextField.endOverlay ();
        fTextField = null;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaTool.java" startline="233" endline="253">
{
    if (fTextField.getText ().length () > 0) {
        getTypingTarget ().setText (fTextField.getText ());
        getUndoActivity ().setAffectedFigures (new SingleFigureEnumerator (getEditedFigure ()));
        ((TextAreaTool.UndoActivity) getUndoActivity ()).setBackupText (getTypingTarget ().getText ());
    }
    else {
        drawing ().orphan (getAddedFigure ());
    }

    fTextField.endOverlay ();
    fTextField = null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaTool.java" startline="235" endline="242">
{
    getTypingTarget ().setText (fTextField.getText ());
    getUndoActivity ().setAffectedFigures (new SingleFigureEnumerator (getEditedFigure ()));
    ((TextAreaTool.UndoActivity) getUndoActivity ()).setBackupText (getTypingTarget ().getText ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaTool.java" startline="244" endline="248">
{
    drawing ().orphan (getAddedFigure ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaTool.java" startline="263" endline="265">
{
    return figure.textDisplayBox ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaTool.java" startline="274" endline="276">
{
    fTypingTarget = newTypingTarget;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaTool.java" startline="285" endline="287">
{
    return fEditedFigure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaTool.java" startline="295" endline="297">
{
    fEditedFigure = figure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaTool.java" startline="306" endline="308">
{
    return fTypingTarget;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaTool.java" startline="316" endline="318">
{
    return new TextAreaTool.UndoActivity (view (), getTypingTarget ().getText ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaTool.java" startline="340" endline="345">
{
    super (newDrawingView);
    setOriginalText (newOriginalText);
    setUndoable (true);
    setRedoable (true);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaTool.java" startline="357" endline="389">
{
    if (! super.undo ()) {
        return false;
    }

    getDrawingView ().clearSelection ();
    if (! isValidText (getOriginalText ())) {
        FigureEnumeration fe = getAffectedFigures ();
        while (fe.hasNextFigure ()) {
            getDrawingView ().drawing ().orphan (fe.nextFigure ());
        }

    }
    else if (! isValidText (getBackupText ())) {
        FigureEnumeration fe = getAffectedFigures ();
        while (fe.hasNextFigure ()) {
            getDrawingView ().add (fe.nextFigure ());
        }

        setText (getOriginalText ());
    }
    else {
        setText (getOriginalText ());
    }

    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaTool.java" startline="359" endline="361">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaTool.java" startline="366" endline="372">
{
    FigureEnumeration fe = getAffectedFigures ();
    while (fe.hasNextFigure ()) {
        getDrawingView ().drawing ().orphan (fe.nextFigure ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaTool.java" startline="369" endline="371">
{
    getDrawingView ().drawing ().orphan (fe.nextFigure ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaTool.java" startline="375" endline="382">
{
    FigureEnumeration fe = getAffectedFigures ();
    while (fe.hasNextFigure ()) {
        getDrawingView ().add (fe.nextFigure ());
    }

    setText (getOriginalText ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaTool.java" startline="378" endline="380">
{
    getDrawingView ().add (fe.nextFigure ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaTool.java" startline="384" endline="386">
{
    setText (getOriginalText ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaTool.java" startline="401" endline="434">
{
    if (! super.redo ()) {
        return false;
    }

    getDrawingView ().clearSelection ();
    if (! isValidText (getBackupText ())) {
        FigureEnumeration fe = getAffectedFigures ();
        while (fe.hasNextFigure ()) {
            getDrawingView ().drawing ().orphan (fe.nextFigure ());
        }

    }
    else if (! isValidText (getOriginalText ())) {
        FigureEnumeration fe = getAffectedFigures ();
        while (fe.hasNextFigure ()) {
            getDrawingView ().drawing ().add (fe.nextFigure ());
            setText (getBackupText ());
        }

    }
    else {
        setText (getBackupText ());
    }

    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaTool.java" startline="403" endline="405">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaTool.java" startline="411" endline="417">
{
    FigureEnumeration fe = getAffectedFigures ();
    while (fe.hasNextFigure ()) {
        getDrawingView ().drawing ().orphan (fe.nextFigure ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaTool.java" startline="414" endline="416">
{
    getDrawingView ().drawing ().orphan (fe.nextFigure ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaTool.java" startline="420" endline="427">
{
    FigureEnumeration fe = getAffectedFigures ();
    while (fe.hasNextFigure ()) {
        getDrawingView ().drawing ().add (fe.nextFigure ());
        setText (getBackupText ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaTool.java" startline="423" endline="426">
{
    getDrawingView ().drawing ().add (fe.nextFigure ());
    setText (getBackupText ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaTool.java" startline="429" endline="431">
{
    setText (getBackupText ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaTool.java" startline="443" endline="445">
{
    return ((toBeChecked != null) && (toBeChecked.length () > 0));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaTool.java" startline="453" endline="463">
{
    FigureEnumeration fe = getAffectedFigures ();
    while (fe.hasNextFigure ()) {
        Figure currentFigure = fe.nextFigure ();
        if (currentFigure.getTextHolder () != null) {
            currentFigure.getTextHolder ().setText (newText);
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaTool.java" startline="456" endline="462">
{
    Figure currentFigure = fe.nextFigure ();
    if (currentFigure.getTextHolder () != null) {
        currentFigure.getTextHolder ().setText (newText);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaTool.java" startline="459" endline="461">
{
    currentFigure.getTextHolder ().setText (newText);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaTool.java" startline="471" endline="473">
{
    myBackupText = newBackupText;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaTool.java" startline="481" endline="483">
{
    return myBackupText;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaTool.java" startline="491" endline="493">
{
    myOriginalText = newOriginalText;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TextAreaTool.java" startline="501" endline="503">
{
    return myOriginalText;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TriangleFigure.java" startline="45" endline="47">
{
    super (new Point (0, 0), new Point (0, 0));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TriangleFigure.java" startline="50" endline="52">
{
    super (origin, corner);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TriangleFigure.java" startline="55" endline="59">
{
    List h = super.handles ().toList ();
    h.add (new TriangleRotationHandle (this));
    return new HandleEnumerator (h);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TriangleFigure.java" startline="62" endline="77">
{
    willChange ();
    double dist = Double.MAX_VALUE;
    int best = 0;
    for (int i = 0;
    i < rotations.length; ++ i) {
        double d = Math.abs (angle - rotations [i]);
        if (d < dist) {
            dist = d;
            best = i;
        }

    }

    fRotation = best;
    changed ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TriangleFigure.java" startline="67" endline="74">
{
    double d = Math.abs (angle - rotations [i]);
    if (d < dist) {
        dist = d;
        best = i;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TriangleFigure.java" startline="70" endline="73">
{
    dist = d;
    best = i;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TriangleFigure.java" startline="81" endline="128">
{
    Rectangle r = displayBox ();
    Polygon p = new Polygon ();
    switch (fRotation) {
        case 0 :
            p.addPoint (r.x + r.width / 2, r.y);
            p.addPoint (r.x + r.width, r.y + r.height);
            p.addPoint (r.x, r.y + r.height);
            break;
        case 1 :
            p.addPoint (r.x + r.width, r.y);
            p.addPoint (r.x + r.width, r.y + r.height);
            p.addPoint (r.x, r.y);
            break;
        case 2 :
            p.addPoint (r.x + r.width, r.y + r.height / 2);
            p.addPoint (r.x, r.y + r.height);
            p.addPoint (r.x, r.y);
            break;
        case 3 :
            p.addPoint (r.x + r.width, r.y + r.height);
            p.addPoint (r.x, r.y + r.height);
            p.addPoint (r.x + r.width, r.y);
            break;
        case 4 :
            p.addPoint (r.x + r.width / 2, r.y + r.height);
            p.addPoint (r.x, r.y);
            p.addPoint (r.x + r.width, r.y);
            break;
        case 5 :
            p.addPoint (r.x, r.y + r.height);
            p.addPoint (r.x, r.y);
            p.addPoint (r.x + r.width, r.y + r.height);
            break;
        case 6 :
            p.addPoint (r.x, r.y + r.height / 2);
            p.addPoint (r.x + r.width, r.y);
            p.addPoint (r.x + r.width, r.y + r.height);
            break;
        case 7 :
            p.addPoint (r.x, r.y);
            p.addPoint (r.x + r.width, r.y);
            p.addPoint (r.x, r.y + r.height);
            break;
    }
    return p;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TriangleFigure.java" startline="132" endline="138">
{
    Polygon p = getPolygon ();
    g.setColor (getFillColor ());
    g.fillPolygon (p);
    g.setColor (getFrameColor ());
    g.drawPolygon (p);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TriangleFigure.java" startline="141" endline="164">
{
    Rectangle r = displayBox ();
    switch (fRotation) {
        case 0 :
            return new Insets (r.height, r.width / 2, 0, r.width / 2);
        case 1 :
            return new Insets (0, r.width, r.height, 0);
        case 2 :
            return new Insets (r.height / 2, 0, r.height / 2, r.width);
        case 3 :
            return new Insets (r.height, r.width, 0, 0);
        case 4 :
            return new Insets (0, r.width / 2, r.height, r.width / 2);
        case 5 :
            return new Insets (r.height, 0, 0, r.width);
        case 6 :
            return new Insets (r.height / 2, r.width, r.height / 2, 0);
        case 7 :
            return new Insets (0, 0, r.height, r.width);
        default :
            return null;
    }
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TriangleFigure.java" startline="167" endline="169">
{
    return getPolygon ().contains (x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TriangleFigure.java" startline="172" endline="174">
{
    return PolygonFigure.center (getPolygon ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TriangleFigure.java" startline="177" endline="179">
{
    return PolygonFigure.chop (getPolygon (), p);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TriangleFigure.java" startline="182" endline="186">
{
    TriangleFigure figure = (TriangleFigure) super.clone ();
    figure.fRotation = fRotation;
    return figure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TriangleFigure.java" startline="189" endline="191">
{
    return rotations [fRotation];
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TriangleFigure.java" startline="196" endline="199">
{
    super.write (dw);
    dw.writeInt (fRotation);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TriangleFigure.java" startline="202" endline="205">
{
    super.read (dr);
    fRotation = dr.readInt ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TriangleRotationHandle.java" startline="33" endline="35">
{
    super (owner);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TriangleRotationHandle.java" startline="43" endline="51">
{
    fOrigin = getOrigin ();
    TriangleRotationHandle.UndoActivity activity = (TriangleRotationHandle.UndoActivity) createUndoActivity (view);
    setUndoActivity (activity);
    activity.setAffectedFigures (new SingleFigureEnumerator (owner ()));
    double rotation = ((TriangleFigure) (owner ())).getRotationAngle ();
    activity.setRotationAngle (rotation);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TriangleRotationHandle.java" startline="61" endline="66">
{
    Point fCenter = owner ().center ();
    double angle = Math.atan2 (fOrigin.y + y - anchorY - fCenter.y, fOrigin.x + x - anchorX - fCenter.x);
    ((TriangleFigure) (owner ())).rotate (angle);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TriangleRotationHandle.java" startline="76" endline="78">
{
    fOrigin = null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TriangleRotationHandle.java" startline="81" endline="83">
{
    return getOrigin ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TriangleRotationHandle.java" startline="86" endline="108">
{
    Polygon p = ((TriangleFigure) (owner ())).getPolygon ();
    Point first = new Point (p.xpoints [0], p.ypoints [0]);
    Point ctr = owner ().center ();
    double len = Geom.length (first.x, first.y, ctr.x, ctr.y);
    if (len == 0) {
        return new Point (first.x - HANDLESIZE / 2, first.y + HANDLESIZE / 2);
    }

    double u = HANDLESIZE / len;
    if (u > 1.0) {
        return new Point ((first.x * 3 + ctr.x) / 4, (first.y * 3 + ctr.y) / 4);
    }
    else {
        return new Point ((int) (first.x * (1.0 - u) + ctr.x * u), (int) (first.y * (1.0 - u) + ctr.y * u));
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TriangleRotationHandle.java" startline="94" endline="96">
{
    return new Point (first.x - HANDLESIZE / 2, first.y + HANDLESIZE / 2);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TriangleRotationHandle.java" startline="100" endline="102">
{
    return new Point ((first.x * 3 + ctr.x) / 4, (first.y * 3 + ctr.y) / 4);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TriangleRotationHandle.java" startline="104" endline="107">
{
    return new Point ((int) (first.x * (1.0 - u) + ctr.x * u), (int) (first.y * (1.0 - u) + ctr.y * u));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TriangleRotationHandle.java" startline="111" endline="119">
{
    Rectangle r = displayBox ();
    g.setColor (Color.yellow);
    g.fillOval (r.x, r.y, r.width, r.height);
    g.setColor (Color.black);
    g.drawOval (r.x, r.y, r.width, r.height);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TriangleRotationHandle.java" startline="125" endline="127">
{
    return new TriangleRotationHandle.UndoActivity (newView);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TriangleRotationHandle.java" startline="134" endline="138">
{
    super (newView);
    setUndoable (true);
    setRedoable (true);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TriangleRotationHandle.java" startline="141" endline="148">
{
    if (! super.undo ()) {
        return false;
    }

    return resetRotationAngle ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TriangleRotationHandle.java" startline="143" endline="145">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TriangleRotationHandle.java" startline="151" endline="159">
{
    if (! isRedoable ()) {
        return false;
    }

    return resetRotationAngle ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TriangleRotationHandle.java" startline="154" endline="156">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TriangleRotationHandle.java" startline="162" endline="175">
{
    FigureEnumeration fe = getAffectedFigures ();
    if (! fe.hasNextFigure ()) {
        return false;
    }

    TriangleFigure figure = (TriangleFigure) fe.nextFigure ();
    double backupAngle = figure.getRotationAngle ();
    figure.willChange ();
    figure.rotate (getRotationAngle ());
    figure.changed ();
    setRotationAngle (backupAngle);
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TriangleRotationHandle.java" startline="165" endline="167">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TriangleRotationHandle.java" startline="178" endline="180">
{
    myRotationAngle = newRotationAngle;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/TriangleRotationHandle.java" startline="183" endline="185">
{
    return myRotationAngle;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/WindowMenu.java" startline="37" endline="76">
{
    super (newText);
    this.desktop = newDesktop;
    cascadeCommand = new AbstractCommand ("Cascade", newEditor) {

        public void execute () {
            WindowMenu.this.desktop.cascadeFrames ();
        }

        public boolean isExecutable () {
            return super.isExecutable () && (WindowMenu.this.desktop.getAllFrames ().length > 0);
        }

    }

    ;
    tileCommand = new AbstractCommand ("Tile", newEditor) {

        public void execute () {
            WindowMenu.this.desktop.tileFrames ();
        }

        public boolean isExecutable () {
            return super.isExecutable () && (WindowMenu.this.desktop.getAllFrames ().length > 0);
        }

    }

    ;
    addMenuListener (new MenuListener () {

        public void menuCanceled (MenuEvent e) {
        }

        public void menuDeselected (MenuEvent e) {
            removeAll ();
        }

        public void menuSelected (MenuEvent e) {
            buildChildMenus ();
        }

    }

    );
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/WindowMenu.java" startline="43" endline="45">
{
    WindowMenu.this.desktop.cascadeFrames ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/WindowMenu.java" startline="47" endline="49">
{
    return super.isExecutable () && (WindowMenu.this.desktop.getAllFrames ().length > 0);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/WindowMenu.java" startline="54" endline="56">
{
    WindowMenu.this.desktop.tileFrames ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/WindowMenu.java" startline="58" endline="60">
{
    return super.isExecutable () && (WindowMenu.this.desktop.getAllFrames ().length > 0);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/WindowMenu.java" startline="64" endline="64">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/WindowMenu.java" startline="67" endline="69">
{
    removeAll ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/WindowMenu.java" startline="72" endline="74">
{
    buildChildMenus ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/WindowMenu.java" startline="80" endline="116">
{
    ChildMenuItem menu;
    JInternalFrame [] array = desktop.getAllFrames ();
    add (new CommandMenuItem (cascadeCommand));
    add (new CommandMenuItem (tileCommand));
    if (array.length > 0) {
        addSeparator ();
    }

    for (int i = 0;
    i < array.length; i ++) {
        menu = new ChildMenuItem (array [i]);
        menu.setState (i == 0);
        menu.addActionListener (new ActionListener () {

            public void actionPerformed (ActionEvent ae) {
                JInternalFrame frame = ((ChildMenuItem) ae.getSource ()).getFrame ();
                frame.moveToFront ();
                try {
                    frame.setSelected (true);
                }
                catch (PropertyVetoException e) {
                    e.printStackTrace ();
                }

            }

        }

        );
        menu.setIcon (array [i].getFrameIcon ());
        add (menu);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/WindowMenu.java" startline="87" endline="89">
{
    addSeparator ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/WindowMenu.java" startline="94" endline="115">
{
    menu = new ChildMenuItem (array [i]);
    menu.setState (i == 0);
    menu.addActionListener (new ActionListener () {

        public void actionPerformed (ActionEvent ae) {
            JInternalFrame frame = ((ChildMenuItem) ae.getSource ()).getFrame ();
            frame.moveToFront ();
            try {
                frame.setSelected (true);
            }
            catch (PropertyVetoException e) {
                e.printStackTrace ();
            }

        }

    }

    );
    menu.setIcon (array [i].getFrameIcon ());
    add (menu);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/WindowMenu.java" startline="100" endline="111">
{
    JInternalFrame frame = ((ChildMenuItem) ae.getSource ()).getFrame ();
    frame.moveToFront ();
    try {
        frame.setSelected (true);
    }
    catch (PropertyVetoException e) {
        e.printStackTrace ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/WindowMenu.java" startline="104" endline="106">
{
    frame.setSelected (true);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/WindowMenu.java" startline="108" endline="110">
{
    e.printStackTrace ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/WindowMenu.java" startline="125" endline="128">
{
    super (frame.getTitle ());
    this.frame = frame;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/WindowMenu.java" startline="131" endline="133">
{
    return frame;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDFigures.java" startline="31" endline="39">
{
    this.figures = CollectionsFactory.current ().createList ();
    while (fe.hasNextFigure ()) {
        figures.add (fe.nextFigure ());
    }

    this.origin = origin;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDFigures.java" startline="35" endline="37">
{
    figures.add (fe.nextFigure ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDFigures.java" startline="42" endline="44">
{
    return new FigureEnumerator (figures);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDFigures.java" startline="47" endline="49">
{
    return origin;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDFiguresTransferable.java" startline="27" endline="30">
{
    this.o = o;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDFiguresTransferable.java" startline="32" endline="34">
{
    return new DataFlavor [] {DNDFiguresFlavor};
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDFiguresTransferable.java" startline="37" endline="39">
{
    return flavor.equals (DNDFiguresFlavor);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDFiguresTransferable.java" startline="42" endline="48">
{
    if (isDataFlavorSupported (flavor) == false) {
        throw new UnsupportedFlavorException (flavor);
    }

    return o;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDFiguresTransferable.java" startline="44" endline="46">
{
    throw new UnsupportedFlavorException (flavor);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="36" endline="104">
{
    if (transferable == null) {
        return null;
    }

    try {
        if (flavor.equals (DataFlavor.stringFlavor)) {
            String str = (String) transferable.getTransferData (DataFlavor.stringFlavor);
            return str;
        }
        else if (flavor.equals (DataFlavor.javaFileListFlavor)) {
            java.util.List aList = (java.util.List) transferable.getTransferData (DataFlavor.javaFileListFlavor);
            File fList [] = new File [aList.size ()];
            aList.toArray (fList);
            return fList;
        }
        else if (flavor.equals (ASCIIFlavor)) {
            String txt = null;
            InputStream is = (InputStream) transferable.getTransferData (ASCIIFlavor);
            int length = is.available ();
            byte [] bytes = new byte [length];
            int n = is.read (bytes);
            if (n > 0) {
                txt = new String (bytes, 0, n);
            }

            return txt;
        }
        else if (flavor.equals (DNDFiguresTransferable.DNDFiguresFlavor)) {
            DNDFigures ff = (DNDFigures) transferable.getTransferData (DNDFiguresTransferable.DNDFiguresFlavor);
            return ff;
        }
        else {
            return null;
        }

    }
    catch (java.io.IOException ioe) {
        System.err.println (ioe);
        return null;
    }
    catch (UnsupportedFlavorException ufe) {
        System.err.println (ufe);
        return null;
    }
    catch (ClassCastException cce) {
        System.err.println (cce);
        return null;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="38" endline="40">
{
    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="42" endline="88">
{
    if (flavor.equals (DataFlavor.stringFlavor)) {
        String str = (String) transferable.getTransferData (DataFlavor.stringFlavor);
        return str;
    }
    else if (flavor.equals (DataFlavor.javaFileListFlavor)) {
        java.util.List aList = (java.util.List) transferable.getTransferData (DataFlavor.javaFileListFlavor);
        File fList [] = new File [aList.size ()];
        aList.toArray (fList);
        return fList;
    }
    else if (flavor.equals (ASCIIFlavor)) {
        String txt = null;
        InputStream is = (InputStream) transferable.getTransferData (ASCIIFlavor);
        int length = is.available ();
        byte [] bytes = new byte [length];
        int n = is.read (bytes);
        if (n > 0) {
            txt = new String (bytes, 0, n);
        }

        return txt;
    }
    else if (flavor.equals (DNDFiguresTransferable.DNDFiguresFlavor)) {
        DNDFigures ff = (DNDFigures) transferable.getTransferData (DNDFiguresTransferable.DNDFiguresFlavor);
        return ff;
    }
    else {
        return null;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="44" endline="47">
{
    String str = (String) transferable.getTransferData (DataFlavor.stringFlavor);
    return str;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="49" endline="54">
{
    java.util.List aList = (java.util.List) transferable.getTransferData (DataFlavor.javaFileListFlavor);
    File fList [] = new File [aList.size ()];
    aList.toArray (fList);
    return fList;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="56" endline="78">
{
    String txt = null;
    InputStream is = (InputStream) transferable.getTransferData (ASCIIFlavor);
    int length = is.available ();
    byte [] bytes = new byte [length];
    int n = is.read (bytes);
    if (n > 0) {
        txt = new String (bytes, 0, n);
    }

    return txt;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="64" endline="76">
{
    txt = new String (bytes, 0, n);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="80" endline="83">
{
    DNDFigures ff = (DNDFigures) transferable.getTransferData (DNDFiguresTransferable.DNDFiguresFlavor);
    return ff;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="85" endline="87">
{
    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="90" endline="93">
{
    System.err.println (ioe);
    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="95" endline="98">
{
    System.err.println (ufe);
    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="100" endline="103">
{
    System.err.println (cce);
    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="107" endline="117">
{
    if (state == true) {
        return createDropTarget ();
    }
    else {
        destroyDropTarget ();
        return false;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="109" endline="111">
{
    return createDropTarget ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="113" endline="116">
{
    destroyDropTarget ();
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="120" endline="130">
{
    if (state == true) {
        return createDragGestureRecognizer ();
    }
    else {
        destroyDragGestreRecognizer ();
        return false;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="122" endline="124">
{
    return createDragGestureRecognizer ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="126" endline="129">
{
    destroyDragGestreRecognizer ();
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="133" endline="151">
{
    if (Component.class.isInstance (view ())) {
        try {
            dt = new DropTarget ((Component) view (), DnDConstants.ACTION_COPY_OR_MOVE, this);
            System.out.println ("" + view () + " Initialized to DND.");
            return true;
        }
        catch (java.lang.NullPointerException npe) {
            System.err.println ("View Failed to initialize to DND.");
            System.err.println ("Container likely did not have peer before the DropTarget was added");
            System.err.println (npe);
            npe.printStackTrace ();
        }

    }

    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="135" endline="149">
{
    try {
        dt = new DropTarget ((Component) view (), DnDConstants.ACTION_COPY_OR_MOVE, this);
        System.out.println ("" + view () + " Initialized to DND.");
        return true;
    }
    catch (java.lang.NullPointerException npe) {
        System.err.println ("View Failed to initialize to DND.");
        System.err.println ("Container likely did not have peer before the DropTarget was added");
        System.err.println (npe);
        npe.printStackTrace ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="137" endline="141">
{
    dt = new DropTarget ((Component) view (), DnDConstants.ACTION_COPY_OR_MOVE, this);
    System.out.println ("" + view () + " Initialized to DND.");
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="143" endline="148">
{
    System.err.println ("View Failed to initialize to DND.");
    System.err.println ("Container likely did not have peer before the DropTarget was added");
    System.err.println (npe);
    npe.printStackTrace ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="153" endline="160">
{
    if (dt != null) {
        dt.setComponent (null);
        dt.removeDropTargetListener (this);
        dt = null;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="155" endline="159">
{
    dt.setComponent (null);
    dt.removeDropTargetListener (this);
    dt = null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="167" endline="180">
{
    if (Component.class.isInstance (view ())) {
        Component c = (Component) view ();
        dgr = DragSource.getDefaultDragSource ().createDefaultDragGestureRecognizer (c, DnDConstants.ACTION_COPY_OR_MOVE, this);
        return true;
    }
    else return false;

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="169" endline="177">
{
    Component c = (Component) view ();
    dgr = DragSource.getDefaultDragSource ().createDefaultDragGestureRecognizer (c, DnDConstants.ACTION_COPY_OR_MOVE, this);
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="186" endline="194">
{
    System.out.println ("Destroying DGR");
    if (dgr != null) {
        dgr.removeDragGestureListener (this);
        dgr.setComponent (null);
        dgr = null;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="189" endline="193">
{
    dgr.removeDragGestureListener (this);
    dgr.setComponent (null);
    dgr = null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="203" endline="279">
{
    Component c = dge.getComponent ();
    if (DrawingView.class.isInstance (c)) {
        boolean found = false;
        DrawingView dv = (DrawingView) c;
        FigureEnumeration selectedElements = dv.selection ();
        if (selectedElements.hasNextFigure () == false) {
            return;
        }

        Point p = dge.getDragOrigin ();
        while (selectedElements.hasNextFigure ()) {
            Figure f = selectedElements.nextFigure ();
            if (f.containsPoint (p.x, p.y)) {
                found = true;
                break;
            }

        }

        if (found == true) {
            DNDFigures dndff = new DNDFigures (dv.selection (), p);
            DNDFiguresTransferable trans = new DNDFiguresTransferable (dndff);
            if (JComponent.class.isInstance (c)) {
                ((JComponent) c).setAutoscrolls (false);
            }

            dge.getDragSource ().startDrag (dge, null, trans, this);
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="208" endline="278">
{
    boolean found = false;
    DrawingView dv = (DrawingView) c;
    FigureEnumeration selectedElements = dv.selection ();
    if (selectedElements.hasNextFigure () == false) {
        return;
    }

    Point p = dge.getDragOrigin ();
    while (selectedElements.hasNextFigure ()) {
        Figure f = selectedElements.nextFigure ();
        if (f.containsPoint (p.x, p.y)) {
            found = true;
            break;
        }

    }

    if (found == true) {
        DNDFigures dndff = new DNDFigures (dv.selection (), p);
        DNDFiguresTransferable trans = new DNDFiguresTransferable (dndff);
        if (JComponent.class.isInstance (c)) {
            ((JComponent) c).setAutoscrolls (false);
        }

        dge.getDragSource ().startDrag (dge, null, trans, this);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="220" endline="222">
{
    return;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="227" endline="238">
{
    Figure f = selectedElements.nextFigure ();
    if (f.containsPoint (p.x, p.y)) {
        found = true;
        break;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="230" endline="237">
{
    found = true;
    break;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="240" endline="277">
{
    DNDFigures dndff = new DNDFigures (dv.selection (), p);
    DNDFiguresTransferable trans = new DNDFiguresTransferable (dndff);
    if (JComponent.class.isInstance (c)) {
        ((JComponent) c).setAutoscrolls (false);
    }

    dge.getDragSource ().startDrag (dge, null, trans, this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="269" endline="271">
{
    ((JComponent) c).setAutoscrolls (false);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="289" endline="300">
{
    supportDropTargetDragEvent (dtde);
    if (fLastX == 0) {
        fLastX = dtde.getLocation ().x;
    }

    if (fLastY == 0) {
        fLastY = dtde.getLocation ().y;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="293" endline="295">
{
    fLastX = dtde.getLocation ().x;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="297" endline="299">
{
    fLastY = dtde.getLocation ().y;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="306" endline="308">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="314" endline="332">
{
    if (supportDropTargetDragEvent (dtde) == true) {
        int x = dtde.getLocation ().x;
        int y = dtde.getLocation ().y;
        if ((Math.abs (x - fLastX) > 0) || (Math.abs (y - fLastY) > 0)) {
            fLastX = x;
            fLastY = y;
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="317" endline="331">
{
    int x = dtde.getLocation ().x;
    int y = dtde.getLocation ().y;
    if ((Math.abs (x - fLastX) > 0) || (Math.abs (y - fLastY) > 0)) {
        fLastX = x;
        fLastY = y;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="321" endline="330">
{
    fLastX = x;
    fLastY = y;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="338" endline="447">
{
    System.out.println ("DropTargetDropEvent-drop");
    if (dtde.isDataFlavorSupported (DNDFiguresTransferable.DNDFiguresFlavor) == true) {
        System.out.println ("DNDFiguresFlavor");
        if ((dtde.getDropAction () & DnDConstants.ACTION_COPY_OR_MOVE) != 0) {
            System.out.println ("copy or move");
            if (dtde.isLocalTransfer () == false) {
                System.err.println ("Intra-JVM Transfers not implemented for figures yet.");
                return;
            }

            dtde.acceptDrop (dtde.getDropAction ());
            try {
                DNDFigures ff = (DNDFigures) ProcessReceivedData (DNDFiguresTransferable.DNDFiguresFlavor, dtde.getTransferable ());
                FigureEnumeration fe = ff.getFigures ();
                Point theO = ff.getOrigin ();
                view ().clearSelection ();
                Point newP = dtde.getLocation ();
                int dx = newP.x - theO.x;
                int dy = newP.y - theO.y;
                while (fe.hasNextFigure ()) {
                    Figure f = fe.nextFigure ();
                    f.moveBy (dx, dy);
                    view ().add (f);
                    if (dtde.getDropAction () == DnDConstants.ACTION_MOVE) view ().addToSelection (f);

                    System.out.println ("added to view");
                }

                view ().checkDamage ();
                dtde.getDropTargetContext ().dropComplete (true);
            }
            catch (NullPointerException npe) {
                npe.printStackTrace ();
                dtde.getDropTargetContext ().dropComplete (false);
            }

        }
        else {
            dtde.rejectDrop ();
        }

    }
    else if (dtde.isDataFlavorSupported (DataFlavor.stringFlavor)) {
        dtde.acceptDrop (dtde.getDropAction ());
        Object o = ProcessReceivedData (DataFlavor.stringFlavor, dtde.getTransferable ());
        if (o != null) {
            dtde.getDropTargetContext ().dropComplete (true);
        }
        else {
            dtde.getDropTargetContext ().dropComplete (false);
        }

    }
    else if (dtde.isDataFlavorSupported (ASCIIFlavor) == true) {
        dtde.acceptDrop (DnDConstants.ACTION_COPY);
        Object o = ProcessReceivedData (ASCIIFlavor, dtde.getTransferable ());
        if (o != null) {
            dtde.getDropTargetContext ().dropComplete (true);
        }
        else {
            dtde.getDropTargetContext ().dropComplete (false);
        }

    }
    else if (dtde.isDataFlavorSupported (DataFlavor.javaFileListFlavor)) {
        dtde.acceptDrop (DnDConstants.ACTION_COPY);
        java.io.File [] fList = (java.io.File []) ProcessReceivedData (DataFlavor.javaFileListFlavor, dtde.getTransferable ());
        if (fList != null) {
            for (int x = 0;
            x < fList.length; x ++) {
                System.out.println (fList [x].getAbsolutePath ());
            }

            dtde.getDropTargetContext ().dropComplete (true);
        }
        else {
            dtde.getDropTargetContext ().dropComplete (false);
        }

    }

    fLastX = 0;
    fLastY = 0;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="342" endline="394">
{
    System.out.println ("DNDFiguresFlavor");
    if ((dtde.getDropAction () & DnDConstants.ACTION_COPY_OR_MOVE) != 0) {
        System.out.println ("copy or move");
        if (dtde.isLocalTransfer () == false) {
            System.err.println ("Intra-JVM Transfers not implemented for figures yet.");
            return;
        }

        dtde.acceptDrop (dtde.getDropAction ());
        try {
            DNDFigures ff = (DNDFigures) ProcessReceivedData (DNDFiguresTransferable.DNDFiguresFlavor, dtde.getTransferable ());
            FigureEnumeration fe = ff.getFigures ();
            Point theO = ff.getOrigin ();
            view ().clearSelection ();
            Point newP = dtde.getLocation ();
            int dx = newP.x - theO.x;
            int dy = newP.y - theO.y;
            while (fe.hasNextFigure ()) {
                Figure f = fe.nextFigure ();
                f.moveBy (dx, dy);
                view ().add (f);
                if (dtde.getDropAction () == DnDConstants.ACTION_MOVE) view ().addToSelection (f);

                System.out.println ("added to view");
            }

            view ().checkDamage ();
            dtde.getDropTargetContext ().dropComplete (true);
        }
        catch (NullPointerException npe) {
            npe.printStackTrace ();
            dtde.getDropTargetContext ().dropComplete (false);
        }

    }
    else {
        dtde.rejectDrop ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="345" endline="389">
{
    System.out.println ("copy or move");
    if (dtde.isLocalTransfer () == false) {
        System.err.println ("Intra-JVM Transfers not implemented for figures yet.");
        return;
    }

    dtde.acceptDrop (dtde.getDropAction ());
    try {
        DNDFigures ff = (DNDFigures) ProcessReceivedData (DNDFiguresTransferable.DNDFiguresFlavor, dtde.getTransferable ());
        FigureEnumeration fe = ff.getFigures ();
        Point theO = ff.getOrigin ();
        view ().clearSelection ();
        Point newP = dtde.getLocation ();
        int dx = newP.x - theO.x;
        int dy = newP.y - theO.y;
        while (fe.hasNextFigure ()) {
            Figure f = fe.nextFigure ();
            f.moveBy (dx, dy);
            view ().add (f);
            if (dtde.getDropAction () == DnDConstants.ACTION_MOVE) view ().addToSelection (f);

            System.out.println ("added to view");
        }

        view ().checkDamage ();
        dtde.getDropTargetContext ().dropComplete (true);
    }
    catch (NullPointerException npe) {
        npe.printStackTrace ();
        dtde.getDropTargetContext ().dropComplete (false);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="348" endline="351">
{
    System.err.println ("Intra-JVM Transfers not implemented for figures yet.");
    return;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="354" endline="383">
{
    DNDFigures ff = (DNDFigures) ProcessReceivedData (DNDFiguresTransferable.DNDFiguresFlavor, dtde.getTransferable ());
    FigureEnumeration fe = ff.getFigures ();
    Point theO = ff.getOrigin ();
    view ().clearSelection ();
    Point newP = dtde.getLocation ();
    int dx = newP.x - theO.x;
    int dy = newP.y - theO.y;
    while (fe.hasNextFigure ()) {
        Figure f = fe.nextFigure ();
        f.moveBy (dx, dy);
        view ().add (f);
        if (dtde.getDropAction () == DnDConstants.ACTION_MOVE) view ().addToSelection (f);

        System.out.println ("added to view");
    }

    view ().checkDamage ();
    dtde.getDropTargetContext ().dropComplete (true);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="368" endline="380">
{
    Figure f = fe.nextFigure ();
    f.moveBy (dx, dy);
    view ().add (f);
    if (dtde.getDropAction () == DnDConstants.ACTION_MOVE) view ().addToSelection (f);

    System.out.println ("added to view");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="385" endline="388">
{
    npe.printStackTrace ();
    dtde.getDropTargetContext ().dropComplete (false);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="391" endline="393">
{
    dtde.rejectDrop ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="396" endline="409">
{
    dtde.acceptDrop (dtde.getDropAction ());
    Object o = ProcessReceivedData (DataFlavor.stringFlavor, dtde.getTransferable ());
    if (o != null) {
        dtde.getDropTargetContext ().dropComplete (true);
    }
    else {
        dtde.getDropTargetContext ().dropComplete (false);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="401" endline="404">
{
    dtde.getDropTargetContext ().dropComplete (true);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="406" endline="408">
{
    dtde.getDropTargetContext ().dropComplete (false);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="411" endline="425">
{
    dtde.acceptDrop (DnDConstants.ACTION_COPY);
    Object o = ProcessReceivedData (ASCIIFlavor, dtde.getTransferable ());
    if (o != null) {
        dtde.getDropTargetContext ().dropComplete (true);
    }
    else {
        dtde.getDropTargetContext ().dropComplete (false);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="416" endline="420">
{
    dtde.getDropTargetContext ().dropComplete (true);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="422" endline="424">
{
    dtde.getDropTargetContext ().dropComplete (false);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="427" endline="444">
{
    dtde.acceptDrop (DnDConstants.ACTION_COPY);
    java.io.File [] fList = (java.io.File []) ProcessReceivedData (DataFlavor.javaFileListFlavor, dtde.getTransferable ());
    if (fList != null) {
        for (int x = 0;
        x < fList.length; x ++) {
            System.out.println (fList [x].getAbsolutePath ());
        }

        dtde.getDropTargetContext ().dropComplete (true);
    }
    else {
        dtde.getDropTargetContext ().dropComplete (false);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="432" endline="439">
{
    for (int x = 0;
    x < fList.length; x ++) {
        System.out.println (fList [x].getAbsolutePath ());
    }

    dtde.getDropTargetContext ().dropComplete (true);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="435" endline="437">
{
    System.out.println (fList [x].getAbsolutePath ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="441" endline="443">
{
    dtde.getDropTargetContext ().dropComplete (false);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="453" endline="456">
{
    supportDropTargetDragEvent (dtde);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="465" endline="504">
{
    if (dtde.isDataFlavorSupported (DNDFiguresTransferable.DNDFiguresFlavor) == true) {
        if (dtde.getDropAction () == DnDConstants.ACTION_COPY) {
            dtde.acceptDrag (DnDConstants.ACTION_COPY);
            return true;
        }
        else if (dtde.getDropAction () == DnDConstants.ACTION_MOVE) {
            dtde.acceptDrag (DnDConstants.ACTION_MOVE);
            return true;
        }
        else {
            dtde.rejectDrag ();
            return false;
        }

    }
    else if (dtde.isDataFlavorSupported (ASCIIFlavor) == true) {
        dtde.acceptDrag (dtde.getDropAction ());
        return true;
    }
    else if (dtde.isDataFlavorSupported (DataFlavor.stringFlavor) == true) {
        dtde.acceptDrag (dtde.getDropAction ());
        return true;
    }
    else if (dtde.isDataFlavorSupported (DataFlavor.javaFileListFlavor) == true) {
        dtde.acceptDrag (dtde.getDropAction ());
        return true;
    }
    else {
        dtde.rejectDrag ();
        return false;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="467" endline="483">
{
    if (dtde.getDropAction () == DnDConstants.ACTION_COPY) {
        dtde.acceptDrag (DnDConstants.ACTION_COPY);
        return true;
    }
    else if (dtde.getDropAction () == DnDConstants.ACTION_MOVE) {
        dtde.acceptDrag (DnDConstants.ACTION_MOVE);
        return true;
    }
    else {
        dtde.rejectDrag ();
        return false;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="469" endline="472">
{
    dtde.acceptDrag (DnDConstants.ACTION_COPY);
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="474" endline="477">
{
    dtde.acceptDrag (DnDConstants.ACTION_MOVE);
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="479" endline="482">
{
    dtde.rejectDrag ();
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="485" endline="488">
{
    dtde.acceptDrag (dtde.getDropAction ());
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="490" endline="493">
{
    dtde.acceptDrag (dtde.getDropAction ());
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="495" endline="498">
{
    dtde.acceptDrag (dtde.getDropAction ());
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="500" endline="503">
{
    dtde.rejectDrag ();
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="514" endline="556">
{
    DrawingView view = (DrawingView) dsde.getDragSourceContext ().getComponent ();
    System.out.println ("DragSourceDropEvent-dragDropEnd");
    if (dsde.getDropSuccess () == true) {
        if (dsde.getDropAction () == DnDConstants.ACTION_MOVE) {
            DNDFigures df = (DNDFigures) ProcessReceivedData (DNDFiguresTransferable.DNDFiguresFlavor, dsde.getDragSourceContext ().getTransferable ());
            FigureEnumeration fe = df.getFigures ();
            if (fe != null) {
                while (fe.hasNextFigure ()) {
                    Figure f = fe.nextFigure ();
                    view.remove (f);
                    System.out.println ("removing " + f);
                }

                view.clearSelection ();
                view.checkDamage ();
            }

        }
        else if (dsde.getDropAction () == DnDConstants.ACTION_COPY) {
        }

    }

    if (autoscrollState != null) {
        Component c = dsde.getDragSourceContext ().getComponent ();
        if (JComponent.class.isInstance (c)) {
            JComponent jc = (JComponent) c;
            jc.setAutoscrolls (autoscrollState.booleanValue ());
            autoscrollState = null;
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="518" endline="544">
{
    if (dsde.getDropAction () == DnDConstants.ACTION_MOVE) {
        DNDFigures df = (DNDFigures) ProcessReceivedData (DNDFiguresTransferable.DNDFiguresFlavor, dsde.getDragSourceContext ().getTransferable ());
        FigureEnumeration fe = df.getFigures ();
        if (fe != null) {
            while (fe.hasNextFigure ()) {
                Figure f = fe.nextFigure ();
                view.remove (f);
                System.out.println ("removing " + f);
            }

            view.clearSelection ();
            view.checkDamage ();
        }

    }
    else if (dsde.getDropAction () == DnDConstants.ACTION_COPY) {
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="520" endline="539">
{
    DNDFigures df = (DNDFigures) ProcessReceivedData (DNDFiguresTransferable.DNDFiguresFlavor, dsde.getDragSourceContext ().getTransferable ());
    FigureEnumeration fe = df.getFigures ();
    if (fe != null) {
        while (fe.hasNextFigure ()) {
            Figure f = fe.nextFigure ();
            view.remove (f);
            System.out.println ("removing " + f);
        }

        view.clearSelection ();
        view.checkDamage ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="528" endline="538">
{
    while (fe.hasNextFigure ()) {
        Figure f = fe.nextFigure ();
        view.remove (f);
        System.out.println ("removing " + f);
    }

    view.clearSelection ();
    view.checkDamage ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="530" endline="535">
{
    Figure f = fe.nextFigure ();
    view.remove (f);
    System.out.println ("removing " + f);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="541" endline="543">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="547" endline="555">
{
    Component c = dsde.getDragSourceContext ().getComponent ();
    if (JComponent.class.isInstance (c)) {
        JComponent jc = (JComponent) c;
        jc.setAutoscrolls (autoscrollState.booleanValue ());
        autoscrollState = null;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="550" endline="554">
{
    JComponent jc = (JComponent) c;
    jc.setAutoscrolls (autoscrollState.booleanValue ());
    autoscrollState = null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="561" endline="575">
{
    if (autoscrollState == null) {
        Component c = dsde.getDragSourceContext ().getComponent ();
        if (JComponent.class.isInstance (c)) {
            JComponent jc = (JComponent) c;
            autoscrollState = new Boolean (jc.getAutoscrolls ());
            jc.setAutoscrolls (false);
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="563" endline="571">
{
    Component c = dsde.getDragSourceContext ().getComponent ();
    if (JComponent.class.isInstance (c)) {
        JComponent jc = (JComponent) c;
        autoscrollState = new Boolean (jc.getAutoscrolls ());
        jc.setAutoscrolls (false);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="566" endline="570">
{
    JComponent jc = (JComponent) c;
    autoscrollState = new Boolean (jc.getAutoscrolls ());
    jc.setAutoscrolls (false);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="580" endline="581">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="586" endline="588">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DNDHelper.java" startline="593" endline="594">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DragNDropTool.java" startline="63" endline="66">
{
    super (editor);
    comps = CollectionsFactory.current ().createList ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DragNDropTool.java" startline="72" endline="81">
{
    super.viewCreated (view);
    if (DNDInterface.class.isInstance (view)) {
        DNDInterface dndi = (DNDInterface) view;
        dndi.setDropTargetActive (true);
        dndi.setDragSourceActive (false);
        comps.add (dndi);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DragNDropTool.java" startline="75" endline="80">
{
    DNDInterface dndi = (DNDInterface) view;
    dndi.setDropTargetActive (true);
    dndi.setDragSourceActive (false);
    comps.add (dndi);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DragNDropTool.java" startline="87" endline="96">
{
    if (DNDInterface.class.isInstance (view)) {
        DNDInterface dndi = (DNDInterface) view;
        dndi.setDropTargetActive (false);
        dndi.setDragSourceActive (false);
        comps.remove (dndi);
    }

    super.viewDestroying (view);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DragNDropTool.java" startline="89" endline="94">
{
    DNDInterface dndi = (DNDInterface) view;
    dndi.setDropTargetActive (false);
    dndi.setDragSourceActive (false);
    comps.remove (dndi);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DragNDropTool.java" startline="103" endline="108">
{
    super.activate ();
    System.out.println ("DNDTool Activation");
    setDragSourceActive (true);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DragNDropTool.java" startline="111" endline="115">
{
    System.out.println ("DNDTool deactivation.");
    setDragSourceActive (false);
    super.deactivate ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DragNDropTool.java" startline="118" endline="125">
{
    Iterator it = comps.iterator ();
    while (it.hasNext ()) {
        DNDInterface dndi = (DNDInterface) it.next ();
        dndi.setDragSourceActive (newState);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DragNDropTool.java" startline="121" endline="124">
{
    DNDInterface dndi = (DNDInterface) it.next ();
    dndi.setDragSourceActive (newState);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DragNDropTool.java" startline="132" endline="192">
{
    if (view == null) {
        return;
    }

    Handle handle = view.findHandle (x, y);
    Figure figure = view.drawing ().findFigure (x, y);
    if (handle != null) {
        if (LocatorHandle.class.isInstance (handle)) {
            LocatorHandle lh = (LocatorHandle) handle;
            Locator loc = lh.getLocator ();
            if (RelativeLocator.class.isInstance (loc)) {
                RelativeLocator rl = (RelativeLocator) loc;
                if (rl.equals (RelativeLocator.north ())) {
                    view.setCursor (new Cursor (Cursor.N_RESIZE_CURSOR));
                }
                else if (rl.equals (RelativeLocator.northEast ())) {
                    view.setCursor (new Cursor (Cursor.NE_RESIZE_CURSOR));
                }
                else if (rl.equals (RelativeLocator.east ())) {
                    view.setCursor (new Cursor (Cursor.E_RESIZE_CURSOR));
                }
                else if (rl.equals (RelativeLocator.southEast ())) {
                    view.setCursor (new Cursor (Cursor.SE_RESIZE_CURSOR));
                }
                else if (rl.equals (RelativeLocator.south ())) {
                    view.setCursor (new Cursor (Cursor.S_RESIZE_CURSOR));
                }
                else if (rl.equals (RelativeLocator.southWest ())) {
                    view.setCursor (new Cursor (Cursor.SW_RESIZE_CURSOR));
                }
                else if (rl.equals (RelativeLocator.west ())) {
                    view.setCursor (new Cursor (Cursor.W_RESIZE_CURSOR));
                }
                else if (rl.equals (RelativeLocator.northWest ())) {
                    view.setCursor (new Cursor (Cursor.NW_RESIZE_CURSOR));
                }

            }

        }

    }
    else if (figure != null) {
        view.setCursor (new Cursor (Cursor.MOVE_CURSOR));
    }
    else {
        view.setCursor (Cursor.getDefaultCursor ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DragNDropTool.java" startline="134" endline="136">
{
    return;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DragNDropTool.java" startline="141" endline="183">
{
    if (LocatorHandle.class.isInstance (handle)) {
        LocatorHandle lh = (LocatorHandle) handle;
        Locator loc = lh.getLocator ();
        if (RelativeLocator.class.isInstance (loc)) {
            RelativeLocator rl = (RelativeLocator) loc;
            if (rl.equals (RelativeLocator.north ())) {
                view.setCursor (new Cursor (Cursor.N_RESIZE_CURSOR));
            }
            else if (rl.equals (RelativeLocator.northEast ())) {
                view.setCursor (new Cursor (Cursor.NE_RESIZE_CURSOR));
            }
            else if (rl.equals (RelativeLocator.east ())) {
                view.setCursor (new Cursor (Cursor.E_RESIZE_CURSOR));
            }
            else if (rl.equals (RelativeLocator.southEast ())) {
                view.setCursor (new Cursor (Cursor.SE_RESIZE_CURSOR));
            }
            else if (rl.equals (RelativeLocator.south ())) {
                view.setCursor (new Cursor (Cursor.S_RESIZE_CURSOR));
            }
            else if (rl.equals (RelativeLocator.southWest ())) {
                view.setCursor (new Cursor (Cursor.SW_RESIZE_CURSOR));
            }
            else if (rl.equals (RelativeLocator.west ())) {
                view.setCursor (new Cursor (Cursor.W_RESIZE_CURSOR));
            }
            else if (rl.equals (RelativeLocator.northWest ())) {
                view.setCursor (new Cursor (Cursor.NW_RESIZE_CURSOR));
            }

        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DragNDropTool.java" startline="143" endline="182">
{
    LocatorHandle lh = (LocatorHandle) handle;
    Locator loc = lh.getLocator ();
    if (RelativeLocator.class.isInstance (loc)) {
        RelativeLocator rl = (RelativeLocator) loc;
        if (rl.equals (RelativeLocator.north ())) {
            view.setCursor (new Cursor (Cursor.N_RESIZE_CURSOR));
        }
        else if (rl.equals (RelativeLocator.northEast ())) {
            view.setCursor (new Cursor (Cursor.NE_RESIZE_CURSOR));
        }
        else if (rl.equals (RelativeLocator.east ())) {
            view.setCursor (new Cursor (Cursor.E_RESIZE_CURSOR));
        }
        else if (rl.equals (RelativeLocator.southEast ())) {
            view.setCursor (new Cursor (Cursor.SE_RESIZE_CURSOR));
        }
        else if (rl.equals (RelativeLocator.south ())) {
            view.setCursor (new Cursor (Cursor.S_RESIZE_CURSOR));
        }
        else if (rl.equals (RelativeLocator.southWest ())) {
            view.setCursor (new Cursor (Cursor.SW_RESIZE_CURSOR));
        }
        else if (rl.equals (RelativeLocator.west ())) {
            view.setCursor (new Cursor (Cursor.W_RESIZE_CURSOR));
        }
        else if (rl.equals (RelativeLocator.northWest ())) {
            view.setCursor (new Cursor (Cursor.NW_RESIZE_CURSOR));
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DragNDropTool.java" startline="147" endline="181">
{
    RelativeLocator rl = (RelativeLocator) loc;
    if (rl.equals (RelativeLocator.north ())) {
        view.setCursor (new Cursor (Cursor.N_RESIZE_CURSOR));
    }
    else if (rl.equals (RelativeLocator.northEast ())) {
        view.setCursor (new Cursor (Cursor.NE_RESIZE_CURSOR));
    }
    else if (rl.equals (RelativeLocator.east ())) {
        view.setCursor (new Cursor (Cursor.E_RESIZE_CURSOR));
    }
    else if (rl.equals (RelativeLocator.southEast ())) {
        view.setCursor (new Cursor (Cursor.SE_RESIZE_CURSOR));
    }
    else if (rl.equals (RelativeLocator.south ())) {
        view.setCursor (new Cursor (Cursor.S_RESIZE_CURSOR));
    }
    else if (rl.equals (RelativeLocator.southWest ())) {
        view.setCursor (new Cursor (Cursor.SW_RESIZE_CURSOR));
    }
    else if (rl.equals (RelativeLocator.west ())) {
        view.setCursor (new Cursor (Cursor.W_RESIZE_CURSOR));
    }
    else if (rl.equals (RelativeLocator.northWest ())) {
        view.setCursor (new Cursor (Cursor.NW_RESIZE_CURSOR));
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DragNDropTool.java" startline="150" endline="152">
{
    view.setCursor (new Cursor (Cursor.N_RESIZE_CURSOR));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DragNDropTool.java" startline="154" endline="156">
{
    view.setCursor (new Cursor (Cursor.NE_RESIZE_CURSOR));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DragNDropTool.java" startline="158" endline="160">
{
    view.setCursor (new Cursor (Cursor.E_RESIZE_CURSOR));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DragNDropTool.java" startline="162" endline="164">
{
    view.setCursor (new Cursor (Cursor.SE_RESIZE_CURSOR));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DragNDropTool.java" startline="166" endline="168">
{
    view.setCursor (new Cursor (Cursor.S_RESIZE_CURSOR));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DragNDropTool.java" startline="170" endline="172">
{
    view.setCursor (new Cursor (Cursor.SW_RESIZE_CURSOR));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DragNDropTool.java" startline="174" endline="176">
{
    view.setCursor (new Cursor (Cursor.W_RESIZE_CURSOR));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DragNDropTool.java" startline="178" endline="180">
{
    view.setCursor (new Cursor (Cursor.NW_RESIZE_CURSOR));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DragNDropTool.java" startline="185" endline="187">
{
    view.setCursor (new Cursor (Cursor.MOVE_CURSOR));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DragNDropTool.java" startline="189" endline="191">
{
    view.setCursor (Cursor.getDefaultCursor ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DragNDropTool.java" startline="201" endline="206">
{
    if (evt.getSource () == getActiveView ()) {
        setCursor (evt.getX (), evt.getY (), getActiveView ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DragNDropTool.java" startline="203" endline="205">
{
    setCursor (evt.getX (), evt.getY (), getActiveView ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DragNDropTool.java" startline="214" endline="221">
{
    if (fChild != null) {
        fChild.mouseUp (e, x, y);
    }

    fChild = null;
    view ().unfreezeView ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DragNDropTool.java" startline="216" endline="218">
{
    fChild.mouseUp (e, x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DragNDropTool.java" startline="228" endline="276">
{
    super.mouseDown (e, x, y);
    if (fChild != null) {
        return;
    }

    view ().freezeView ();
    Handle handle = view ().findHandle (e.getX (), e.getY ());
    if (handle != null) {
        fChild = createHandleTracker (handle);
    }
    else {
        Figure figure = drawing ().findFigure (e.getX (), e.getY ());
        if (figure != null) {
            fChild = null;
            if (e.isShiftDown ()) {
                view ().toggleSelection (figure);
            }
            else if (! view ().isFigureSelected (figure)) {
                view ().clearSelection ();
                view ().addToSelection (figure);
            }

        }
        else {
            if (! e.isShiftDown ()) {
                view ().clearSelection ();
            }

            fChild = createAreaTracker ();
        }

    }

    if (fChild != null) {
        fChild.mouseDown (e, x, y);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DragNDropTool.java" startline="234" endline="236">
{
    return;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DragNDropTool.java" startline="242" endline="244">
{
    fChild = createHandleTracker (handle);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DragNDropTool.java" startline="246" endline="271">
{
    Figure figure = drawing ().findFigure (e.getX (), e.getY ());
    if (figure != null) {
        fChild = null;
        if (e.isShiftDown ()) {
            view ().toggleSelection (figure);
        }
        else if (! view ().isFigureSelected (figure)) {
            view ().clearSelection ();
            view ().addToSelection (figure);
        }

    }
    else {
        if (! e.isShiftDown ()) {
            view ().clearSelection ();
        }

        fChild = createAreaTracker ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DragNDropTool.java" startline="249" endline="262">
{
    fChild = null;
    if (e.isShiftDown ()) {
        view ().toggleSelection (figure);
    }
    else if (! view ().isFigureSelected (figure)) {
        view ().clearSelection ();
        view ().addToSelection (figure);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DragNDropTool.java" startline="254" endline="256">
{
    view ().toggleSelection (figure);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DragNDropTool.java" startline="258" endline="261">
{
    view ().clearSelection ();
    view ().addToSelection (figure);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DragNDropTool.java" startline="264" endline="270">
{
    if (! e.isShiftDown ()) {
        view ().clearSelection ();
    }

    fChild = createAreaTracker ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DragNDropTool.java" startline="266" endline="268">
{
    view ().clearSelection ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DragNDropTool.java" startline="273" endline="275">
{
    fChild.mouseDown (e, x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DragNDropTool.java" startline="284" endline="289">
{
    if (fChild != null) {
        fChild.mouseDrag (e, x, y);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DragNDropTool.java" startline="286" endline="288">
{
    fChild.mouseDrag (e, x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DragNDropTool.java" startline="296" endline="298">
{
    return new SelectAreaTracker (editor ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DragNDropTool.java" startline="304" endline="306">
{
    return new DragTracker (editor, f);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/dnd/DragNDropTool.java" startline="312" endline="314">
{
    return new HandleTracker (editor (), handle);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/AbstractContentProducer.java" startline="37" endline="37">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/AbstractContentProducer.java" startline="45" endline="45">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/AbstractContentProducer.java" startline="55" endline="55">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/AttributeFigureContentProducer.java" startline="34" endline="34">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/AttributeFigureContentProducer.java" startline="46" endline="56">
{
    Object attrValue = super.getContent (context, ctxAttrName, ctxAttrValue);
    if (attrValue != null) {
        return attrValue;
    }

    return ((AttributeContentProducerContext) context).getAttribute (ctxAttrName);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/AttributeFigureContentProducer.java" startline="50" endline="52">
{
    return attrValue;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/AttributeFigureContentProducer.java" startline="65" endline="67">
{
    super.write (dw);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/AttributeFigureContentProducer.java" startline="78" endline="80">
{
    super.read (dr);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ColorContentProducer.java" startline="40" endline="40">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ColorContentProducer.java" startline="49" endline="51">
{
    fColor = color;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ColorContentProducer.java" startline="63" endline="69">
{
    Color color = (fColor != null) ? fColor : (Color) ctxAttrValue;
    String colorCode = Integer.toHexString (color.getRGB ());
    return "0x" + colorCode.substring (colorCode.length () - 6);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ColorContentProducer.java" startline="78" endline="80">
{
    fColor = color;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ColorContentProducer.java" startline="89" endline="91">
{
    return fColor;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ColorContentProducer.java" startline="100" endline="108">
{
    super.write (dw);
    dw.writeBoolean ((fColor != null));
    if (fColor != null) {
        dw.writeInt (fColor.getRGB ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ColorContentProducer.java" startline="105" endline="107">
{
    dw.writeInt (fColor.getRGB ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ColorContentProducer.java" startline="119" endline="131">
{
    super.read (dr);
    boolean hasColor = dr.readBoolean ();
    if (hasColor) {
        fColor = new Color (dr.readInt ());
    }
    else {
        fColor = null;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ColorContentProducer.java" startline="124" endline="126">
{
    fColor = new Color (dr.readInt ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ColorContentProducer.java" startline="128" endline="130">
{
    fColor = null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ContentProducerRegistry.java" startline="57" endline="59">
{
    fDefaultRegistry.registerContentProducer (URL.class, new URLContentProducer ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ContentProducerRegistry.java" startline="64" endline="66">
{
    fParent = fDefaultRegistry;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ContentProducerRegistry.java" startline="75" endline="77">
{
    fParent = parent;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ContentProducerRegistry.java" startline="89" endline="91">
{
    fParent = null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ContentProducerRegistry.java" startline="100" endline="102">
{
    return (fParent == null);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ContentProducerRegistry.java" startline="112" endline="114">
{
    fParent = newParent;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ContentProducerRegistry.java" startline="123" endline="125">
{
    return fParent;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ContentProducerRegistry.java" startline="136" endline="138">
{
    return fDefaultRegistry.registerContentProducer (targetClass, producer);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ContentProducerRegistry.java" startline="150" endline="152">
{
    fDefaultRegistry.unregisterContentProducer (targetClass, producer);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ContentProducerRegistry.java" startline="162" endline="164">
{
    return fDefaultRegistry.getContentProducer (targetClass);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ContentProducerRegistry.java" startline="175" endline="177">
{
    return fDefaultRegistry.getExactContentProducer (targetClass);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ContentProducerRegistry.java" startline="188" endline="192">
{
    ContentProducer previousProducer = getContentProducer (targetClass);
    fContentProducers.put (targetClass, producer);
    return previousProducer;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ContentProducerRegistry.java" startline="202" endline="210">
{
    ContentProducer currentProducer = getContentProducer (targetClass);
    if (currentProducer == producer) {
        fContentProducers.remove (targetClass);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ContentProducerRegistry.java" startline="207" endline="209">
{
    fContentProducers.remove (targetClass);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ContentProducerRegistry.java" startline="222" endline="234">
{
    ContentProducer producer = getExactContentProducer (targetClass);
    if (producer != null) {
        return producer;
    }

    return getSuperClassContentProducer (targetClass, null);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ContentProducerRegistry.java" startline="226" endline="228">
{
    return producer;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ContentProducerRegistry.java" startline="244" endline="261">
{
    ContentProducer producer = (ContentProducer) fContentProducers.get (targetClass);
    if (producer != null) {
        return producer;
    }

    if (! this.isAutonomous ()) {
        return getParent ().getExactContentProducer (targetClass);
    }

    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ContentProducerRegistry.java" startline="248" endline="250">
{
    return producer;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ContentProducerRegistry.java" startline="255" endline="257">
{
    return getParent ().getExactContentProducer (targetClass);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ContentProducerRegistry.java" startline="271" endline="305">
{
    Map.Entry entry;
    Class entryClass;
    ContentProducer closestProducer = null;
    Iterator iter = fContentProducers.entrySet ().iterator ();
    while (iter.hasNext ()) {
        entry = (Map.Entry) iter.next ();
        entryClass = (Class) entry.getKey ();
        if (entryClass.isAssignableFrom (targetClass)) {
            if (closestClass != null && closestClass.isAssignableFrom (entryClass)) {
                closestClass = entryClass;
                closestProducer = (ContentProducer) entry.getValue ();
            }

        }

    }

    if (! this.isAutonomous ()) {
        ContentProducer parentProducer = getParent ().getSuperClassContentProducer (targetClass, closestClass);
        if (parentProducer != null) {
            closestProducer = parentProducer;
        }

    }

    return closestProducer;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ContentProducerRegistry.java" startline="278" endline="289">
{
    entry = (Map.Entry) iter.next ();
    entryClass = (Class) entry.getKey ();
    if (entryClass.isAssignableFrom (targetClass)) {
        if (closestClass != null && closestClass.isAssignableFrom (entryClass)) {
            closestClass = entryClass;
            closestProducer = (ContentProducer) entry.getValue ();
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ContentProducerRegistry.java" startline="282" endline="288">
{
    if (closestClass != null && closestClass.isAssignableFrom (entryClass)) {
        closestClass = entryClass;
        closestProducer = (ContentProducer) entry.getValue ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ContentProducerRegistry.java" startline="284" endline="287">
{
    closestClass = entryClass;
    closestProducer = (ContentProducer) entry.getValue ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ContentProducerRegistry.java" startline="295" endline="302">
{
    ContentProducer parentProducer = getParent ().getSuperClassContentProducer (targetClass, closestClass);
    if (parentProducer != null) {
        closestProducer = parentProducer;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ContentProducerRegistry.java" startline="299" endline="301">
{
    closestProducer = parentProducer;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ContentProducerRegistry.java" startline="314" endline="324">
{
    dw.writeInt (fContentProducers.size ());
    Map.Entry producerEntry;
    Iterator iter = fContentProducers.entrySet ().iterator ();
    while (iter.hasNext ()) {
        producerEntry = (Map.Entry) iter.next ();
        dw.writeString (((Class) producerEntry.getKey ()).getName ());
        dw.writeStorable ((Storable) producerEntry.getKey ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ContentProducerRegistry.java" startline="319" endline="323">
{
    producerEntry = (Map.Entry) iter.next ();
    dw.writeString (((Class) producerEntry.getKey ()).getName ());
    dw.writeStorable ((Storable) producerEntry.getKey ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ContentProducerRegistry.java" startline="335" endline="356">
{
    int prodCount = dr.readInt ();
    String prodClass;
    ContentProducer producer;
    for (int cnt = 0;
    cnt < prodCount; cnt ++) {
        prodClass = dr.readString ();
        producer = (ContentProducer) dr.readStorable ();
        try {
            registerContentProducer (Class.forName (prodClass), producer);
        }
        catch (ClassNotFoundException ex) {
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ContentProducerRegistry.java" startline="341" endline="354">
{
    prodClass = dr.readString ();
    producer = (ContentProducer) dr.readStorable ();
    try {
        registerContentProducer (Class.forName (prodClass), producer);
    }
    catch (ClassNotFoundException ex) {
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ContentProducerRegistry.java" startline="345" endline="347">
{
    registerContentProducer (Class.forName (prodClass), producer);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ContentProducerRegistry.java" startline="349" endline="353">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/DiamondFigureGeometricAdapter.java" startline="33" endline="35">
{
    super ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/DiamondFigureGeometricAdapter.java" startline="45" endline="47">
{
    super (origin, corner);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/DiamondFigureGeometricAdapter.java" startline="56" endline="58">
{
    return getPolygon ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/DisposableResourceManagerFactory.java" startline="42" endline="44">
{
    return currentManager;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/DisposableResourceManagerFactory.java" startline="55" endline="57">
{
    currentStrategy = strategy;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/DisposableResourceManagerFactory.java" startline="68" endline="78">
{
    initManager ();
    DisposableResourceHolder holder = (DisposableResourceHolder) holderPrototype.clone ();
    holder.setResource (resource);
    getManager ().registerResource (holder);
    return holder;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/DisposableResourceManagerFactory.java" startline="83" endline="112">
{
    if (currentManager == null) {
        if (holderPrototype == null) {
            holderPrototype = new StandardDisposableResourceHolder ();
        }

        if (currentStrategy == null) {
            currentStrategy = new ETSLADisposalStrategy (DEFAULT_DISPOSAL_PERIODICITY);
        }

        if (currentManager == null) {
            currentManager = new StandardDisposableResourceManager (currentStrategy);
        }

        try {
            currentManager.startDisposing ();
        }
        catch (ResourceManagerNotSetException ex) {
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/DisposableResourceManagerFactory.java" startline="85" endline="111">
{
    if (holderPrototype == null) {
        holderPrototype = new StandardDisposableResourceHolder ();
    }

    if (currentStrategy == null) {
        currentStrategy = new ETSLADisposalStrategy (DEFAULT_DISPOSAL_PERIODICITY);
    }

    if (currentManager == null) {
        currentManager = new StandardDisposableResourceManager (currentStrategy);
    }

    try {
        currentManager.startDisposing ();
    }
    catch (ResourceManagerNotSetException ex) {
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/DisposableResourceManagerFactory.java" startline="88" endline="90">
{
    holderPrototype = new StandardDisposableResourceHolder ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/DisposableResourceManagerFactory.java" startline="93" endline="95">
{
    currentStrategy = new ETSLADisposalStrategy (DEFAULT_DISPOSAL_PERIODICITY);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/DisposableResourceManagerFactory.java" startline="98" endline="100">
{
    currentManager = new StandardDisposableResourceManager (currentStrategy);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/DisposableResourceManagerFactory.java" startline="104" endline="106">
{
    currentManager.startDisposing ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/DisposableResourceManagerFactory.java" startline="108" endline="110">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ETSLADisposalStrategy.java" startline="44" endline="44">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ETSLADisposalStrategy.java" startline="53" endline="56">
{
    gcPeriodicity = periodicity;
    initDisposalThread ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ETSLADisposalStrategy.java" startline="66" endline="70">
{
    this.manager = manager;
    gcPeriodicity = periodicity;
    initDisposalThread ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ETSLADisposalStrategy.java" startline="79" endline="86">
{
    if (manager == null) {
        stopDisposing (Long.MAX_VALUE);
    }

    this.manager = manager;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ETSLADisposalStrategy.java" startline="82" endline="84">
{
    stopDisposing (Long.MAX_VALUE);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ETSLADisposalStrategy.java" startline="95" endline="97">
{
    return manager;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ETSLADisposalStrategy.java" startline="108" endline="122">
{
    if (manager == null) {
        throw new ResourceManagerNotSetException ();
    }

    if (disposingActive) {
        return;
    }

    disposingActive = true;
    disposalThread.start ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ETSLADisposalStrategy.java" startline="110" endline="112">
{
    throw new ResourceManagerNotSetException ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ETSLADisposalStrategy.java" startline="116" endline="118">
{
    return;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ETSLADisposalStrategy.java" startline="134" endline="154">
{
    if (! disposingActive) {
        return;
    }

    try {
        disposalThread.interruptDisposalPending = true;
        disposalThread.join (millis);
    }
    catch (InterruptedException ex) {
    }
    finally {
        disposingActive = false;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ETSLADisposalStrategy.java" startline="137" endline="139">
{
    return;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ETSLADisposalStrategy.java" startline="142" endline="145">
{
    disposalThread.interruptDisposalPending = true;
    disposalThread.join (millis);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ETSLADisposalStrategy.java" startline="147" endline="149">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ETSLADisposalStrategy.java" startline="151" endline="153">
{
    disposingActive = false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ETSLADisposalStrategy.java" startline="159" endline="166">
{
    if (disposalThread != null) {
        return;
    }

    disposalThread = new DisposalThread (this, gcPeriodicity);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ETSLADisposalStrategy.java" startline="161" endline="163">
{
    return;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ETSLADisposalStrategy.java" startline="174" endline="193">
{
    synchronized (manager) {
        long currentTime = System.currentTimeMillis ();
        Iterator resourceIter = manager.getResources ();
        DisposableResourceHolder resource;
        while (resourceIter.hasNext ()) {
            resource = (DisposableResourceHolder) resourceIter.next ();
            synchronized (resource) {
                if (! resource.isLocked () && (resource.getLastTimeAccessed () + resource.getDisposableDelay ()) < currentTime) {
                    resource.dispose ();
                }

            }

        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ETSLADisposalStrategy.java" startline="176" endline="192">
{
    long currentTime = System.currentTimeMillis ();
    Iterator resourceIter = manager.getResources ();
    DisposableResourceHolder resource;
    while (resourceIter.hasNext ()) {
        resource = (DisposableResourceHolder) resourceIter.next ();
        synchronized (resource) {
            if (! resource.isLocked () && (resource.getLastTimeAccessed () + resource.getDisposableDelay ()) < currentTime) {
                resource.dispose ();
            }

        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ETSLADisposalStrategy.java" startline="182" endline="191">
{
    resource = (DisposableResourceHolder) resourceIter.next ();
    synchronized (resource) {
        if (! resource.isLocked () && (resource.getLastTimeAccessed () + resource.getDisposableDelay ()) < currentTime) {
            resource.dispose ();
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ETSLADisposalStrategy.java" startline="185" endline="190">
{
    if (! resource.isLocked () && (resource.getLastTimeAccessed () + resource.getDisposableDelay ()) < currentTime) {
        resource.dispose ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ETSLADisposalStrategy.java" startline="187" endline="189">
{
    resource.dispose ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ETSLADisposalStrategy.java" startline="202" endline="204">
{
    return gcPeriodicity;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ETSLADisposalStrategy.java" startline="213" endline="219">
{
    gcPeriodicity = newPeriodicity;
    if (disposalThread != null) {
        disposalThread.setPeriodicity (newPeriodicity);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ETSLADisposalStrategy.java" startline="216" endline="218">
{
    disposalThread.setPeriodicity (newPeriodicity);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ETSLADisposalStrategy.java" startline="247" endline="250">
{
    this.strategy = strategy;
    this.periodicity = periodicity;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ETSLADisposalStrategy.java" startline="255" endline="271">
{
    interruptDisposalPending = false;
    while (! interruptDisposalPending) {
        try {
            sleep (periodicity);
        }
        catch (Exception ex) {
            break;
        }

        strategy.dispose ();
    }

    interruptDisposalPending = false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ETSLADisposalStrategy.java" startline="258" endline="269">
{
    try {
        sleep (periodicity);
    }
    catch (Exception ex) {
        break;
    }

    strategy.dispose ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ETSLADisposalStrategy.java" startline="260" endline="262">
{
    sleep (periodicity);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ETSLADisposalStrategy.java" startline="264" endline="267">
{
    break;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ETSLADisposalStrategy.java" startline="280" endline="282">
{
    return periodicity;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ETSLADisposalStrategy.java" startline="291" endline="293">
{
    periodicity = newPeriodicity;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ETSLADisposalStrategy.java" startline="298" endline="300">
{
    interruptDisposalPending = true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/EllipseFigureGeometricAdapter.java" startline="43" endline="45">
{
    super ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/EllipseFigureGeometricAdapter.java" startline="55" endline="57">
{
    super (origin, corner);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/EllipseFigureGeometricAdapter.java" startline="66" endline="70">
{
    Rectangle rect = displayBox ();
    Ellipse2D.Float ellipse = new Ellipse2D.Float (rect.x, rect.y, rect.width, rect.height);
    return ellipse;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/FigureDataContentProducer.java" startline="36" endline="36">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/FigureDataContentProducer.java" startline="48" endline="70">
{
    if (ctxAttrName.compareTo (ContentProducer.ENTITY_FIGURE_WIDTH) == 0) {
        return Integer.toString (((FigureContentProducerContext) context).displayBox ().width);
    }

    if (ctxAttrName.compareTo (ContentProducer.ENTITY_FIGURE_HEIGHT) == 0) {
        return Integer.toString (((FigureContentProducerContext) context).displayBox ().height);
    }

    if (ctxAttrName.compareTo (ContentProducer.ENTITY_FIGURE_POSX) == 0) {
        return Integer.toString (((FigureContentProducerContext) context).displayBox ().x);
    }

    if (ctxAttrName.compareTo (ContentProducer.ENTITY_FIGURE_POSY) == 0) {
        return Integer.toString (((FigureContentProducerContext) context).displayBox ().y);
    }

    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/FigureDataContentProducer.java" startline="50" endline="52">
{
    return Integer.toString (((FigureContentProducerContext) context).displayBox ().width);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/FigureDataContentProducer.java" startline="55" endline="57">
{
    return Integer.toString (((FigureContentProducerContext) context).displayBox ().height);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/FigureDataContentProducer.java" startline="60" endline="62">
{
    return Integer.toString (((FigureContentProducerContext) context).displayBox ().x);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/FigureDataContentProducer.java" startline="65" endline="67">
{
    return Integer.toString (((FigureContentProducerContext) context).displayBox ().y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/FigureDataContentProducer.java" startline="79" endline="81">
{
    super.write (dw);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/FigureDataContentProducer.java" startline="92" endline="94">
{
    super.read (dr);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLColorContentProducer.java" startline="35" endline="35">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLColorContentProducer.java" startline="47" endline="52">
{
    Color color = (getColor () != null) ? getColor () : (Color) ctxAttrValue;
    return getHTMLColorCode (color);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLColorContentProducer.java" startline="55" endline="58">
{
    String colorCode = Integer.toHexString (color.getRGB ());
    return "#" + colorCode.substring (colorCode.length () - 6);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLContentProducer.java" startline="53" endline="53">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLContentProducer.java" startline="65" endline="74">
{
    HTMLContentProducerContext htmlContext = (HTMLContentProducerContext) context;
    if (ctxAttrName.compareTo (ContentProducer.ENTITY_FONT_SIZE) == 0) {
        return Integer.toString (getHTMLFontSizeEquivalent (htmlContext.getFont ().getSize ()));
    }

    return super.getContent (context, ctxAttrName, ctxAttrValue);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLContentProducer.java" startline="69" endline="71">
{
    return Integer.toString (getHTMLFontSizeEquivalent (htmlContext.getFont ().getSize ()));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLContentProducer.java" startline="84" endline="95">
{
    for (int i = 0;
    i < htmlFontSizeEquivalences.length; i ++) {
        if (pointSize >= htmlFontSizeEquivalences [i] [1] && pointSize <= htmlFontSizeEquivalences [i] [2]) {
            return htmlFontSizeEquivalences [i] [0];
        }

    }

    return 3;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLContentProducer.java" startline="86" endline="92">
{
    if (pointSize >= htmlFontSizeEquivalences [i] [1] && pointSize <= htmlFontSizeEquivalences [i] [2]) {
        return htmlFontSizeEquivalences [i] [0];
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLContentProducer.java" startline="89" endline="91">
{
    return htmlFontSizeEquivalences [i] [0];
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLLayouter.java" startline="36" endline="36">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLLayouter.java" startline="46" endline="49">
{
    this ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLLayouter.java" startline="60" endline="65">
{
    throw new UnsupportedOperationException ("Method calculateLayout() not yet implemented.");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLLayouter.java" startline="76" endline="81">
{
    throw new UnsupportedOperationException ("Method layout() not yet implemented.");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLLayouter.java" startline="90" endline="95">
{
    throw new UnsupportedOperationException ("Method setInsets() not yet implemented.");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLLayouter.java" startline="104" endline="109">
{
    throw new UnsupportedOperationException ("Method getInsets() not yet implemented.");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLLayouter.java" startline="118" endline="123">
{
    throw new UnsupportedOperationException ("Method write() not yet implemented.");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLLayouter.java" startline="134" endline="139">
{
    throw new UnsupportedOperationException ("Method read() not yet implemented.");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLLayouter.java" startline="149" endline="151">
{
    return new HTMLLayouter (newLayoutable);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="191" endline="194">
{
    fDefaultContentProducers.registerContentProducer (TextAreaFigure.class, new TextHolderContentProducer ());
    fDefaultContentProducers.registerContentProducer (Color.class, new HTMLColorContentProducer ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="204" endline="212">
{
    initDefaultAttribute ("XAlignment", new Integer (SwingConstants.LEFT));
    initDefaultAttribute ("YAlignment", new Integer (SwingConstants.TOP));
    initDefaultAttribute ("LeftMargin", new Float (5));
    initDefaultAttribute ("RightMargin", new Float (5));
    initDefaultAttribute ("TopMargin", new Float (5));
    initDefaultAttribute ("BottomMargin", new Float (5));
    initDefaultAttribute ("TabSize", new Float (8));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="217" endline="219">
{
    initialize ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="229" endline="233">
{
    Object cloneObject = super.clone ();
    ((HTMLTextAreaFigure) cloneObject).initialize ();
    return cloneObject;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="244" endline="247">
{
    super.basicDisplayBox (origin, corner);
    getFrameFigure ().displayBox (displayBox ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="256" endline="261">
{
    return getFrameFigure ().handles ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="272" endline="274">
{
    return getFrameFigure ().containsPoint (x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="284" endline="287">
{
    super.moveBy (dx, dy);
    getFrameFigure ().moveBy (dx, dy);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="292" endline="306">
{
    fImageHolder = DisposableResourceManagerFactory.createStandardHolder (null);
    setFrameFigure (new RectangleFigure ());
    setIntrinsicContentProducer (new HTMLContentProducer ());
    fContentProducers = new ContentProducerRegistry (fDefaultContentProducers);
    markSizeDirty ();
    markImageDirty ();
    markTextDirty ();
    markFontDirty ();
    setAttribute (Figure.POPUP_MENU, createPopupMenu ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="313" endline="316">
{
    markImageDirty ();
    super.markSizeDirty ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="323" endline="326">
{
    markImageDirty ();
    super.markTextDirty ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="333" endline="336">
{
    markImageDirty ();
    super.markFontDirty ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="351" endline="362">
{
    Color fill = getFillColor ();
    g.setColor (fill);
    drawBackground (g);
    drawText (g, displayBox ());
    Color frame = getFrameColor ();
    g.setColor (frame);
    drawFrame (g);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="372" endline="374">
{
    ((Graphics2D) g).draw (getClippingShape ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="384" endline="386">
{
    ((Graphics2D) g).fill (getClippingShape ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="398" endline="448">
{
    Graphics2D g2 = null;
    Shape savedClip = null;
    if (g != null) {
        g2 = (Graphics2D) g;
        savedClip = g2.getClip ();
    }

    Rectangle drawingBox = makeDrawingBox (displayBox);
    if (drawingBox.isEmpty ()) {
        return drawingBox.height;
    }

    if (g != null) {
        g2.clip (getClippingShape ());
    }

    if (usesDirectDraw ()) {
        drawTextDirect (g2, drawingBox);
    }
    else {
        fImageHolder.lock ();
        if (isImageDirty ()) {
            generateImage (drawingBox);
            setSizeDirty (false);
        }

        if (g2 != null) {
            g2.drawImage (getImage (), drawingBox.x, drawingBox.y, null);
        }

        fImageHolder.unlock ();
    }

    if (g != null) {
        g2.setClip (savedClip);
    }

    drawFrame (g);
    return displayBox.height;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="403" endline="406">
{
    g2 = (Graphics2D) g;
    savedClip = g2.getClip ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="412" endline="414">
{
    return drawingBox.height;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="417" endline="419">
{
    g2.clip (getClippingShape ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="422" endline="424">
{
    drawTextDirect (g2, drawingBox);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="426" endline="439">
{
    fImageHolder.lock ();
    if (isImageDirty ()) {
        generateImage (drawingBox);
        setSizeDirty (false);
    }

    if (g2 != null) {
        g2.drawImage (getImage (), drawingBox.x, drawingBox.y, null);
    }

    fImageHolder.unlock ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="429" endline="432">
{
    generateImage (drawingBox);
    setSizeDirty (false);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="435" endline="437">
{
    g2.drawImage (getImage (), drawingBox.x, drawingBox.y, null);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="441" endline="443">
{
    g2.setClip (savedClip);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="457" endline="466">
{
    createImage (drawingBox.width, drawingBox.height);
    Graphics2D g2 = (Graphics2D) getImage ().getGraphics ();
    Rectangle finalBox = new Rectangle (drawingBox);
    finalBox.setLocation (0, 0);
    renderText (g2, finalBox);
    g2.dispose ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="476" endline="501">
{
    Shape savedClipArea = null;
    Color savedFontColor = null;
    Font savedFont = null;
    Rectangle2D clipRect = null;
    RenderingHints savedRenderingHints = null;
    if (g2 != null) {
        savedRenderingHints = g2.getRenderingHints ();
        savedClipArea = g2.getClip ();
        savedFont = g2.getFont ();
        savedFontColor = g2.getColor ();
        g2.clip (drawingBox);
    }

    float finalHeight = renderText (g2, drawingBox);
    if (g2 != null) {
        g2.setClip (savedClipArea);
        g2.setColor (savedFontColor);
        g2.setRenderingHints (savedRenderingHints);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="484" endline="490">
{
    savedRenderingHints = g2.getRenderingHints ();
    savedClipArea = g2.getClip ();
    savedFont = g2.getFont ();
    savedFontColor = g2.getColor ();
    g2.clip (drawingBox);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="496" endline="500">
{
    g2.setClip (savedClipArea);
    g2.setColor (savedFontColor);
    g2.setRenderingHints (savedRenderingHints);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="516" endline="568">
{
    g2.setRenderingHint (RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
    g2.setRenderingHint (RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);
    g2.setBackground (getFillColor ());
    g2.setColor (getFillColor ());
    g2.clearRect (drawingBox.x, drawingBox.y, drawingBox.width, drawingBox.height);
    g2.fillRect (drawingBox.x, drawingBox.y, drawingBox.width, drawingBox.height);
    String text;
    if (isRawHTML ()) {
        text = getText ();
    }
    else {
        text = getHTMLText (getText (), getFont (), (String) getContentProducer (Color.class).getContent (this, FigureAttributeConstant.TEXT_COLOR_STR, getTextColor ()), (String) getContentProducer (Color.class).getContent (this, FigureAttributeConstant.FILL_COLOR_STR, getFillColor ()), drawingBox);
    }

    text = substituteEntityKeywords (text);
    JLabel displayDelegate = getDisplayDelegate ();
    displayDelegate.setText (text);
    displayDelegate.setBackground (getFillColor ());
    displayDelegate.setLocation (0, 0);
    displayDelegate.setSize (drawingBox.width, drawingBox.height);
    displayDelegate.setHorizontalAlignment (((Integer) getAttribute ("XAlignment")).intValue ());
    displayDelegate.setVerticalAlignment (((Integer) getAttribute ("YAlignment")).intValue ());
    SwingUtilities.paintComponent (g2, displayDelegate, getContainerPanel (displayDelegate, drawingBox), drawingBox.x, drawingBox.y, drawingBox.width, drawingBox.height);
    return drawingBox.height;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="531" endline="533">
{
    text = getText ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="535" endline="541">
{
    text = getHTMLText (getText (), getFont (), (String) getContentProducer (Color.class).getContent (this, FigureAttributeConstant.TEXT_COLOR_STR, getTextColor ()), (String) getContentProducer (Color.class).getContent (this, FigureAttributeConstant.FILL_COLOR_STR, getFillColor ()), drawingBox);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="578" endline="596">
{
    float leftMargin = ((Float) getAttribute ("LeftMargin")).floatValue ();
    float rightMargin = ((Float) getAttribute ("RightMargin")).floatValue ();
    float topMargin = ((Float) getAttribute ("TopMargin")).floatValue ();
    float bottomMargin = ((Float) getAttribute ("BottomMargin")).floatValue ();
    Rectangle drawingBox = new Rectangle (displayBox);
    drawingBox.grow (- 1, - 1);
    drawingBox.x += leftMargin;
    drawingBox.width -= (leftMargin + rightMargin);
    drawingBox.y += topMargin;
    drawingBox.height -= topMargin + bottomMargin;
    return drawingBox;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="605" endline="612">
{
    if (fDisplayDelegate == null) {
        fDisplayDelegate = new JLabel ();
        fDisplayDelegate.setBorder (null);
    }

    return fDisplayDelegate;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="607" endline="610">
{
    fDisplayDelegate = new JLabel ();
    fDisplayDelegate.setBorder (null);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="623" endline="635">
{
    fImageHolder.lock ();
    if (! fImageHolder.isAvailable () || ((BufferedImage) fImageHolder.getResource ()).getWidth () != width || ((BufferedImage) fImageHolder.getResource ()).getHeight () != height) {
        fImageHolder.setResource (new BufferedImage (width, height, BufferedImage.TYPE_INT_RGB));
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="629" endline="631">
{
    fImageHolder.setResource (new BufferedImage (width, height, BufferedImage.TYPE_INT_RGB));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="646" endline="649">
{
    JPanel panel = new JPanel ();
    return panel;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="667" endline="724">
{
    StringBuffer htmlText = new StringBuffer ();
    htmlText.append ("<html>");
    htmlText.append ("<table border='0' width='" + displayBox.width + "' height='" + displayBox.height + "' cellpadding='0' cellspacing='0'" + "bgcolor='&FillColor;'>");
    htmlText.append ("<tr><td width='100%'>");
    htmlText.append ("<font face='&FontName;' color='&TextColor;' size='&FontSize;'>");
    if (((Integer) getAttribute ("XAlignment")).intValue () == SwingConstants.CENTER) {
        htmlText.append ("<center>");
    }

    if (font.isItalic ()) {
        htmlText.append ("<i>");
    }

    if (font.isBold ()) {
        htmlText.append ("<b>");
    }

    htmlText.append (text);
    if (font.isBold ()) {
        htmlText.append ("</b>");
    }

    if (font.isItalic ()) {
        htmlText.append ("</i>");
    }

    if (((Integer) getAttribute ("XAlignment")).intValue () == SwingConstants.CENTER) {
        htmlText.append ("</center>");
    }

    htmlText.append ("</font>");
    htmlText.append ("</td></tr></table>");
    htmlText.append ("</html>");
    return htmlText.toString ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="685" endline="687">
{
    htmlText.append ("<center>");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="690" endline="692">
{
    htmlText.append ("<i>");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="694" endline="696">
{
    htmlText.append ("<b>");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="703" endline="705">
{
    htmlText.append ("</b>");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="707" endline="709">
{
    htmlText.append ("</i>");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="712" endline="714">
{
    htmlText.append ("</center>");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="740" endline="803">
{
    int startPos;
    int chunkEnd;
    int endPos;
    StringBuffer finalText = new StringBuffer ();
    startPos = 0;
    chunkEnd = startPos;
    try {
        while ((startPos = template.indexOf (START_ENTITY_CHAR, startPos)) != - 1) {
            if (startPos != 0 && template.charAt (startPos - 1) == ESCAPE_CHAR) {
                startPos ++;
                continue;
            }

            endPos = startPos + 1;
            while ((endPos = template.indexOf (END_ENTITY_CHAR, endPos)) != - 1) {
                if (endPos == 0 || template.charAt (endPos - 1) != ESCAPE_CHAR) {
                    break;
                }

                throw new InvalidAttributeMarker ();
            }

            String attrName = template.substring (startPos + 1, endPos);
            String attrValue = getEntityHTMLRepresentation (attrName);
            if (attrValue != null) {
                finalText.append (template.substring (chunkEnd, startPos));
                finalText.append (substituteEntityKeywords (attrValue));
                startPos = endPos + 1;
                chunkEnd = startPos;
            }
            else {
                startPos ++;
            }

        }

    }
    catch (InvalidAttributeMarker ex) {
    }

    finalText.append (template.substring (chunkEnd));
    return finalText.toString ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="749" endline="792">
{
    while ((startPos = template.indexOf (START_ENTITY_CHAR, startPos)) != - 1) {
        if (startPos != 0 && template.charAt (startPos - 1) == ESCAPE_CHAR) {
            startPos ++;
            continue;
        }

        endPos = startPos + 1;
        while ((endPos = template.indexOf (END_ENTITY_CHAR, endPos)) != - 1) {
            if (endPos == 0 || template.charAt (endPos - 1) != ESCAPE_CHAR) {
                break;
            }

            throw new InvalidAttributeMarker ();
        }

        String attrName = template.substring (startPos + 1, endPos);
        String attrValue = getEntityHTMLRepresentation (attrName);
        if (attrValue != null) {
            finalText.append (template.substring (chunkEnd, startPos));
            finalText.append (substituteEntityKeywords (attrValue));
            startPos = endPos + 1;
            chunkEnd = startPos;
        }
        else {
            startPos ++;
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="751" endline="791">
{
    if (startPos != 0 && template.charAt (startPos - 1) == ESCAPE_CHAR) {
        startPos ++;
        continue;
    }

    endPos = startPos + 1;
    while ((endPos = template.indexOf (END_ENTITY_CHAR, endPos)) != - 1) {
        if (endPos == 0 || template.charAt (endPos - 1) != ESCAPE_CHAR) {
            break;
        }

        throw new InvalidAttributeMarker ();
    }

    String attrName = template.substring (startPos + 1, endPos);
    String attrValue = getEntityHTMLRepresentation (attrName);
    if (attrValue != null) {
        finalText.append (template.substring (chunkEnd, startPos));
        finalText.append (substituteEntityKeywords (attrValue));
        startPos = endPos + 1;
        chunkEnd = startPos;
    }
    else {
        startPos ++;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="753" endline="757">
{
    startPos ++;
    continue;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="762" endline="771">
{
    if (endPos == 0 || template.charAt (endPos - 1) != ESCAPE_CHAR) {
        break;
    }

    throw new InvalidAttributeMarker ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="764" endline="767">
{
    break;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="779" endline="786">
{
    finalText.append (template.substring (chunkEnd, startPos));
    finalText.append (substituteEntityKeywords (attrValue));
    startPos = endPos + 1;
    chunkEnd = startPos;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="788" endline="790">
{
    startPos ++;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="794" endline="796">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="813" endline="851">
{
    Object attrValue = null;
    attrValue = getIntrinsicContentProducer ().getContent (this, attrName, attrValue);
    if (attrValue == null) {
        return null;
    }

    while (attrValue != null && ! (attrValue instanceof String)) {
        if (attrValue instanceof ContentProducer) {
            attrValue = ((ContentProducer) attrValue).getContent (this, attrName, attrValue);
            continue;
        }

        ContentProducer defaultProducer = getContentProducer (attrValue.getClass ());
        if (defaultProducer != null) {
            attrValue = defaultProducer.getContent (this, attrName, attrValue);
            continue;
        }

        attrValue = attrValue.toString ();
    }

    return (String) attrValue;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="821" endline="823">
{
    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="828" endline="848">
{
    if (attrValue instanceof ContentProducer) {
        attrValue = ((ContentProducer) attrValue).getContent (this, attrName, attrValue);
        continue;
    }

    ContentProducer defaultProducer = getContentProducer (attrValue.getClass ());
    if (defaultProducer != null) {
        attrValue = defaultProducer.getContent (this, attrName, attrValue);
        continue;
    }

    attrValue = attrValue.toString ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="831" endline="834">
{
    attrValue = ((ContentProducer) attrValue).getContent (this, attrName, attrValue);
    continue;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="839" endline="842">
{
    attrValue = defaultProducer.getContent (this, attrName, attrValue);
    continue;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="860" endline="866">
{
    if (fImageHolder.isAvailable ()) {
        return (BufferedImage) fImageHolder.getResource ();
    }

    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="862" endline="864">
{
    return (BufferedImage) fImageHolder.getResource ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="875" endline="877">
{
    fImageHolder.setResource (newImage);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="886" endline="891">
{
    JPopupMenu popupMenu = new JPopupMenu ();
    addPopupMenuItems (popupMenu);
    popupMenu.setLightWeightPopupEnabled (true);
    return popupMenu;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="900" endline="968">
{
    ButtonGroup drawingPopupGroup;
    JRadioButtonMenuItem rbOption;
    drawingPopupGroup = new ButtonGroup ();
    rbOption = new JRadioButtonMenuItem (new AbstractAction ("Direct drawing") {

        public void actionPerformed (ActionEvent event) {
            setUseDirectDraw (true);
        }

    }

    );
    drawingPopupGroup.add (rbOption);
    if (usesDirectDraw ()) {
        drawingPopupGroup.setSelected (rbOption.getModel (), true);
    }

    popupMenu.add (rbOption);
    rbOption = new JRadioButtonMenuItem (new AbstractAction ("Buffered drawing") {

        public void actionPerformed (ActionEvent event) {
            setUseDirectDraw (false);
        }

    }

    );
    drawingPopupGroup.add (rbOption);
    if (usesBufferedDraw ()) {
        drawingPopupGroup.setSelected (rbOption.getModel (), true);
    }

    popupMenu.add (rbOption);
    popupMenu.addSeparator ();
    drawingPopupGroup = new ButtonGroup ();
    rbOption = new JRadioButtonMenuItem (new AbstractAction ("Normal HTML") {

        public void actionPerformed (ActionEvent event) {
            setRawHTML (false);
        }

    }

    );
    drawingPopupGroup.add (rbOption);
    drawingPopupGroup.setSelected (rbOption.getModel (), true);
    popupMenu.add (rbOption);
    rbOption = new JRadioButtonMenuItem (new AbstractAction ("Raw HTML") {

        public void actionPerformed (ActionEvent event) {
            setRawHTML (true);
        }

    }

    );
    drawingPopupGroup.add (rbOption);
    popupMenu.add (rbOption);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="911" endline="913">
{
    setUseDirectDraw (true);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="918" endline="920">
{
    drawingPopupGroup.setSelected (rbOption.getModel (), true);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="928" endline="930">
{
    setUseDirectDraw (false);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="934" endline="936">
{
    drawingPopupGroup.setSelected (rbOption.getModel (), true);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="947" endline="949">
{
    setRawHTML (false);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="961" endline="963">
{
    setRawHTML (true);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="977" endline="979">
{
    return fUseDirectDraw;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="988" endline="992">
{
    fUseDirectDraw = newUseDirectDraw;
    setAttribute (Figure.POPUP_MENU, createPopupMenu ());
    markSizeDirty ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="1001" endline="1003">
{
    setUseDirectDraw (! newUseBufferedDraw);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="1012" endline="1014">
{
    return ! usesDirectDraw ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="1021" endline="1023">
{
    fImageHolder.dispose ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="1032" endline="1034">
{
    return ! fImageHolder.isAvailable ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="1045" endline="1057">
{
    super.read (dr);
    setFrameFigure ((Figure) dr.readStorable ());
    setUseDirectDraw (dr.readBoolean ());
    setRawHTML (dr.readBoolean ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="1066" endline="1074">
{
    super.write (dw);
    dw.writeStorable (getFrameFigure ());
    dw.writeBoolean (usesDirectDraw ());
    dw.writeBoolean (isRawHTML ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="1086" endline="1089">
{
    super.setAttribute (name, value);
    markImageDirty ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="1100" endline="1102">
{
    return fRawHTML;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="1111" endline="1114">
{
    fRawHTML = newRawHTML;
    setAttribute (Figure.POPUP_MENU, createPopupMenu ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="1124" endline="1126">
{
    return fIntrinsicContentProducer;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="1135" endline="1137">
{
    fIntrinsicContentProducer = newIntrinsicContentProducer;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="1148" endline="1150">
{
    return fContentProducers.registerContentProducer (targetClass, producer);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="1160" endline="1162">
{
    fContentProducers.unregisterContentProducer (targetClass, producer);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="1172" endline="1174">
{
    return fContentProducers.getContentProducer (targetClass);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="1183" endline="1204">
{
    Polygon polygon = new Polygon ();
    AffineTransform at = AffineTransform.getScaleInstance (1, 1);
    FlatteningPathIterator pIter = new FlatteningPathIterator (getClippingShape ().getPathIterator (at), 1);
    double [] coords = new double [6];
    int pointType;
    while (! pIter.isDone ()) {
        pointType = pIter.currentSegment (coords);
        polygon.addPoint ((int) coords [0], (int) coords [1]);
        pIter.next ();
    }

    return polygon;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="1197" endline="1201">
{
    pointType = pIter.currentSegment (coords);
    polygon.addPoint ((int) coords [0], (int) coords [1]);
    pIter.next ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="1213" endline="1215">
{
    return fFrameFigure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="1224" endline="1231">
{
    if (fFrameFigure != null) {
        fFrameFigure.removeFigureChangeListener (this);
    }

    fFrameFigure = newFrameFigure;
    fFrameFigure.addFigureChangeListener (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="1226" endline="1228">
{
    fFrameFigure.removeFigureChangeListener (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="1240" endline="1247">
{
    Figure frame = getFrameFigure ();
    if (frame instanceof GeometricFigure) {
        return ((GeometricFigure) frame).getShape ();
    }

    return frame.displayBox ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="1243" endline="1245">
{
    return ((GeometricFigure) frame).getShape ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="1255" endline="1255">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="1266" endline="1270">
{
    willChange ();
    super.basicDisplayBox (e.getFigure ().displayBox ().getLocation (), Geom.corner (e.getFigure ().displayBox ()));
    changed ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="1279" endline="1279">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="1288" endline="1288">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="1297" endline="1297">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaFigure.java" startline="1319" endline="1321">
{
    return this;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaTool.java" startline="40" endline="42">
{
    super (newDrawingEditor, prototype);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/HTMLTextAreaTool.java" startline="53" endline="55">
{
    return new Font ("Helvetica", Font.PLAIN, 12);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/PolygonFigureGeometricAdapter.java" startline="36" endline="38">
{
    super ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/PolygonFigureGeometricAdapter.java" startline="48" endline="50">
{
    super (x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/PolygonFigureGeometricAdapter.java" startline="59" endline="61">
{
    super (p);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/PolygonFigureGeometricAdapter.java" startline="70" endline="72">
{
    return getInternalPolygon ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ResourceContentProducer.java" startline="42" endline="42">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ResourceContentProducer.java" startline="51" endline="53">
{
    fResourceName = resourceName;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ResourceContentProducer.java" startline="65" endline="84">
{
    try {
        String resourceName = (fResourceName != null) ? fResourceName : (String) ctxAttrValue;
        InputStream reader = this.getClass ().getResourceAsStream (resourceName);
        int available = reader.available ();
        byte contents [] = new byte [available];
        reader.read (contents, 0, available);
        reader.close ();
        return new String (contents);
    }
    catch (Exception ex) {
        ex.printStackTrace ();
        return ex.toString ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ResourceContentProducer.java" startline="67" endline="78">
{
    String resourceName = (fResourceName != null) ? fResourceName : (String) ctxAttrValue;
    InputStream reader = this.getClass ().getResourceAsStream (resourceName);
    int available = reader.available ();
    byte contents [] = new byte [available];
    reader.read (contents, 0, available);
    reader.close ();
    return new String (contents);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ResourceContentProducer.java" startline="80" endline="83">
{
    ex.printStackTrace ();
    return ex.toString ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ResourceContentProducer.java" startline="93" endline="96">
{
    super.write (dw);
    dw.writeString (fResourceName);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ResourceContentProducer.java" startline="107" endline="110">
{
    super.read (dr);
    fResourceName = (String) dr.readString ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/ResourceManagerNotSetException.java" startline="24" endline="24">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/RoundRectangleGeometricAdapter.java" startline="33" endline="35">
{
    super ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/RoundRectangleGeometricAdapter.java" startline="45" endline="47">
{
    super (origin, corner);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/RoundRectangleGeometricAdapter.java" startline="56" endline="64">
{
    Point arc = getArc ();
    Rectangle dspBox = displayBox ();
    RoundRectangle2D.Float roundRectangle = new RoundRectangle2D.Float (dspBox.x, dspBox.y, dspBox.width, dspBox.height, arc.x, arc.y);
    return roundRectangle;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/StandardDisposableResourceHolder.java" startline="44" endline="44">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/StandardDisposableResourceHolder.java" startline="53" endline="56">
{
    this.resource = resource;
    resetDelay ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/StandardDisposableResourceHolder.java" startline="65" endline="69">
{
    StandardDisposableResourceHolder clone = new StandardDisposableResourceHolder ();
    clone.setDisposableDelay (this.getDisposableDelay ());
    return clone;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/StandardDisposableResourceHolder.java" startline="80" endline="87">
{
    if (resource != null) {
        resetDelay ();
        return resource;
    }

    throw new NullPointerException ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/StandardDisposableResourceHolder.java" startline="82" endline="85">
{
    resetDelay ();
    return resource;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/StandardDisposableResourceHolder.java" startline="96" endline="99">
{
    this.resource = resource;
    resetDelay ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/StandardDisposableResourceHolder.java" startline="108" endline="110">
{
    disposeDelay = millis;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/StandardDisposableResourceHolder.java" startline="119" endline="121">
{
    return disposeDelay;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/StandardDisposableResourceHolder.java" startline="126" endline="128">
{
    resource = null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/StandardDisposableResourceHolder.java" startline="137" endline="139">
{
    return (resource != null);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/StandardDisposableResourceHolder.java" startline="148" endline="150">
{
    isLocked = true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/StandardDisposableResourceHolder.java" startline="158" endline="161">
{
    resetDelay ();
    isLocked = false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/StandardDisposableResourceHolder.java" startline="170" endline="172">
{
    return isLocked;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/StandardDisposableResourceHolder.java" startline="181" endline="183">
{
    return lastTimeAccessed;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/StandardDisposableResourceHolder.java" startline="188" endline="190">
{
    lastTimeAccessed = System.currentTimeMillis ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/StandardDisposableResourceManager.java" startline="42" endline="46">
{
    resources = new WeakHashMap ();
    this.strategy = strategy;
    strategy.setManager (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/StandardDisposableResourceManager.java" startline="55" endline="57">
{
    resources.put (resource, resource);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/StandardDisposableResourceManager.java" startline="67" endline="69">
{
    resources.remove (resource);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/StandardDisposableResourceManager.java" startline="78" endline="80">
{
    return resources.values ().iterator ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/StandardDisposableResourceManager.java" startline="90" endline="92">
{
    return resources.containsValue (resource);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/StandardDisposableResourceManager.java" startline="101" endline="103">
{
    return strategy;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/StandardDisposableResourceManager.java" startline="112" endline="114">
{
    strategy = newStrategy;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/StandardDisposableResourceManager.java" startline="124" endline="126">
{
    strategy.startDisposing ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/StandardDisposableResourceManager.java" startline="138" endline="140">
{
    strategy.stopDisposing (millis);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/TextHolderContentProducer.java" startline="44" endline="44">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/TextHolderContentProducer.java" startline="53" endline="55">
{
    fFigure = figure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/TextHolderContentProducer.java" startline="67" endline="73">
{
    TextHolder figure = (fFigure != null) ? fFigure : (TextHolder) ctxAttrValue;
    return figure.getText ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/TextHolderContentProducer.java" startline="82" endline="85">
{
    super.write (dw);
    dw.writeStorable ((Figure) fFigure);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/TextHolderContentProducer.java" startline="96" endline="99">
{
    super.read (dr);
    fFigure = (TextHolder) dr.readStorable ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/TriangleFigureGeometricAdapter.java" startline="31" endline="33">
{
    super ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/TriangleFigureGeometricAdapter.java" startline="43" endline="45">
{
    super (origin, corner);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/TriangleFigureGeometricAdapter.java" startline="54" endline="56">
{
    return getPolygon ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/URLContentProducer.java" startline="46" endline="46">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/URLContentProducer.java" startline="55" endline="57">
{
    fURL = url;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/URLContentProducer.java" startline="69" endline="88">
{
    try {
        URL url = (fURL != null) ? new URL (fURL.toExternalForm ()) : new URL (((URL) ctxAttrValue).toExternalForm ());
        InputStream reader = url.openStream ();
        int available = reader.available ();
        byte contents [] = new byte [available];
        reader.read (contents, 0, available);
        reader.close ();
        return new String (contents);
    }
    catch (Exception ex) {
        ex.printStackTrace ();
        return ex.toString ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/URLContentProducer.java" startline="71" endline="82">
{
    URL url = (fURL != null) ? new URL (fURL.toExternalForm ()) : new URL (((URL) ctxAttrValue).toExternalForm ());
    InputStream reader = url.openStream ();
    int available = reader.available ();
    byte contents [] = new byte [available];
    reader.read (contents, 0, available);
    reader.close ();
    return new String (contents);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/URLContentProducer.java" startline="84" endline="87">
{
    ex.printStackTrace ();
    return ex.toString ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/URLContentProducer.java" startline="97" endline="104">
{
    super.write (dw);
    dw.writeBoolean ((fURL != null));
    if (fURL != null) {
        dw.writeString (fURL.toExternalForm ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/URLContentProducer.java" startline="101" endline="103">
{
    dw.writeString (fURL.toExternalForm ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/URLContentProducer.java" startline="115" endline="122">
{
    super.read (dr);
    boolean hasURL = dr.readBoolean ();
    if (hasURL) {
        fURL = new URL (dr.readString ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/html/URLContentProducer.java" startline="119" endline="121">
{
    fURL = new URL (dr.readString ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/AreaTracker.java" startline="35" endline="37">
{
    super (editor);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/AreaTracker.java" startline="40" endline="42">
{
    return new Rectangle (area.x, area.y, area.width, area.height);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/AreaTracker.java" startline="45" endline="50">
{
    super.mouseDown (e, e.getX (), e.getY ());
    rubberBand (getAnchorX (), getAnchorY (), getAnchorX (), getAnchorY ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/AreaTracker.java" startline="53" endline="57">
{
    super.mouseDrag (e, x, y);
    eraseRubberBand ();
    rubberBand (getAnchorX (), getAnchorY (), x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/AreaTracker.java" startline="60" endline="63">
{
    super.mouseUp (e, x, y);
    eraseRubberBand ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/AreaTracker.java" startline="66" endline="70">
{
    area = new Rectangle (new Point (x1, y1));
    area.add (new Point (x2, y2));
    drawXORRect (area);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/AreaTracker.java" startline="73" endline="75">
{
    drawXORRect (area);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/AreaTracker.java" startline="78" endline="83">
{
    Graphics g = view ().getGraphics ();
    g.setXORMode (view ().getBackground ());
    g.setColor (Color.black);
    g.drawRect (r.x, r.y, r.width, r.height);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/DoubleBufferImage.java" startline="37" endline="40">
{
    this.real = real;
    this.scale = scale;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/DoubleBufferImage.java" startline="43" endline="45">
{
    return real;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/DoubleBufferImage.java" startline="48" endline="50">
{
    real.flush ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/DoubleBufferImage.java" startline="53" endline="60">
{
    ScalingGraphics result = new ScalingGraphics (real.getGraphics ());
    result.setScale (scale);
    return result;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/DoubleBufferImage.java" startline="63" endline="65">
{
    return real.getHeight (observer);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/DoubleBufferImage.java" startline="68" endline="70">
{
    return real.getProperty (name, observer);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/DoubleBufferImage.java" startline="73" endline="75">
{
    return real.getScaledInstance (width, height, hints);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/DoubleBufferImage.java" startline="78" endline="80">
{
    return real.getSource ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/DoubleBufferImage.java" startline="83" endline="85">
{
    return real.getWidth (observer);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/MiniMapZoomableView.java" startline="31" endline="33">
{
    super (newMappedDrawingView, subject);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/MiniMapZoomableView.java" startline="37" endline="51">
{
    double subjectsScale = ((ZoomDrawingView) getMappedComponent ()).getScale ();
    AffineTransform at = null;
    try {
        at = AffineTransform.getScaleInstance (subjectsScale, subjectsScale).createInverse ();
    }
    catch (NoninvertibleTransformException nte) {
    }

    return at;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/MiniMapZoomableView.java" startline="42" endline="44">
{
    at = AffineTransform.getScaleInstance (subjectsScale, subjectsScale).createInverse ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/MiniMapZoomableView.java" startline="46" endline="48">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ScalingGraphics.java" startline="53" endline="55">
{
    real = realGraphics;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ScalingGraphics.java" startline="65" endline="67">
{
    this.scale = scale;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ScalingGraphics.java" startline="74" endline="76">
{
    return scale;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ScalingGraphics.java" startline="83" endline="88">
{
    int size = f.getSize ();
    int scaledSize = (int) (size * scale);
    return new Font (f.getFamily (), f.getStyle (), scaledSize);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ScalingGraphics.java" startline="94" endline="105">
{
    if (s instanceof Rectangle) {
        Rectangle r = (Rectangle) s;
        return new Rectangle ((int) (r.x * scale), (int) (r.y * scale), (int) (r.width * scale), (int) (r.height * scale));
    }
    else {
        throw new RuntimeException ("Cannot scale shape: " + s.getClass ().getName ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ScalingGraphics.java" startline="96" endline="100">
{
    Rectangle r = (Rectangle) s;
    return new Rectangle ((int) (r.x * scale), (int) (r.y * scale), (int) (r.width * scale), (int) (r.height * scale));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ScalingGraphics.java" startline="102" endline="104">
{
    throw new RuntimeException ("Cannot scale shape: " + s.getClass ().getName ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ScalingGraphics.java" startline="110" endline="115">
{
    Graphics realCopy = real.create ();
    ScalingGraphics result = new ScalingGraphics (realCopy);
    result.setScale (getScale ());
    return result;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ScalingGraphics.java" startline="118" endline="120">
{
    real.translate ((int) (x * scale), (int) (y * scale));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ScalingGraphics.java" startline="123" endline="125">
{
    return real.getColor ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ScalingGraphics.java" startline="128" endline="130">
{
    real.setColor (c);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ScalingGraphics.java" startline="133" endline="135">
{
    real.setPaintMode ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ScalingGraphics.java" startline="138" endline="140">
{
    real.setXORMode (c1);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ScalingGraphics.java" startline="143" endline="148">
{
    if (userFont == null) userFont = real.getFont ();

    return userFont;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ScalingGraphics.java" startline="151" endline="154">
{
    userFont = font;
    real.setFont (scaledFont (font, scale));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ScalingGraphics.java" startline="157" endline="159">
{
    return new ScalingFontMetrics (userFont, real.getFontMetrics ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ScalingGraphics.java" startline="162" endline="167">
{
    return new ScalingFontMetrics (f, real.getFontMetrics (scaledFont (f, scale)));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ScalingGraphics.java" startline="170" endline="172">
{
    return userClip;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ScalingGraphics.java" startline="175" endline="182">
{
    if (userClip == null) userClip = new Rectangle (x, y, width, height);
    else userClip = userClip.intersection (new Rectangle (x, y, width, height));

    real.clipRect ((int) (x * scale), (int) (y * scale), (int) (width * scale), (int) (height * scale));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ScalingGraphics.java" startline="185" endline="189">
{
    userClip = new Rectangle (x, y, width, height);
    real.setClip ((int) (x * scale), (int) (y * scale), (int) (width * scale), (int) (height * scale));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ScalingGraphics.java" startline="192" endline="194">
{
    return userClip;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ScalingGraphics.java" startline="197" endline="204">
{
    userClip = (Rectangle) clip;
    if (clip != null) real.setClip (scaledShape (clip, scale));
    else real.setClip (null);

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ScalingGraphics.java" startline="208" endline="212">
{
    real.copyArea ((int) (x * scale), (int) (y * scale), (int) (width * scale), (int) (height * scale), (int) (dx * scale), (int) (dy * scale));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ScalingGraphics.java" startline="215" endline="218">
{
    real.drawLine ((int) (x1 * scale), (int) (y1 * scale), (int) (x2 * scale), (int) (y2 * scale));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ScalingGraphics.java" startline="221" endline="224">
{
    real.fillRect ((int) (x * scale), (int) (y * scale), (int) (width * scale), (int) (height * scale));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ScalingGraphics.java" startline="227" endline="230">
{
    real.clearRect ((int) (x * scale), (int) (y * scale), (int) (width * scale), (int) (height * scale));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ScalingGraphics.java" startline="234" endline="238">
{
    real.drawRoundRect ((int) (x * scale), (int) (y * scale), (int) (width * scale), (int) (height * scale), (int) (arcWidth * scale), (int) (arcHeight * scale));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ScalingGraphics.java" startline="242" endline="246">
{
    real.fillRoundRect ((int) (x * scale), (int) (y * scale), (int) (width * scale), (int) (height * scale), (int) (arcWidth * scale), (int) (arcHeight * scale));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ScalingGraphics.java" startline="249" endline="252">
{
    real.drawOval ((int) (x * scale), (int) (y * scale), (int) (width * scale), (int) (height * scale));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ScalingGraphics.java" startline="255" endline="258">
{
    real.fillOval ((int) (x * scale), (int) (y * scale), (int) (width * scale), (int) (height * scale));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ScalingGraphics.java" startline="262" endline="266">
{
    real.drawArc ((int) (x * scale), (int) (y * scale), (int) (width * scale), (int) (height * scale), startAngle, arcAngle);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ScalingGraphics.java" startline="270" endline="274">
{
    real.fillArc ((int) (x * scale), (int) (y * scale), (int) (width * scale), (int) (height * scale), startAngle, arcAngle);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ScalingGraphics.java" startline="278" endline="287">
{
    int [] realXPoints = new int [nPoints];
    int [] realYPoints = new int [nPoints];
    for (int i = 0;
    i < nPoints; i ++) {
        realXPoints [i] = (int) (xPoints [i] * scale);
        realYPoints [i] = (int) (yPoints [i] * scale);
    }

    real.drawPolyline (realXPoints, realYPoints, nPoints);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ScalingGraphics.java" startline="282" endline="285">
{
    realXPoints [i] = (int) (xPoints [i] * scale);
    realYPoints [i] = (int) (yPoints [i] * scale);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ScalingGraphics.java" startline="291" endline="300">
{
    int [] realXPoints = new int [nPoints];
    int [] realYPoints = new int [nPoints];
    for (int i = 0;
    i < nPoints; i ++) {
        realXPoints [i] = (int) (xPoints [i] * scale);
        realYPoints [i] = (int) (yPoints [i] * scale);
    }

    real.drawPolygon (realXPoints, realYPoints, nPoints);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ScalingGraphics.java" startline="295" endline="298">
{
    realXPoints [i] = (int) (xPoints [i] * scale);
    realYPoints [i] = (int) (yPoints [i] * scale);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ScalingGraphics.java" startline="304" endline="313">
{
    int [] realXPoints = new int [nPoints];
    int [] realYPoints = new int [nPoints];
    for (int i = 0;
    i < nPoints; i ++) {
        realXPoints [i] = (int) (xPoints [i] * scale);
        realYPoints [i] = (int) (yPoints [i] * scale);
    }

    real.fillPolygon (realXPoints, realYPoints, nPoints);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ScalingGraphics.java" startline="308" endline="311">
{
    realXPoints [i] = (int) (xPoints [i] * scale);
    realYPoints [i] = (int) (yPoints [i] * scale);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ScalingGraphics.java" startline="316" endline="318">
{
    real.drawString (str, (int) (x * scale), (int) (y * scale));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ScalingGraphics.java" startline="323" endline="325">
{
    real.drawString (iterator, (int) (x * scale), (int) (y * scale));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ScalingGraphics.java" startline="329" endline="339">
{
    if (img instanceof DoubleBufferImage) return real.drawImage (((DoubleBufferImage) img).getRealImage (), x, y, observer);
    else return real.drawImage (img, (int) (x * scale), (int) (y * scale), (int) (img.getWidth (observer) * scale), (int) (img.getHeight (observer) * scale), observer);

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ScalingGraphics.java" startline="344" endline="352">
{
    if (img instanceof DoubleBufferImage) return real.drawImage (((DoubleBufferImage) img).getRealImage (), x, y, width, height, observer);
    else return real.drawImage (img, (int) (x * scale), (int) (y * scale), (int) (width * scale), (int) (height * scale), observer);

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ScalingGraphics.java" startline="357" endline="366">
{
    if (img instanceof DoubleBufferImage) return real.drawImage (((DoubleBufferImage) img).getRealImage (), x, y, bgcolor, observer);
    else return real.drawImage (img, (int) (x * scale), (int) (y * scale), (int) (img.getWidth (observer) * scale), (int) (img.getHeight (observer) * scale), bgcolor, observer);

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ScalingGraphics.java" startline="372" endline="380">
{
    if (img instanceof DoubleBufferImage) return real.drawImage (((DoubleBufferImage) img).getRealImage (), x, y, width, height, bgcolor, observer);
    else return real.drawImage (img, (int) (x * scale), (int) (y * scale), (int) (width * scale), (int) (height * scale), bgcolor, observer);

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ScalingGraphics.java" startline="386" endline="397">
{
    if (img instanceof DoubleBufferImage) return real.drawImage (((DoubleBufferImage) img).getRealImage (), dx1, dy1, dx2, dy2, sx1, sy1, sx2, sy2, observer);
    else return real.drawImage (img, (int) (dx1 * scale), (int) (dy1 * scale), (int) (dx2 * scale), (int) (dy2 * scale), (int) (sx1 * scale), (int) (sy1 * scale), (int) (sx2 * scale), (int) (sy2 * scale), observer);

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ScalingGraphics.java" startline="404" endline="415">
{
    if (img instanceof DoubleBufferImage) return real.drawImage (((DoubleBufferImage) img).getRealImage (), dx1, dy1, dx2, dy2, sx1, sy1, sx2, sy2, bgcolor, observer);
    else return real.drawImage (img, (int) (dx1 * scale), (int) (dy1 * scale), (int) (dx2 * scale), (int) (dy2 * scale), (int) (sx1 * scale), (int) (sy1 * scale), (int) (sx2 * scale), (int) (sy2 * scale), bgcolor, observer);

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ScalingGraphics.java" startline="418" endline="420">
{
    real.dispose ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ScalingGraphics.java" startline="445" endline="449">
{
    super (null);
    this.userFont = userFont;
    this.real = real;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ScalingGraphics.java" startline="455" endline="457">
{
    return userFont;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ScalingGraphics.java" startline="460" endline="462">
{
    return (int) (real.getAscent () / ScalingGraphics.this.getScale ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ScalingGraphics.java" startline="465" endline="467">
{
    return (int) (real.getLeading () / ScalingGraphics.this.getScale ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ScalingGraphics.java" startline="470" endline="472">
{
    return (int) (real.getMaxAdvance () / ScalingGraphics.this.getScale ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ScalingGraphics.java" startline="475" endline="477">
{
    return (int) (real.charWidth (ch) / ScalingGraphics.this.getScale ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ScalingGraphics.java" startline="480" endline="483">
{
    return (int) (real.charsWidth (data, off, len) / ScalingGraphics.this.getScale ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomAreaTracker.java" startline="27" endline="29">
{
    super (editor);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomAreaTracker.java" startline="32" endline="38">
{
    Rectangle zoomArea = getArea ();
    super.mouseUp (e, x, y);
    if (zoomArea.width > 4 && zoomArea.height > 4) ((ZoomDrawingView) view ()).zoom (zoomArea.x, zoomArea.y, zoomArea.width, zoomArea.height);

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomCommand.java" startline="40" endline="43">
{
    super (name, newDrawingEditor, true);
    this.scale = scale;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomCommand.java" startline="48" endline="51">
{
    super.execute ();
    zoomView ().zoom (scale);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomCommand.java" startline="60" endline="67">
{
    Object view = super.view ();
    if (view instanceof ZoomDrawingView) {
        return (ZoomDrawingView) view;
    }

    throw new JHotDrawRuntimeException ("execute should NOT be getting called when view not instanceof ZoomDrawingView");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomCommand.java" startline="63" endline="65">
{
    return (ZoomDrawingView) view;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomCommand.java" startline="76" endline="78">
{
    return scale;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomCommand.java" startline="87" endline="89">
{
    scale = newScale;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomCommand.java" startline="98" endline="100">
{
    return (view () instanceof ZoomDrawingView);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="50" endline="52">
{
    this (editor, MINIMUM_WIDTH, MINIMUM_HEIGHT);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="55" endline="57">
{
    super (editor, width, height);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="64" endline="66">
{
    return scale;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="73" endline="81">
{
    Dimension oldSize = getUserSize ();
    this.scale = scale;
    setUserSize (oldSize.width, oldSize.height);
    centralize (drawing ());
    forceRedraw ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="84" endline="88">
{
    drawingInvalidated (new DrawingChangeEvent (drawing (), new Rectangle (getSize ())));
    repairDamage ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="95" endline="98">
{
    setSize ((int) (width * getScale ()), (int) (height * getScale ()));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="105" endline="107">
{
    setUserSize (d.width, d.height);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="113" endline="115">
{
    return super.getSize ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="118" endline="120">
{
    return getParent ().getSize ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="123" endline="125">
{
    return getParent () instanceof JViewport;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="131" endline="134">
{
    setViewPosition (newOrigin);
    forceRedraw ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="137" endline="139">
{
    ((JViewport) getParent ()).setViewPosition (newPosition);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="146" endline="150">
{
    Dimension screenSize = getSize ();
    return new Dimension ((int) (screenSize.width / getScale ()), (int) (screenSize.height / getScale ()));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="159" endline="183">
{
    if (hasZoomSupport ()) {
        Dimension viewportSize = getViewportSize ();
        double xScale = (double) viewportSize.width / (double) width;
        double yScale = (double) viewportSize.height / (double) height;
        double newScale = Math.min (xScale, yScale);
        Dimension userSize = getUserSize ();
        this.scale = newScale;
        setUserSize (userSize);
        revalidate ();
        setViewPosition (new Point ((int) (x * getScale ()), (int) (y * getScale ())));
        forceRedraw ();
    }
    else {
        throw new RuntimeException ("zooming only works if this view is contained in a ScrollPane");
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="161" endline="177">
{
    Dimension viewportSize = getViewportSize ();
    double xScale = (double) viewportSize.width / (double) width;
    double yScale = (double) viewportSize.height / (double) height;
    double newScale = Math.min (xScale, yScale);
    Dimension userSize = getUserSize ();
    this.scale = newScale;
    setUserSize (userSize);
    revalidate ();
    setViewPosition (new Point ((int) (x * getScale ()), (int) (y * getScale ())));
    forceRedraw ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="179" endline="182">
{
    throw new RuntimeException ("zooming only works if this view is contained in a ScrollPane");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="189" endline="215">
{
    if (hasZoomSupport ()) {
        JViewport viewport = (JViewport) getParent ();
        Dimension viewportSize = viewport.getSize ();
        Dimension userSize = getUserSize ();
        this.scale = scale;
        Point viewOrg = viewport.getViewPosition ();
        viewOrg.x = viewOrg.x + (viewportSize.width / 2);
        viewOrg.y = viewOrg.y + (viewportSize.height / 2);
        int xScreen = (int) (viewOrg.x * scale);
        int yScreen = (int) (viewOrg.y * scale);
        int xOrigin = xScreen - viewportSize.width / 2;
        int yOrigin = yScreen - viewportSize.height / 2;
        if (xOrigin < 0) xOrigin = 0;

        if (yOrigin < 0) yOrigin = 0;

        setUserSize (userSize);
        revalidate ();
        viewport.setViewPosition (new Point (xOrigin, yOrigin));
        forceRedraw ();
    }
    else {
        throw new RuntimeException ("zooming only works if this view is contained in a ScrollPane");
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="191" endline="209">
{
    JViewport viewport = (JViewport) getParent ();
    Dimension viewportSize = viewport.getSize ();
    Dimension userSize = getUserSize ();
    this.scale = scale;
    Point viewOrg = viewport.getViewPosition ();
    viewOrg.x = viewOrg.x + (viewportSize.width / 2);
    viewOrg.y = viewOrg.y + (viewportSize.height / 2);
    int xScreen = (int) (viewOrg.x * scale);
    int yScreen = (int) (viewOrg.y * scale);
    int xOrigin = xScreen - viewportSize.width / 2;
    int yOrigin = yScreen - viewportSize.height / 2;
    if (xOrigin < 0) xOrigin = 0;

    if (yOrigin < 0) yOrigin = 0;

    setUserSize (userSize);
    revalidate ();
    viewport.setViewPosition (new Point (xOrigin, yOrigin));
    forceRedraw ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="211" endline="214">
{
    throw new RuntimeException ("zooming only works if this view is contained in a ScrollPane");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="222" endline="246">
{
    if (hasZoomSupport ()) {
        Dimension viewportSize = getViewportSize ();
        Dimension userSize = getUserSize ();
        this.scale = getScale () / getZoomSpeed ();
        int xScreen = (int) (x * getScale ());
        int yScreen = (int) (y * getScale ());
        int xOrigin = xScreen - viewportSize.width / 2;
        int yOrigin = yScreen - viewportSize.height / 2;
        if (xOrigin < 0) xOrigin = 0;

        if (yOrigin < 0) yOrigin = 0;

        setUserSize (userSize);
        revalidate ();
        setViewPosition (new Point (xOrigin, yOrigin));
        forceRedraw ();
    }
    else {
        throw new RuntimeException ("zooming only works if this view is contained in a ScrollPane");
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="224" endline="240">
{
    Dimension viewportSize = getViewportSize ();
    Dimension userSize = getUserSize ();
    this.scale = getScale () / getZoomSpeed ();
    int xScreen = (int) (x * getScale ());
    int yScreen = (int) (y * getScale ());
    int xOrigin = xScreen - viewportSize.width / 2;
    int yOrigin = yScreen - viewportSize.height / 2;
    if (xOrigin < 0) xOrigin = 0;

    if (yOrigin < 0) yOrigin = 0;

    setUserSize (userSize);
    revalidate ();
    setViewPosition (new Point (xOrigin, yOrigin));
    forceRedraw ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="242" endline="245">
{
    throw new RuntimeException ("zooming only works if this view is contained in a ScrollPane");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="254" endline="277">
{
    if (hasZoomSupport ()) {
        JViewport viewport = (JViewport) getParent ();
        Dimension viewportSize = viewport.getSize ();
        Dimension userSize = getUserSize ();
        this.scale = getScale () * getZoomSpeed ();
        int xScreen = (int) (x * getScale ());
        int yScreen = (int) (y * getScale ());
        int xOrigin = xScreen - viewportSize.width / 2;
        int yOrigin = yScreen - viewportSize.height / 2;
        if (xOrigin < 0) xOrigin = 0;

        if (yOrigin < 0) yOrigin = 0;

        setUserSize (userSize);
        revalidate ();
        viewport.setViewPosition (new Point (xOrigin, yOrigin));
        forceRedraw ();
    }
    else {
        throw new RuntimeException ("zooming only works if this view is contained in a ScrollPane");
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="256" endline="271">
{
    JViewport viewport = (JViewport) getParent ();
    Dimension viewportSize = viewport.getSize ();
    Dimension userSize = getUserSize ();
    this.scale = getScale () * getZoomSpeed ();
    int xScreen = (int) (x * getScale ());
    int yScreen = (int) (y * getScale ());
    int xOrigin = xScreen - viewportSize.width / 2;
    int yOrigin = yScreen - viewportSize.height / 2;
    if (xOrigin < 0) xOrigin = 0;

    if (yOrigin < 0) yOrigin = 0;

    setUserSize (userSize);
    revalidate ();
    viewport.setViewPosition (new Point (xOrigin, yOrigin));
    forceRedraw ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="273" endline="276">
{
    throw new RuntimeException ("zooming only works if this view is contained in a ScrollPane");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="284" endline="305">
{
    if (hasZoomSupport ()) {
        Dimension viewportSize = getViewportSize ();
        Dimension userSize = getUserSize ();
        int xOrigin = x - viewportSize.width / 2;
        int yOrigin = y - viewportSize.height / 2;
        if (xOrigin < 0) xOrigin = 0;

        if (yOrigin < 0) yOrigin = 0;

        this.scale = 1.0;
        setUserSize (userSize);
        revalidate ();
        setViewPosition (new Point ((int) (xOrigin), (int) (yOrigin)));
        forceRedraw ();
    }
    else {
        throw new RuntimeException ("zooming only works if this view is contained in a ScrollPane");
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="286" endline="299">
{
    Dimension viewportSize = getViewportSize ();
    Dimension userSize = getUserSize ();
    int xOrigin = x - viewportSize.width / 2;
    int yOrigin = y - viewportSize.height / 2;
    if (xOrigin < 0) xOrigin = 0;

    if (yOrigin < 0) yOrigin = 0;

    this.scale = 1.0;
    setUserSize (userSize);
    revalidate ();
    setViewPosition (new Point ((int) (xOrigin), (int) (yOrigin)));
    forceRedraw ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="301" endline="304">
{
    throw new RuntimeException ("zooming only works if this view is contained in a ScrollPane");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="308" endline="310">
{
    super.paint (transformGraphics (g, getScale ()));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="313" endline="315">
{
    return transformGraphics (super.getGraphics (), getScale ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="318" endline="328">
{
    if (scale != 1.0) {
        Graphics2D g2 = (Graphics2D) g;
        g2.transform (AffineTransform.getScaleInstance (scale, scale));
    }

    return g;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="320" endline="326">
{
    Graphics2D g2 = (Graphics2D) g;
    g2.transform (AffineTransform.getScaleInstance (scale, scale));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="334" endline="343">
{
    Dimension size = getSize ();
    p.x = Geom.range (1, (int) (size.width / getScale ()), p.x);
    p.y = Geom.range (1, (int) (size.height / getScale ()), p.y);
    if (getConstrainer () != null) {
        return getConstrainer ().constrainPoint (p);
    }

    return p;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="339" endline="341">
{
    return getConstrainer ().constrainPoint (p);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="346" endline="351">
{
    g.setColor (getBackground ());
    g.fillRect (0, 0, (int) (getBounds ().width / getScale ()), (int) (getBounds ().height / getScale ()));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="354" endline="367">
{
    Point boundsCenter = new Point (bounds.width / 2, bounds.height / 2);
    Rectangle r = ((StandardDrawing) d).displayBox ();
    Point drawingCenter = new Point (r.x + r.width / 2, r.y + r.height / 2);
    int diffX = boundsCenter.x - drawingCenter.x;
    int diffY = boundsCenter.y - drawingCenter.y;
    if (diffX != 0 || diffY != 0) {
        for (FigureEnumeration fe = d.figures ();
        fe.hasNextFigure ();) {
            fe.nextFigure ().moveBy (diffX, diffY);
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="361" endline="366">
{
    for (FigureEnumeration fe = d.figures ();
    fe.hasNextFigure ();) {
        fe.nextFigure ().moveBy (diffX, diffY);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="363" endline="365">
{
    fe.nextFigure ().moveBy (diffX, diffY);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="370" endline="372">
{
    centralize (d, getUserSize ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="375" endline="400">
{
    super.setDrawing (d);
    Rectangle r = ((StandardDrawing) d).displayBox ();
    Dimension drawingSize = new Dimension (r.width, r.height);
    Dimension viewportSize = new Dimension (r.width, r.height);
    if (getParent () != null) {
        viewportSize = getViewportSize ();
    }

    super.setPreferredSize (viewportSize);
    super.setSize (viewportSize);
    revalidate ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="382" endline="384">
{
    viewportSize = getViewportSize ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="403" endline="405">
{
    return super.getSize ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="408" endline="410">
{
    return getMinimumSize ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="416" endline="426">
{
    Rectangle damagedArea = getDamage ();
    if (damagedArea != null) {
        repaint ((int) (damagedArea.x * getScale ()), (int) (damagedArea.y * getScale ()), (int) (damagedArea.width * getScale ()), (int) (damagedArea.height * getScale ()));
        setDamage (null);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="419" endline="425">
{
    repaint ((int) (damagedArea.x * getScale ()), (int) (damagedArea.y * getScale ()), (int) (damagedArea.width * getScale ()), (int) (damagedArea.height * getScale ()));
    setDamage (null);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="432" endline="445">
{
    Rectangle r = e.getInvalidatedRectangle ();
    if (getDamage () == null) {
        setDamage (r);
    }
    else {
        Rectangle damagedArea = getDamage ();
        damagedArea.add (r);
        setDamage (damagedArea);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="435" endline="437">
{
    setDamage (r);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="439" endline="444">
{
    Rectangle damagedArea = getDamage ();
    damagedArea.add (r);
    setDamage (damagedArea);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="452" endline="461">
{
    return new MouseEvent (e.getComponent (), e.getID (), e.getWhen (), e.getModifiers (), (int) (e.getX () / getScale ()), (int) (e.getY () / getScale ()), e.getClickCount (), e.isPopupTrigger ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="465" endline="477">
{
    return new StandardDrawingView.DrawingViewMouseListener () {

        public void mousePressed (MouseEvent e) {
            super.mousePressed (createScaledEvent (e));
        }

        public void mouseReleased (MouseEvent e) {
            super.mouseReleased (createScaledEvent (e));
        }

    }

    ;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="469" endline="471">
{
    super.mousePressed (createScaledEvent (e));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="473" endline="475">
{
    super.mouseReleased (createScaledEvent (e));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="480" endline="492">
{
    return new StandardDrawingView.DrawingViewMouseMotionListener () {

        public void mouseDragged (MouseEvent e) {
            super.mouseDragged (createScaledEvent (e));
        }

        public void mouseMoved (MouseEvent e) {
            super.mouseMoved (createScaledEvent (e));
        }

    }

    ;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="484" endline="486">
{
    super.mouseDragged (createScaledEvent (e));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="488" endline="490">
{
    super.mouseMoved (createScaledEvent (e));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="495" endline="523">
{
    return new StandardDrawingView.DrawingViewKeyListener () {

        public void keyPressed (KeyEvent e) {
            super.keyPressed (e);
            if (e.getKeyChar () == ' ') {
                forceRedraw ();
            }
            else if (e.getKeyChar () == 'o') {
                setScale (getScale () / getZoomSpeed ());
            }
            else if (e.getKeyChar () == 'i') {
                setScale (getScale () * getZoomSpeed ());
            }
            else if (e.getKeyChar () == 'c') {
                centralize (drawing ());
            }
            else {
                super.keyPressed (e);
            }

        }

    }

    ;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="499" endline="521">
{
    super.keyPressed (e);
    if (e.getKeyChar () == ' ') {
        forceRedraw ();
    }
    else if (e.getKeyChar () == 'o') {
        setScale (getScale () / getZoomSpeed ());
    }
    else if (e.getKeyChar () == 'i') {
        setScale (getScale () * getZoomSpeed ());
    }
    else if (e.getKeyChar () == 'c') {
        centralize (drawing ());
    }
    else {
        super.keyPressed (e);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="502" endline="504">
{
    forceRedraw ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="506" endline="508">
{
    setScale (getScale () / getZoomSpeed ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="510" endline="512">
{
    setScale (getScale () * getZoomSpeed ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="514" endline="516">
{
    centralize (drawing ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="518" endline="520">
{
    super.keyPressed (e);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="529" endline="531">
{
    return zoomSpeed;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomDrawingView.java" startline="537" endline="541">
{
    zoomSpeed = Math.max (1.1, newZoomSpeed);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomTool.java" startline="31" endline="33">
{
    super (editor);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomTool.java" startline="36" endline="71">
{
    super.mouseDown (e, x, y);
    if ((e.getModifiers () & InputEvent.BUTTON1_MASK) != 0) {
        if (child != null) {
            return;
        }

        view ().freezeView ();
        child = new ZoomAreaTracker (editor ());
        child.mouseDown (e, x, y);
    }
    else if ((e.getModifiers () & InputEvent.BUTTON2_MASK) != 0) {
        ((ZoomDrawingView) view ()).deZoom (x, y);
    }
    else if ((e.getModifiers () & InputEvent.BUTTON3_MASK) != 0) {
        if ((e.getModifiers () & InputEvent.SHIFT_MASK) != 0) {
            ((ZoomDrawingView) view ()).zoomIn (x, y);
        }
        else if ((e.getModifiers () & InputEvent.CTRL_MASK) != 0) {
            ((ZoomDrawingView) view ()).deZoom (x, y);
        }
        else {
            ((ZoomDrawingView) view ()).zoomOut (x, y);
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomTool.java" startline="42" endline="50">
{
    if (child != null) {
        return;
    }

    view ().freezeView ();
    child = new ZoomAreaTracker (editor ());
    child.mouseDown (e, x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomTool.java" startline="44" endline="46">
{
    return;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomTool.java" startline="52" endline="54">
{
    ((ZoomDrawingView) view ()).deZoom (x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomTool.java" startline="56" endline="70">
{
    if ((e.getModifiers () & InputEvent.SHIFT_MASK) != 0) {
        ((ZoomDrawingView) view ()).zoomIn (x, y);
    }
    else if ((e.getModifiers () & InputEvent.CTRL_MASK) != 0) {
        ((ZoomDrawingView) view ()).deZoom (x, y);
    }
    else {
        ((ZoomDrawingView) view ()).zoomOut (x, y);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomTool.java" startline="58" endline="60">
{
    ((ZoomDrawingView) view ()).zoomIn (x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomTool.java" startline="62" endline="65">
{
    ((ZoomDrawingView) view ()).deZoom (x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomTool.java" startline="67" endline="69">
{
    ((ZoomDrawingView) view ()).zoomOut (x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomTool.java" startline="74" endline="79">
{
    if (child != null) {
        child.mouseDrag (e, x, y);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomTool.java" startline="76" endline="78">
{
    child.mouseDrag (e, x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomTool.java" startline="82" endline="89">
{
    if (child != null) {
        view ().unfreezeView ();
        child.mouseUp (e, x, y);
    }

    child = null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomTool.java" startline="84" endline="87">
{
    view ().unfreezeView ();
    child.mouseUp (e, x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomUpdateStrategy.java" startline="41" endline="78">
{
    Dimension d = view.getSize ();
    if ((fOffscreen == null) || (d.width != fImagewidth) || (d.height != fImageheight)) {
        fOffscreen = view.createImage (d.width, d.height);
        fImagewidth = d.width;
        fImageheight = d.height;
    }

    Graphics g2 = fOffscreen.getGraphics ();
    Rectangle r = g.getClipBounds ();
    if (g2 instanceof ScalingGraphics) {
        ScalingGraphics s2 = (ScalingGraphics) g2;
        if (r != null) {
            r = new Rectangle ((int) ((r.x - 2) / s2.getScale ()), (int) ((r.y - 2) / s2.getScale ()), (int) ((r.width + 4) / s2.getScale ()), (int) ((r.height + 4) / s2.getScale ()));
            g.setClip (r);
        }

    }

    g2.setClip (r);
    view.drawAll (g2);
    g.drawImage (fOffscreen, 0, 0, view);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomUpdateStrategy.java" startline="46" endline="50">
{
    fOffscreen = view.createImage (d.width, d.height);
    fImagewidth = d.width;
    fImageheight = d.height;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomUpdateStrategy.java" startline="56" endline="73">
{
    ScalingGraphics s2 = (ScalingGraphics) g2;
    if (r != null) {
        r = new Rectangle ((int) ((r.x - 2) / s2.getScale ()), (int) ((r.y - 2) / s2.getScale ()), (int) ((r.width + 4) / s2.getScale ()), (int) ((r.height + 4) / s2.getScale ()));
        g.setClip (r);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/contrib/zoom/ZoomUpdateStrategy.java" startline="64" endline="72">
{
    r = new Rectangle ((int) ((r.x - 2) / s2.getScale ()), (int) ((r.y - 2) / s2.getScale ()), (int) ((r.width + 4) / s2.getScale ()), (int) ((r.height + 4) / s2.getScale ()));
    g.setClip (r);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/AbstractLineDecoration.java" startline="37" endline="38">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/AbstractLineDecoration.java" startline="45" endline="68">
{
    Polygon p = outline (x1, y1, x2, y2);
    myBounds = p.getBounds ();
    if (getFillColor () == null) {
        g.fillPolygon (p.xpoints, p.ypoints, p.npoints);
    }
    else {
        Color drawColor = g.getColor ();
        g.setColor (getFillColor ());
        g.fillPolygon (p.xpoints, p.ypoints, p.npoints);
        g.setColor (drawColor);
    }

    if (getBorderColor () != getFillColor ()) {
        Color drawColor = g.getColor ();
        g.setColor (getBorderColor ());
        g.drawPolygon (p.xpoints, p.ypoints, p.npoints);
        g.setColor (drawColor);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/AbstractLineDecoration.java" startline="50" endline="52">
{
    g.fillPolygon (p.xpoints, p.ypoints, p.npoints);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/AbstractLineDecoration.java" startline="54" endline="59">
{
    Color drawColor = g.getColor ();
    g.setColor (getFillColor ());
    g.fillPolygon (p.xpoints, p.ypoints, p.npoints);
    g.setColor (drawColor);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/AbstractLineDecoration.java" startline="62" endline="67">
{
    Color drawColor = g.getColor ();
    g.setColor (getBorderColor ());
    g.drawPolygon (p.xpoints, p.ypoints, p.npoints);
    g.setColor (drawColor);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/AbstractLineDecoration.java" startline="77" endline="86">
{
    if (myBounds != null) {
        return myBounds;
    }
    else {
        return new Rectangle (0, 0);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/AbstractLineDecoration.java" startline="79" endline="81">
{
    return myBounds;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/AbstractLineDecoration.java" startline="83" endline="85">
{
    return new Rectangle (0, 0);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/AbstractLineDecoration.java" startline="97" endline="115">
{
    if (getFillColor () != null) {
        FigureAttributes.writeColor (dw, FigureAttributeConstant.FILL_COLOR.getName (), getFillColor ());
    }
    else {
        dw.writeString ("no" + FigureAttributeConstant.FILL_COLOR.getName ());
    }

    if (getBorderColor () != null) {
        FigureAttributes.writeColor (dw, FigureAttributeConstant.FRAME_COLOR.getName (), getBorderColor ());
    }
    else {
        dw.writeString ("no" + FigureAttributeConstant.FRAME_COLOR.getName ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/AbstractLineDecoration.java" startline="99" endline="101">
{
    FigureAttributes.writeColor (dw, FigureAttributeConstant.FILL_COLOR.getName (), getFillColor ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/AbstractLineDecoration.java" startline="103" endline="105">
{
    dw.writeString ("no" + FigureAttributeConstant.FILL_COLOR.getName ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/AbstractLineDecoration.java" startline="108" endline="110">
{
    FigureAttributes.writeColor (dw, FigureAttributeConstant.FRAME_COLOR.getName (), getBorderColor ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/AbstractLineDecoration.java" startline="112" endline="114">
{
    dw.writeString ("no" + FigureAttributeConstant.FRAME_COLOR.getName ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/AbstractLineDecoration.java" startline="121" endline="135">
{
    String fillColorId = dr.readString ();
    if (fillColorId.equals (FigureAttributeConstant.FRAME_COLOR.getName ())) {
        setFillColor (FigureAttributes.readColor (dr));
    }

    String borderColorId = dr.readString ();
    if (borderColorId.equals ("BorderColor") || borderColorId.equals (FigureAttributeConstant.FRAME_COLOR.getName ())) {
        setBorderColor (FigureAttributes.readColor (dr));
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/AbstractLineDecoration.java" startline="125" endline="127">
{
    setFillColor (FigureAttributes.readColor (dr));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/AbstractLineDecoration.java" startline="132" endline="134">
{
    setBorderColor (FigureAttributes.readColor (dr));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/AbstractLineDecoration.java" startline="141" endline="143">
{
    fFillColor = fillColor;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/AbstractLineDecoration.java" startline="149" endline="151">
{
    return fFillColor;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/AbstractLineDecoration.java" startline="157" endline="159">
{
    fBorderColor = borderColor;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/AbstractLineDecoration.java" startline="165" endline="167">
{
    return fBorderColor;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ArrowTip.java" startline="40" endline="42">
{
    this (0.40, 8, 8);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ArrowTip.java" startline="48" endline="52">
{
    setAngle (angle);
    setOuterRadius (outerRadius);
    setInnerRadius (innerRadius);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ArrowTip.java" startline="58" endline="61">
{
    double dir = Math.PI / 2 - Math.atan2 (x2 - x1, y2 - y1);
    return outline (x1, y1, dir);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ArrowTip.java" startline="64" endline="73">
{
    Polygon shape = new Polygon ();
    shape.addPoint (x, y);
    addPointRelative (shape, x, y, getOuterRadius (), direction - getAngle ());
    addPointRelative (shape, x, y, getInnerRadius (), direction);
    addPointRelative (shape, x, y, getOuterRadius (), direction + getAngle ());
    shape.addPoint (x, y);
    return shape;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ArrowTip.java" startline="76" endline="80">
{
    shape.addPoint (x + (int) (radius * Math.cos (angle)), y + (int) (radius * Math.sin (angle)));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ArrowTip.java" startline="86" endline="91">
{
    dw.writeDouble (getAngle ());
    dw.writeDouble (getOuterRadius ());
    dw.writeDouble (getInnerRadius ());
    super.write (dw);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ArrowTip.java" startline="97" endline="102">
{
    setAngle (dr.readDouble ());
    setOuterRadius (dr.readDouble ());
    setInnerRadius (dr.readDouble ());
    super.read (dr);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ArrowTip.java" startline="111" endline="113">
{
    fAngle = newAngle;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ArrowTip.java" startline="122" endline="124">
{
    return fAngle;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ArrowTip.java" startline="130" endline="132">
{
    fInnerRadius = newInnerRadius;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ArrowTip.java" startline="138" endline="140">
{
    return fInnerRadius;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ArrowTip.java" startline="146" endline="148">
{
    fOuterRadius = newOuterRadius;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ArrowTip.java" startline="154" endline="156">
{
    return fOuterRadius;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/AttributeFigure.java" startline="59" endline="59">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/AttributeFigure.java" startline="66" endline="79">
{
    Color fill = getFillColor ();
    if (! ColorMap.isTransparent (fill)) {
        g.setColor (fill);
        drawBackground (g);
    }

    Color frame = getFrameColor ();
    if (! ColorMap.isTransparent (frame)) {
        g.setColor (frame);
        drawFrame (g);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/AttributeFigure.java" startline="69" endline="72">
{
    g.setColor (fill);
    drawBackground (g);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/AttributeFigure.java" startline="75" endline="78">
{
    g.setColor (frame);
    drawFrame (g);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/AttributeFigure.java" startline="86" endline="87">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/AttributeFigure.java" startline="94" endline="95">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/AttributeFigure.java" startline="103" endline="105">
{
    return (Color) getAttribute (FigureAttributeConstant.FILL_COLOR);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/AttributeFigure.java" startline="113" endline="115">
{
    return (Color) getAttribute (FigureAttributeConstant.FRAME_COLOR);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/AttributeFigure.java" startline="120" endline="129">
{
    fgDefaultAttributes = new FigureAttributes ();
    fgDefaultAttributes.set (FigureAttributeConstant.FRAME_COLOR, Color.black);
    fgDefaultAttributes.set (FigureAttributeConstant.FILL_COLOR, new Color (0x70DB93));
    fgDefaultAttributes.set (FigureAttributeConstant.TEXT_COLOR, Color.black);
    fgDefaultAttributes.set (FigureAttributeConstant.ARROW_MODE, new Integer (0));
    fgDefaultAttributes.set (FigureAttributeConstant.FONT_NAME, "Helvetica");
    fgDefaultAttributes.set (FigureAttributeConstant.FONT_SIZE, new Integer (12));
    fgDefaultAttributes.set (FigureAttributeConstant.FONT_STYLE, new Integer (Font.PLAIN));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/AttributeFigure.java" startline="136" endline="142">
{
    Object currentValue = getDefaultAttribute (name);
    fgDefaultAttributes.set (FigureAttributeConstant.getConstant (name), value);
    return currentValue;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/AttributeFigure.java" startline="155" endline="167">
{
    Object currentValue = getDefaultAttribute (name);
    if (currentValue != null) {
        return currentValue;
    }

    fgDefaultAttributes.set (FigureAttributeConstant.getConstant (name), value);
    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/AttributeFigure.java" startline="161" endline="163">
{
    return currentValue;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/AttributeFigure.java" startline="174" endline="180">
{
    if (fgDefaultAttributes == null) {
        initializeAttributes ();
    }

    return fgDefaultAttributes.get (FigureAttributeConstant.getConstant (name));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/AttributeFigure.java" startline="176" endline="178">
{
    initializeAttributes ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/AttributeFigure.java" startline="183" endline="189">
{
    if (fgDefaultAttributes == null) {
        initializeAttributes ();
    }

    return fgDefaultAttributes.get (attributeConstant);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/AttributeFigure.java" startline="185" endline="187">
{
    initializeAttributes ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/AttributeFigure.java" startline="197" endline="199">
{
    return getAttribute (FigureAttributeConstant.getConstant (name));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/AttributeFigure.java" startline="202" endline="211">
{
    if (fAttributes != null) {
        if (fAttributes.hasDefined (attributeConstant)) {
            return fAttributes.get (attributeConstant);
        }

    }

    return getDefaultAttribute (attributeConstant);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/AttributeFigure.java" startline="204" endline="209">
{
    if (fAttributes.hasDefined (attributeConstant)) {
        return fAttributes.get (attributeConstant);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/AttributeFigure.java" startline="206" endline="208">
{
    return fAttributes.get (attributeConstant);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/AttributeFigure.java" startline="217" endline="219">
{
    setAttribute (FigureAttributeConstant.getConstant (name), value);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/AttributeFigure.java" startline="222" endline="229">
{
    if (fAttributes == null) {
        fAttributes = new FigureAttributes ();
    }

    fAttributes.set (attributeConstant, value);
    changed ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/AttributeFigure.java" startline="224" endline="226">
{
    fAttributes = new FigureAttributes ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/AttributeFigure.java" startline="235" endline="246">
{
    super.write (dw);
    if (fAttributes == null) {
        dw.writeString ("no_attributes");
    }
    else {
        dw.writeString ("attributes");
        fAttributes.write (dw);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/AttributeFigure.java" startline="238" endline="240">
{
    dw.writeString ("no_attributes");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/AttributeFigure.java" startline="242" endline="245">
{
    dw.writeString ("attributes");
    fAttributes.write (dw);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/AttributeFigure.java" startline="252" endline="260">
{
    super.read (dr);
    String s = dr.readString ();
    if (s.toLowerCase ().equals ("attributes")) {
        fAttributes = new FigureAttributes ();
        fAttributes.read (dr);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/AttributeFigure.java" startline="256" endline="259">
{
    fAttributes = new FigureAttributes ();
    fAttributes.read (dr);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/AttributeFigure.java" startline="263" endline="278">
{
    Object associatedMenu = getAttribute (Figure.POPUP_MENU);
    if (associatedMenu != null) {
        setAttribute (Figure.POPUP_MENU, null);
    }

    o.defaultWriteObject ();
    if (associatedMenu != null) {
        setAttribute (Figure.POPUP_MENU, associatedMenu);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/AttributeFigure.java" startline="268" endline="270">
{
    setAttribute (Figure.POPUP_MENU, null);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/AttributeFigure.java" startline="275" endline="277">
{
    setAttribute (Figure.POPUP_MENU, associatedMenu);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/BorderDecorator.java" startline="39" endline="40">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/BorderDecorator.java" startline="43" endline="45">
{
    super (figure);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/BorderDecorator.java" startline="52" endline="54">
{
    setBorderOffset (new Point (3, 3));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/BorderDecorator.java" startline="57" endline="59">
{
    myBorderOffset = newBorderOffset;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/BorderDecorator.java" startline="62" endline="71">
{
    if (myBorderOffset == null) {
        return new Point (0, 0);
    }
    else {
        return myBorderOffset;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/BorderDecorator.java" startline="64" endline="66">
{
    return new Point (0, 0);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/BorderDecorator.java" startline="68" endline="70">
{
    return myBorderOffset;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/BorderDecorator.java" startline="77" endline="86">
{
    Rectangle r = displayBox ();
    super.draw (g);
    g.setColor (Color.white);
    g.drawLine (r.x, r.y, r.x, r.y + r.height);
    g.drawLine (r.x, r.y, r.x + r.width, r.y);
    g.setColor (Color.gray);
    g.drawLine (r.x + r.width, r.y, r.x + r.width, r.y + r.height);
    g.drawLine (r.x, r.y + r.height, r.x + r.width, r.y + r.height);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/BorderDecorator.java" startline="92" endline="96">
{
    Rectangle r = getDecoratedFigure ().displayBox ();
    r.grow (getBorderOffset ().x, getBorderOffset ().y);
    return r;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/BorderDecorator.java" startline="102" endline="106">
{
    Rectangle rect = e.getInvalidatedRectangle ();
    rect.grow (getBorderOffset ().x, getBorderOffset ().y);
    super.figureInvalidated (new FigureChangeEvent (this, rect, e));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/BorderDecorator.java" startline="109" endline="117">
{
    Insets i = super.connectionInsets ();
    i.top -= getBorderOffset ().y;
    i.bottom -= getBorderOffset ().y;
    i.left -= getBorderOffset ().x;
    i.right -= getBorderOffset ().x;
    return i;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/BorderTool.java" startline="33" endline="35">
{
    super (editor);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/BorderTool.java" startline="45" endline="61">
{
    setView ((DrawingView) e.getSource ());
    if ((e.getModifiers () & InputEvent.CTRL_MASK) == 0) {
        super.mouseDown (e, x, y);
    }
    else {
        Figure target = drawing ().findFigure (x, y);
        if ((target != null) && (target != target.getDecoratedFigure ())) {
            view ().addToSelection (target);
            reverseAction (target);
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/BorderTool.java" startline="49" endline="51">
{
    super.mouseDown (e, x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/BorderTool.java" startline="53" endline="60">
{
    Figure target = drawing ().findFigure (x, y);
    if ((target != null) && (target != target.getDecoratedFigure ())) {
        view ().addToSelection (target);
        reverseAction (target);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/BorderTool.java" startline="56" endline="59">
{
    view ().addToSelection (target);
    reverseAction (target);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/BorderTool.java" startline="67" endline="76">
{
    setUndoActivity (createUndoActivity ());
    List l = CollectionsFactory.current ().createList ();
    l.add (figure);
    l.add (new BorderDecorator (figure));
    getUndoActivity ().setAffectedFigures (new FigureEnumerator (l));
    ((BorderTool.UndoActivity) getUndoActivity ()).replaceAffectedFigures ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/BorderTool.java" startline="82" endline="89">
{
    setUndoActivity (createUndoActivity ());
    List l = CollectionsFactory.current ().createList ();
    l.add (figure);
    l.add (((DecoratorFigure) figure).peelDecoration ());
    getUndoActivity ().setAffectedFigures (new FigureEnumerator (l));
    ((BorderTool.UndoActivity) getUndoActivity ()).replaceAffectedFigures ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/BorderTool.java" startline="95" endline="97">
{
    return new BorderTool.UndoActivity (view ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/BorderTool.java" startline="102" endline="106">
{
    super (newDrawingView);
    setUndoable (true);
    setRedoable (true);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/BorderTool.java" startline="109" endline="116">
{
    if (! super.undo ()) {
        return false;
    }

    getDrawingView ().clearSelection ();
    return replaceAffectedFigures ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/BorderTool.java" startline="111" endline="113">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/BorderTool.java" startline="119" endline="126">
{
    if (! isRedoable ()) {
        return false;
    }

    getDrawingView ().clearSelection ();
    return replaceAffectedFigures ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/BorderTool.java" startline="121" endline="123">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/BorderTool.java" startline="129" endline="150">
{
    FigureEnumeration fe = getAffectedFigures ();
    if (! fe.hasNextFigure ()) {
        return false;
    }

    Figure oldFigure = fe.nextFigure ();
    if (! fe.hasNextFigure ()) {
        return false;
    }

    Figure replaceFigure = fe.nextFigure ();
    replaceFigure = getDrawingView ().drawing ().replace (oldFigure, replaceFigure);
    List l = CollectionsFactory.current ().createList ();
    l.add (replaceFigure);
    l.add (oldFigure);
    setAffectedFigures (new FigureEnumerator (l));
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/BorderTool.java" startline="132" endline="134">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/BorderTool.java" startline="138" endline="140">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ChopEllipseConnector.java" startline="35" endline="36">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ChopEllipseConnector.java" startline="39" endline="41">
{
    super (owner);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ChopEllipseConnector.java" startline="44" endline="48">
{
    Rectangle r = target.displayBox ();
    double angle = Geom.pointToAngle (r, from);
    return Geom.ovalAngleToPoint (r, angle);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ConnectedTextTool.java" startline="33" endline="35">
{
    super (editor, prototype);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ConnectedTextTool.java" startline="42" endline="55">
{
    super.mouseDown (e, x, y);
    if (getTypingTarget () != null) {
        TextHolder textHolder = getTypingTarget ();
        setConnectedFigure (drawing ().findFigureInsideWithout (x, y, textHolder.getRepresentingFigure ()));
        if ((getConnectedFigure () != null) && (textHolder != null) && (getConnectedFigure ().getTextHolder () != textHolder)) {
            textHolder.connect (getConnectedFigure ().getDecoratedFigure ());
            getConnectedFigure ().addDependendFigure (getAddedFigure ());
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ConnectedTextTool.java" startline="46" endline="54">
{
    TextHolder textHolder = getTypingTarget ();
    setConnectedFigure (drawing ().findFigureInsideWithout (x, y, textHolder.getRepresentingFigure ()));
    if ((getConnectedFigure () != null) && (textHolder != null) && (getConnectedFigure ().getTextHolder () != textHolder)) {
        textHolder.connect (getConnectedFigure ().getDecoratedFigure ());
        getConnectedFigure ().addDependendFigure (getAddedFigure ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ConnectedTextTool.java" startline="50" endline="53">
{
    textHolder.connect (getConnectedFigure ().getDecoratedFigure ());
    getConnectedFigure ().addDependendFigure (getAddedFigure ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ConnectedTextTool.java" startline="58" endline="68">
{
    super.endEdit ();
    if ((getUndoActivity () != null) && (getUndoActivity () instanceof ConnectedTextTool.UndoActivity)) {
        ((ConnectedTextTool.UndoActivity) getUndoActivity ()).setConnectedFigure (getConnectedFigure ());
    }
    else if ((getConnectedFigure () != null) && isDeleteTextFigure ()) {
        getConnectedFigure ().removeDependendFigure (getAddedFigure ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ConnectedTextTool.java" startline="61" endline="63">
{
    ((ConnectedTextTool.UndoActivity) getUndoActivity ()).setConnectedFigure (getConnectedFigure ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ConnectedTextTool.java" startline="65" endline="67">
{
    getConnectedFigure ().removeDependendFigure (getAddedFigure ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ConnectedTextTool.java" startline="71" endline="73">
{
    myConnectedFigure = pressedFigure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ConnectedTextTool.java" startline="76" endline="78">
{
    return myConnectedFigure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ConnectedTextTool.java" startline="85" endline="88">
{
    super.activate ();
    setConnectedFigure (null);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ConnectedTextTool.java" startline="91" endline="94">
{
    FigureTransferCommand cmd = new DeleteCommand ("Delete", editor ());
    return new DeleteUndoActivity (cmd, getConnectedFigure ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ConnectedTextTool.java" startline="100" endline="102">
{
    return new ConnectedTextTool.UndoActivity (view (), getTypingTarget ().getText ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ConnectedTextTool.java" startline="109" endline="111">
{
    super (newDrawingView, newOriginalText);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ConnectedTextTool.java" startline="118" endline="145">
{
    if (! super.undo ()) {
        return false;
    }

    FigureEnumeration fe = getAffectedFigures ();
    while (fe.hasNextFigure ()) {
        Figure currentFigure = fe.nextFigure ();
        if (currentFigure.getTextHolder () != null) {
            if (! isValidText (getOriginalText ())) {
                currentFigure.getTextHolder ().disconnect (getConnectedFigure ());
            }
            else if (! isValidText (getBackupText ())) {
                currentFigure.getTextHolder ().connect (getConnectedFigure ());
            }

        }

    }

    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ConnectedTextTool.java" startline="120" endline="122">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ConnectedTextTool.java" startline="126" endline="142">
{
    Figure currentFigure = fe.nextFigure ();
    if (currentFigure.getTextHolder () != null) {
        if (! isValidText (getOriginalText ())) {
            currentFigure.getTextHolder ().disconnect (getConnectedFigure ());
        }
        else if (! isValidText (getBackupText ())) {
            currentFigure.getTextHolder ().connect (getConnectedFigure ());
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ConnectedTextTool.java" startline="130" endline="141">
{
    if (! isValidText (getOriginalText ())) {
        currentFigure.getTextHolder ().disconnect (getConnectedFigure ());
    }
    else if (! isValidText (getBackupText ())) {
        currentFigure.getTextHolder ().connect (getConnectedFigure ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ConnectedTextTool.java" startline="133" endline="135">
{
    currentFigure.getTextHolder ().disconnect (getConnectedFigure ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ConnectedTextTool.java" startline="138" endline="140">
{
    currentFigure.getTextHolder ().connect (getConnectedFigure ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ConnectedTextTool.java" startline="152" endline="178">
{
    if (! super.redo ()) {
        return false;
    }

    FigureEnumeration fe = getAffectedFigures ();
    while (fe.hasNextFigure ()) {
        Figure currentFigure = fe.nextFigure ();
        if (currentFigure.getTextHolder () != null) {
            if (! isValidText (getBackupText ())) {
                currentFigure.getTextHolder ().disconnect (getConnectedFigure ());
            }
            else if (! isValidText (getOriginalText ())) {
                currentFigure.getTextHolder ().connect (getConnectedFigure ());
            }

        }

    }

    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ConnectedTextTool.java" startline="154" endline="156">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ConnectedTextTool.java" startline="160" endline="175">
{
    Figure currentFigure = fe.nextFigure ();
    if (currentFigure.getTextHolder () != null) {
        if (! isValidText (getBackupText ())) {
            currentFigure.getTextHolder ().disconnect (getConnectedFigure ());
        }
        else if (! isValidText (getOriginalText ())) {
            currentFigure.getTextHolder ().connect (getConnectedFigure ());
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ConnectedTextTool.java" startline="163" endline="174">
{
    if (! isValidText (getBackupText ())) {
        currentFigure.getTextHolder ().disconnect (getConnectedFigure ());
    }
    else if (! isValidText (getOriginalText ())) {
        currentFigure.getTextHolder ().connect (getConnectedFigure ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ConnectedTextTool.java" startline="166" endline="168">
{
    currentFigure.getTextHolder ().disconnect (getConnectedFigure ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ConnectedTextTool.java" startline="171" endline="173">
{
    currentFigure.getTextHolder ().connect (getConnectedFigure ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ConnectedTextTool.java" startline="181" endline="183">
{
    myConnectedFigure = newConnectedFigure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ConnectedTextTool.java" startline="186" endline="188">
{
    return myConnectedFigure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ConnectedTextTool.java" startline="199" endline="202">
{
    super (cmd);
    setConnectedFigure (newConnectedFigure);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ConnectedTextTool.java" startline="205" endline="222">
{
    if (! super.undo ()) {
        return false;
    }

    FigureEnumeration fe = getAffectedFigures ();
    while (fe.hasNextFigure ()) {
        Figure currentFigure = fe.nextFigure ();
        if (currentFigure.getTextHolder () != null) {
            currentFigure.getTextHolder ().connect (getConnectedFigure ().getDecoratedFigure ());
        }

    }

    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ConnectedTextTool.java" startline="207" endline="209">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ConnectedTextTool.java" startline="213" endline="219">
{
    Figure currentFigure = fe.nextFigure ();
    if (currentFigure.getTextHolder () != null) {
        currentFigure.getTextHolder ().connect (getConnectedFigure ().getDecoratedFigure ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ConnectedTextTool.java" startline="216" endline="218">
{
    currentFigure.getTextHolder ().connect (getConnectedFigure ().getDecoratedFigure ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ConnectedTextTool.java" startline="225" endline="242">
{
    if (! super.redo ()) {
        return false;
    }

    FigureEnumeration fe = getAffectedFigures ();
    while (fe.hasNextFigure ()) {
        Figure currentFigure = fe.nextFigure ();
        if (currentFigure.getTextHolder () != null) {
            currentFigure.getTextHolder ().disconnect (getConnectedFigure ().getDecoratedFigure ());
        }

    }

    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ConnectedTextTool.java" startline="227" endline="229">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ConnectedTextTool.java" startline="233" endline="239">
{
    Figure currentFigure = fe.nextFigure ();
    if (currentFigure.getTextHolder () != null) {
        currentFigure.getTextHolder ().disconnect (getConnectedFigure ().getDecoratedFigure ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ConnectedTextTool.java" startline="236" endline="238">
{
    currentFigure.getTextHolder ().disconnect (getConnectedFigure ().getDecoratedFigure ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ConnectedTextTool.java" startline="245" endline="247">
{
    myConnectedFigure = newConnectedFigure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ConnectedTextTool.java" startline="250" endline="252">
{
    return myConnectedFigure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ElbowConnection.java" startline="38" endline="40">
{
    super ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ElbowConnection.java" startline="43" endline="46">
{
    super.updateConnection ();
    updatePoints ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ElbowConnection.java" startline="49" endline="50">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ElbowConnection.java" startline="56" endline="69">
{
    List handles = CollectionsFactory.current ().createList (fPoints.size () * 2);
    handles.add (new ChangeConnectionStartHandle (this));
    for (int i = 1;
    i < fPoints.size () - 1; i ++) {
        handles.add (new NullHandle (this, locator (i)));
    }

    handles.add (new ChangeConnectionEndHandle (this));
    for (int i = 0;
    i < fPoints.size () - 1; i ++) {
        handles.add (new ElbowHandle (this, i));
    }

    return new HandleEnumerator (handles);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ElbowConnection.java" startline="60" endline="62">
{
    handles.add (new NullHandle (this, locator (i)));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ElbowConnection.java" startline="65" endline="67">
{
    handles.add (new ElbowHandle (this, i));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ElbowConnection.java" startline="72" endline="74">
{
    return new ElbowTextLocator ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ElbowConnection.java" startline="77" endline="109">
{
    willChange ();
    Point start = startPoint ();
    Point end = endPoint ();
    fPoints.clear ();
    fPoints.add (start);
    if (start.x == end.x || start.y == end.y) {
        fPoints.add (end);
    }
    else {
        Rectangle r1 = getStartConnector ().owner ().displayBox ();
        Rectangle r2 = getEndConnector ().owner ().displayBox ();
        int dir = Geom.direction (r1.x + r1.width / 2, r1.y + r1.height / 2, r2.x + r2.width / 2, r2.y + r2.height / 2);
        if (dir == Geom.NORTH || dir == Geom.SOUTH) {
            fPoints.add (new Point (start.x, (start.y + end.y) / 2));
            fPoints.add (new Point (end.x, (start.y + end.y) / 2));
        }
        else {
            fPoints.add (new Point ((start.x + end.x) / 2, start.y));
            fPoints.add (new Point ((start.x + end.x) / 2, end.y));
        }

        fPoints.add (end);
    }

    changed ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ElbowConnection.java" startline="85" endline="87">
{
    fPoints.add (end);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ElbowConnection.java" startline="89" endline="107">
{
    Rectangle r1 = getStartConnector ().owner ().displayBox ();
    Rectangle r2 = getEndConnector ().owner ().displayBox ();
    int dir = Geom.direction (r1.x + r1.width / 2, r1.y + r1.height / 2, r2.x + r2.width / 2, r2.y + r2.height / 2);
    if (dir == Geom.NORTH || dir == Geom.SOUTH) {
        fPoints.add (new Point (start.x, (start.y + end.y) / 2));
        fPoints.add (new Point (end.x, (start.y + end.y) / 2));
    }
    else {
        fPoints.add (new Point ((start.x + end.x) / 2, start.y));
        fPoints.add (new Point ((start.x + end.x) / 2, end.y));
    }

    fPoints.add (end);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ElbowConnection.java" startline="97" endline="100">
{
    fPoints.add (new Point (start.x, (start.y + end.y) / 2));
    fPoints.add (new Point (end.x, (start.y + end.y) / 2));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ElbowConnection.java" startline="102" endline="105">
{
    fPoints.add (new Point ((start.x + end.x) / 2, start.y));
    fPoints.add (new Point ((start.x + end.x) / 2, end.y));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ElbowConnection.java" startline="115" endline="118">
{
    Point p = owner.center ();
    return new Point (p.x, p.y - 10);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ElbowHandle.java" startline="31" endline="34">
{
    super (owner);
    fSegment = segment;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ElbowHandle.java" startline="37" endline="40">
{
    fLastX = x;
    fLastY = y;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ElbowHandle.java" startline="43" endline="68">
{
    LineConnection line = ownerConnection ();
    Point p1 = line.pointAt (fSegment);
    Point p2 = line.pointAt (fSegment + 1);
    int ddx = x - fLastX;
    int ddy = y - fLastY;
    Point np1;
    Point np2;
    if (isVertical (p1, p2)) {
        int cx = constrainX (p1.x + ddx);
        np1 = new Point (cx, p1.y);
        np2 = new Point (cx, p2.y);
    }
    else {
        int cy = constrainY (p1.y + ddy);
        np1 = new Point (p1.x, cy);
        np2 = new Point (p2.x, cy);
    }

    line.setPointAt (np1, fSegment);
    line.setPointAt (np2, fSegment + 1);
    fLastX = x;
    fLastY = y;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ElbowHandle.java" startline="53" endline="57">
{
    int cx = constrainX (p1.x + ddx);
    np1 = new Point (cx, p1.y);
    np2 = new Point (cx, p2.y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ElbowHandle.java" startline="59" endline="63">
{
    int cy = constrainY (p1.y + ddy);
    np1 = new Point (p1.x, cy);
    np2 = new Point (p2.x, cy);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ElbowHandle.java" startline="71" endline="73">
{
    return p1.x == p2.x;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ElbowHandle.java" startline="76" endline="82">
{
    LineConnection line = ownerConnection ();
    int segment = Math.min (fSegment, line.pointCount () - 2);
    Point p1 = line.pointAt (segment);
    Point p2 = line.pointAt (segment + 1);
    return new Point ((p1.x + p2.x) / 2, (p1.y + p2.y) / 2);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ElbowHandle.java" startline="85" endline="93">
{
    Rectangle r = displayBox ();
    g.setColor (Color.yellow);
    g.fillOval (r.x, r.y, r.width, r.height);
    g.setColor (Color.black);
    g.drawOval (r.x, r.y, r.width, r.height);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ElbowHandle.java" startline="96" endline="121">
{
    LineConnection line = ownerConnection ();
    Figure startFigure = line.getStartConnector ().owner ();
    Figure endFigure = line.getEndConnector ().owner ();
    Rectangle start = startFigure.displayBox ();
    Rectangle end = endFigure.displayBox ();
    Insets i1 = startFigure.connectionInsets ();
    Insets i2 = endFigure.connectionInsets ();
    int r1x, r1width, r2x, r2width;
    r1x = start.x + i1.left;
    r1width = start.width - i1.left - i1.right - 1;
    r2x = end.x + i2.left;
    r2width = end.width - i2.left - i2.right - 1;
    if (fSegment == 0) {
        x = Geom.range (r1x, r1x + r1width, x);
    }

    if (fSegment == line.pointCount () - 2) {
        x = Geom.range (r2x, r2x + r2width, x);
    }

    return x;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ElbowHandle.java" startline="113" endline="115">
{
    x = Geom.range (r1x, r1x + r1width, x);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ElbowHandle.java" startline="117" endline="119">
{
    x = Geom.range (r2x, r2x + r2width, x);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ElbowHandle.java" startline="124" endline="148">
{
    LineConnection line = ownerConnection ();
    Figure startFigure = line.getStartConnector ().owner ();
    Figure endFigure = line.getEndConnector ().owner ();
    Rectangle start = startFigure.displayBox ();
    Rectangle end = endFigure.displayBox ();
    Insets i1 = startFigure.connectionInsets ();
    Insets i2 = endFigure.connectionInsets ();
    int r1y, r1height, r2y, r2height;
    r1y = start.y + i1.top;
    r1height = start.height - i1.top - i1.bottom - 1;
    r2y = end.y + i2.top;
    r2height = end.height - i2.top - i2.bottom - 1;
    if (fSegment == 0) {
        y = Geom.range (r1y, r1y + r1height, y);
    }

    if (fSegment == line.pointCount () - 2) {
        y = Geom.range (r2y, r2y + r2height, y);
    }

    return y;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ElbowHandle.java" startline="140" endline="142">
{
    y = Geom.range (r1y, r1y + r1height, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ElbowHandle.java" startline="144" endline="146">
{
    y = Geom.range (r2y, r2y + r2height, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ElbowHandle.java" startline="151" endline="153">
{
    return (LineConnection) owner ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/EllipseFigure.java" startline="38" endline="40">
{
    this (new Point (0, 0), new Point (0, 0));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/EllipseFigure.java" startline="43" endline="45">
{
    basicDisplayBox (origin, corner);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/EllipseFigure.java" startline="48" endline="52">
{
    List handles = CollectionsFactory.current ().createList ();
    BoxHandleKit.addHandles (this, handles);
    return new HandleEnumerator (handles);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/EllipseFigure.java" startline="55" endline="58">
{
    fDisplayBox = new Rectangle (origin);
    fDisplayBox.add (corner);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/EllipseFigure.java" startline="61" endline="67">
{
    return new Rectangle (fDisplayBox.x, fDisplayBox.y, fDisplayBox.width, fDisplayBox.height);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/EllipseFigure.java" startline="70" endline="72">
{
    fDisplayBox.translate (x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/EllipseFigure.java" startline="75" endline="78">
{
    Rectangle r = displayBox ();
    g.fillOval (r.x, r.y, r.width - 1, r.height - 1);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/EllipseFigure.java" startline="81" endline="84">
{
    Rectangle r = displayBox ();
    g.drawOval (r.x, r.y, r.width - 1, r.height - 1);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/EllipseFigure.java" startline="87" endline="92">
{
    Rectangle r = fDisplayBox;
    int cx = r.width / 2;
    int cy = r.height / 2;
    return new Insets (cy, cx, cy, cx);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/EllipseFigure.java" startline="95" endline="97">
{
    return new ChopEllipseConnector (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/EllipseFigure.java" startline="100" endline="106">
{
    super.write (dw);
    dw.writeInt (fDisplayBox.x);
    dw.writeInt (fDisplayBox.y);
    dw.writeInt (fDisplayBox.width);
    dw.writeInt (fDisplayBox.height);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/EllipseFigure.java" startline="109" endline="116">
{
    super.read (dr);
    fDisplayBox = new Rectangle (dr.readInt (), dr.readInt (), dr.readInt (), dr.readInt ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/FigureAttributes.java" startline="48" endline="50">
{
    fMap = CollectionsFactory.current ().createMap ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/FigureAttributes.java" startline="57" endline="59">
{
    return fMap.get (attributeConstant);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/FigureAttributes.java" startline="66" endline="75">
{
    if (value != null) {
        fMap.put (attributeConstant, value);
    }
    else {
        fMap.remove (attributeConstant);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/FigureAttributes.java" startline="68" endline="70">
{
    fMap.put (attributeConstant, value);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/FigureAttributes.java" startline="72" endline="74">
{
    fMap.remove (attributeConstant);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/FigureAttributes.java" startline="81" endline="83">
{
    return fMap.containsKey (attributeConstant);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/FigureAttributes.java" startline="89" endline="100">
{
    try {
        FigureAttributes a = (FigureAttributes) super.clone ();
        a.fMap = CollectionsFactory.current ().createMap (fMap);
        return a;
    }
    catch (CloneNotSupportedException e) {
        throw new InternalError ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/FigureAttributes.java" startline="91" endline="95">
{
    FigureAttributes a = (FigureAttributes) super.clone ();
    a.fMap = CollectionsFactory.current ().createMap (fMap);
    return a;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/FigureAttributes.java" startline="97" endline="99">
{
    throw new InternalError ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/FigureAttributes.java" startline="112" endline="159">
{
    String s = dr.readString ();
    if (! s.toLowerCase ().equals ("attributes")) {
        throw new IOException ("Attributes expected");
    }

    fMap = CollectionsFactory.current ().createMap ();
    int size = dr.readInt ();
    for (int i = 0;
    i < size; i ++) {
        String key = dr.readString ();
        String valtype = dr.readString ();
        Object val = null;
        if (valtype.equals ("Color")) {
            val = new Color (dr.readInt (), dr.readInt (), dr.readInt ());
        }
        else if (valtype.equals ("Boolean")) {
            val = new Boolean (dr.readString ());
        }
        else if (valtype.equals ("String")) {
            val = dr.readString ();
        }
        else if (valtype.equals ("Int")) {
            val = new Integer (dr.readInt ());
        }
        else if (valtype.equals ("Storable")) {
            val = dr.readStorable ();
        }
        else if (valtype.equals (Figure.POPUP_MENU)) {
            continue;
        }
        else if (valtype.equals ("UNKNOWN")) {
            continue;
        }

        FigureAttributeConstant attributeConstant = FigureAttributeConstant.getConstant (key);
        set (attributeConstant, val);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/FigureAttributes.java" startline="115" endline="117">
{
    throw new IOException ("Attributes expected");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/FigureAttributes.java" startline="122" endline="158">
{
    String key = dr.readString ();
    String valtype = dr.readString ();
    Object val = null;
    if (valtype.equals ("Color")) {
        val = new Color (dr.readInt (), dr.readInt (), dr.readInt ());
    }
    else if (valtype.equals ("Boolean")) {
        val = new Boolean (dr.readString ());
    }
    else if (valtype.equals ("String")) {
        val = dr.readString ();
    }
    else if (valtype.equals ("Int")) {
        val = new Integer (dr.readInt ());
    }
    else if (valtype.equals ("Storable")) {
        val = dr.readStorable ();
    }
    else if (valtype.equals (Figure.POPUP_MENU)) {
        continue;
    }
    else if (valtype.equals ("UNKNOWN")) {
        continue;
    }

    FigureAttributeConstant attributeConstant = FigureAttributeConstant.getConstant (key);
    set (attributeConstant, val);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/FigureAttributes.java" startline="127" endline="129">
{
    val = new Color (dr.readInt (), dr.readInt (), dr.readInt ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/FigureAttributes.java" startline="131" endline="133">
{
    val = new Boolean (dr.readString ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/FigureAttributes.java" startline="135" endline="137">
{
    val = dr.readString ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/FigureAttributes.java" startline="139" endline="141">
{
    val = new Integer (dr.readInt ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/FigureAttributes.java" startline="143" endline="145">
{
    val = dr.readStorable ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/FigureAttributes.java" startline="147" endline="150">
{
    continue;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/FigureAttributes.java" startline="152" endline="154">
{
    continue;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/FigureAttributes.java" startline="171" endline="225">
{
    dw.writeString ("attributes");
    dw.writeInt (fMap.size ());
    Iterator iter = fMap.keySet ().iterator ();
    while (iter.hasNext ()) {
        FigureAttributeConstant fac = (FigureAttributeConstant) iter.next ();
        String attributeName = fac.getName ();
        Object attributeValue = fMap.get (fac);
        dw.writeString (attributeName);
        if (attributeValue instanceof String) {
            dw.writeString ("String");
            dw.writeString ((String) attributeValue);
        }
        else if (attributeValue instanceof Color) {
            writeColor (dw, "Color", (Color) attributeValue);
        }
        else if (attributeValue instanceof Boolean) {
            dw.writeString ("Boolean");
            if (((Boolean) attributeValue).booleanValue ()) {
                dw.writeString ("TRUE");
            }
            else {
                dw.writeString ("FALSE");
            }

        }
        else if (attributeValue instanceof Integer) {
            dw.writeString ("Int");
            dw.writeInt (((Integer) attributeValue).intValue ());
        }
        else if (attributeValue instanceof Storable) {
            dw.writeString ("Storable");
            dw.writeStorable ((Storable) attributeValue);
        }
        else if (attributeValue instanceof javax.swing.JPopupMenu) {
            dw.writeString (Figure.POPUP_MENU);
        }
        else {
            System.err.println ("Unknown attribute: " + attributeValue);
            dw.writeString ("UNKNOWN");
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/FigureAttributes.java" startline="177" endline="224">
{
    FigureAttributeConstant fac = (FigureAttributeConstant) iter.next ();
    String attributeName = fac.getName ();
    Object attributeValue = fMap.get (fac);
    dw.writeString (attributeName);
    if (attributeValue instanceof String) {
        dw.writeString ("String");
        dw.writeString ((String) attributeValue);
    }
    else if (attributeValue instanceof Color) {
        writeColor (dw, "Color", (Color) attributeValue);
    }
    else if (attributeValue instanceof Boolean) {
        dw.writeString ("Boolean");
        if (((Boolean) attributeValue).booleanValue ()) {
            dw.writeString ("TRUE");
        }
        else {
            dw.writeString ("FALSE");
        }

    }
    else if (attributeValue instanceof Integer) {
        dw.writeString ("Int");
        dw.writeInt (((Integer) attributeValue).intValue ());
    }
    else if (attributeValue instanceof Storable) {
        dw.writeString ("Storable");
        dw.writeStorable ((Storable) attributeValue);
    }
    else if (attributeValue instanceof javax.swing.JPopupMenu) {
        dw.writeString (Figure.POPUP_MENU);
    }
    else {
        System.err.println ("Unknown attribute: " + attributeValue);
        dw.writeString ("UNKNOWN");
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/FigureAttributes.java" startline="185" endline="188">
{
    dw.writeString ("String");
    dw.writeString ((String) attributeValue);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/FigureAttributes.java" startline="190" endline="192">
{
    writeColor (dw, "Color", (Color) attributeValue);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/FigureAttributes.java" startline="194" endline="204">
{
    dw.writeString ("Boolean");
    if (((Boolean) attributeValue).booleanValue ()) {
        dw.writeString ("TRUE");
    }
    else {
        dw.writeString ("FALSE");
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/FigureAttributes.java" startline="197" endline="199">
{
    dw.writeString ("TRUE");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/FigureAttributes.java" startline="201" endline="203">
{
    dw.writeString ("FALSE");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/FigureAttributes.java" startline="206" endline="209">
{
    dw.writeString ("Int");
    dw.writeInt (((Integer) attributeValue).intValue ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/FigureAttributes.java" startline="211" endline="214">
{
    dw.writeString ("Storable");
    dw.writeStorable ((Storable) attributeValue);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/FigureAttributes.java" startline="216" endline="218">
{
    dw.writeString (Figure.POPUP_MENU);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/FigureAttributes.java" startline="220" endline="223">
{
    System.err.println ("Unknown attribute: " + attributeValue);
    dw.writeString ("UNKNOWN");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/FigureAttributes.java" startline="228" endline="236">
{
    if (color != null) {
        dw.writeString (colorName);
        dw.writeInt (color.getRed ());
        dw.writeInt (color.getGreen ());
        dw.writeInt (color.getBlue ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/FigureAttributes.java" startline="230" endline="235">
{
    dw.writeString (colorName);
    dw.writeInt (color.getRed ());
    dw.writeInt (color.getGreen ());
    dw.writeInt (color.getBlue ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/FigureAttributes.java" startline="239" endline="241">
{
    return new Color (dr.readInt (), dr.readInt (), dr.readInt ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/FontSizeHandle.java" startline="29" endline="31">
{
    super (owner, l);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/FontSizeHandle.java" startline="34" endline="37">
{
    setUndoActivity (createUndoActivity (view));
    getUndoActivity ().setAffectedFigures (new SingleFigureEnumerator (owner ()));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/FontSizeHandle.java" startline="40" endline="46">
{
    TextFigure textOwner = (TextFigure) owner ();
    FontSizeHandle.UndoActivity activity = (FontSizeHandle.UndoActivity) getUndoActivity ();
    int newSize = activity.getFont ().getSize () + y - anchorY;
    textOwner.setFont (new Font (activity.getFont ().getName (), activity.getFont ().getStyle (), newSize));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/FontSizeHandle.java" startline="49" endline="61">
{
    TextFigure textOwner = (TextFigure) owner ();
    FontSizeHandle.UndoActivity activity = (FontSizeHandle.UndoActivity) getUndoActivity ();
    if (textOwner.getFont ().getSize () == activity.getOldFontSize ()) {
        setUndoActivity (null);
    }
    else {
        activity.setFont (textOwner.getFont ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/FontSizeHandle.java" startline="54" endline="56">
{
    setUndoActivity (null);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/FontSizeHandle.java" startline="58" endline="60">
{
    activity.setFont (textOwner.getFont ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/FontSizeHandle.java" startline="64" endline="72">
{
    Rectangle r = displayBox ();
    g.setColor (Color.yellow);
    g.fillOval (r.x, r.y, r.width, r.height);
    g.setColor (Color.black);
    g.drawOval (r.x, r.y, r.width, r.height);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/FontSizeHandle.java" startline="78" endline="81">
{
    TextFigure textOwner = (TextFigure) owner ();
    return new FontSizeHandle.UndoActivity (newView, textOwner.getFont ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/FontSizeHandle.java" startline="89" endline="95">
{
    super (newView);
    setFont (newFont);
    setOldFontSize (getFont ().getSize ());
    setUndoable (true);
    setRedoable (true);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/FontSizeHandle.java" startline="98" endline="105">
{
    if (! super.undo ()) {
        return false;
    }

    swapFont ();
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/FontSizeHandle.java" startline="100" endline="102">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/FontSizeHandle.java" startline="108" endline="116">
{
    if (! isRedoable ()) {
        return false;
    }

    swapFont ();
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/FontSizeHandle.java" startline="111" endline="113">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/FontSizeHandle.java" startline="119" endline="126">
{
    setOldFontSize (replaceFontSize ());
    FigureEnumeration fe = getAffectedFigures ();
    while (fe.hasNextFigure ()) {
        ((TextFigure) fe.nextFigure ()).setFont (getFont ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/FontSizeHandle.java" startline="123" endline="125">
{
    ((TextFigure) fe.nextFigure ()).setFont (getFont ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/FontSizeHandle.java" startline="129" endline="133">
{
    int tempFontSize = getFont ().getSize ();
    setFont (new Font (getFont ().getName (), getFont ().getStyle (), getOldFontSize ()));
    return tempFontSize;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/FontSizeHandle.java" startline="135" endline="137">
{
    myFont = newFont;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/FontSizeHandle.java" startline="140" endline="142">
{
    return myFont;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/FontSizeHandle.java" startline="145" endline="147">
{
    myOldFontSize = newOldFontSize;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/FontSizeHandle.java" startline="150" endline="152">
{
    return myOldFontSize;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/GroupCommand.java" startline="36" endline="38">
{
    super (name, newDrawingEditor);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/GroupCommand.java" startline="41" endline="47">
{
    super.execute ();
    setUndoActivity (createUndoActivity ());
    getUndoActivity ().setAffectedFigures (view ().selection ());
    ((GroupCommand.UndoActivity) getUndoActivity ()).groupFigures ();
    view ().checkDamage ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/GroupCommand.java" startline="50" endline="52">
{
    return view ().selectionCount () > 1;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/GroupCommand.java" startline="58" endline="60">
{
    return new GroupCommand.UndoActivity (view ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/GroupCommand.java" startline="65" endline="69">
{
    super (newDrawingView);
    setUndoable (true);
    setRedoable (true);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/GroupCommand.java" startline="72" endline="104">
{
    if (! super.undo ()) {
        return false;
    }

    getDrawingView ().clearSelection ();
    getDrawingView ().drawing ().orphanAll (getAffectedFigures ());
    List affectedFigures = CollectionsFactory.current ().createList ();
    FigureEnumeration fe = getAffectedFigures ();
    while (fe.hasNextFigure ()) {
        Figure currentFigure = fe.nextFigure ();
        getDrawingView ().drawing ().addAll (currentFigure.figures ());
        getDrawingView ().addToSelectionAll (currentFigure.figures ());
        FigureEnumeration groupedFigures = currentFigure.figures ();
        while (groupedFigures.hasNextFigure ()) {
            affectedFigures.add (groupedFigures.nextFigure ());
        }

    }

    setAffectedFigures (new FigureEnumerator (affectedFigures));
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/GroupCommand.java" startline="74" endline="76">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/GroupCommand.java" startline="88" endline="99">
{
    Figure currentFigure = fe.nextFigure ();
    getDrawingView ().drawing ().addAll (currentFigure.figures ());
    getDrawingView ().addToSelectionAll (currentFigure.figures ());
    FigureEnumeration groupedFigures = currentFigure.figures ();
    while (groupedFigures.hasNextFigure ()) {
        affectedFigures.add (groupedFigures.nextFigure ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/GroupCommand.java" startline="96" endline="98">
{
    affectedFigures.add (groupedFigures.nextFigure ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/GroupCommand.java" startline="107" endline="116">
{
    if (isRedoable ()) {
        groupFigures ();
        return true;
    }

    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/GroupCommand.java" startline="110" endline="113">
{
    groupFigures ();
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/GroupCommand.java" startline="119" endline="134">
{
    getDrawingView ().drawing ().orphanAll (getAffectedFigures ());
    getDrawingView ().clearSelection ();
    GroupFigure group = new GroupFigure ();
    group.addAll (getAffectedFigures ());
    Figure figure = getDrawingView ().drawing ().add (group);
    getDrawingView ().addToSelection (figure);
    List affectedFigures = CollectionsFactory.current ().createList ();
    affectedFigures.add (figure);
    setAffectedFigures (new FigureEnumerator (affectedFigures));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/GroupFigure.java" startline="40" endline="42">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/GroupFigure.java" startline="49" endline="58">
{
    FigureEnumeration fe = figures ();
    Rectangle r = fe.nextFigure ().displayBox ();
    while (fe.hasNextFigure ()) {
        r.add (fe.nextFigure ().displayBox ());
    }

    return r;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/GroupFigure.java" startline="54" endline="56">
{
    r.add (fe.nextFigure ().displayBox ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/GroupFigure.java" startline="61" endline="64">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/GroupFigure.java" startline="67" endline="69">
{
    return new FigureEnumerator (fFigures);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/GroupFigure.java" startline="75" endline="82">
{
    List handles = CollectionsFactory.current ().createList ();
    handles.add (new GroupHandle (this, RelativeLocator.northWest ()));
    handles.add (new GroupHandle (this, RelativeLocator.northEast ()));
    handles.add (new GroupHandle (this, RelativeLocator.southWest ()));
    handles.add (new GroupHandle (this, RelativeLocator.southEast ()));
    return new HandleEnumerator (handles);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/GroupFigure.java" startline="88" endline="95">
{
    super.setAttribute (name, value);
    FigureEnumeration fe = figures ();
    while (fe.hasNextFigure ()) {
        fe.nextFigure ().setAttribute (name, value);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/GroupFigure.java" startline="92" endline="94">
{
    fe.nextFigure ().setAttribute (name, value);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/GroupHandle.java" startline="27" endline="29">
{
    super (owner, locator);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/GroupHandle.java" startline="35" endline="43">
{
    Rectangle r = displayBox ();
    g.setColor (Color.black);
    g.drawRect (r.x, r.y, r.width, r.height);
    r.grow (- 1, - 1);
    g.setColor (Color.white);
    g.drawRect (r.x, r.y, r.width, r.height);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ImageFigure.java" startline="44" endline="48">
{
    fFileName = null;
    fImage = null;
    fDisplayBox = null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ImageFigure.java" startline="51" endline="56">
{
    fFileName = fileName;
    fImage = image;
    basicDisplayBox (origin, new Point (origin.x + fImage.getWidth (this), origin.y + fImage.getHeight (this)));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ImageFigure.java" startline="59" endline="62">
{
    fDisplayBox = new Rectangle (origin);
    fDisplayBox.add (corner);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ImageFigure.java" startline="65" endline="69">
{
    List handles = CollectionsFactory.current ().createList ();
    BoxHandleKit.addHandles (this, handles);
    return new HandleEnumerator (handles);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ImageFigure.java" startline="72" endline="78">
{
    return new Rectangle (fDisplayBox.x, fDisplayBox.y, fDisplayBox.width, fDisplayBox.height);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ImageFigure.java" startline="81" endline="83">
{
    fDisplayBox.translate (x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ImageFigure.java" startline="86" endline="99">
{
    if (fImage == null) {
        fImage = Iconkit.instance ().getImage (fFileName);
    }

    if (fImage != null) {
        g.drawImage (fImage, fDisplayBox.x, fDisplayBox.y, fDisplayBox.width, fDisplayBox.height, this);
    }
    else {
        drawGhost (g);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ImageFigure.java" startline="88" endline="90">
{
    fImage = Iconkit.instance ().getImage (fFileName);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ImageFigure.java" startline="92" endline="94">
{
    g.drawImage (fImage, fDisplayBox.x, fDisplayBox.y, fDisplayBox.width, fDisplayBox.height, this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ImageFigure.java" startline="96" endline="98">
{
    drawGhost (g);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ImageFigure.java" startline="102" endline="105">
{
    g.setColor (Color.gray);
    g.fillRect (fDisplayBox.x, fDisplayBox.y, fDisplayBox.width, fDisplayBox.height);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ImageFigure.java" startline="111" endline="121">
{
    if ((flags & (FRAMEBITS | ALLBITS)) != 0) {
        invalidate ();
        if (listener () != null) {
            listener ().figureRequestUpdate (new FigureChangeEvent (this));
        }

    }

    return (flags & (ALLBITS | ABORT)) == 0;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ImageFigure.java" startline="113" endline="119">
{
    invalidate ();
    if (listener () != null) {
        listener ().figureRequestUpdate (new FigureChangeEvent (this));
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ImageFigure.java" startline="116" endline="118">
{
    listener ().figureRequestUpdate (new FigureChangeEvent (this));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ImageFigure.java" startline="129" endline="131">
{
    fImage.flush ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ImageFigure.java" startline="138" endline="145">
{
    super.write (dw);
    dw.writeInt (fDisplayBox.x);
    dw.writeInt (fDisplayBox.y);
    dw.writeInt (fDisplayBox.width);
    dw.writeInt (fDisplayBox.height);
    dw.writeString (fFileName);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ImageFigure.java" startline="153" endline="162">
{
    super.read (dr);
    fDisplayBox = new Rectangle (dr.readInt (), dr.readInt (), dr.readInt (), dr.readInt ());
    fFileName = dr.readString ();
    Iconkit.instance ().registerImage (fFileName);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ImageFigure.java" startline="166" endline="171">
{
    s.defaultReadObject ();
    Iconkit.instance ().registerImage (fFileName);
    fImage = null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/InsertImageCommand.java" startline="37" endline="40">
{
    super (name, newDrawingEditor);
    myImageName = newImageName;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/InsertImageCommand.java" startline="43" endline="48">
{
    super.execute ();
    setUndoActivity (createUndoActivity ());
    ((InsertImageCommand.UndoActivity) getUndoActivity ()).insertImage ();
    view ().checkDamage ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/InsertImageCommand.java" startline="54" endline="56">
{
    return new InsertImageCommand.UndoActivity (view (), myImageName);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/InsertImageCommand.java" startline="73" endline="78">
{
    super (newDrawingView);
    myAffectedImageName = newAffectedImageName;
    setUndoable (true);
    setRedoable (true);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/InsertImageCommand.java" startline="81" endline="83">
{
    myAffectedImageFigure = new WeakReference (newImageFigure);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/InsertImageCommand.java" startline="86" endline="98">
{
    if ((myAffectedImageFigure == null) || (myAffectedImageFigure.get () == null)) {
        Image image = Iconkit.instance ().registerAndLoadImage ((Component) getDrawingView (), myAffectedImageName);
        setImageFigure (new ImageFigure (image, myAffectedImageName, getDrawingView ().lastClick ()));
    }

    return (ImageFigure) myAffectedImageFigure.get ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/InsertImageCommand.java" startline="89" endline="95">
{
    Image image = Iconkit.instance ().registerAndLoadImage ((Component) getDrawingView (), myAffectedImageName);
    setImageFigure (new ImageFigure (image, myAffectedImageName, getDrawingView ().lastClick ()));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/InsertImageCommand.java" startline="101" endline="112">
{
    if (super.undo ()) {
        getDrawingView ().clearSelection ();
        getDrawingView ().drawing ().orphan (getImageFigure ());
        return true;
    }

    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/InsertImageCommand.java" startline="103" endline="109">
{
    getDrawingView ().clearSelection ();
    getDrawingView ().drawing ().orphan (getImageFigure ());
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/InsertImageCommand.java" startline="115" endline="124">
{
    if (isRedoable ()) {
        insertImage ();
        return true;
    }

    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/InsertImageCommand.java" startline="118" endline="121">
{
    insertImage ();
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/InsertImageCommand.java" startline="127" endline="131">
{
    getDrawingView ().add (getImageFigure ());
    getDrawingView ().clearSelection ();
    getDrawingView ().addToSelection (getImageFigure ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="47" endline="51">
{
    super (4);
    setStartDecoration (new ArrowTip ());
    setEndDecoration (new ArrowTip ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="58" endline="60">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="67" endline="75">
{
    for (int i = 1;
    i < fPoints.size () - 1; i ++) {
        pointAt (i).translate (dx, dy);
    }

    updateConnection ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="70" endline="72">
{
    pointAt (i).translate (dx, dy);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="81" endline="88">
{
    setStartConnector (newStartConnector);
    if (newStartConnector != null) {
        startFigure ().addDependendFigure (this);
        startFigure ().addFigureChangeListener (this);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="84" endline="87">
{
    startFigure ().addDependendFigure (this);
    startFigure ().addFigureChangeListener (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="94" endline="102">
{
    setEndConnector (newEndConnector);
    if (newEndConnector != null) {
        endFigure ().addDependendFigure (this);
        endFigure ().addFigureChangeListener (this);
        handleConnect (startFigure (), endFigure ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="97" endline="101">
{
    endFigure ().addDependendFigure (this);
    endFigure ().addFigureChangeListener (this);
    handleConnect (startFigure (), endFigure ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="108" endline="112">
{
    startFigure ().removeFigureChangeListener (this);
    startFigure ().removeDependendFigure (this);
    setStartConnector (null);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="118" endline="123">
{
    handleDisconnect (startFigure (), endFigure ());
    endFigure ().removeFigureChangeListener (this);
    endFigure ().removeDependendFigure (this);
    setEndConnector (null);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="130" endline="133">
{
    return other.getStartConnector () == getStartConnector () && other.getEndConnector () == getEndConnector ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="139" endline="139">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="145" endline="145">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="151" endline="157">
{
    if (getStartConnector () != null) {
        return getStartConnector ().owner ();
    }

    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="153" endline="155">
{
    return getStartConnector ().owner ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="163" endline="169">
{
    if (getEndConnector () != null) {
        return getEndConnector ().owner ();
    }

    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="165" endline="167">
{
    return getEndConnector ().owner ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="172" endline="174">
{
    myStartConnector = newStartConnector;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="180" endline="182">
{
    return myStartConnector;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="185" endline="187">
{
    myEndConnector = newEndConnector;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="193" endline="195">
{
    return myEndConnector;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="201" endline="203">
{
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="209" endline="220">
{
    willChange ();
    if (fPoints.size () == 0) {
        fPoints.add (new Point (x, y));
    }
    else {
        fPoints.set (0, new Point (x, y));
    }

    changed ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="212" endline="214">
{
    fPoints.add (new Point (x, y));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="216" endline="218">
{
    fPoints.set (0, new Point (x, y));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="226" endline="237">
{
    willChange ();
    if (fPoints.size () < 2) {
        fPoints.add (new Point (x, y));
    }
    else {
        fPoints.set (fPoints.size () - 1, new Point (x, y));
    }

    changed ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="229" endline="231">
{
    fPoints.add (new Point (x, y));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="233" endline="235">
{
    fPoints.set (fPoints.size () - 1, new Point (x, y));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="243" endline="246">
{
    Point p = pointAt (0);
    return new Point (p.x, p.y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="252" endline="262">
{
    if (fPoints.size () > 0) {
        Point p = pointAt (fPoints.size () - 1);
        return new Point (p.x, p.y);
    }
    else {
        return null;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="254" endline="257">
{
    Point p = pointAt (fPoints.size () - 1);
    return new Point (p.x, p.y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="259" endline="261">
{
    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="270" endline="279">
{
    List handles = CollectionsFactory.current ().createList (fPoints.size ());
    handles.add (new ChangeConnectionStartHandle (this));
    for (int i = 1;
    i < fPoints.size () - 1; i ++) {
        handles.add (new PolyLineHandle (this, locator (i), i));
    }

    handles.add (new ChangeConnectionEndHandle (this));
    return new HandleEnumerator (handles);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="274" endline="276">
{
    handles.add (new PolyLineHandle (this, locator (i), i));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="285" endline="288">
{
    super.setPointAt (p, i);
    layoutConnection ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="294" endline="297">
{
    super.insertPointAt (p, i);
    layoutConnection ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="303" endline="306">
{
    super.removePointAt (i);
    layoutConnection ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="312" endline="331">
{
    if (getStartConnector () != null) {
        Point start = getStartConnector ().findStart (this);
        if (start != null) {
            startPoint (start.x, start.y);
        }

    }

    if (getEndConnector () != null) {
        Point end = getEndConnector ().findEnd (this);
        if (end != null) {
            endPoint (end.x, end.y);
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="314" endline="321">
{
    Point start = getStartConnector ().findStart (this);
    if (start != null) {
        startPoint (start.x, start.y);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="318" endline="320">
{
    startPoint (start.x, start.y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="323" endline="330">
{
    Point end = getEndConnector ().findEnd (this);
    if (end != null) {
        endPoint (end.x, end.y);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="327" endline="329">
{
    endPoint (end.x, end.y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="338" endline="340">
{
    updateConnection ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="343" endline="345">
{
    updateConnection ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="348" endline="349">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="352" endline="353">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="356" endline="357">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="360" endline="361">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="364" endline="375">
{
    super.release ();
    handleDisconnect (startFigure (), endFigure ());
    if (getStartConnector () != null) {
        startFigure ().removeFigureChangeListener (this);
    }

    if (getEndConnector () != null) {
        endFigure ().removeFigureChangeListener (this);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="368" endline="370">
{
    startFigure ().removeFigureChangeListener (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="372" endline="374">
{
    endFigure ().removeFigureChangeListener (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="378" endline="382">
{
    super.write (dw);
    dw.writeStorable (getStartConnector ());
    dw.writeStorable (getEndConnector ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="385" endline="401">
{
    super.read (dr);
    Connector start = (Connector) dr.readStorable ();
    if (start != null) {
        connectStart (start);
    }

    Connector end = (Connector) dr.readStorable ();
    if (end != null) {
        connectEnd (end);
    }

    if ((start != null) && (end != null)) {
        updateConnection ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="389" endline="391">
{
    connectStart (start);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="394" endline="396">
{
    connectEnd (end);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="398" endline="400">
{
    updateConnection ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="405" endline="417">
{
    s.defaultReadObject ();
    if (getStartConnector () != null) {
        connectStart (getStartConnector ());
    }

    if (getEndConnector () != null) {
        connectEnd (getEndConnector ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="410" endline="412">
{
    connectStart (getStartConnector ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="414" endline="416">
{
    connectEnd (getEndConnector ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineConnection.java" startline="420" endline="422">
{
    visitor.visitFigure (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineFigure.java" startline="34" endline="37">
{
    addPoint (0, 0);
    addPoint (0, 0);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineFigure.java" startline="43" endline="45">
{
    return pointAt (0);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineFigure.java" startline="51" endline="53">
{
    return pointAt (1);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineFigure.java" startline="59" endline="61">
{
    setPointAt (new Point (x, y), 0);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineFigure.java" startline="67" endline="69">
{
    setPointAt (new Point (x, y), 1);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineFigure.java" startline="75" endline="78">
{
    setPointAt (start, 0);
    setPointAt (end, 1);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/LineFigure.java" startline="81" endline="83">
{
    setPoints (origin, corner);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/NullConnector.java" startline="22" endline="24">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/NullConnector.java" startline="27" endline="29">
{
    super (owner);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/NullFigure.java" startline="38" endline="40">
{
    myDisplayBox.translate (dx, dy);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/NullFigure.java" startline="54" endline="57">
{
    myDisplayBox = new Rectangle (origin);
    myDisplayBox.add (corner);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/NullFigure.java" startline="64" endline="66">
{
    return myDisplayBox;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/NullFigure.java" startline="73" endline="75">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/NullFigure.java" startline="86" endline="88">
{
    return HandleEnumerator.getEmptyEnumeration ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/NullFigure.java" startline="94" endline="96">
{
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/NullFigure.java" startline="102" endline="104">
{
    return FigureEnumerator.getEmptyEnumeration ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/NullFigure.java" startline="110" endline="113">
{
    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/NullFigure.java" startline="119" endline="121">
{
    return super.clone ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/NullFigure.java" startline="127" endline="130">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/NullFigure.java" startline="137" endline="139">
{
    return new SingleFigureEnumerator (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/NullFigure.java" startline="147" endline="149">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/NullFigure.java" startline="157" endline="159">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/NullFigure.java" startline="170" endline="173">
{
    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/NullFigure.java" startline="182" endline="185">
{
    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/NullFigure.java" startline="193" endline="195">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/NullFigure.java" startline="201" endline="203">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/NumberTextFigure.java" startline="35" endline="37">
{
    return Math.max (4, getText ().length ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/NumberTextFigure.java" startline="44" endline="55">
{
    int value = 0;
    try {
        value = Integer.parseInt (getText ());
    }
    catch (NumberFormatException e) {
        value = 0;
    }

    return value;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/NumberTextFigure.java" startline="47" endline="49">
{
    value = Integer.parseInt (getText ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/NumberTextFigure.java" startline="51" endline="53">
{
    value = 0;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/NumberTextFigure.java" startline="61" endline="63">
{
    setText (Integer.toString (value));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/NumberTextFigure.java" startline="74" endline="76">
{
    return this;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineConnector.java" startline="36" endline="38">
{
    super ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineConnector.java" startline="44" endline="46">
{
    super (owner);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineConnector.java" startline="49" endline="99">
{
    PolyLineFigure p = (PolyLineFigure) owner ();
    Point ctr = p.center ();
    int cx = - 1;
    int cy = - 1;
    long len = Long.MAX_VALUE;
    for (int i = 0;
    i < p.pointCount () - 1; i ++) {
        Point p1 = p.pointAt (i);
        Point p2 = p.pointAt (i + 1);
        Point chop = Geom.intersect (p1.x, p1.y, p2.x, p2.y, from.x, from.y, ctr.x, ctr.y);
        if (chop != null) {
            long cl = Geom.length2 (chop.x, chop.y, from.x, from.y);
            if (cl < len) {
                len = cl;
                cx = chop.x;
                cy = chop.y;
            }

        }

    }

    {
        for (int i = 0;
        i < p.pointCount (); i ++) {
            Point pp = p.pointAt (i);
            long l = Geom.length2 (pp.x, pp.y, from.x, from.y);
            if (l < len) {
                len = l;
                cx = pp.x;
                cy = pp.y;
            }

        }

    }
    return new Point (cx, cy);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineConnector.java" startline="60" endline="81">
{
    Point p1 = p.pointAt (i);
    Point p2 = p.pointAt (i + 1);
    Point chop = Geom.intersect (p1.x, p1.y, p2.x, p2.y, from.x, from.y, ctr.x, ctr.y);
    if (chop != null) {
        long cl = Geom.length2 (chop.x, chop.y, from.x, from.y);
        if (cl < len) {
            len = cl;
            cx = chop.x;
            cy = chop.y;
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineConnector.java" startline="72" endline="80">
{
    long cl = Geom.length2 (chop.x, chop.y, from.x, from.y);
    if (cl < len) {
        len = cl;
        cx = chop.x;
        cy = chop.y;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineConnector.java" startline="75" endline="79">
{
    len = cl;
    cx = chop.x;
    cy = chop.y;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineConnector.java" startline="84" endline="97">
{
    for (int i = 0;
    i < p.pointCount (); i ++) {
        Point pp = p.pointAt (i);
        long l = Geom.length2 (pp.x, pp.y, from.x, from.y);
        if (l < len) {
            len = l;
            cx = pp.x;
            cy = pp.y;
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineConnector.java" startline="87" endline="96">
{
    Point pp = p.pointAt (i);
    long l = Geom.length2 (pp.x, pp.y, from.x, from.y);
    if (l < len) {
        len = l;
        cx = pp.x;
        cy = pp.y;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineConnector.java" startline="91" endline="95">
{
    len = l;
    cx = pp.x;
    cy = pp.y;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="50" endline="52">
{
    this (4);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="55" endline="57">
{
    fPoints = CollectionsFactory.current ().createList (size);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="60" endline="63">
{
    fPoints = CollectionsFactory.current ().createList ();
    fPoints.add (new Point (x, y));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="66" endline="84">
{
    Iterator iter = points ();
    if (iter.hasNext ()) {
        Rectangle r = new Rectangle ((Point) iter.next ());
        while (iter.hasNext ()) {
            r.add ((Point) iter.next ());
        }

        return r;
    }
    else {
        return new Rectangle ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="69" endline="79">
{
    Rectangle r = new Rectangle ((Point) iter.next ());
    while (iter.hasNext ()) {
        r.add ((Point) iter.next ());
    }

    return r;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="74" endline="76">
{
    r.add ((Point) iter.next ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="81" endline="83">
{
    return new Rectangle ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="87" endline="89">
{
    return (size ().width < 3) && (size ().height < 3);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="92" endline="99">
{
    List handles = CollectionsFactory.current ().createList (fPoints.size ());
    for (int i = 0;
    i < fPoints.size (); i ++) {
        handles.add (new PolyLineHandle (this, locator (i), i));
    }

    return new HandleEnumerator (handles);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="95" endline="97">
{
    handles.add (new PolyLineHandle (this, locator (i), i));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="102" endline="103">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="109" endline="112">
{
    fPoints.add (new Point (x, y));
    changed ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="115" endline="117">
{
    return fPoints.iterator ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="120" endline="122">
{
    return fPoints.size ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="125" endline="131">
{
    Iterator iter = points ();
    while (iter.hasNext ()) {
        ((Point) iter.next ()).translate (dx, dy);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="128" endline="130">
{
    ((Point) iter.next ()).translate (dx, dy);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="137" endline="141">
{
    willChange ();
    fPoints.set (i, p);
    changed ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="147" endline="150">
{
    fPoints.add (i, p);
    changed ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="153" endline="157">
{
    willChange ();
    fPoints.remove (i);
    changed ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="164" endline="171">
{
    int i = findSegment (x, y);
    if (i != - 1) {
        insertPointAt (new Point (x, y), i + 1);
    }

    return i + 1;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="167" endline="169">
{
    insertPointAt (new Point (x, y), i + 1);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="174" endline="176">
{
    return (Point) fPoints.get (i);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="184" endline="195">
{
    for (int i = 1;
    i < fPoints.size () - 1; i ++) {
        Point p = pointAt (i);
        if (Geom.length (x, y, p.x, p.y) < 3) {
            removePointAt (i);
            return true;
        }

    }

    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="186" endline="193">
{
    Point p = pointAt (i);
    if (Geom.length (x, y, p.x, p.y) < 3) {
        removePointAt (i);
        return true;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="189" endline="192">
{
    removePointAt (i);
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="198" endline="200">
{
    return new PolyLineConnector (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="206" endline="208">
{
    fStartDecoration = l;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="214" endline="216">
{
    return fStartDecoration;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="222" endline="224">
{
    fEndDecoration = l;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="230" endline="232">
{
    return fEndDecoration;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="235" endline="245">
{
    g.setColor (getFrameColor ());
    Point p1, p2;
    for (int i = 0;
    i < fPoints.size () - 1; i ++) {
        p1 = pointAt (i);
        p2 = pointAt (i + 1);
        drawLine (g, p1.x, p1.y, p2.x, p2.y);
    }

    decorate (g);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="239" endline="243">
{
    p1 = pointAt (i);
    p2 = pointAt (i + 1);
    drawLine (g, p1.x, p1.y, p2.x, p2.y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="252" endline="254">
{
    g.drawLine (x1, y1, x2, y2);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="257" endline="275">
{
    Rectangle bounds = displayBox ();
    bounds.grow (4, 4);
    if (! bounds.contains (x, y)) {
        return false;
    }

    for (int i = 0;
    i < fPoints.size () - 1; i ++) {
        Point p1 = pointAt (i);
        Point p2 = pointAt (i + 1);
        if (Geom.lineContainsPoint (p1.x, p1.y, p2.x, p2.y, x, y)) {
            return true;
        }

    }

    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="261" endline="263">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="266" endline="273">
{
    Point p1 = pointAt (i);
    Point p2 = pointAt (i + 1);
    if (Geom.lineContainsPoint (p1.x, p1.y, p2.x, p2.y, x, y)) {
        return true;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="270" endline="272">
{
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="283" endline="294">
{
    for (int i = 0;
    i < fPoints.size () - 1; i ++) {
        Point p1 = pointAt (i);
        Point p2 = pointAt (i + 1);
        if (Geom.lineContainsPoint (p1.x, p1.y, p2.x, p2.y, x, y)) {
            return i;
        }

    }

    return - 1;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="285" endline="292">
{
    Point p1 = pointAt (i);
    Point p2 = pointAt (i + 1);
    if (Geom.lineContainsPoint (p1.x, p1.y, p2.x, p2.y, x, y)) {
        return i;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="289" endline="291">
{
    return i;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="297" endline="310">
{
    if (getStartDecoration () != null) {
        Point p1 = pointAt (0);
        Point p2 = pointAt (1);
        getStartDecoration ().draw (g, p1.x, p1.y, p2.x, p2.y);
    }

    if (getEndDecoration () != null) {
        Point p3 = pointAt (fPoints.size () - 2);
        Point p4 = pointAt (fPoints.size () - 1);
        getEndDecoration ().draw (g, p4.x, p4.y, p3.x, p3.y);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="299" endline="303">
{
    Point p1 = pointAt (0);
    Point p2 = pointAt (1);
    getStartDecoration ().draw (g, p1.x, p1.y, p2.x, p2.y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="305" endline="309">
{
    Point p3 = pointAt (fPoints.size () - 2);
    Point p4 = pointAt (fPoints.size () - 1);
    getEndDecoration ().draw (g, p4.x, p4.y, p3.x, p3.y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="320" endline="322">
{
    return getAttribute (FigureAttributeConstant.getConstant (name));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="330" endline="349">
{
    if (attributeConstant.equals (FigureAttributeConstant.FRAME_COLOR)) {
        return getFrameColor ();
    }
    else if (attributeConstant.equals (FigureAttributeConstant.ARROW_MODE)) {
        int value = 0;
        if (getStartDecoration () != null) {
            value |= ARROW_TIP_START;
        }

        if (getEndDecoration () != null) {
            value |= ARROW_TIP_END;
        }

        return new Integer (value);
    }

    return super.getAttribute (attributeConstant);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="332" endline="334">
{
    return getFrameColor ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="336" endline="347">
{
    int value = 0;
    if (getStartDecoration () != null) {
        value |= ARROW_TIP_START;
    }

    if (getEndDecoration () != null) {
        value |= ARROW_TIP_END;
    }

    return new Integer (value);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="339" endline="341">
{
    value |= ARROW_TIP_START;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="343" endline="345">
{
    value |= ARROW_TIP_END;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="359" endline="361">
{
    setAttribute (FigureAttributeConstant.getConstant (name), value);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="369" endline="404">
{
    if (attributeConstant.equals (FigureAttributeConstant.FRAME_COLOR)) {
        setFrameColor ((Color) value);
        changed ();
    }
    else if (attributeConstant.equals (FigureAttributeConstant.ARROW_MODE)) {
        Integer intObj = (Integer) value;
        if (intObj != null) {
            int decoration = intObj.intValue ();
            if ((decoration & ARROW_TIP_START) != 0) {
                setStartDecoration (new ArrowTip ());
            }
            else {
                setStartDecoration (null);
            }

            if ((decoration & ARROW_TIP_END) != 0) {
                setEndDecoration (new ArrowTip ());
            }
            else {
                setEndDecoration (null);
            }

        }

        changed ();
    }
    else {
        super.setAttribute (attributeConstant, value);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="371" endline="374">
{
    setFrameColor ((Color) value);
    changed ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="376" endline="399">
{
    Integer intObj = (Integer) value;
    if (intObj != null) {
        int decoration = intObj.intValue ();
        if ((decoration & ARROW_TIP_START) != 0) {
            setStartDecoration (new ArrowTip ());
        }
        else {
            setStartDecoration (null);
        }

        if ((decoration & ARROW_TIP_END) != 0) {
            setEndDecoration (new ArrowTip ());
        }
        else {
            setEndDecoration (null);
        }

    }

    changed ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="379" endline="397">
{
    int decoration = intObj.intValue ();
    if ((decoration & ARROW_TIP_START) != 0) {
        setStartDecoration (new ArrowTip ());
    }
    else {
        setStartDecoration (null);
    }

    if ((decoration & ARROW_TIP_END) != 0) {
        setEndDecoration (new ArrowTip ());
    }
    else {
        setEndDecoration (null);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="382" endline="384">
{
    setStartDecoration (new ArrowTip ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="386" endline="388">
{
    setStartDecoration (null);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="390" endline="392">
{
    setEndDecoration (new ArrowTip ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="394" endline="396">
{
    setEndDecoration (null);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="401" endline="403">
{
    super.setAttribute (attributeConstant, value);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="407" endline="420">
{
    super.write (dw);
    dw.writeInt (fPoints.size ());
    Iterator iter = points ();
    while (iter.hasNext ()) {
        Point p = (Point) iter.next ();
        dw.writeInt (p.x);
        dw.writeInt (p.y);
    }

    dw.writeStorable (fStartDecoration);
    dw.writeStorable (fEndDecoration);
    dw.writeColor (fFrameColor);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="412" endline="416">
{
    Point p = (Point) iter.next ();
    dw.writeInt (p.x);
    dw.writeInt (p.y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="423" endline="436">
{
    super.read (dr);
    int size = dr.readInt ();
    fPoints = CollectionsFactory.current ().createList (size);
    for (int i = 0;
    i < size; i ++) {
        int x = dr.readInt ();
        int y = dr.readInt ();
        fPoints.add (new Point (x, y));
    }

    setStartDecoration ((LineDecoration) dr.readStorable ());
    setEndDecoration ((LineDecoration) dr.readStorable ());
    fFrameColor = dr.readColor ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="428" endline="432">
{
    int x = dr.readInt ();
    int y = dr.readInt ();
    fPoints.add (new Point (x, y));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="442" endline="444">
{
    return new PolyLineLocator (pointIndex);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="447" endline="449">
{
    return fFrameColor;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="452" endline="454">
{
    fFrameColor = c;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="460" endline="472">
{
    Rectangle parentR = super.invalidateRectangle (r);
    if (getStartDecoration () != null) {
        parentR.add (getStartDecoration ().displayBox ());
    }

    if (getEndDecoration () != null) {
        parentR.add (getEndDecoration ().displayBox ());
    }

    return parentR;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="464" endline="466">
{
    parentR.add (getStartDecoration ().displayBox ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineFigure.java" startline="468" endline="470">
{
    parentR.add (getEndDecoration ().displayBox ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineHandle.java" startline="38" endline="41">
{
    super (owner, l);
    fIndex = index;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineHandle.java" startline="44" endline="48">
{
    setUndoActivity (createUndoActivity (view, fIndex));
    getUndoActivity ().setAffectedFigures (new SingleFigureEnumerator (owner ()));
    ((PolyLineHandle.UndoActivity) getUndoActivity ()).setOldPoint (new Point (x, y));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineHandle.java" startline="51" endline="54">
{
    int fIndex = ((PolyLineHandle.UndoActivity) getUndoActivity ()).getPointIndex ();
    myOwner ().setPointAt (new Point (x, y), fIndex);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineHandle.java" startline="57" endline="62">
{
    if ((x == anchorX) && (y == anchorY)) {
        setUndoActivity (null);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineHandle.java" startline="59" endline="61">
{
    setUndoActivity (null);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineHandle.java" startline="65" endline="67">
{
    return (PolyLineFigure) owner ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineHandle.java" startline="73" endline="75">
{
    return new PolyLineHandle.UndoActivity (newView, newPointIndex);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineHandle.java" startline="83" endline="88">
{
    super (newView);
    setUndoable (true);
    setRedoable (true);
    setPointIndex (newPointIndex);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineHandle.java" startline="91" endline="98">
{
    if (! super.undo ()) {
        return false;
    }

    return movePointToOldLocation ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineHandle.java" startline="93" endline="95">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineHandle.java" startline="101" endline="109">
{
    if (! isRedoable ()) {
        return false;
    }

    return movePointToOldLocation ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineHandle.java" startline="104" endline="106">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineHandle.java" startline="112" endline="124">
{
    FigureEnumeration fe = getAffectedFigures ();
    if (! fe.hasNextFigure ()) {
        return false;
    }

    PolyLineFigure figure = (PolyLineFigure) fe.nextFigure ();
    Point backupPoint = figure.pointAt (getPointIndex ());
    figure.setPointAt (getOldPoint (), getPointIndex ());
    setOldPoint (backupPoint);
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineHandle.java" startline="115" endline="117">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineHandle.java" startline="127" endline="129">
{
    myOldPoint = newOldPoint;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineHandle.java" startline="132" endline="134">
{
    return myOldPoint;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineHandle.java" startline="137" endline="139">
{
    myPointIndex = newPointIndex;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineHandle.java" startline="142" endline="144">
{
    return myPointIndex;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineLocator.java" startline="31" endline="33">
{
    fIndex = index;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineLocator.java" startline="36" endline="44">
{
    PolyLineFigure plf = (PolyLineFigure) owner;
    if (fIndex < plf.pointCount ()) {
        return ((PolyLineFigure) owner).pointAt (fIndex);
    }

    return new Point (0, 0);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/PolyLineLocator.java" startline="40" endline="42">
{
    return ((PolyLineFigure) owner).pointAt (fIndex);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/RadiusHandle.java" startline="32" endline="34">
{
    super (owner);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/RadiusHandle.java" startline="37" endline="42">
{
    setUndoActivity (createUndoActivity (view));
    getUndoActivity ().setAffectedFigures (new SingleFigureEnumerator (owner ()));
    ((RadiusHandle.UndoActivity) getUndoActivity ()).setOldRadius (((RoundRectangleFigure) owner ()).getArc ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/RadiusHandle.java" startline="45" endline="54">
{
    int dx = x - anchorX;
    int dy = y - anchorY;
    RoundRectangleFigure owner = (RoundRectangleFigure) owner ();
    Rectangle r = owner.displayBox ();
    Point originalRadius = ((RadiusHandle.UndoActivity) getUndoActivity ()).getOldRadius ();
    int rx = Geom.range (0, r.width, 2 * (originalRadius.x / 2 + dx));
    int ry = Geom.range (0, r.height, 2 * (originalRadius.y / 2 + dy));
    owner.setArc (rx, ry);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/RadiusHandle.java" startline="57" endline="65">
{
    Point currentRadius = ((RoundRectangleFigure) owner ()).getArc ();
    Point originalRadius = ((RadiusHandle.UndoActivity) getUndoActivity ()).getOldRadius ();
    if ((currentRadius.x == originalRadius.x) && (currentRadius.y == originalRadius.y)) {
        setUndoActivity (null);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/RadiusHandle.java" startline="62" endline="64">
{
    setUndoActivity (null);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/RadiusHandle.java" startline="68" endline="73">
{
    RoundRectangleFigure owner = (RoundRectangleFigure) owner ();
    Point radius = owner.getArc ();
    Rectangle r = owner.displayBox ();
    return new Point (r.x + radius.x / 2 + OFFSET, r.y + radius.y / 2 + OFFSET);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/RadiusHandle.java" startline="76" endline="84">
{
    Rectangle r = displayBox ();
    g.setColor (Color.yellow);
    g.fillOval (r.x, r.y, r.width, r.height);
    g.setColor (Color.black);
    g.drawOval (r.x, r.y, r.width, r.height);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/RadiusHandle.java" startline="90" endline="92">
{
    return new RadiusHandle.UndoActivity (newView);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/RadiusHandle.java" startline="99" endline="103">
{
    super (newView);
    setUndoable (true);
    setRedoable (true);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/RadiusHandle.java" startline="106" endline="113">
{
    if (! super.undo ()) {
        return false;
    }

    return resetRadius ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/RadiusHandle.java" startline="108" endline="110">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/RadiusHandle.java" startline="116" endline="124">
{
    if (! isRedoable ()) {
        return false;
    }

    return resetRadius ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/RadiusHandle.java" startline="119" endline="121">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/RadiusHandle.java" startline="127" endline="138">
{
    FigureEnumeration fe = getAffectedFigures ();
    if (! fe.hasNextFigure ()) {
        return false;
    }

    RoundRectangleFigure currentFigure = (RoundRectangleFigure) fe.nextFigure ();
    Point figureRadius = currentFigure.getArc ();
    currentFigure.setArc (getOldRadius ().x, getOldRadius ().y);
    setOldRadius (figureRadius);
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/RadiusHandle.java" startline="130" endline="132">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/RadiusHandle.java" startline="141" endline="143">
{
    myOldRadius = newOldRadius;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/RadiusHandle.java" startline="146" endline="148">
{
    return myOldRadius;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/RectangleFigure.java" startline="39" endline="41">
{
    this (new Point (0, 0), new Point (0, 0));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/RectangleFigure.java" startline="44" endline="46">
{
    basicDisplayBox (origin, corner);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/RectangleFigure.java" startline="49" endline="52">
{
    fDisplayBox = new Rectangle (origin);
    fDisplayBox.add (corner);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/RectangleFigure.java" startline="55" endline="59">
{
    List handles = CollectionsFactory.current ().createList ();
    BoxHandleKit.addHandles (this, handles);
    return new HandleEnumerator (handles);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/RectangleFigure.java" startline="62" endline="68">
{
    return new Rectangle (fDisplayBox.x, fDisplayBox.y, fDisplayBox.width, fDisplayBox.height);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/RectangleFigure.java" startline="71" endline="73">
{
    fDisplayBox.translate (x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/RectangleFigure.java" startline="76" endline="79">
{
    Rectangle r = displayBox ();
    g.fillRect (r.x, r.y, r.width, r.height);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/RectangleFigure.java" startline="82" endline="85">
{
    Rectangle r = displayBox ();
    g.drawRect (r.x, r.y, r.width - 1, r.height - 1);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/RectangleFigure.java" startline="90" endline="96">
{
    super.write (dw);
    dw.writeInt (fDisplayBox.x);
    dw.writeInt (fDisplayBox.y);
    dw.writeInt (fDisplayBox.width);
    dw.writeInt (fDisplayBox.height);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/RectangleFigure.java" startline="99" endline="106">
{
    super.read (dr);
    fDisplayBox = new Rectangle (dr.readInt (), dr.readInt (), dr.readInt (), dr.readInt ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/RoundRectangleFigure.java" startline="44" endline="47">
{
    this (new Point (0, 0), new Point (0, 0));
    fArcWidth = fArcHeight = DEFAULT_ARC;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/RoundRectangleFigure.java" startline="50" endline="53">
{
    basicDisplayBox (origin, corner);
    fArcWidth = fArcHeight = DEFAULT_ARC;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/RoundRectangleFigure.java" startline="56" endline="59">
{
    fDisplayBox = new Rectangle (origin);
    fDisplayBox.add (corner);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/RoundRectangleFigure.java" startline="65" endline="70">
{
    willChange ();
    fArcWidth = width;
    fArcHeight = height;
    changed ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/RoundRectangleFigure.java" startline="76" endline="78">
{
    return new Point (fArcWidth, fArcHeight);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/RoundRectangleFigure.java" startline="81" endline="88">
{
    List handles = CollectionsFactory.current ().createList ();
    BoxHandleKit.addHandles (this, handles);
    handles.add (new RadiusHandle (this));
    return new HandleEnumerator (handles);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/RoundRectangleFigure.java" startline="91" endline="97">
{
    return new Rectangle (fDisplayBox.x, fDisplayBox.y, fDisplayBox.width, fDisplayBox.height);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/RoundRectangleFigure.java" startline="100" endline="102">
{
    fDisplayBox.translate (x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/RoundRectangleFigure.java" startline="105" endline="108">
{
    Rectangle r = displayBox ();
    g.fillRoundRect (r.x, r.y, r.width - 1, r.height - 1, fArcWidth, fArcHeight);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/RoundRectangleFigure.java" startline="111" endline="114">
{
    Rectangle r = displayBox ();
    g.drawRoundRect (r.x, r.y, r.width - 1, r.height - 1, fArcWidth, fArcHeight);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/RoundRectangleFigure.java" startline="117" endline="119">
{
    return new Insets (fArcHeight / 2, fArcWidth / 2, fArcHeight / 2, fArcWidth / 2);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/RoundRectangleFigure.java" startline="122" endline="124">
{
    return new ShortestDistanceConnector (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/RoundRectangleFigure.java" startline="127" endline="135">
{
    super.write (dw);
    dw.writeInt (fDisplayBox.x);
    dw.writeInt (fDisplayBox.y);
    dw.writeInt (fDisplayBox.width);
    dw.writeInt (fDisplayBox.height);
    dw.writeInt (fArcWidth);
    dw.writeInt (fArcHeight);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/RoundRectangleFigure.java" startline="138" endline="147">
{
    super.read (dr);
    fDisplayBox = new Rectangle (dr.readInt (), dr.readInt (), dr.readInt (), dr.readInt ());
    fArcWidth = dr.readInt ();
    fArcHeight = dr.readInt ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ScribbleTool.java" startline="39" endline="41">
{
    super (newDrawingEditor);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ScribbleTool.java" startline="44" endline="46">
{
    super.activate ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ScribbleTool.java" startline="49" endline="61">
{
    super.deactivate ();
    if (fScribble != null) {
        if (fScribble.size ().width < 4 || fScribble.size ().height < 4) {
            getActiveDrawing ().remove (fScribble);
            setUndoActivity (null);
        }

        fScribble = null;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ScribbleTool.java" startline="52" endline="60">
{
    if (fScribble.size ().width < 4 || fScribble.size ().height < 4) {
        getActiveDrawing ().remove (fScribble);
        setUndoActivity (null);
    }

    fScribble = null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ScribbleTool.java" startline="54" endline="58">
{
    getActiveDrawing ().remove (fScribble);
    setUndoActivity (null);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ScribbleTool.java" startline="64" endline="77">
{
    if (fScribble == null) {
        fScribble = new PolyLineFigure (x, y);
        setAddedFigure (view ().add (fScribble));
    }
    else if (fLastX != x || fLastY != y) {
        fScribble.addPoint (x, y);
    }

    fLastX = x;
    fLastY = y;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ScribbleTool.java" startline="66" endline="69">
{
    fScribble = new PolyLineFigure (x, y);
    setAddedFigure (view ().add (fScribble));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ScribbleTool.java" startline="71" endline="73">
{
    fScribble.addPoint (x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ScribbleTool.java" startline="80" endline="97">
{
    super.mouseDown (e, x, y);
    if (e.getClickCount () >= 2) {
        setUndoActivity (createUndoActivity ());
        getUndoActivity ().setAffectedFigures (new SingleFigureEnumerator (getAddedFigure ()));
    }
    else {
        point (e.getX (), e.getY ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ScribbleTool.java" startline="83" endline="89">
{
    setUndoActivity (createUndoActivity ());
    getUndoActivity ().setAffectedFigures (new SingleFigureEnumerator (getAddedFigure ()));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ScribbleTool.java" startline="91" endline="96">
{
    point (e.getX (), e.getY ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ScribbleTool.java" startline="100" endline="105">
{
    if (fScribble != null) {
        point (e.getX (), e.getY ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ScribbleTool.java" startline="102" endline="104">
{
    point (e.getX (), e.getY ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ScribbleTool.java" startline="108" endline="115">
{
    super.mouseUp (e, x, y);
    if (e.getClickCount () >= 2) {
        editor ().toolDone ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ScribbleTool.java" startline="112" endline="114">
{
    editor ().toolDone ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ScribbleTool.java" startline="122" endline="124">
{
    return myAddedFigure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ScribbleTool.java" startline="127" endline="129">
{
    myAddedFigure = newAddedFigure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ScribbleTool.java" startline="135" endline="137">
{
    return new PasteCommand.UndoActivity (view ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ShortestDistanceConnector.java" startline="39" endline="41">
{
    super ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ShortestDistanceConnector.java" startline="44" endline="46">
{
    super (owner);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ShortestDistanceConnector.java" startline="49" endline="51">
{
    return findPoint (connection, true);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ShortestDistanceConnector.java" startline="54" endline="56">
{
    return findPoint (connection, false);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ShortestDistanceConnector.java" startline="59" endline="172">
{
    Figure startFigure = connection.getStartConnector ().owner ();
    Figure endFigure = connection.getEndConnector ().owner ();
    Rectangle r1 = startFigure.displayBox ();
    Rectangle r2 = endFigure.displayBox ();
    Insets i1 = startFigure.connectionInsets ();
    Insets i2 = endFigure.connectionInsets ();
    Point p1, p2;
    Point start = null, end = null, s = null, e = null;
    long len2 = Long.MAX_VALUE, l2;
    int x1, x2, y1, y2;
    int xmin, xmax, ymin, ymax;
    int r1x, r1width, r2x, r2width, r1y, r1height, r2y, r2height;
    r1x = r1.x + i1.left;
    r1width = r1.width - i1.left - i1.right - 1;
    r2x = r2.x + i2.left;
    r2width = r2.width - i2.left - i2.right - 1;
    if (r1x + r1width < r2x) {
        x1 = r1x + r1width;
        x2 = r2x;
    }
    else if (r1x > r2x + r2width) {
        x1 = r1x;
        x2 = r2x + r2width;
    }
    else {
        xmax = Math.max (r1x, r2x);
        xmin = Math.min (r1x + r1width, r2x + r2width);
        x1 = x2 = (xmax + xmin) / 2;
    }

    r1y = r1.y + i1.top;
    r1height = r1.height - i1.top - i1.bottom - 1;
    r2y = r2.y + i2.top;
    r2height = r2.height - i2.top - i2.bottom - 1;
    if (r1y + r1height < r2y) {
        y1 = r1y + r1height;
        y2 = r2y;
    }
    else if (r1y > r2y + r2height) {
        y1 = r1y;
        y2 = r2y + r2height;
    }
    else {
        ymax = Math.max (r1y, r2y);
        ymin = Math.min (r1y + r1height, r2y + r2height);
        y1 = y2 = (ymax + ymin) / 2;
    }

    for (int i = 0;
    i < 4; i ++) {
        switch (i) {
            case 0 :
                p1 = Geom.east (r1);
                p2 = Geom.west (r2);
                s = new Point (p1.x, y1);
                e = new Point (p2.x, y2);
                break;
            case 1 :
                p1 = Geom.west (r1);
                p2 = Geom.east (r2);
                s = new Point (p1.x, y1);
                e = new Point (p2.x, y2);
                break;
            case 2 :
                p1 = Geom.north (r1);
                p2 = Geom.south (r2);
                s = new Point (x1, p1.y);
                e = new Point (x2, p2.y);
                break;
            case 3 :
                p1 = Geom.south (r1);
                p2 = Geom.north (r2);
                s = new Point (x1, p1.y);
                e = new Point (x2, p2.y);
                break;
        }
        l2 = Geom.length2 (s.x, s.y, e.x, e.y);
        if (l2 < len2) {
            start = s;
            end = e;
            len2 = l2;
        }

    }

    if (getStart) {
        return start;
    }

    return end;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ShortestDistanceConnector.java" startline="85" endline="88">
{
    x1 = r1x + r1width;
    x2 = r2x;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ShortestDistanceConnector.java" startline="90" endline="93">
{
    x1 = r1x;
    x2 = r2x + r2width;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ShortestDistanceConnector.java" startline="95" endline="99">
{
    xmax = Math.max (r1x, r2x);
    xmin = Math.min (r1x + r1width, r2x + r2width);
    x1 = x2 = (xmax + xmin) / 2;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ShortestDistanceConnector.java" startline="110" endline="113">
{
    y1 = r1y + r1height;
    y2 = r2y;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ShortestDistanceConnector.java" startline="115" endline="118">
{
    y1 = r1y;
    y2 = r2y + r2height;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ShortestDistanceConnector.java" startline="120" endline="124">
{
    ymax = Math.max (r1y, r2y);
    ymin = Math.min (r1y + r1height, r2y + r2height);
    y1 = y2 = (ymax + ymin) / 2;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ShortestDistanceConnector.java" startline="127" endline="166">
{
    switch (i) {
        case 0 :
            p1 = Geom.east (r1);
            p2 = Geom.west (r2);
            s = new Point (p1.x, y1);
            e = new Point (p2.x, y2);
            break;
        case 1 :
            p1 = Geom.west (r1);
            p2 = Geom.east (r2);
            s = new Point (p1.x, y1);
            e = new Point (p2.x, y2);
            break;
        case 2 :
            p1 = Geom.north (r1);
            p2 = Geom.south (r2);
            s = new Point (x1, p1.y);
            e = new Point (x2, p2.y);
            break;
        case 3 :
            p1 = Geom.south (r1);
            p2 = Geom.north (r2);
            s = new Point (x1, p1.y);
            e = new Point (x2, p2.y);
            break;
    }
    l2 = Geom.length2 (s.x, s.y, e.x, e.y);
    if (l2 < len2) {
        start = s;
        end = e;
        len2 = l2;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ShortestDistanceConnector.java" startline="161" endline="165">
{
    start = s;
    end = e;
    len2 = l2;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/ShortestDistanceConnector.java" startline="168" endline="170">
{
    return start;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="60" endline="67">
{
    fOriginX = 0;
    fOriginY = 0;
    fFont = createCurrentFont ();
    setAttribute (FigureAttributeConstant.FILL_COLOR, ColorMap.color ("None"));
    fText = new String ("");
    fSizeIsDirty = true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="70" endline="78">
{
    willChange ();
    basicMoveBy (x, y);
    if (getLocator () != null) {
        getLocator ().moveBy (x, y);
    }

    changed ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="74" endline="76">
{
    getLocator ().moveBy (x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="81" endline="84">
{
    fOriginX += x;
    fOriginY += y;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="87" endline="90">
{
    fOriginX = newOrigin.x;
    fOriginY = newOrigin.y;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="93" endline="96">
{
    Dimension extent = textExtent ();
    return new Rectangle (fOriginX, fOriginY, extent.width, extent.height);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="99" endline="101">
{
    return displayBox ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="107" endline="109">
{
    return fIsReadOnly;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="115" endline="117">
{
    fIsReadOnly = isReadOnly;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="123" endline="125">
{
    return fFont;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="136" endline="138">
{
    return this;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="144" endline="149">
{
    willChange ();
    fFont = newFont;
    markDirty ();
    changed ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="155" endline="158">
{
    super.changed ();
    updateLocation ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="167" endline="169">
{
    return getAttribute (FigureAttributeConstant.getConstant (name));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="176" endline="191">
{
    Font font = getFont ();
    if (attributeConstant.equals (FigureAttributeConstant.FONT_SIZE)) {
        return new Integer (font.getSize ());
    }

    if (attributeConstant.equals (FigureAttributeConstant.FONT_STYLE)) {
        return new Integer (font.getStyle ());
    }

    if (attributeConstant.equals (FigureAttributeConstant.FONT_NAME)) {
        return font.getName ();
    }

    return super.getAttribute (attributeConstant);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="179" endline="181">
{
    return new Integer (font.getSize ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="183" endline="185">
{
    return new Integer (font.getStyle ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="187" endline="189">
{
    return font.getName ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="200" endline="202">
{
    setAttribute (FigureAttributeConstant.getConstant (name), value);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="209" endline="239">
{
    Font font = getFont ();
    if (attributeConstant.equals (FigureAttributeConstant.FONT_SIZE)) {
        Integer s = (Integer) value;
        setFont (new Font (font.getName (), font.getStyle (), s.intValue ()));
    }
    else if (attributeConstant.equals (FigureAttributeConstant.FONT_STYLE)) {
        Integer s = (Integer) value;
        int style = font.getStyle ();
        if (s.intValue () == Font.PLAIN) {
            style = font.PLAIN;
        }
        else {
            style = style ^ s.intValue ();
        }

        setFont (new Font (font.getName (), style, font.getSize ()));
    }
    else if (attributeConstant.equals (FigureAttributeConstant.FONT_NAME)) {
        String n = (String) value;
        setFont (new Font (n, font.getStyle (), font.getSize ()));
    }
    else {
        super.setAttribute (attributeConstant, value);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="212" endline="215">
{
    Integer s = (Integer) value;
    setFont (new Font (font.getName (), font.getStyle (), s.intValue ()));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="217" endline="229">
{
    Integer s = (Integer) value;
    int style = font.getStyle ();
    if (s.intValue () == Font.PLAIN) {
        style = font.PLAIN;
    }
    else {
        style = style ^ s.intValue ();
    }

    setFont (new Font (font.getName (), style, font.getSize ()));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="221" endline="223">
{
    style = font.PLAIN;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="225" endline="227">
{
    style = style ^ s.intValue ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="231" endline="234">
{
    String n = (String) value;
    setFont (new Font (n, font.getStyle (), font.getSize ()));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="236" endline="238">
{
    super.setAttribute (attributeConstant, value);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="245" endline="247">
{
    return fText;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="253" endline="261">
{
    if (! newText.equals (fText)) {
        willChange ();
        fText = new String (newText);
        markDirty ();
        changed ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="255" endline="260">
{
    willChange ();
    fText = new String (newText);
    markDirty ();
    changed ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="267" endline="269">
{
    return ! fIsReadOnly;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="272" endline="275">
{
    Rectangle r = displayBox ();
    g.fillRect (r.x, r.y, r.width, r.height);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="278" endline="283">
{
    g.setFont (fFont);
    g.setColor ((Color) getAttribute (FigureAttributeConstant.TEXT_COLOR));
    FontMetrics metrics = g.getFontMetrics (fFont);
    g.drawString (fText, fOriginX, fOriginY + metrics.getAscent ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="286" endline="296">
{
    if (! fSizeIsDirty) {
        return new Dimension (fWidth, fHeight);
    }

    FontMetrics metrics = Toolkit.getDefaultToolkit ().getFontMetrics (fFont);
    fWidth = metrics.stringWidth (fText);
    fHeight = metrics.getHeight ();
    fSizeIsDirty = false;
    return new Dimension (metrics.stringWidth (fText), metrics.getHeight ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="288" endline="290">
{
    return new Dimension (fWidth, fHeight);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="299" endline="301">
{
    fSizeIsDirty = true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="307" endline="315">
{
    int length = getText ().length ();
    int columns = 20;
    if (length != 0) {
        columns = getText ().length () + 3;
    }

    return columns;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="311" endline="313">
{
    columns = getText ().length () + 3;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="318" endline="325">
{
    List handles = CollectionsFactory.current ().createList ();
    handles.add (new NullHandle (this, RelativeLocator.northWest ()));
    handles.add (new NullHandle (this, RelativeLocator.northEast ()));
    handles.add (new NullHandle (this, RelativeLocator.southEast ()));
    handles.add (new FontSizeHandle (this, RelativeLocator.southWest ()));
    return new HandleEnumerator (handles);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="328" endline="339">
{
    super.write (dw);
    dw.writeInt (fOriginX);
    dw.writeInt (fOriginY);
    dw.writeString (fText);
    dw.writeString (fFont.getName ());
    dw.writeInt (fFont.getStyle ());
    dw.writeInt (fFont.getSize ());
    dw.writeBoolean (fIsReadOnly);
    dw.writeStorable (getObservedFigure ());
    dw.writeStorable (getLocator ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="342" endline="357">
{
    super.read (dr);
    markDirty ();
    fOriginX = dr.readInt ();
    fOriginY = dr.readInt ();
    fText = dr.readString ();
    fFont = new Font (dr.readString (), dr.readInt (), dr.readInt ());
    fIsReadOnly = dr.readBoolean ();
    setObservedFigure ((Figure) dr.readStorable ());
    if (getObservedFigure () != null) {
        getObservedFigure ().addFigureChangeListener (this);
    }

    setLocator ((OffsetLocator) dr.readStorable ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="353" endline="355">
{
    getObservedFigure ().addFigureChangeListener (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="360" endline="368">
{
    s.defaultReadObject ();
    if (getObservedFigure () != null) {
        getObservedFigure ().addFigureChangeListener (this);
    }

    markDirty ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="364" endline="366">
{
    getObservedFigure ().addFigureChangeListener (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="371" endline="381">
{
    if (getObservedFigure () != null) {
        getObservedFigure ().removeFigureChangeListener (this);
    }

    setObservedFigure (figure);
    setLocator (new OffsetLocator (getObservedFigure ().connectedTextLocator (this)));
    getObservedFigure ().addFigureChangeListener (this);
    updateLocation ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="373" endline="375">
{
    getObservedFigure ().removeFigureChangeListener (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="384" endline="386">
{
    updateLocation ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="389" endline="395">
{
    if (listener () != null) {
        Rectangle rect = invalidateRectangle (displayBox ());
        listener ().figureRemoved (new FigureChangeEvent (this, rect, e));
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="391" endline="394">
{
    Rectangle rect = invalidateRectangle (displayBox ());
    listener ().figureRemoved (new FigureChangeEvent (this, rect, e));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="397" endline="397">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="398" endline="398">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="399" endline="399">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="406" endline="420">
{
    if (getLocator () != null) {
        Point p = getLocator ().locate (getObservedFigure ());
        p.x -= size ().width / 2 + fOriginX;
        p.y -= size ().height / 2 + fOriginY;
        if (p.x != 0 || p.y != 0) {
            willChange ();
            basicMoveBy (p.x, p.y);
            changed ();
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="408" endline="419">
{
    Point p = getLocator ().locate (getObservedFigure ());
    p.x -= size ().width / 2 + fOriginX;
    p.y -= size ().height / 2 + fOriginY;
    if (p.x != 0 || p.y != 0) {
        willChange ();
        basicMoveBy (p.x, p.y);
        changed ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="414" endline="418">
{
    willChange ();
    basicMoveBy (p.x, p.y);
    changed ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="423" endline="426">
{
    super.release ();
    disconnect (getObservedFigure ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="432" endline="439">
{
    if (disconnectFigure != null) {
        disconnectFigure.removeFigureChangeListener (this);
    }

    setLocator (null);
    setObservedFigure (null);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="434" endline="436">
{
    disconnectFigure.removeFigureChangeListener (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="442" endline="444">
{
    fObservedFigure = newObservedFigure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="447" endline="449">
{
    return fObservedFigure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="452" endline="454">
{
    fLocator = newLocator;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="457" endline="459">
{
    return fLocator;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="462" endline="464">
{
    return this;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="470" endline="472">
{
    return new Font (fgCurrentFontName, fgCurrentFontStyle, fgCurrentFontSize);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="478" endline="480">
{
    fgCurrentFontName = name;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="486" endline="488">
{
    fgCurrentFontSize = size;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextFigure.java" startline="494" endline="496">
{
    fgCurrentFontStyle = style;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextTool.java" startline="48" endline="50">
{
    super (newDrawingEditor, prototype);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextTool.java" startline="57" endline="88">
{
    setView ((DrawingView) e.getSource ());
    if (getTypingTarget () != null) {
        editor ().toolDone ();
        return;
    }

    TextHolder textHolder = null;
    Figure pressedFigure = drawing ().findFigureInside (x, y);
    if (pressedFigure != null) {
        textHolder = pressedFigure.getTextHolder ();
        setSelectedFigure (pressedFigure);
    }

    if ((textHolder != null) && textHolder.acceptsTyping ()) {
        beginEdit (textHolder);
    }
    else {
        super.mouseDown (e, x, y);
        view ().checkDamage ();
        beginEdit (getCreatedFigure ().getTextHolder ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextTool.java" startline="61" endline="64">
{
    editor ().toolDone ();
    return;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextTool.java" startline="69" endline="72">
{
    textHolder = pressedFigure.getTextHolder ();
    setSelectedFigure (pressedFigure);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextTool.java" startline="75" endline="78">
{
    beginEdit (textHolder);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextTool.java" startline="80" endline="87">
{
    super.mouseDown (e, x, y);
    view ().checkDamage ();
    beginEdit (getCreatedFigure ().getTextHolder ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextTool.java" startline="91" endline="92">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextTool.java" startline="95" endline="100">
{
    if (! isActive ()) {
        editor ().toolDone ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextTool.java" startline="97" endline="99">
{
    editor ().toolDone ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextTool.java" startline="106" endline="109">
{
    endEdit ();
    super.deactivate ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextTool.java" startline="115" endline="119">
{
    super.activate ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextTool.java" startline="128" endline="130">
{
    return (getTypingTarget () != null);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextTool.java" startline="133" endline="148">
{
    if (getFloatingTextField () == null) {
        setFloatingTextField (createFloatingTextField ());
    }

    if (figure != getTypingTarget () && getTypingTarget () != null) {
        endEdit ();
    }

    getFloatingTextField ().createOverlay ((Container) view (), figure.getFont ());
    getFloatingTextField ().setBounds (fieldBounds (figure), figure.getText ());
    setTypingTarget (figure);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextTool.java" startline="135" endline="137">
{
    setFloatingTextField (createFloatingTextField ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextTool.java" startline="140" endline="142">
{
    endEdit ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextTool.java" startline="151" endline="196">
{
    if (getTypingTarget () != null) {
        if (getAddedFigure () != null) {
            if (! isDeleteTextFigure ()) {
                setUndoActivity (createPasteUndoActivity ());
                getUndoActivity ().setAffectedFigures (new SingleFigureEnumerator (getAddedFigure ()));
                getTypingTarget ().setText (getFloatingTextField ().getText ());
            }

        }
        else if (isDeleteTextFigure ()) {
            setUndoActivity (createDeleteUndoActivity ());
            getUndoActivity ().setAffectedFigures (new SingleFigureEnumerator (getSelectedFigure ()));
            getUndoActivity ().redo ();
        }
        else {
            setUndoActivity (createUndoActivity ());
            getUndoActivity ().setAffectedFigures (new SingleFigureEnumerator (getTypingTarget ().getRepresentingFigure ()));
            getTypingTarget ().setText (getFloatingTextField ().getText ());
            ((TextTool.UndoActivity) getUndoActivity ()).setBackupText (getTypingTarget ().getText ());
        }

        setTypingTarget (null);
        getFloatingTextField ().endOverlay ();
    }
    else {
        setUndoActivity (null);
    }

    setAddedFigure (null);
    setCreatedFigure (null);
    setSelectedFigure (null);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextTool.java" startline="153" endline="188">
{
    if (getAddedFigure () != null) {
        if (! isDeleteTextFigure ()) {
            setUndoActivity (createPasteUndoActivity ());
            getUndoActivity ().setAffectedFigures (new SingleFigureEnumerator (getAddedFigure ()));
            getTypingTarget ().setText (getFloatingTextField ().getText ());
        }

    }
    else if (isDeleteTextFigure ()) {
        setUndoActivity (createDeleteUndoActivity ());
        getUndoActivity ().setAffectedFigures (new SingleFigureEnumerator (getSelectedFigure ()));
        getUndoActivity ().redo ();
    }
    else {
        setUndoActivity (createUndoActivity ());
        getUndoActivity ().setAffectedFigures (new SingleFigureEnumerator (getTypingTarget ().getRepresentingFigure ()));
        getTypingTarget ().setText (getFloatingTextField ().getText ());
        ((TextTool.UndoActivity) getUndoActivity ()).setBackupText (getTypingTarget ().getText ());
    }

    setTypingTarget (null);
    getFloatingTextField ().endOverlay ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextTool.java" startline="155" endline="165">
{
    if (! isDeleteTextFigure ()) {
        setUndoActivity (createPasteUndoActivity ());
        getUndoActivity ().setAffectedFigures (new SingleFigureEnumerator (getAddedFigure ()));
        getTypingTarget ().setText (getFloatingTextField ().getText ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextTool.java" startline="157" endline="164">
{
    setUndoActivity (createPasteUndoActivity ());
    getUndoActivity ().setAffectedFigures (new SingleFigureEnumerator (getAddedFigure ()));
    getTypingTarget ().setText (getFloatingTextField ().getText ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextTool.java" startline="167" endline="175">
{
    setUndoActivity (createDeleteUndoActivity ());
    getUndoActivity ().setAffectedFigures (new SingleFigureEnumerator (getSelectedFigure ()));
    getUndoActivity ().redo ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextTool.java" startline="177" endline="184">
{
    setUndoActivity (createUndoActivity ());
    getUndoActivity ().setAffectedFigures (new SingleFigureEnumerator (getTypingTarget ().getRepresentingFigure ()));
    getTypingTarget ().setText (getFloatingTextField ().getText ());
    ((TextTool.UndoActivity) getUndoActivity ()).setBackupText (getTypingTarget ().getText ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextTool.java" startline="190" endline="192">
{
    setUndoActivity (null);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextTool.java" startline="199" endline="201">
{
    return getFloatingTextField ().getText ().length () == 0;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextTool.java" startline="204" endline="209">
{
    Rectangle box = figure.textDisplayBox ();
    int nChars = figure.overlayColumns ();
    Dimension d = getFloatingTextField ().getPreferredSize (nChars);
    return new Rectangle (box.x, box.y, d.width, d.height);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextTool.java" startline="212" endline="214">
{
    myTypingTarget = newTypingTarget;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextTool.java" startline="217" endline="219">
{
    return myTypingTarget;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextTool.java" startline="222" endline="224">
{
    mySelectedFigure = newSelectedFigure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextTool.java" startline="227" endline="229">
{
    return mySelectedFigure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextTool.java" startline="232" endline="234">
{
    return new FloatingTextField ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextTool.java" startline="237" endline="239">
{
    myTextField = newFloatingTextField;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextTool.java" startline="242" endline="244">
{
    return myTextField;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextTool.java" startline="247" endline="250">
{
    FigureTransferCommand cmd = new DeleteCommand ("Delete", editor ());
    return new DeleteCommand.UndoActivity (cmd);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextTool.java" startline="253" endline="255">
{
    return new PasteCommand.UndoActivity (view ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextTool.java" startline="261" endline="263">
{
    return new TextTool.UndoActivity (view (), getTypingTarget ().getText ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextTool.java" startline="271" endline="276">
{
    super (newDrawingView);
    setOriginalText (newOriginalText);
    setUndoable (true);
    setRedoable (true);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextTool.java" startline="283" endline="293">
{
    if (! super.undo ()) {
        return false;
    }

    getDrawingView ().clearSelection ();
    setText (getOriginalText ());
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextTool.java" startline="285" endline="287">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextTool.java" startline="300" endline="310">
{
    if (! super.redo ()) {
        return false;
    }

    getDrawingView ().clearSelection ();
    setText (getBackupText ());
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextTool.java" startline="302" endline="304">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextTool.java" startline="313" endline="315">
{
    return ((toBeChecked != null) && (toBeChecked.length () > 0));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextTool.java" startline="318" endline="328">
{
    FigureEnumeration fe = getAffectedFigures ();
    while (fe.hasNextFigure ()) {
        Figure currentFigure = fe.nextFigure ();
        if (currentFigure.getTextHolder () != null) {
            currentFigure.getTextHolder ().setText (newText);
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextTool.java" startline="321" endline="327">
{
    Figure currentFigure = fe.nextFigure ();
    if (currentFigure.getTextHolder () != null) {
        currentFigure.getTextHolder ().setText (newText);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextTool.java" startline="324" endline="326">
{
    currentFigure.getTextHolder ().setText (newText);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextTool.java" startline="331" endline="333">
{
    myBackupText = newBackupText;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextTool.java" startline="336" endline="338">
{
    return myBackupText;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextTool.java" startline="341" endline="343">
{
    myOriginalText = newOriginalText;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/TextTool.java" startline="346" endline="348">
{
    return myOriginalText;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/UngroupCommand.java" startline="35" endline="37">
{
    super (name, newDrawingEditor);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/UngroupCommand.java" startline="40" endline="49">
{
    super.execute ();
    setUndoActivity (createUndoActivity ());
    getUndoActivity ().setAffectedFigures (view ().selection ());
    view ().clearSelection ();
    ((UngroupCommand.UndoActivity) getUndoActivity ()).ungroupFigures ();
    view ().checkDamage ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/UngroupCommand.java" startline="52" endline="67">
{
    FigureEnumeration fe = view ().selection ();
    while (fe.hasNextFigure ()) {
        Figure currentFigure = fe.nextFigure ();
        currentFigure = currentFigure.getDecoratedFigure ();
        if (! (currentFigure instanceof GroupFigure)) {
            return false;
        }

    }

    return view ().selectionCount () > 0;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/UngroupCommand.java" startline="55" endline="63">
{
    Figure currentFigure = fe.nextFigure ();
    currentFigure = currentFigure.getDecoratedFigure ();
    if (! (currentFigure instanceof GroupFigure)) {
        return false;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/UngroupCommand.java" startline="60" endline="62">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/UngroupCommand.java" startline="73" endline="75">
{
    return new UngroupCommand.UndoActivity (view ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/UngroupCommand.java" startline="80" endline="84">
{
    super (newDrawingView);
    setUndoable (true);
    setRedoable (true);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/UngroupCommand.java" startline="87" endline="106">
{
    if (! super.undo ()) {
        return false;
    }

    getDrawingView ().clearSelection ();
    FigureEnumeration groupFigures = getAffectedFigures ();
    while (groupFigures.hasNextFigure ()) {
        Figure groupFigure = groupFigures.nextFigure ();
        getDrawingView ().drawing ().orphanAll (groupFigure.figures ());
        Figure figure = getDrawingView ().drawing ().add (groupFigure);
        getDrawingView ().addToSelection (figure);
    }

    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/UngroupCommand.java" startline="89" endline="91">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/UngroupCommand.java" startline="96" endline="103">
{
    Figure groupFigure = groupFigures.nextFigure ();
    getDrawingView ().drawing ().orphanAll (groupFigure.figures ());
    Figure figure = getDrawingView ().drawing ().add (groupFigure);
    getDrawingView ().addToSelection (figure);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/UngroupCommand.java" startline="109" endline="119">
{
    if (isRedoable ()) {
        getDrawingView ().drawing ().orphanAll (getAffectedFigures ());
        getDrawingView ().clearSelection ();
        ungroupFigures ();
        return true;
    }

    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/UngroupCommand.java" startline="112" endline="117">
{
    getDrawingView ().drawing ().orphanAll (getAffectedFigures ());
    getDrawingView ().clearSelection ();
    ungroupFigures ();
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/UngroupCommand.java" startline="122" endline="132">
{
    FigureEnumeration fe = getAffectedFigures ();
    while (fe.hasNextFigure ()) {
        Figure selected = fe.nextFigure ();
        Figure group = getDrawingView ().drawing ().orphan (selected);
        getDrawingView ().drawing ().addAll (group.figures ());
        getDrawingView ().addToSelectionAll (group.figures ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/figures/UngroupCommand.java" startline="125" endline="131">
{
    Figure selected = fe.nextFigure ();
    Figure group = getDrawingView ().drawing ().orphan (selected);
    getDrawingView ().drawing ().addAll (group.figures ());
    getDrawingView ().addToSelectionAll (group.figures ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/framework/DrawingChangeEvent.java" startline="31" endline="34">
{
    super (source);
    fRectangle = r;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/framework/DrawingChangeEvent.java" startline="40" endline="42">
{
    return (Drawing) getSource ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/framework/DrawingChangeEvent.java" startline="48" endline="50">
{
    return fRectangle;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/framework/FigureAttributeConstant.java" startline="62" endline="66">
{
    setName (newName);
    setID (newID);
    addConstant (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/framework/FigureAttributeConstant.java" startline="69" endline="71">
{
    this (newName, attributeConstants.length + 1);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/framework/FigureAttributeConstant.java" startline="74" endline="76">
{
    myName = newName;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/framework/FigureAttributeConstant.java" startline="79" endline="81">
{
    return myName;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/framework/FigureAttributeConstant.java" startline="84" endline="86">
{
    myID = newID;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/framework/FigureAttributeConstant.java" startline="89" endline="91">
{
    return myID;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/framework/FigureAttributeConstant.java" startline="94" endline="120">
{
    if (compareObject == null) {
        return false;
    }

    if (! (compareObject instanceof FigureAttributeConstant)) {
        return false;
    }

    FigureAttributeConstant compareAttribute = (FigureAttributeConstant) compareObject;
    if (compareAttribute.getID () != getID ()) {
        return false;
    }

    if ((compareAttribute.getName () == null) && (getName () == null)) {
        return true;
    }

    if ((compareAttribute.getName () != null) && (getName () != null)) {
        return getName ().equals (compareAttribute.getName ());
    }

    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/framework/FigureAttributeConstant.java" startline="96" endline="98">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/framework/FigureAttributeConstant.java" startline="100" endline="102">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/framework/FigureAttributeConstant.java" startline="106" endline="108">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/framework/FigureAttributeConstant.java" startline="111" endline="113">
{
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/framework/FigureAttributeConstant.java" startline="115" endline="117">
{
    return getName ().equals (compareAttribute.getName ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/framework/FigureAttributeConstant.java" startline="123" endline="125">
{
    return getID ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/framework/FigureAttributeConstant.java" startline="132" endline="148">
{
    int idPos = newConstant.getID () - 1;
    if ((idPos < attributeConstants.length) && (attributeConstants [idPos] != null)) {
        throw new JHotDrawRuntimeException ("No unique FigureAttribute ID: " + newConstant.getID ());
    }

    if (idPos >= attributeConstants.length) {
        FigureAttributeConstant [] tempStrs = new FigureAttributeConstant [idPos + 1];
        System.arraycopy (attributeConstants, 0, tempStrs, 0, attributeConstants.length);
        attributeConstants = tempStrs;
    }

    attributeConstants [idPos] = newConstant;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/framework/FigureAttributeConstant.java" startline="137" endline="139">
{
    throw new JHotDrawRuntimeException ("No unique FigureAttribute ID: " + newConstant.getID ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/framework/FigureAttributeConstant.java" startline="142" endline="146">
{
    FigureAttributeConstant [] tempStrs = new FigureAttributeConstant [idPos + 1];
    System.arraycopy (attributeConstants, 0, tempStrs, 0, attributeConstants.length);
    attributeConstants = tempStrs;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/framework/FigureAttributeConstant.java" startline="154" endline="164">
{
    for (int i = 0;
    i < attributeConstants.length; i ++) {
        FigureAttributeConstant currentAttr = getConstant (i);
        if ((currentAttr != null) && (currentAttr.getName () != null) && (currentAttr.getName ().equals (constantName))) {
            return currentAttr;
        }

    }

    return new FigureAttributeConstant (constantName);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/framework/FigureAttributeConstant.java" startline="156" endline="162">
{
    FigureAttributeConstant currentAttr = getConstant (i);
    if ((currentAttr != null) && (currentAttr.getName () != null) && (currentAttr.getName ().equals (constantName))) {
        return currentAttr;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/framework/FigureAttributeConstant.java" startline="159" endline="161">
{
    return currentAttr;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/framework/FigureAttributeConstant.java" startline="167" endline="169">
{
    return attributeConstants [constantId];
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/framework/FigureAttributeConstant.java" startline="171" endline="179">
{
    if (attributeConstants == null) {
        attributeConstants = new FigureAttributeConstant [64];
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/framework/FigureAttributeConstant.java" startline="176" endline="178">
{
    attributeConstants = new FigureAttributeConstant [64];
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/framework/FigureChangeEvent.java" startline="35" endline="38">
{
    super (source);
    fRectangle = r;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/framework/FigureChangeEvent.java" startline="41" endline="44">
{
    super (source);
    fRectangle = fgEmptyRectangle;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/framework/FigureChangeEvent.java" startline="47" endline="50">
{
    this (source, r);
    myNestedEvent = nestedEvent;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/framework/FigureChangeEvent.java" startline="56" endline="58">
{
    return (Figure) getSource ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/framework/FigureChangeEvent.java" startline="64" endline="66">
{
    return fRectangle;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/framework/FigureChangeEvent.java" startline="69" endline="71">
{
    return myNestedEvent;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/framework/JHotDrawException.java" startline="25" endline="27">
{
    super (msg);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/framework/JHotDrawException.java" startline="30" endline="34">
{
    this (nestedException.getLocalizedMessage ());
    setNestedException (nestedException);
    nestedException.fillInStackTrace ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/framework/JHotDrawException.java" startline="37" endline="39">
{
    myNestedException = newNestedException;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/framework/JHotDrawException.java" startline="42" endline="44">
{
    return myNestedException;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/framework/JHotDrawRuntimeException.java" startline="25" endline="27">
{
    super (msg);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/framework/JHotDrawRuntimeException.java" startline="30" endline="34">
{
    this (nestedException.getLocalizedMessage ());
    setNestedException (nestedException);
    nestedException.fillInStackTrace ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/framework/JHotDrawRuntimeException.java" startline="37" endline="39">
{
    myNestedException = newNestedException;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/framework/JHotDrawRuntimeException.java" startline="42" endline="44">
{
    return myNestedException;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/AnimationDecorator.java" startline="35" endline="35">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/AnimationDecorator.java" startline="38" endline="42">
{
    super (figure);
    fXVelocity = 4;
    fYVelocity = 4;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/AnimationDecorator.java" startline="45" endline="48">
{
    fXVelocity = xVelocity;
    fYVelocity = yVelocity;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/AnimationDecorator.java" startline="51" endline="53">
{
    return new Point (fXVelocity, fYVelocity);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/AnimationDecorator.java" startline="56" endline="75">
{
    int xSpeed = fXVelocity;
    int ySpeed = fYVelocity;
    Rectangle box = displayBox ();
    if ((box.x + box.width > 300) && (xSpeed > 0)) xSpeed = - xSpeed;

    if ((box.y + box.height > 300) && (ySpeed > 0)) ySpeed = - ySpeed;

    if ((box.x < 0) && (xSpeed < 0)) xSpeed = - xSpeed;

    if ((box.y < 0) && (ySpeed < 0)) ySpeed = - ySpeed;

    velocity (xSpeed, ySpeed);
    moveBy (xSpeed, ySpeed);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/AnimationDecorator.java" startline="80" endline="82">
{
    super.basicMoveBy (x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/AnimationDecorator.java" startline="85" endline="87">
{
    super.basicDisplayBox (origin, corner);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/AnimationDecorator.java" startline="90" endline="92">
{
    return super.displayBox ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/AnimationDecorator.java" startline="97" endline="101">
{
    super.write (dw);
    dw.writeInt (fXVelocity);
    dw.writeInt (fYVelocity);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/AnimationDecorator.java" startline="104" endline="108">
{
    super.read (dr);
    fXVelocity = dr.readInt ();
    fYVelocity = dr.readInt ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/Animator.java" startline="30" endline="34">
{
    super ("Animator");
    fView = view;
    fAnimatable = animatable;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/Animator.java" startline="37" endline="40">
{
    super.start ();
    fIsRunning = true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/Animator.java" startline="43" endline="45">
{
    fIsRunning = false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/Animator.java" startline="48" endline="68">
{
    while (fIsRunning) {
        long tm = System.currentTimeMillis ();
        fView.freezeView ();
        fAnimatable.animationStep ();
        fView.checkDamage ();
        fView.unfreezeView ();
        try {
            tm += DELAY;
            Thread.sleep (Math.max (0, tm - System.currentTimeMillis ()));
        }
        catch (InterruptedException e) {
            break;
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/Animator.java" startline="50" endline="67">
{
    long tm = System.currentTimeMillis ();
    fView.freezeView ();
    fAnimatable.animationStep ();
    fView.checkDamage ();
    fView.unfreezeView ();
    try {
        tm += DELAY;
        Thread.sleep (Math.max (0, tm - System.currentTimeMillis ()));
    }
    catch (InterruptedException e) {
        break;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/Animator.java" startline="59" endline="62">
{
    tm += DELAY;
    Thread.sleep (Math.max (0, tm - System.currentTimeMillis ()));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/Animator.java" startline="64" endline="66">
{
    break;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/BouncingDrawing.java" startline="30" endline="37">
{
    if (! (figure instanceof AnimationDecorator) && ! (figure instanceof ConnectionFigure)) {
        figure = new AnimationDecorator (figure);
    }

    return super.add (figure);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/BouncingDrawing.java" startline="33" endline="35">
{
    figure = new AnimationDecorator (figure);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/BouncingDrawing.java" startline="40" endline="47">
{
    Figure f = super.remove (figure);
    if (f instanceof AnimationDecorator) {
        return ((AnimationDecorator) f).peelDecoration ();
    }

    return f;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/BouncingDrawing.java" startline="43" endline="45">
{
    return ((AnimationDecorator) f).peelDecoration ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/BouncingDrawing.java" startline="55" endline="62">
{
    if (! (replacement instanceof AnimationDecorator) && ! (replacement instanceof ConnectionFigure)) {
        replacement = new AnimationDecorator (replacement);
    }

    return super.replace (figure, replacement);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/BouncingDrawing.java" startline="58" endline="60">
{
    replacement = new AnimationDecorator (replacement);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/BouncingDrawing.java" startline="65" endline="76">
{
    FigureEnumeration fe = figures ();
    while (fe.hasNextFigure ()) {
        Figure f = fe.nextFigure ();
        if (! (f instanceof ConnectionFigure)) {
            ((AnimationDecorator) f).animationStep ();
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/BouncingDrawing.java" startline="68" endline="75">
{
    Figure f = fe.nextFigure ();
    if (! (f instanceof ConnectionFigure)) {
        ((AnimationDecorator) f).animationStep ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/BouncingDrawing.java" startline="72" endline="74">
{
    ((AnimationDecorator) f).animationStep ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/FollowURLTool.java" startline="28" endline="31">
{
    super (newDrawingEditor);
    fApplet = applet;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/FollowURLTool.java" startline="37" endline="52">
{
    String urlstring = null;
    Figure figure = drawing ().findFigureInside (x, y);
    if (figure != null) {
        urlstring = (String) figure.getAttribute (FigureAttributeConstant.URL);
    }

    if (urlstring != null) {
        fApplet.showStatus (urlstring);
    }
    else {
        fApplet.showStatus ("");
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/FollowURLTool.java" startline="41" endline="43">
{
    urlstring = (String) figure.getAttribute (FigureAttributeConstant.URL);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/FollowURLTool.java" startline="45" endline="47">
{
    fApplet.showStatus (urlstring);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/FollowURLTool.java" startline="49" endline="51">
{
    fApplet.showStatus ("");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/FollowURLTool.java" startline="59" endline="80">
{
    Figure figure = getActiveDrawing ().findFigureInside (x, y);
    if (figure == null) {
        return;
    }

    String urlstring = (String) figure.getAttribute (FigureAttributeConstant.URL);
    if (urlstring == null) {
        return;
    }

    try {
        URL url = new URL (fApplet.getDocumentBase (), urlstring);
        fApplet.getAppletContext ().showDocument (url);
    }
    catch (MalformedURLException exception) {
        fApplet.showStatus (exception.toString ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/FollowURLTool.java" startline="62" endline="64">
{
    return;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/FollowURLTool.java" startline="67" endline="69">
{
    return;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/FollowURLTool.java" startline="72" endline="75">
{
    URL url = new URL (fApplet.getDocumentBase (), urlstring);
    fApplet.getAppletContext ().showDocument (url);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/FollowURLTool.java" startline="77" endline="79">
{
    fApplet.showStatus (exception.toString ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/JavaDrawApp.java" startline="41" endline="43">
{
    super ("JHotDraw");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/JavaDrawApp.java" startline="51" endline="53">
{
    super (title);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/JavaDrawApp.java" startline="62" endline="64">
{
    return new JavaDrawApp ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/JavaDrawApp.java" startline="67" endline="69">
{
    return new ZoomDrawingView (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/JavaDrawApp.java" startline="74" endline="77">
{
    super.destroy ();
    endAnimation ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/JavaDrawApp.java" startline="82" endline="152">
{
    super.createTools (palette);
    Tool tool = new ZoomTool (this);
    palette.add (createToolButton (IMAGES + "ZOOM", "Zoom Tool", tool));
    tool = new UndoableTool (new TextTool (this, new TextFigure ()));
    palette.add (createToolButton (IMAGES + "TEXT", "Text Tool", tool));
    tool = new UndoableTool (new ConnectedTextTool (this, new TextFigure ()));
    palette.add (createToolButton (IMAGES + "ATEXT", "Connected Text Tool", tool));
    tool = new URLTool (this);
    palette.add (createToolButton (IMAGES + "URL", "URL Tool", tool));
    tool = new UndoableTool (new CreationTool (this, new RectangleFigure ()));
    palette.add (createToolButton (IMAGES + "RECT", "Rectangle Tool", tool));
    tool = new UndoableTool (new CreationTool (this, new RoundRectangleFigure ()));
    palette.add (createToolButton (IMAGES + "RRECT", "Round Rectangle Tool", tool));
    tool = new UndoableTool (new CreationTool (this, new EllipseFigure ()));
    palette.add (createToolButton (IMAGES + "ELLIPSE", "Ellipse Tool", tool));
    tool = new UndoableTool (new PolygonTool (this));
    palette.add (createToolButton (IMAGES + "POLYGON", "Polygon Tool", tool));
    tool = new UndoableTool (new CreationTool (this, new TriangleFigure ()));
    palette.add (createToolButton (IMAGES + "TRIANGLE", "Triangle Tool", tool));
    tool = new UndoableTool (new CreationTool (this, new DiamondFigure ()));
    palette.add (createToolButton (IMAGES + "DIAMOND", "Diamond Tool", tool));
    tool = new UndoableTool (new CreationTool (this, new LineFigure ()));
    palette.add (createToolButton (IMAGES + "LINE", "Line Tool", tool));
    tool = new UndoableTool (new ConnectionTool (this, new LineConnection ()));
    palette.add (createToolButton (IMAGES + "CONN", "Connection Tool", tool));
    tool = new UndoableTool (new ConnectionTool (this, new ElbowConnection ()));
    palette.add (createToolButton (IMAGES + "OCONN", "Elbow Connection Tool", tool));
    tool = new UndoableTool (new ScribbleTool (this));
    palette.add (createToolButton (IMAGES + "SCRIBBL", "Scribble Tool", tool));
    tool = new UndoableTool (new BorderTool (this));
    palette.add (createToolButton (IMAGES + "BORDDEC", "Border Tool", tool));
    Component button = new JButton ("Hello World");
    tool = new CreationTool (this, new ComponentFigure (button));
    palette.add (createToolButton (IMAGES + "RECT", "Component Tool", tool));
    tool = new TextAreaTool (this, new TextAreaFigure ());
    palette.add (createToolButton (IMAGES + "TEXTAREA", "TextArea Tool", tool));
    GraphicalCompositeFigure fig = new GraphicalCompositeFigure ();
    fig.setLayouter (new SimpleLayouter (fig));
    tool = new CreationTool (this, fig);
    palette.add (createToolButton (IMAGES + "RECT", "Container Figure Tool", tool));
    tool = new CompositeFigureCreationTool (this, new RectangleFigure ());
    palette.add (createToolButton (IMAGES + "RECT", "Nested Figure Tool", tool));
    tool = new HTMLTextAreaTool (this, new HTMLTextAreaFigure ());
    palette.add (createToolButton (IMAGES + "TEXTAREA", "HTML TextArea Tool", tool));
    LineConnection lineConnection = new LineConnection ();
    lineConnection.setStartDecoration (null);
    tool = new UndoableTool (new SplitConnectionTool (this, lineConnection));
    palette.add (createToolButton (IMAGES + "OCONN", "Split Connection Tool", tool));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/JavaDrawApp.java" startline="155" endline="157">
{
    return new MySelectionTool (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/JavaDrawApp.java" startline="160" endline="165">
{
    super.createMenus (mb);
    addMenuIfPossible (mb, createAnimationMenu ());
    addMenuIfPossible (mb, createImagesMenu ());
    addMenuIfPossible (mb, createWindowMenu ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/JavaDrawApp.java" startline="168" endline="188">
{
    CommandMenu menu = new CommandMenu ("Animation");
    Command cmd = new AbstractCommand ("Start Animation", this) {

        public void execute () {
            startAnimation ();
        }

    }

    ;
    menu.add (cmd);
    cmd = new AbstractCommand ("Stop Animation", this) {

        public void execute () {
            endAnimation ();
        }

    }

    ;
    menu.add (cmd);
    return menu;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/JavaDrawApp.java" startline="173" endline="175">
{
    startAnimation ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/JavaDrawApp.java" startline="182" endline="184">
{
    endAnimation ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/JavaDrawApp.java" startline="191" endline="214">
{
    CommandMenu menu = new CommandMenu ("Window");
    Command cmd = new AbstractCommand ("New View", this) {

        public void execute () {
            newView ();
        }

    }

    ;
    menu.add (cmd);
    cmd = new AbstractCommand ("New Window", this, false) {

        public void execute () {
            newWindow (createDrawing ());
        }

    }

    ;
    menu.add (cmd);
    menu.addSeparator ();
    menu.add (new WindowMenu ("Window List", (MDIDesktopPane) getDesktop (), this));
    return menu;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/JavaDrawApp.java" startline="196" endline="198">
{
    newView ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/JavaDrawApp.java" startline="205" endline="207">
{
    newWindow (createDrawing ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/JavaDrawApp.java" startline="217" endline="238">
{
    CommandMenu menu = new CommandMenu ("Images");
    URL url = getClass ().getResource (fgSampleImagesPath);
    File imagesDirectory = new File (url.getFile ());
    try {
        String [] list = imagesDirectory.list ();
        for (int i = 0;
        i < list.length; i ++) {
            String name = list [i];
            String path = fgSampleImagesResourcePath + name;
            menu.add (new UndoableCommand (new InsertImageCommand (name, path, this)));
        }

    }
    catch (Exception e) {
    }

    return menu;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/JavaDrawApp.java" startline="223" endline="232">
{
    String [] list = imagesDirectory.list ();
    for (int i = 0;
    i < list.length; i ++) {
        String name = list [i];
        String path = fgSampleImagesResourcePath + name;
        menu.add (new UndoableCommand (new InsertImageCommand (name, path, this)));
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/JavaDrawApp.java" startline="226" endline="231">
{
    String name = list [i];
    String path = fgSampleImagesResourcePath + name;
    menu.add (new UndoableCommand (new InsertImageCommand (name, path, this)));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/JavaDrawApp.java" startline="234" endline="236">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/JavaDrawApp.java" startline="241" endline="246">
{
    Drawing dwg = new BouncingDrawing ();
    dwg.setTitle (getDefaultDrawingTitle ());
    return dwg;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/JavaDrawApp.java" startline="251" endline="257">
{
    if (view ().drawing () instanceof Animatable && fAnimator == null) {
        fAnimator = new Animator ((Animatable) view ().drawing (), view ());
        fAnimator.start ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/JavaDrawApp.java" startline="253" endline="256">
{
    fAnimator = new Animator ((Animatable) view ().drawing (), view ());
    fAnimator.start ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/JavaDrawApp.java" startline="260" endline="266">
{
    if (fAnimator != null) {
        fAnimator.end ();
        fAnimator = null;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/JavaDrawApp.java" startline="262" endline="265">
{
    fAnimator.end ();
    fAnimator = null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/JavaDrawApp.java" startline="269" endline="282">
{
    CommandMenu menu = (CommandMenu) super.createDebugMenu ();
    Command cmd = new AbstractCommand ("Clipping Update", this) {

        public void execute () {
            this.view ().setDisplayUpdate (new ClippingUpdateStrategy ());
        }

    }

    ;
    menu.add (cmd);
    return menu;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/JavaDrawApp.java" startline="275" endline="277">
{
    this.view ().setDisplayUpdate (new ClippingUpdateStrategy ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/JavaDrawApp.java" startline="287" endline="290">
{
    JavaDrawApp window = new JavaDrawApp ();
    window.open ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/JavaDrawApplet.java" startline="36" endline="39">
{
    super.destroy ();
    endAnimation ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/JavaDrawApplet.java" startline="44" endline="91">
{
    super.createTools (palette);
    Tool tool = new TextTool (this, new TextFigure ());
    palette.add (createToolButton (IMAGES + "TEXT", "Text Tool", tool));
    tool = new ConnectedTextTool (this, new TextFigure ());
    palette.add (createToolButton (IMAGES + "ATEXT", "Connected Text Tool", tool));
    tool = new URLTool (this);
    palette.add (createToolButton (IMAGES + "URL", "URL Tool", tool));
    tool = new CreationTool (this, new RectangleFigure ());
    palette.add (createToolButton (IMAGES + "RECT", "Rectangle Tool", tool));
    tool = new CreationTool (this, new RoundRectangleFigure ());
    palette.add (createToolButton (IMAGES + "RRECT", "Round Rectangle Tool", tool));
    tool = new CreationTool (this, new EllipseFigure ());
    palette.add (createToolButton (IMAGES + "ELLIPSE", "Ellipse Tool", tool));
    tool = new PolygonTool (this);
    palette.add (createToolButton (IMAGES + "POLYGON", "Polygon Tool", tool));
    tool = new CreationTool (this, new TriangleFigure ());
    palette.add (createToolButton (IMAGES + "TRIANGLE", "Triangle Tool", tool));
    tool = new CreationTool (this, new DiamondFigure ());
    palette.add (createToolButton (IMAGES + "DIAMOND", "Diamond Tool", tool));
    tool = new CreationTool (this, new LineFigure ());
    palette.add (createToolButton (IMAGES + "LINE", "Line Tool", tool));
    tool = new ConnectionTool (this, new LineConnection ());
    palette.add (createToolButton (IMAGES + "CONN", "Connection Tool", tool));
    tool = new ConnectionTool (this, new ElbowConnection ());
    palette.add (createToolButton (IMAGES + "OCONN", "Elbow Connection Tool", tool));
    tool = new ScribbleTool (this);
    palette.add (createToolButton (IMAGES + "SCRIBBL", "Scribble Tool", tool));
    tool = new PolygonTool (this);
    palette.add (createToolButton (IMAGES + "POLYGON", "Polygon Tool", tool));
    tool = new BorderTool (this);
    palette.add (createToolButton (IMAGES + "BORDDEC", "Border Tool", tool));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/JavaDrawApplet.java" startline="94" endline="107">
{
    super.createButtons (panel);
    fAnimationButton = new JButton ("Start Animation");
    fAnimationButton.addActionListener (new ActionListener () {

        public void actionPerformed (ActionEvent event) {
            toggleAnimation ();
        }

    }

    );
    panel.add (fAnimationButton);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/JavaDrawApplet.java" startline="101" endline="103">
{
    toggleAnimation ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/JavaDrawApplet.java" startline="110" endline="112">
{
    return new BouncingDrawing ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/JavaDrawApplet.java" startline="117" endline="124">
{
    if ((drawing () instanceof Animatable) && (fAnimator == null)) {
        fAnimator = new Animator ((Animatable) drawing (), view ());
        fAnimator.start ();
        fAnimationButton.setText ("End Animation");
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/JavaDrawApplet.java" startline="119" endline="123">
{
    fAnimator = new Animator ((Animatable) drawing (), view ());
    fAnimator.start ();
    fAnimationButton.setText ("End Animation");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/JavaDrawApplet.java" startline="127" endline="134">
{
    if (fAnimator != null) {
        fAnimator.end ();
        fAnimator = null;
        fAnimationButton.setText ("Start Animation");
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/JavaDrawApplet.java" startline="129" endline="133">
{
    fAnimator.end ();
    fAnimator = null;
    fAnimationButton.setText ("Start Animation");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/JavaDrawApplet.java" startline="137" endline="142">
{
    if (fAnimator != null) endAnimation ();
    else startAnimation ();

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/JavaDrawViewer.java" startline="35" endline="52">
{
    setUndoManager (new UndoManager ());
    getContentPane ().setLayout (new BorderLayout ());
    fView = new StandardDrawingView (this, 400, 370);
    getContentPane ().add ("Center", fView);
    setTool (new FollowURLTool (this, this));
    String filename = getParameter ("Drawing");
    if (filename != null) {
        loadDrawing (filename);
        fView.setDrawing (fDrawing);
    }
    else {
        showStatus ("Unable to load drawing");
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/JavaDrawViewer.java" startline="44" endline="47">
{
    loadDrawing (filename);
    fView.setDrawing (fDrawing);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/JavaDrawViewer.java" startline="49" endline="51">
{
    showStatus ("Unable to load drawing");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/JavaDrawViewer.java" startline="55" endline="56">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/JavaDrawViewer.java" startline="59" endline="60">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/JavaDrawViewer.java" startline="63" endline="77">
{
    try {
        URL url = new URL (getCodeBase (), filename);
        InputStream stream = url.openStream ();
        StorableInput reader = new StorableInput (stream);
        fDrawing = (Drawing) reader.readStorable ();
    }
    catch (IOException e) {
        fDrawing = createDrawing ();
        System.err.println ("Error when Loading: " + e);
        showStatus ("Error when Loading: " + e);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/JavaDrawViewer.java" startline="65" endline="70">
{
    URL url = new URL (getCodeBase (), filename);
    InputStream stream = url.openStream ();
    StorableInput reader = new StorableInput (stream);
    fDrawing = (Drawing) reader.readStorable ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/JavaDrawViewer.java" startline="72" endline="76">
{
    fDrawing = createDrawing ();
    System.err.println ("Error when Loading: " + e);
    showStatus ("Error when Loading: " + e);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/JavaDrawViewer.java" startline="80" endline="82">
{
    return new StandardDrawing ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/JavaDrawViewer.java" startline="88" endline="90">
{
    return fView;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/JavaDrawViewer.java" startline="93" endline="95">
{
    return new DrawingView [] {view ()};
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/JavaDrawViewer.java" startline="101" endline="103">
{
    return fDrawing;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/JavaDrawViewer.java" startline="109" endline="111">
{
    return fTool;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/JavaDrawViewer.java" startline="117" endline="119">
{
    fTool = newTool;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/JavaDrawViewer.java" startline="124" endline="124">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/JavaDrawViewer.java" startline="129" endline="129">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/JavaDrawViewer.java" startline="132" endline="134">
{
    myUndoManager = newUndoManager;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/JavaDrawViewer.java" startline="137" endline="139">
{
    return myUndoManager;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/MySelectionTool.java" startline="27" endline="29">
{
    super (newDrawingEditor);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/MySelectionTool.java" startline="35" endline="47">
{
    setView ((DrawingView) e.getSource ());
    if (e.getClickCount () == 2) {
        Figure figure = drawing ().findFigure (e.getX (), e.getY ());
        if (figure != null) {
            inspectFigure (figure);
            return;
        }

    }

    super.mouseDown (e, x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/MySelectionTool.java" startline="38" endline="45">
{
    Figure figure = drawing ().findFigure (e.getX (), e.getY ());
    if (figure != null) {
        inspectFigure (figure);
        return;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/MySelectionTool.java" startline="41" endline="44">
{
    inspectFigure (figure);
    return;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/MySelectionTool.java" startline="50" endline="52">
{
    System.out.println ("inspect figure" + f);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/PatternPainter.java" startline="32" endline="34">
{
    fImage = image;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/PatternPainter.java" startline="37" endline="39">
{
    drawPattern (g, fImage, view);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/PatternPainter.java" startline="45" endline="62">
{
    int iwidth = image.getWidth (view);
    int iheight = image.getHeight (view);
    Dimension d = view.getSize ();
    int x = 0;
    int y = 0;
    while (y < d.height) {
        while (x < d.width) {
            g.drawImage (image, x, y, view);
            x += iwidth;
        }

        y += iheight;
        x = 0;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/PatternPainter.java" startline="53" endline="61">
{
    while (x < d.width) {
        g.drawImage (image, x, y, view);
        x += iwidth;
    }

    y += iheight;
    x = 0;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/PatternPainter.java" startline="55" endline="58">
{
    g.drawImage (image, x, y, view);
    x += iwidth;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/URLTool.java" startline="36" endline="38">
{
    super (newDrawingEditor);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/URLTool.java" startline="41" endline="51">
{
    super.mouseDown (e, x, y);
    Figure pressedFigure = drawing ().findFigureInside (x, y);
    if (pressedFigure != null) {
        beginEdit (pressedFigure);
        return;
    }

    endEdit ();
    editor ().toolDone ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/URLTool.java" startline="45" endline="48">
{
    beginEdit (pressedFigure);
    return;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/URLTool.java" startline="54" endline="55">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/URLTool.java" startline="58" endline="61">
{
    super.deactivate ();
    endEdit ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/URLTool.java" startline="64" endline="89">
{
    if (fTextField == null) {
        fTextField = new FloatingTextField ();
        fTextField.addActionListener (new ActionListener () {

            public void actionPerformed (ActionEvent event) {
                endEdit ();
            }

        }

        );
    }

    if ((figure != fURLTarget) && (fURLTarget != null)) {
        endEdit ();
    }

    if (figure != fURLTarget) {
        fTextField.createOverlay ((Container) view ());
        fTextField.setBounds (fieldBounds (figure), getURL (figure));
        fURLTarget = figure;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/URLTool.java" startline="66" endline="77">
{
    fTextField = new FloatingTextField ();
    fTextField.addActionListener (new ActionListener () {

        public void actionPerformed (ActionEvent event) {
            endEdit ();
        }

    }

    );
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/URLTool.java" startline="72" endline="74">
{
    endEdit ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/URLTool.java" startline="80" endline="82">
{
    endEdit ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/URLTool.java" startline="84" endline="88">
{
    fTextField.createOverlay ((Container) view ());
    fTextField.setBounds (fieldBounds (figure), getURL (figure));
    fURLTarget = figure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/URLTool.java" startline="92" endline="99">
{
    if (fURLTarget != null) {
        setURL (fURLTarget, fTextField.getText ());
        fURLTarget = null;
        fTextField.endOverlay ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/URLTool.java" startline="94" endline="98">
{
    setURL (fURLTarget, fTextField.getText ());
    fURLTarget = null;
    fTextField.endOverlay ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/URLTool.java" startline="102" endline="109">
{
    Rectangle box = figure.displayBox ();
    int nChars = Math.max (20, getURL (figure).length ());
    Dimension d = fTextField.getPreferredSize (nChars);
    box.x = Math.max (0, box.x + (box.width - d.width) / 2);
    box.y = Math.max (0, box.y + (box.height - d.height) / 2);
    return new Rectangle (box.x, box.y, d.width, d.height);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/URLTool.java" startline="112" endline="119">
{
    String url = (String) figure.getAttribute (FigureAttributeConstant.URL);
    if (url == null) {
        url = "";
    }

    return url;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/URLTool.java" startline="115" endline="117">
{
    url = "";
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/javadraw/URLTool.java" startline="122" endline="124">
{
    figure.setAttribute (FigureAttributeConstant.URL, url);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/minimap/MiniMapApplication.java" startline="14" endline="16">
{
    return new MiniMapDesktop ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/minimap/MiniMapApplication.java" startline="19" endline="22">
{
    MiniMapApplication window = new MiniMapApplication ();
    window.open ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/minimap/MiniMapDesktop.java" startline="26" endline="33">
{
    Image image = Iconkit.instance ().registerAndLoadImage ((Component) view, imageName);
    view.add (new ImageFigure (image, imageName, new Point (0, 0)));
    view.checkDamage ();
    return super.createRightComponent (view);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/minimap/MiniMapDesktop.java" startline="36" endline="50">
{
    JPanel blankPanel = new JPanel ();
    MiniMapView mmv = new MiniMapView (view, (JScrollPane) getRightComponent ());
    JSplitPane leftSplitPane = new JSplitPane (JSplitPane.VERTICAL_SPLIT, blankPanel, mmv);
    leftSplitPane.setOneTouchExpandable (true);
    leftSplitPane.setDividerLocation (200);
    return leftSplitPane;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/net/NetApp.java" startline="27" endline="29">
{
    super ("Net");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/net/NetApp.java" startline="32" endline="43">
{
    super.createTools (palette);
    Tool tool = new TextTool (this, new NodeFigure ());
    palette.add (createToolButton (IMAGES + "TEXT", "Text Tool", tool));
    tool = new CreationTool (this, new NodeFigure ());
    palette.add (createToolButton (IMAGES + "RECT", "Create Org Unit", tool));
    tool = new ConnectionTool (this, new LineConnection ());
    palette.add (createToolButton (IMAGES + "CONN", "Connection Tool", tool));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/net/NetApp.java" startline="48" endline="51">
{
    DrawApplication window = new NetApp ();
    window.open ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/net/NodeFigure.java" startline="33" endline="36">
{
    initialize ();
    fConnectors = null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/net/NodeFigure.java" startline="39" endline="44">
{
    Rectangle box = super.displayBox ();
    int d = BORDER;
    box.grow (d, d);
    return box;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/net/NodeFigure.java" startline="47" endline="57">
{
    if (fConnectorsVisible) {
        Rectangle r = displayBox ();
        int d = LocatorConnector.SIZE / 2;
        r.grow (d, d);
        return r.contains (x, y);
    }

    return super.containsPoint (x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/net/NodeFigure.java" startline="50" endline="55">
{
    Rectangle r = displayBox ();
    int d = LocatorConnector.SIZE / 2;
    r.grow (d, d);
    return r.contains (x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/net/NodeFigure.java" startline="60" endline="64">
{
    Rectangle r = displayBox ();
    g.setColor (getFrameColor ());
    g.drawRect (r.x, r.y, r.width - 1, r.height - 1);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/net/NodeFigure.java" startline="67" endline="71">
{
    super.draw (g);
    drawBorder (g);
    drawConnectors (g);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/net/NodeFigure.java" startline="74" endline="87">
{
    ConnectionFigure prototype = new LineConnection ();
    List handles = CollectionsFactory.current ().createList ();
    handles.add (new ConnectionHandle (this, RelativeLocator.east (), prototype));
    handles.add (new ConnectionHandle (this, RelativeLocator.west (), prototype));
    handles.add (new ConnectionHandle (this, RelativeLocator.south (), prototype));
    handles.add (new ConnectionHandle (this, RelativeLocator.north (), prototype));
    handles.add (new NullHandle (this, RelativeLocator.southEast ()));
    handles.add (new NullHandle (this, RelativeLocator.southWest ()));
    handles.add (new NullHandle (this, RelativeLocator.northEast ()));
    handles.add (new NullHandle (this, RelativeLocator.northWest ()));
    return new HandleEnumerator (handles);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/net/NodeFigure.java" startline="90" endline="99">
{
    if (fConnectorsVisible) {
        Iterator iter = connectors ();
        while (iter.hasNext ()) {
            ((Connector) iter.next ()).draw (g);
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/net/NodeFigure.java" startline="92" endline="98">
{
    Iterator iter = connectors ();
    while (iter.hasNext ()) {
        ((Connector) iter.next ()).draw (g);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/net/NodeFigure.java" startline="95" endline="97">
{
    ((Connector) iter.next ()).draw (g);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/net/NodeFigure.java" startline="104" endline="107">
{
    fConnectorsVisible = isVisible;
    invalidate ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/net/NodeFigure.java" startline="112" endline="114">
{
    return findConnector (x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/net/NodeFigure.java" startline="119" endline="125">
{
    if (fConnectors == null) {
        createConnectors ();
    }

    return fConnectors.iterator ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/net/NodeFigure.java" startline="121" endline="123">
{
    createConnectors ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/net/NodeFigure.java" startline="128" endline="134">
{
    fConnectors = CollectionsFactory.current ().createList (4);
    fConnectors.add (new LocatorConnector (this, RelativeLocator.north ()));
    fConnectors.add (new LocatorConnector (this, RelativeLocator.south ()));
    fConnectors.add (new LocatorConnector (this, RelativeLocator.west ()));
    fConnectors.add (new LocatorConnector (this, RelativeLocator.east ()));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/net/NodeFigure.java" startline="137" endline="154">
{
    long min = Long.MAX_VALUE;
    Connector closest = null;
    Iterator iter = connectors ();
    while (iter.hasNext ()) {
        Connector c = (Connector) iter.next ();
        Point p2 = Geom.center (c.displayBox ());
        long d = Geom.length2 (x, y, p2.x, p2.y);
        if (d < min) {
            min = d;
            closest = c;
        }

    }

    return closest;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/net/NodeFigure.java" startline="143" endline="152">
{
    Connector c = (Connector) iter.next ();
    Point p2 = Geom.center (c.displayBox ());
    long d = Geom.length2 (x, y, p2.x, p2.y);
    if (d < min) {
        min = d;
        closest = c;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/net/NodeFigure.java" startline="148" endline="151">
{
    min = d;
    closest = c;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/net/NodeFigure.java" startline="157" endline="162">
{
    setText ("node");
    Font fb = new Font ("Helvetica", Font.BOLD, 12);
    setFont (fb);
    createConnectors ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/net/NodeFigure.java" startline="173" endline="175">
{
    return this;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/nothing/NothingApp.java" startline="35" endline="37">
{
    super ("Nothing");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/nothing/NothingApp.java" startline="40" endline="66">
{
    super.createTools (palette);
    Tool tool = new TextTool (this, new TextFigure ());
    palette.add (createToolButton (IMAGES + "TEXT", "Text Tool", tool));
    tool = new CreationTool (this, new RectangleFigure ());
    palette.add (createToolButton (IMAGES + "RECT", "Rectangle Tool", tool));
    tool = new CreationTool (this, new RoundRectangleFigure ());
    palette.add (createToolButton (IMAGES + "RRECT", "Round Rectangle Tool", tool));
    tool = new CreationTool (this, new EllipseFigure ());
    palette.add (createToolButton (IMAGES + "ELLIPSE", "Ellipse Tool", tool));
    tool = new CreationTool (this, new LineFigure ());
    palette.add (createToolButton (IMAGES + "LINE", "Line Tool", tool));
    tool = new PolygonTool (this);
    palette.add (createToolButton (IMAGES + "POLYGON", "Polygon Tool", tool));
    tool = new ConnectionTool (this, new LineConnection ());
    palette.add (createToolButton (IMAGES + "CONN", "Connection Tool", tool));
    tool = new ConnectionTool (this, new ElbowConnection ());
    palette.add (createToolButton (IMAGES + "OCONN", "Elbow Connection Tool", tool));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/nothing/NothingApp.java" startline="71" endline="74">
{
    DrawApplication window = new NothingApp ();
    window.open ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/nothing/NothingApplet.java" startline="30" endline="56">
{
    super.createTools (palette);
    Tool tool = new TextTool (this, new TextFigure ());
    palette.add (createToolButton (IMAGES + "TEXT", "Text Tool", tool));
    tool = new CreationTool (this, new RectangleFigure ());
    palette.add (createToolButton (IMAGES + "RECT", "Rectangle Tool", tool));
    tool = new CreationTool (this, new RoundRectangleFigure ());
    palette.add (createToolButton (IMAGES + "RRECT", "Round Rectangle Tool", tool));
    tool = new CreationTool (this, new EllipseFigure ());
    palette.add (createToolButton (IMAGES + "ELLIPSE", "Ellipse Tool", tool));
    tool = new CreationTool (this, new LineFigure ());
    palette.add (createToolButton (IMAGES + "LINE", "Line Tool", tool));
    tool = new PolygonTool (this);
    palette.add (createToolButton (IMAGES + "POLYGON", "Polygon Tool", tool));
    tool = new ConnectionTool (this, new LineConnection ());
    palette.add (createToolButton (IMAGES + "CONN", "Connection Tool", tool));
    tool = new ConnectionTool (this, new ElbowConnection ());
    palette.add (createToolButton (IMAGES + "OCONN", "Elbow Connection Tool", tool));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertApplet.java" startline="29" endline="43">
{
    super.createTools (palette);
    Tool tool = new TextTool (this, new TextFigure ());
    palette.add (createToolButton (IMAGES + "TEXT", "Text Tool", tool));
    tool = new PertFigureCreationTool (this);
    palette.add (createToolButton (PERTIMAGES + "PERT", "Task Tool", tool));
    tool = new ConnectionTool (this, new PertDependency ());
    palette.add (createToolButton (IMAGES + "CONN", "Dependency Tool", tool));
    tool = new CreationTool (this, new LineFigure ());
    palette.add (createToolButton (IMAGES + "LINE", "Line Tool", tool));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertApplication.java" startline="29" endline="31">
{
    super ("PERT Editor");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertApplication.java" startline="34" endline="52">
{
    super.createTools (palette);
    Tool tool = new TextTool (this, new TextFigure ());
    palette.add (createToolButton (IMAGES + "TEXT", "Text Tool", tool));
    tool = new PertFigureCreationTool (this);
    palette.add (createToolButton (PERTIMAGES + "PERT", "Task Tool", tool));
    tool = new ConnectionTool (this, new PertDependency ());
    palette.add (createToolButton (IMAGES + "CONN", "Dependency Tool", tool));
    tool = new CreationTool (this, new LineFigure ());
    palette.add (createToolButton (IMAGES + "Line", "Line Tool", tool));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertApplication.java" startline="57" endline="60">
{
    PertApplication pert = new PertApplication ();
    pert.open ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertDependency.java" startline="35" endline="38">
{
    setEndDecoration (new ArrowTip ());
    setStartDecoration (null);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertDependency.java" startline="41" endline="54">
{
    PertFigure source = (PertFigure) start;
    PertFigure target = (PertFigure) end;
    if (source.hasCycle (target)) {
        setAttribute (FigureAttributeConstant.FRAME_COLOR.getName (), Color.red);
    }
    else {
        target.addPreTask (source);
        source.addPostTask (target);
        source.notifyPostTasks ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertDependency.java" startline="45" endline="47">
{
    setAttribute (FigureAttributeConstant.FRAME_COLOR.getName (), Color.red);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertDependency.java" startline="49" endline="53">
{
    target.addPreTask (source);
    source.addPostTask (target);
    source.notifyPostTasks ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertDependency.java" startline="57" endline="69">
{
    PertFigure source = (PertFigure) start;
    PertFigure target = (PertFigure) end;
    if (target != null) {
        target.removePreTask (source);
        target.updateDurations ();
    }

    if (source != null) {
        source.removePostTask (target);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertDependency.java" startline="61" endline="64">
{
    target.removePreTask (source);
    target.updateDurations ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertDependency.java" startline="66" endline="68">
{
    source.removePostTask (target);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertDependency.java" startline="72" endline="74">
{
    return ((start instanceof PertFigure) && (end instanceof PertFigure));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertDependency.java" startline="77" endline="82">
{
    List handles = super.handles ().toList ();
    handles.set (0, new NullHandle (this, PolyLineFigure.locator (0)));
    return new HandleEnumerator (handles);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertFigure.java" startline="41" endline="43">
{
    initialize ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertFigure.java" startline="46" endline="55">
{
    int start = 0;
    Iterator iter = fPreTasks.iterator ();
    while (iter.hasNext ()) {
        PertFigure f = (PertFigure) iter.next ();
        start = Math.max (start, f.end ());
    }

    return start;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertFigure.java" startline="50" endline="53">
{
    PertFigure f = (PertFigure) iter.next ();
    start = Math.max (start, f.end ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertFigure.java" startline="58" endline="60">
{
    return asInt (2);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertFigure.java" startline="63" endline="65">
{
    return asInt (1);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertFigure.java" startline="68" endline="70">
{
    setInt (2, value);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertFigure.java" startline="73" endline="78">
{
    if (! fPreTasks.contains (figure)) {
        fPreTasks.add (figure);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertFigure.java" startline="75" endline="77">
{
    fPreTasks.add (figure);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertFigure.java" startline="81" endline="86">
{
    if (! fPostTasks.contains (figure)) {
        fPostTasks.add (figure);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertFigure.java" startline="83" endline="85">
{
    fPostTasks.add (figure);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertFigure.java" startline="89" endline="91">
{
    fPreTasks.remove (figure);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertFigure.java" startline="94" endline="96">
{
    fPostTasks.remove (figure);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertFigure.java" startline="99" endline="102">
{
    NumberTextFigure t = (NumberTextFigure) figureAt (figureIndex);
    return t.getValue ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertFigure.java" startline="105" endline="108">
{
    TextFigure t = (TextFigure) figureAt (0);
    return t.getText ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertFigure.java" startline="111" endline="114">
{
    NumberTextFigure t = (NumberTextFigure) figureAt (figureIndex);
    t.setValue (value);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertFigure.java" startline="117" endline="120">
{
    fDisplayBox.translate (x, y);
    super.basicMoveBy (x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertFigure.java" startline="123" endline="129">
{
    return new Rectangle (fDisplayBox.x, fDisplayBox.y, fDisplayBox.width, fDisplayBox.height);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertFigure.java" startline="132" endline="136">
{
    fDisplayBox = new Rectangle (origin);
    fDisplayBox.add (corner);
    layout ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertFigure.java" startline="139" endline="157">
{
    super.draw (g);
    Rectangle r = displayBox ();
    Figure f = figureAt (0);
    Rectangle rf = f.displayBox ();
    g.setColor (Color.gray);
    g.drawLine (r.x, r.y + rf.height + 2, r.x + r.width, r.y + rf.height + 2);
    g.setColor (Color.white);
    g.drawLine (r.x, r.y + rf.height + 3, r.x + r.width, r.y + rf.height + 3);
    g.setColor (Color.white);
    g.drawLine (r.x, r.y, r.x, r.y + r.height);
    g.drawLine (r.x, r.y, r.x + r.width, r.y);
    g.setColor (Color.gray);
    g.drawLine (r.x + r.width, r.y, r.x + r.width, r.y + r.height);
    g.drawLine (r.x, r.y + r.height, r.x + r.width, r.y + r.height);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertFigure.java" startline="160" endline="163">
{
    drawBorder (g);
    super.draw (g);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertFigure.java" startline="166" endline="176">
{
    List handles = CollectionsFactory.current ().createList ();
    handles.add (new NullHandle (this, RelativeLocator.northWest ()));
    handles.add (new NullHandle (this, RelativeLocator.northEast ()));
    handles.add (new NullHandle (this, RelativeLocator.southWest ()));
    handles.add (new NullHandle (this, RelativeLocator.southEast ()));
    handles.add (new ConnectionHandle (this, RelativeLocator.east (), new PertDependency ()));
    return new HandleEnumerator (handles);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertFigure.java" startline="179" endline="203">
{
    fPostTasks = CollectionsFactory.current ().createList ();
    fPreTasks = CollectionsFactory.current ().createList ();
    fDisplayBox = new Rectangle (0, 0, 0, 0);
    Font f = new Font ("Helvetica", Font.PLAIN, 12);
    Font fb = new Font ("Helvetica", Font.BOLD, 12);
    TextFigure name = new TextFigure ();
    name.setFont (fb);
    name.setText ("Task");
    add (name);
    NumberTextFigure duration = new NumberTextFigure ();
    duration.setValue (0);
    duration.setFont (fb);
    add (duration);
    NumberTextFigure end = new NumberTextFigure ();
    end.setValue (0);
    end.setFont (f);
    end.setReadOnly (true);
    add (end);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertFigure.java" startline="206" endline="228">
{
    Point partOrigin = new Point (fDisplayBox.x, fDisplayBox.y);
    partOrigin.translate (BORDER, BORDER);
    Dimension extent = new Dimension (0, 0);
    FigureEnumeration fe = figures ();
    while (fe.hasNextFigure ()) {
        Figure f = fe.nextFigure ();
        Dimension partExtent = f.size ();
        Point corner = new Point (partOrigin.x + partExtent.width, partOrigin.y + partExtent.height);
        f.basicDisplayBox (partOrigin, corner);
        extent.width = Math.max (extent.width, partExtent.width);
        extent.height += partExtent.height;
        partOrigin.y += partExtent.height;
    }

    fDisplayBox.width = extent.width + 2 * BORDER;
    fDisplayBox.height = extent.height + 2 * BORDER;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertFigure.java" startline="213" endline="225">
{
    Figure f = fe.nextFigure ();
    Dimension partExtent = f.size ();
    Point corner = new Point (partOrigin.x + partExtent.width, partOrigin.y + partExtent.height);
    f.basicDisplayBox (partOrigin, corner);
    extent.width = Math.max (extent.width, partExtent.width);
    extent.height += partExtent.height;
    partOrigin.y += partExtent.height;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertFigure.java" startline="231" endline="242">
{
    Dimension extent = new Dimension (0, 0);
    FigureEnumeration fe = figures ();
    while (fe.hasNextFigure ()) {
        Figure f = fe.nextFigure ();
        extent.width = Math.max (extent.width, f.size ().width);
    }

    int newExtent = extent.width + 2 * BORDER;
    return newExtent != fDisplayBox.width;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertFigure.java" startline="236" endline="239">
{
    Figure f = fe.nextFigure ();
    extent.width = Math.max (extent.width, f.size ().width);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertFigure.java" startline="245" endline="256">
{
    if (e.getFigure () == figureAt (1)) {
        updateDurations ();
    }

    if (needsLayout ()) {
        layout ();
        changed ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertFigure.java" startline="247" endline="250">
{
    updateDurations ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertFigure.java" startline="252" endline="255">
{
    layout ();
    changed ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertFigure.java" startline="259" endline="261">
{
    update (e);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertFigure.java" startline="265" endline="267">
{
    update (e);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertFigure.java" startline="270" endline="276">
{
    Iterator iter = fPostTasks.iterator ();
    while (iter.hasNext ()) {
        ((PertFigure) iter.next ()).updateDurations ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertFigure.java" startline="273" endline="275">
{
    ((PertFigure) iter.next ()).updateDurations ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertFigure.java" startline="279" endline="286">
{
    int newEnd = start () + duration ();
    if (newEnd != end ()) {
        setEnd (newEnd);
        notifyPostTasks ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertFigure.java" startline="282" endline="285">
{
    setEnd (newEnd);
    notifyPostTasks ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertFigure.java" startline="289" endline="303">
{
    if (start == this) {
        return true;
    }

    Iterator iter = fPreTasks.iterator ();
    while (iter.hasNext ()) {
        if (((PertFigure) iter.next ()).hasCycle (start)) {
            return true;
        }

    }

    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertFigure.java" startline="291" endline="293">
{
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertFigure.java" startline="296" endline="301">
{
    if (((PertFigure) iter.next ()).hasCycle (start)) {
        return true;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertFigure.java" startline="298" endline="300">
{
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertFigure.java" startline="308" endline="317">
{
    super.write (dw);
    dw.writeInt (fDisplayBox.x);
    dw.writeInt (fDisplayBox.y);
    dw.writeInt (fDisplayBox.width);
    dw.writeInt (fDisplayBox.height);
    writeTasks (dw, fPreTasks);
    writeTasks (dw, fPostTasks);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertFigure.java" startline="320" endline="327">
{
    dw.writeInt (l.size ());
    Iterator iter = l.iterator ();
    while (iter.hasNext ()) {
        dw.writeStorable ((Storable) iter.next ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertFigure.java" startline="324" endline="326">
{
    dw.writeStorable ((Storable) iter.next ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertFigure.java" startline="330" endline="340">
{
    super.read (dr);
    fDisplayBox = new Rectangle (dr.readInt (), dr.readInt (), dr.readInt (), dr.readInt ());
    layout ();
    fPreTasks = readTasks (dr);
    fPostTasks = readTasks (dr);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertFigure.java" startline="343" endline="348">
{
    Rectangle r = fDisplayBox;
    int cx = r.width / 2;
    int cy = r.height / 2;
    return new Insets (cy, cx, cy, cx);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertFigure.java" startline="351" endline="359">
{
    int size = dr.readInt ();
    List l = CollectionsFactory.current ().createList (size);
    for (int i = 0;
    i < size; i ++) {
        l.add ((Figure) dr.readStorable ());
    }

    return l;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertFigure.java" startline="355" endline="357">
{
    l.add ((Figure) dr.readStorable ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertFigureCreationTool.java" startline="27" endline="29">
{
    super (newDrawingEditor);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/samples/pert/PertFigureCreationTool.java" startline="35" endline="37">
{
    return new PertFigure ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractCommand.java" startline="46" endline="48">
{
    this (newName, newDrawingEditor, true);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractCommand.java" startline="51" endline="57">
{
    setName (newName);
    setDrawingEditor (newDrawingEditor);
    getDrawingEditor ().addViewChangeListener (this);
    myIsViewRequired = newIsViewRequired;
    setEventDispatcher (createEventDispatcher ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractCommand.java" startline="60" endline="84">
{
    if (oldView != null) {
        oldView.removeFigureSelectionListener (this);
    }

    if (newView != null) {
        newView.addFigureSelectionListener (this);
    }

    if (isViewRequired ()) {
        boolean isOldViewInteractive = (oldView != null) && oldView.isInteractive ();
        boolean isNewViewInteractive = (newView != null) && newView.isInteractive ();
        if (! isOldViewInteractive && isNewViewInteractive) {
            getEventDispatcher ().fireCommandExecutableEvent ();
        }
        else if (isOldViewInteractive && ! isNewViewInteractive) {
            getEventDispatcher ().fireCommandNotExecutableEvent ();
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractCommand.java" startline="62" endline="64">
{
    oldView.removeFigureSelectionListener (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractCommand.java" startline="66" endline="68">
{
    newView.addFigureSelectionListener (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractCommand.java" startline="70" endline="83">
{
    boolean isOldViewInteractive = (oldView != null) && oldView.isInteractive ();
    boolean isNewViewInteractive = (newView != null) && newView.isInteractive ();
    if (! isOldViewInteractive && isNewViewInteractive) {
        getEventDispatcher ().fireCommandExecutableEvent ();
    }
    else if (isOldViewInteractive && ! isNewViewInteractive) {
        getEventDispatcher ().fireCommandNotExecutableEvent ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractCommand.java" startline="75" endline="77">
{
    getEventDispatcher ().fireCommandExecutableEvent ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractCommand.java" startline="80" endline="82">
{
    getEventDispatcher ().fireCommandNotExecutableEvent ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractCommand.java" startline="90" endline="91">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractCommand.java" startline="97" endline="98">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractCommand.java" startline="104" endline="105">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractCommand.java" startline="111" endline="113">
{
    return myDrawingEditor;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractCommand.java" startline="116" endline="118">
{
    myDrawingEditor = newDrawingEditor;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractCommand.java" startline="126" endline="128">
{
    return getDrawingEditor ().view ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractCommand.java" startline="134" endline="136">
{
    return myName;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractCommand.java" startline="139" endline="141">
{
    myName = newName;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractCommand.java" startline="147" endline="152">
{
    if (view () != null) {
        view ().removeFigureSelectionListener (this);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractCommand.java" startline="149" endline="151">
{
    view ().removeFigureSelectionListener (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractCommand.java" startline="158" endline="163">
{
    if (view () == null) {
        throw new JHotDrawRuntimeException ("execute should NOT be getting called when view() == null");
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractCommand.java" startline="160" endline="162">
{
    throw new JHotDrawRuntimeException ("execute should NOT be getting called when view() == null");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractCommand.java" startline="172" endline="183">
{
    if (isViewRequired ()) {
        if ((view () == null) || ! view ().isInteractive ()) {
            return false;
        }

    }

    return isExecutableWithView ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractCommand.java" startline="176" endline="181">
{
    if ((view () == null) || ! view ().isInteractive ()) {
        return false;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractCommand.java" startline="178" endline="180">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractCommand.java" startline="186" endline="188">
{
    return myIsViewRequired;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractCommand.java" startline="191" endline="193">
{
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractCommand.java" startline="196" endline="198">
{
    return myUndoableActivity;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractCommand.java" startline="201" endline="203">
{
    myUndoableActivity = newUndoableActivity;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractCommand.java" startline="206" endline="208">
{
    getEventDispatcher ().addCommandListener (newCommandListener);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractCommand.java" startline="211" endline="213">
{
    getEventDispatcher ().removeCommandListener (oldCommandListener);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractCommand.java" startline="216" endline="218">
{
    myEventDispatcher = newEventDispatcher;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractCommand.java" startline="221" endline="223">
{
    return myEventDispatcher;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractCommand.java" startline="226" endline="228">
{
    return new AbstractCommand.EventDispatcher (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractCommand.java" startline="236" endline="239">
{
    myRegisteredListeners = CollectionsFactory.current ().createList ();
    myObservedCommand = newObservedCommand;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractCommand.java" startline="242" endline="248">
{
    Iterator iter = myRegisteredListeners.iterator ();
    while (iter.hasNext ()) {
        ((CommandListener) iter.next ()).commandExecuted (new EventObject (myObservedCommand));
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractCommand.java" startline="245" endline="247">
{
    ((CommandListener) iter.next ()).commandExecuted (new EventObject (myObservedCommand));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractCommand.java" startline="251" endline="257">
{
    Iterator iter = myRegisteredListeners.iterator ();
    while (iter.hasNext ()) {
        ((CommandListener) iter.next ()).commandExecutable (new EventObject (myObservedCommand));
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractCommand.java" startline="254" endline="256">
{
    ((CommandListener) iter.next ()).commandExecutable (new EventObject (myObservedCommand));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractCommand.java" startline="260" endline="266">
{
    Iterator iter = myRegisteredListeners.iterator ();
    while (iter.hasNext ()) {
        ((CommandListener) iter.next ()).commandNotExecutable (new EventObject (myObservedCommand));
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractCommand.java" startline="263" endline="265">
{
    ((CommandListener) iter.next ()).commandNotExecutable (new EventObject (myObservedCommand));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractCommand.java" startline="269" endline="274">
{
    if (! myRegisteredListeners.contains (newCommandListener)) {
        myRegisteredListeners.add (newCommandListener);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractCommand.java" startline="271" endline="273">
{
    myRegisteredListeners.add (newCommandListener);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractCommand.java" startline="277" endline="282">
{
    if (myRegisteredListeners.contains (oldCommandListener)) {
        myRegisteredListeners.remove (oldCommandListener);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractCommand.java" startline="279" endline="281">
{
    myRegisteredListeners.remove (oldCommandListener);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractConnector.java" startline="46" endline="48">
{
    fOwner = null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractConnector.java" startline="54" endline="56">
{
    fOwner = owner;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractConnector.java" startline="65" endline="67">
{
    return fOwner;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractConnector.java" startline="70" endline="72">
{
    return findPoint (connection);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractConnector.java" startline="75" endline="77">
{
    return findPoint (connection);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractConnector.java" startline="85" endline="87">
{
    return Geom.center (displayBox ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractConnector.java" startline="93" endline="95">
{
    return owner ().displayBox ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractConnector.java" startline="101" endline="103">
{
    return owner ().containsPoint (x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractConnector.java" startline="109" endline="111">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractConnector.java" startline="117" endline="119">
{
    dw.writeStorable (owner ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractConnector.java" startline="125" endline="127">
{
    fOwner = (Figure) dr.readStorable ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractConnector.java" startline="136" endline="138">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractFigure.java" startline="63" endline="65">
{
    myDependendFigures = CollectionsFactory.current ().createList ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractFigure.java" startline="71" endline="75">
{
    willChange ();
    basicMoveBy (dx, dy);
    changed ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractFigure.java" startline="94" endline="98">
{
    willChange ();
    basicDisplayBox (origin, corner);
    changed ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractFigure.java" startline="126" endline="128">
{
    return FigureEnumerator.getEmptyEnumeration ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractFigure.java" startline="134" endline="136">
{
    return new Dimension (displayBox ().width, displayBox ().height);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractFigure.java" startline="144" endline="146">
{
    return (size ().width < 3) || (size ().height < 3);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractFigure.java" startline="156" endline="162">
{
    if (containsPoint (x, y)) {
        return this;
    }

    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractFigure.java" startline="158" endline="160">
{
    return this;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractFigure.java" startline="168" endline="170">
{
    return displayBox ().contains (x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractFigure.java" startline="179" endline="181">
{
    displayBox (new Point (r.x, r.y), new Point (r.x + r.width, r.y + r.height));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractFigure.java" startline="187" endline="189">
{
    return figure == this;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractFigure.java" startline="197" endline="201">
{
    List figures = CollectionsFactory.current ().createList (1);
    figures.add (this);
    return new FigureEnumerator (figures);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractFigure.java" startline="210" endline="213">
{
    addFigureChangeListener (c);
    invalidate ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractFigure.java" startline="220" endline="223">
{
    invalidate ();
    removeFigureChangeListener (c);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractFigure.java" startline="229" endline="231">
{
    fListener = FigureChangeEventMulticaster.add (listener (), l);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractFigure.java" startline="237" endline="239">
{
    fListener = FigureChangeEventMulticaster.remove (listener (), l);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractFigure.java" startline="245" endline="247">
{
    return fListener;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractFigure.java" startline="255" endline="260">
{
    if (listener () != null) {
        listener ().figureRemoved (new FigureChangeEvent (this));
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractFigure.java" startline="257" endline="259">
{
    listener ().figureRemoved (new FigureChangeEvent (this));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractFigure.java" startline="268" endline="274">
{
    if (listener () != null) {
        Rectangle r = invalidateRectangle (displayBox ());
        listener ().figureInvalidated (new FigureChangeEvent (this, r));
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractFigure.java" startline="270" endline="273">
{
    Rectangle r = invalidateRectangle (displayBox ());
    listener ().figureInvalidated (new FigureChangeEvent (this, r));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractFigure.java" startline="280" endline="283">
{
    r.grow (Handle.HANDLESIZE, Handle.HANDLESIZE);
    return r;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractFigure.java" startline="292" endline="295">
{
    invalidate ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractFigure.java" startline="304" endline="310">
{
    invalidate ();
    if (listener () != null) {
        listener ().figureChanged (new FigureChangeEvent (this));
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractFigure.java" startline="307" endline="309">
{
    listener ().figureChanged (new FigureChangeEvent (this));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractFigure.java" startline="317" endline="319">
{
    return Geom.center (displayBox ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractFigure.java" startline="326" endline="328">
{
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractFigure.java" startline="338" endline="340">
{
    return new Insets (0, 0, 0, 0);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractFigure.java" startline="348" endline="350">
{
    return new ChopBoxConnector (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractFigure.java" startline="357" endline="358">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractFigure.java" startline="364" endline="366">
{
    return RelativeLocator.center ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractFigure.java" startline="377" endline="379">
{
    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractFigure.java" startline="388" endline="390">
{
    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractFigure.java" startline="399" endline="400">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractFigure.java" startline="407" endline="408">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractFigure.java" startline="418" endline="447">
{
    Object clone = null;
    ByteArrayOutputStream output = new ByteArrayOutputStream (200);
    try {
        ObjectOutput writer = new ObjectOutputStream (output);
        writer.writeObject (this);
        writer.close ();
    }
    catch (IOException e) {
        System.err.println ("Class not found: " + e);
    }

    InputStream input = new ByteArrayInputStream (output.toByteArray ());
    try {
        ObjectInput reader = new ObjectInputStream (input);
        clone = reader.readObject ();
    }
    catch (IOException e) {
        System.err.println (e.toString ());
    }
    catch (ClassNotFoundException e) {
        System.err.println ("Class not found: " + e);
    }

    return clone;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractFigure.java" startline="422" endline="426">
{
    ObjectOutput writer = new ObjectOutputStream (output);
    writer.writeObject (this);
    writer.close ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractFigure.java" startline="428" endline="430">
{
    System.err.println ("Class not found: " + e);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractFigure.java" startline="434" endline="437">
{
    ObjectInput reader = new ObjectInputStream (input);
    clone = reader.readObject ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractFigure.java" startline="439" endline="441">
{
    System.err.println (e.toString ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractFigure.java" startline="443" endline="445">
{
    System.err.println ("Class not found: " + e);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractFigure.java" startline="453" endline="454">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractFigure.java" startline="460" endline="461">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractFigure.java" startline="467" endline="469">
{
    return _nZ;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractFigure.java" startline="475" endline="477">
{
    _nZ = z;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractFigure.java" startline="480" endline="511">
{
    FigureChangeListener originalListener = listener ();
    FigureEnumeration fe = getDependendFigures ();
    visitor.visitFigure (this);
    FigureEnumeration visitFigures = figures ();
    while (visitFigures.hasNextFigure ()) {
        visitFigures.nextFigure ().visit (visitor);
    }

    HandleEnumeration visitHandles = handles ();
    while (visitHandles.hasNextHandle ()) {
        visitor.visitHandle (visitHandles.nextHandle ());
    }

    while (fe.hasNextFigure ()) {
        fe.nextFigure ().visit (visitor);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractFigure.java" startline="490" endline="492">
{
    visitFigures.nextFigure ().visit (visitor);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractFigure.java" startline="496" endline="498">
{
    visitor.visitHandle (visitHandles.nextHandle ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractFigure.java" startline="507" endline="510">
{
    fe.nextFigure ().visit (visitor);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractFigure.java" startline="514" endline="516">
{
    return new FigureEnumerator (myDependendFigures);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractFigure.java" startline="519" endline="521">
{
    myDependendFigures.add (newDependendFigure);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractFigure.java" startline="524" endline="526">
{
    myDependendFigures.remove (oldDependendFigure);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractFigure.java" startline="529" endline="531">
{
    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractFigure.java" startline="534" endline="536">
{
    return this;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractHandle.java" startline="40" endline="42">
{
    fOwner = owner;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractHandle.java" startline="52" endline="52">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractHandle.java" startline="60" endline="62">
{
    invokeStart (x, y, view.drawing ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractHandle.java" startline="72" endline="72">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractHandle.java" startline="82" endline="84">
{
    invokeStep (x - anchorX, y - anchorY, view.drawing ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractHandle.java" startline="94" endline="96">
{
    invokeEnd (x - anchorX, y - anchorY, view.drawing ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractHandle.java" startline="104" endline="104">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractHandle.java" startline="110" endline="112">
{
    return fOwner;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractHandle.java" startline="118" endline="125">
{
    Point p = locate ();
    return new Rectangle (p.x - HANDLESIZE / 2, p.y - HANDLESIZE / 2, HANDLESIZE, HANDLESIZE);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractHandle.java" startline="131" endline="133">
{
    return displayBox ().contains (x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractHandle.java" startline="139" endline="147">
{
    Rectangle r = displayBox ();
    g.setColor (Color.white);
    g.fillRect (r.x, r.y, r.width, r.height);
    g.setColor (Color.black);
    g.drawRect (r.x, r.y, r.width, r.height);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractHandle.java" startline="150" endline="152">
{
    return myUndoableActivity;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractHandle.java" startline="155" endline="157">
{
    myUndoableActivity = newUndoableActivity;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractLocator.java" startline="38" endline="39">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractLocator.java" startline="42" endline="51">
{
    try {
        return super.clone ();
    }
    catch (CloneNotSupportedException e) {
        throw new InternalError ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractLocator.java" startline="44" endline="46">
{
    return super.clone ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractLocator.java" startline="48" endline="50">
{
    throw new InternalError ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractLocator.java" startline="57" endline="58">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractLocator.java" startline="64" endline="65">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="66" endline="72">
{
    myDrawingEditor = newDrawingEditor;
    setEventDispatcher (createEventDispatcher ());
    setEnabled (true);
    checkUsable ();
    editor ().addViewChangeListener (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="84" endline="91">
{
    if (getActiveView () != null) {
        getActiveView ().clearSelection ();
        getActiveView ().checkDamage ();
        getEventDispatcher ().fireToolActivatedEvent ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="86" endline="90">
{
    getActiveView ().clearSelection ();
    getActiveView ().checkDamage ();
    getEventDispatcher ().fireToolActivatedEvent ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="101" endline="110">
{
    if (isActive ()) {
        if (getActiveView () != null) {
            getActiveView ().setCursor (Cursor.getDefaultCursor ());
        }

        getEventDispatcher ().fireToolDeactivatedEvent ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="103" endline="109">
{
    if (getActiveView () != null) {
        getActiveView ().setCursor (Cursor.getDefaultCursor ());
    }

    getEventDispatcher ().fireToolDeactivatedEvent ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="105" endline="107">
{
    getActiveView ().setCursor (Cursor.getDefaultCursor ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="118" endline="126">
{
    if (isActive ()) {
        deactivate ();
        activate ();
    }

    checkUsable ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="120" endline="123">
{
    deactivate ();
    activate ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="132" endline="133">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="139" endline="140">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="146" endline="150">
{
    setAnchorX (x);
    setAnchorY (y);
    setView ((DrawingView) e.getSource ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="156" endline="157">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="163" endline="168">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="174" endline="175">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="181" endline="182">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="188" endline="190">
{
    return view ().drawing ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="193" endline="195">
{
    return getActiveView ().drawing ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="201" endline="203">
{
    return myDrawingEditor;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="206" endline="208">
{
    myDrawingEditor = newDrawingEditor;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="214" endline="216">
{
    return myDrawingView;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="219" endline="221">
{
    myDrawingView = newDrawingView;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="224" endline="226">
{
    return editor ().view ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="232" endline="234">
{
    return isEnabled () && myIsUsable;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="237" endline="251">
{
    if (isUsable () != newIsUsable) {
        myIsUsable = newIsUsable;
        if (isUsable ()) {
            getEventDispatcher ().fireToolUsableEvent ();
        }
        else {
            getEventDispatcher ().fireToolUnusableEvent ();
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="240" endline="250">
{
    myIsUsable = newIsUsable;
    if (isUsable ()) {
        getEventDispatcher ().fireToolUsableEvent ();
    }
    else {
        getEventDispatcher ().fireToolUnusableEvent ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="243" endline="245">
{
    getEventDispatcher ().fireToolUsableEvent ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="247" endline="249">
{
    getEventDispatcher ().fireToolUnusableEvent ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="254" endline="270">
{
    if (isEnabled () != newIsEnabled) {
        myIsEnabled = newIsEnabled;
        if (isEnabled ()) {
            getEventDispatcher ().fireToolEnabledEvent ();
        }
        else {
            getEventDispatcher ().fireToolDisabledEvent ();
            setUsable (false);
            deactivate ();
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="257" endline="269">
{
    myIsEnabled = newIsEnabled;
    if (isEnabled ()) {
        getEventDispatcher ().fireToolEnabledEvent ();
    }
    else {
        getEventDispatcher ().fireToolDisabledEvent ();
        setUsable (false);
        deactivate ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="260" endline="262">
{
    getEventDispatcher ().fireToolEnabledEvent ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="264" endline="268">
{
    getEventDispatcher ().fireToolDisabledEvent ();
    setUsable (false);
    deactivate ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="273" endline="275">
{
    return myIsEnabled;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="282" endline="284">
{
    myAnchorX = newAnchorX;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="293" endline="295">
{
    return myAnchorX;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="302" endline="304">
{
    myAnchorY = newAnchorY;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="313" endline="315">
{
    return myAnchorY;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="318" endline="320">
{
    return myUndoActivity;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="323" endline="325">
{
    myUndoActivity = newUndoActivity;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="328" endline="330">
{
    return (editor ().tool () == this) && isUsable ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="333" endline="335">
{
    getEventDispatcher ().addToolListener (newToolListener);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="338" endline="340">
{
    getEventDispatcher ().removeToolListener (oldToolListener);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="343" endline="345">
{
    myEventDispatcher = newEventDispatcher;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="348" endline="350">
{
    return myEventDispatcher;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="353" endline="355">
{
    return new AbstractTool.EventDispatcher (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="358" endline="363">
{
    if (isEnabled ()) {
        setUsable ((getActiveView () != null) && getActiveView ().isInteractive ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="360" endline="362">
{
    setUsable ((getActiveView () != null) && getActiveView ().isInteractive ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="371" endline="374">
{
    myRegisteredListeners = CollectionsFactory.current ().createList ();
    myObservedTool = newObservedTool;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="377" endline="383">
{
    Iterator iter = myRegisteredListeners.iterator ();
    while (iter.hasNext ()) {
        ((ToolListener) iter.next ()).toolUsable (new EventObject (myObservedTool));
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="380" endline="382">
{
    ((ToolListener) iter.next ()).toolUsable (new EventObject (myObservedTool));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="386" endline="392">
{
    Iterator iter = myRegisteredListeners.iterator ();
    while (iter.hasNext ()) {
        ((ToolListener) iter.next ()).toolUnusable (new EventObject (myObservedTool));
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="389" endline="391">
{
    ((ToolListener) iter.next ()).toolUnusable (new EventObject (myObservedTool));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="395" endline="401">
{
    Iterator iter = myRegisteredListeners.iterator ();
    while (iter.hasNext ()) {
        ((ToolListener) iter.next ()).toolActivated (new EventObject (myObservedTool));
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="398" endline="400">
{
    ((ToolListener) iter.next ()).toolActivated (new EventObject (myObservedTool));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="404" endline="410">
{
    Iterator iter = myRegisteredListeners.iterator ();
    while (iter.hasNext ()) {
        ((ToolListener) iter.next ()).toolDeactivated (new EventObject (myObservedTool));
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="407" endline="409">
{
    ((ToolListener) iter.next ()).toolDeactivated (new EventObject (myObservedTool));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="413" endline="419">
{
    Iterator iter = myRegisteredListeners.iterator ();
    while (iter.hasNext ()) {
        ((ToolListener) iter.next ()).toolEnabled (new EventObject (myObservedTool));
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="416" endline="418">
{
    ((ToolListener) iter.next ()).toolEnabled (new EventObject (myObservedTool));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="422" endline="428">
{
    Iterator iter = myRegisteredListeners.iterator ();
    while (iter.hasNext ()) {
        ((ToolListener) iter.next ()).toolDisabled (new EventObject (myObservedTool));
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="425" endline="427">
{
    ((ToolListener) iter.next ()).toolDisabled (new EventObject (myObservedTool));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="431" endline="436">
{
    if (! myRegisteredListeners.contains (newToolListener)) {
        myRegisteredListeners.add (newToolListener);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="433" endline="435">
{
    myRegisteredListeners.add (newToolListener);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="439" endline="444">
{
    if (myRegisteredListeners.contains (oldToolListener)) {
        myRegisteredListeners.remove (oldToolListener);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AbstractTool.java" startline="441" endline="443">
{
    myRegisteredListeners.remove (oldToolListener);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ActionTool.java" startline="28" endline="30">
{
    super (newDrawingEditor);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ActionTool.java" startline="37" endline="45">
{
    super.mouseDown (e, x, y);
    Figure target = drawing ().findFigure (x, y);
    if (target != null) {
        view ().addToSelection (target);
        action (target);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ActionTool.java" startline="41" endline="44">
{
    view ().addToSelection (target);
    action (target);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ActionTool.java" startline="48" endline="50">
{
    editor ().toolDone ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AlignCommand.java" startline="36" endline="39">
{
    Rectangle rr = f.displayBox ();
    f.moveBy (anchor.x - rr.x, 0);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AlignCommand.java" startline="48" endline="51">
{
    Rectangle rr = f.displayBox ();
    f.moveBy ((anchor.x + anchor.width / 2) - (rr.x + rr.width / 2), 0);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AlignCommand.java" startline="60" endline="63">
{
    Rectangle rr = f.displayBox ();
    f.moveBy ((anchor.x + anchor.width) - (rr.x + rr.width), 0);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AlignCommand.java" startline="72" endline="75">
{
    Rectangle rr = f.displayBox ();
    f.moveBy (0, anchor.y - rr.y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AlignCommand.java" startline="84" endline="87">
{
    Rectangle rr = f.displayBox ();
    f.moveBy (0, (anchor.y + anchor.height / 2) - (rr.y + rr.height / 2));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AlignCommand.java" startline="96" endline="99">
{
    Rectangle rr = f.displayBox ();
    f.moveBy (0, (anchor.y + anchor.height) - (rr.y + rr.height));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AlignCommand.java" startline="105" endline="107">
{
    setDescription (newDescription);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AlignCommand.java" startline="110" endline="112">
{
    return getDescription ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AlignCommand.java" startline="115" endline="117">
{
    return myDescription;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AlignCommand.java" startline="120" endline="122">
{
    myDescription = newDescription;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AlignCommand.java" startline="135" endline="138">
{
    super (newAlignment.getDescription (), newDrawingEditor);
    setAlignment (newAlignment);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AlignCommand.java" startline="141" endline="143">
{
    return view ().selectionCount () > 1;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AlignCommand.java" startline="146" endline="153">
{
    super.execute ();
    setUndoActivity (createUndoActivity ());
    getUndoActivity ().setAffectedFigures (view ().selection ());
    ((AlignCommand.UndoActivity) getUndoActivity ()).alignAffectedFigures (getAlignment ());
    view ().checkDamage ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AlignCommand.java" startline="156" endline="158">
{
    myAlignment = newAlignment;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AlignCommand.java" startline="161" endline="163">
{
    return myAlignment;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AlignCommand.java" startline="169" endline="171">
{
    return new AlignCommand.UndoActivity (view (), getAlignment ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AlignCommand.java" startline="179" endline="185">
{
    super (newView);
    myOriginalPoints = new Hashtable ();
    setAppliedAlignment (newAlignment);
    setUndoable (true);
    setRedoable (true);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AlignCommand.java" startline="188" endline="206">
{
    if (! super.undo ()) {
        return false;
    }

    FigureEnumeration fe = getAffectedFigures ();
    while (fe.hasNextFigure ()) {
        Figure f = fe.nextFigure ();
        Point originalPoint = getOriginalPoint (f);
        Point currentPoint = f.displayBox ().getLocation ();
        f.moveBy (- currentPoint.x + originalPoint.x, - currentPoint.y + originalPoint.y);
    }

    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AlignCommand.java" startline="190" endline="192">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AlignCommand.java" startline="196" endline="203">
{
    Figure f = fe.nextFigure ();
    Point originalPoint = getOriginalPoint (f);
    Point currentPoint = f.displayBox ().getLocation ();
    f.moveBy (- currentPoint.x + originalPoint.x, - currentPoint.y + originalPoint.y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AlignCommand.java" startline="209" endline="216">
{
    if (! isRedoable ()) {
        return false;
    }

    alignAffectedFigures (getAppliedAlignment ());
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AlignCommand.java" startline="211" endline="213">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AlignCommand.java" startline="219" endline="221">
{
    myAppliedAlignment = newAlignment;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AlignCommand.java" startline="224" endline="226">
{
    return myAppliedAlignment;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AlignCommand.java" startline="229" endline="231">
{
    myOriginalPoints.put (f, f.displayBox ().getLocation ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AlignCommand.java" startline="234" endline="236">
{
    return (Point) myOriginalPoints.get (f);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AlignCommand.java" startline="239" endline="249">
{
    FigureEnumeration fe = getAffectedFigures ();
    Figure anchorFigure = fe.nextFigure ();
    Rectangle r = anchorFigure.displayBox ();
    while (fe.hasNextFigure ()) {
        Figure f = fe.nextFigure ();
        applyAlignment.moveBy (f, r);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AlignCommand.java" startline="245" endline="248">
{
    Figure f = fe.nextFigure ();
    applyAlignment.moveBy (f, r);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AlignCommand.java" startline="252" endline="261">
{
    super.setAffectedFigures (fe);
    FigureEnumeration copyFe = getAffectedFigures ();
    while (copyFe.hasNextFigure ()) {
        addOriginalPoint (copyFe.nextFigure ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/AlignCommand.java" startline="258" endline="260">
{
    addOriginalPoint (copyFe.nextFigure ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/BoxHandleKit.java" startline="39" endline="44">
{
    handles.add (southEast (f));
    handles.add (southWest (f));
    handles.add (northEast (f));
    handles.add (northWest (f));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/BoxHandleKit.java" startline="51" endline="57">
{
    addCornerHandles (f, handles);
    handles.add (south (f));
    handles.add (north (f));
    handles.add (east (f));
    handles.add (west (f));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/BoxHandleKit.java" startline="60" endline="62">
{
    return new SouthHandle (owner);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/BoxHandleKit.java" startline="65" endline="67">
{
    return new SouthEastHandle (owner);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/BoxHandleKit.java" startline="70" endline="72">
{
    return new SouthWestHandle (owner);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/BoxHandleKit.java" startline="75" endline="77">
{
    return new NorthHandle (owner);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/BoxHandleKit.java" startline="80" endline="82">
{
    return new NorthEastHandle (owner);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/BoxHandleKit.java" startline="85" endline="87">
{
    return new NorthWestHandle (owner);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/BoxHandleKit.java" startline="90" endline="92">
{
    return new EastHandle (owner);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/BoxHandleKit.java" startline="95" endline="97">
{
    return new WestHandle (owner);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/BoxHandleKit.java" startline="103" endline="105">
{
    super (owner, loc);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/BoxHandleKit.java" startline="108" endline="112">
{
    setUndoActivity (createUndoActivity (view));
    getUndoActivity ().setAffectedFigures (new SingleFigureEnumerator (owner ()));
    ((ResizeHandle.UndoActivity) getUndoActivity ()).setOldDisplayBox (owner ().displayBox ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/BoxHandleKit.java" startline="115" endline="122">
{
    Rectangle oldDisplayBox = ((ResizeHandle.UndoActivity) getUndoActivity ()).getOldDisplayBox ();
    if (owner ().displayBox ().equals (oldDisplayBox)) {
        setUndoActivity (null);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/BoxHandleKit.java" startline="118" endline="121">
{
    setUndoActivity (null);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/BoxHandleKit.java" startline="128" endline="130">
{
    return new ResizeHandle.UndoActivity (view);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/BoxHandleKit.java" startline="137" endline="141">
{
    super (newView);
    setUndoable (true);
    setRedoable (true);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/BoxHandleKit.java" startline="144" endline="151">
{
    if (! super.undo ()) {
        return false;
    }

    return resetDisplayBox ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/BoxHandleKit.java" startline="146" endline="148">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/BoxHandleKit.java" startline="154" endline="162">
{
    if (! isRedoable ()) {
        return false;
    }

    return resetDisplayBox ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/BoxHandleKit.java" startline="157" endline="159">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/BoxHandleKit.java" startline="165" endline="177">
{
    FigureEnumeration fe = getAffectedFigures ();
    if (! fe.hasNextFigure ()) {
        return false;
    }

    Figure currentFigure = fe.nextFigure ();
    Rectangle figureDisplayBox = currentFigure.displayBox ();
    currentFigure.displayBox (getOldDisplayBox ());
    setOldDisplayBox (figureDisplayBox);
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/BoxHandleKit.java" startline="168" endline="170">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/BoxHandleKit.java" startline="180" endline="182">
{
    myOldDisplayBox = newOldDisplayBox;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/BoxHandleKit.java" startline="185" endline="187">
{
    return myOldDisplayBox;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/BoxHandleKit.java" startline="194" endline="196">
{
    super (owner, RelativeLocator.northEast ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/BoxHandleKit.java" startline="199" endline="205">
{
    Rectangle r = owner ().displayBox ();
    owner ().displayBox (new Point (r.x, Math.min (r.y + r.height, y)), new Point (Math.max (r.x, x), r.y + r.height));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/BoxHandleKit.java" startline="211" endline="213">
{
    super (owner, RelativeLocator.east ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/BoxHandleKit.java" startline="216" endline="221">
{
    Rectangle r = owner ().displayBox ();
    owner ().displayBox (new Point (r.x, r.y), new Point (Math.max (r.x, x), r.y + r.height));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/BoxHandleKit.java" startline="227" endline="229">
{
    super (owner, RelativeLocator.north ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/BoxHandleKit.java" startline="232" endline="238">
{
    Rectangle r = owner ().displayBox ();
    owner ().displayBox (new Point (r.x, Math.min (r.y + r.height, y)), new Point (r.x + r.width, r.y + r.height));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/BoxHandleKit.java" startline="244" endline="246">
{
    super (owner, RelativeLocator.northWest ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/BoxHandleKit.java" startline="249" endline="255">
{
    Rectangle r = owner ().displayBox ();
    owner ().displayBox (new Point (Math.min (r.x + r.width, x), Math.min (r.y + r.height, y)), new Point (r.x + r.width, r.y + r.height));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/BoxHandleKit.java" startline="261" endline="263">
{
    super (owner, RelativeLocator.southEast ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/BoxHandleKit.java" startline="266" endline="272">
{
    Rectangle r = owner ().displayBox ();
    owner ().displayBox (new Point (r.x, r.y), new Point (Math.max (r.x, x), Math.max (r.y, y)));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/BoxHandleKit.java" startline="278" endline="280">
{
    super (owner, RelativeLocator.south ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/BoxHandleKit.java" startline="283" endline="289">
{
    Rectangle r = owner ().displayBox ();
    owner ().displayBox (new Point (r.x, r.y), new Point (r.x + r.width, Math.max (r.y, y)));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/BoxHandleKit.java" startline="295" endline="297">
{
    super (owner, RelativeLocator.southWest ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/BoxHandleKit.java" startline="300" endline="306">
{
    Rectangle r = owner ().displayBox ();
    owner ().displayBox (new Point (Math.min (r.x + r.width, x), r.y), new Point (r.x + r.width, Math.max (r.y, y)));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/BoxHandleKit.java" startline="312" endline="314">
{
    super (owner, RelativeLocator.west ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/BoxHandleKit.java" startline="317" endline="323">
{
    Rectangle r = owner ().displayBox ();
    owner ().displayBox (new Point (Math.min (r.x + r.width, x), r.y), new Point (r.x + r.width, r.y + r.height));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/BringToFrontCommand.java" startline="33" endline="35">
{
    super (name, newDrawingEditor);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/BringToFrontCommand.java" startline="38" endline="48">
{
    super.execute ();
    setUndoActivity (createUndoActivity ());
    getUndoActivity ().setAffectedFigures (view ().selection ());
    FigureEnumeration fe = getUndoActivity ().getAffectedFigures ();
    while (fe.hasNextFigure ()) {
        view ().drawing ().bringToFront (fe.nextFigure ());
    }

    view ().checkDamage ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/BringToFrontCommand.java" startline="44" endline="46">
{
    view ().drawing ().bringToFront (fe.nextFigure ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/BringToFrontCommand.java" startline="51" endline="53">
{
    return view ().selectionCount () > 0;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/BringToFrontCommand.java" startline="56" endline="58">
{
    return new BringToFrontCommand.UndoActivity (view ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/BringToFrontCommand.java" startline="63" endline="65">
{
    super (newDrawingView);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/BringToFrontCommand.java" startline="68" endline="70">
{
    getDrawingView ().drawing ().bringToFront (f);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/BufferedUpdateStrategy.java" startline="46" endline="62">
{
    Dimension d = view.getSize ();
    if ((fOffscreen == null) || (d.width != fImagewidth) || (d.height != fImageheight)) {
        fOffscreen = view.createImage (d.width, d.height);
        fImagewidth = d.width;
        fImageheight = d.height;
    }

    Graphics g2 = fOffscreen.getGraphics ();
    view.drawAll (g2);
    g.drawImage (fOffscreen, 0, 0, view);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/BufferedUpdateStrategy.java" startline="51" endline="55">
{
    fOffscreen = view.createImage (d.width, d.height);
    fImagewidth = d.width;
    fImageheight = d.height;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeAttributeCommand.java" startline="39" endline="43">
{
    super (name, newDrawingEditor);
    fAttribute = attribute;
    fValue = value;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeAttributeCommand.java" startline="46" endline="56">
{
    super.execute ();
    setUndoActivity (createUndoActivity ());
    getUndoActivity ().setAffectedFigures (view ().selection ());
    FigureEnumeration fe = getUndoActivity ().getAffectedFigures ();
    while (fe.hasNextFigure ()) {
        fe.nextFigure ().setAttribute (fAttribute, fValue);
    }

    view ().checkDamage ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeAttributeCommand.java" startline="52" endline="54">
{
    fe.nextFigure ().setAttribute (fAttribute, fValue);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeAttributeCommand.java" startline="59" endline="61">
{
    return view ().selectionCount () > 0;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeAttributeCommand.java" startline="67" endline="69">
{
    return new ChangeAttributeCommand.UndoActivity (view (), fAttribute, fValue);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeAttributeCommand.java" startline="78" endline="85">
{
    super (newDrawingView);
    myOriginalValues = new Hashtable ();
    setAttribute (newUndoAttribute);
    setBackupValue (newUndoValue);
    setUndoable (true);
    setRedoable (true);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeAttributeCommand.java" startline="88" endline="105">
{
    if (! super.undo ()) {
        return false;
    }

    FigureEnumeration fe = getAffectedFigures ();
    while (fe.hasNextFigure ()) {
        Figure f = fe.nextFigure ();
        if (getOriginalValue (f) != null) {
            f.setAttribute (getAttribute (), getOriginalValue (f));
        }

    }

    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeAttributeCommand.java" startline="90" endline="92">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeAttributeCommand.java" startline="96" endline="102">
{
    Figure f = fe.nextFigure ();
    if (getOriginalValue (f) != null) {
        f.setAttribute (getAttribute (), getOriginalValue (f));
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeAttributeCommand.java" startline="99" endline="101">
{
    f.setAttribute (getAttribute (), getOriginalValue (f));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeAttributeCommand.java" startline="108" endline="125">
{
    if (! isRedoable ()) {
        return false;
    }

    FigureEnumeration fe = getAffectedFigures ();
    while (fe.hasNextFigure ()) {
        Figure f = fe.nextFigure ();
        if (getBackupValue () != null) {
            f.setAttribute (getAttribute (), getBackupValue ());
        }

    }

    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeAttributeCommand.java" startline="110" endline="112">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeAttributeCommand.java" startline="116" endline="122">
{
    Figure f = fe.nextFigure ();
    if (getBackupValue () != null) {
        f.setAttribute (getAttribute (), getBackupValue ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeAttributeCommand.java" startline="119" endline="121">
{
    f.setAttribute (getAttribute (), getBackupValue ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeAttributeCommand.java" startline="128" endline="130">
{
    myOriginalValues.put (affectedFigure, newOriginalValue);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeAttributeCommand.java" startline="133" endline="135">
{
    return myOriginalValues.get (lookupAffectedFigure);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeAttributeCommand.java" startline="138" endline="140">
{
    myUndoAttribute = newUndoAttribute;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeAttributeCommand.java" startline="143" endline="145">
{
    return myUndoAttribute;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeAttributeCommand.java" startline="148" endline="150">
{
    myUndoValue = newUndoValue;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeAttributeCommand.java" startline="153" endline="155">
{
    return myUndoValue;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeAttributeCommand.java" startline="158" endline="161">
{
    super.release ();
    myOriginalValues = null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeAttributeCommand.java" startline="164" endline="178">
{
    super.setAffectedFigures (fe);
    FigureEnumeration copyFe = getAffectedFigures ();
    while (copyFe.hasNextFigure ()) {
        Figure f = copyFe.nextFigure ();
        Object attributeValue = f.getAttribute (getAttribute ());
        if (attributeValue != null) {
            addOriginalValue (f, attributeValue);
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeAttributeCommand.java" startline="170" endline="177">
{
    Figure f = copyFe.nextFigure ();
    Object attributeValue = f.getAttribute (getAttribute ());
    if (attributeValue != null) {
        addOriginalValue (f, attributeValue);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeAttributeCommand.java" startline="174" endline="176">
{
    addOriginalValue (f, attributeValue);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeConnectionEndHandle.java" startline="31" endline="33">
{
    super (owner);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeConnectionEndHandle.java" startline="39" endline="41">
{
    return getConnection ().getEndConnector ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeConnectionEndHandle.java" startline="47" endline="49">
{
    getConnection ().disconnectEnd ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeConnectionEndHandle.java" startline="55" endline="57">
{
    getConnection ().connectEnd (c);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeConnectionEndHandle.java" startline="63" endline="65">
{
    getConnection ().endPoint (x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeConnectionEndHandle.java" startline="71" endline="73">
{
    return getConnection ().endPoint ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeConnectionEndHandle.java" startline="79" endline="81">
{
    return new ChangeConnectionEndHandle.UndoActivity (newView);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeConnectionEndHandle.java" startline="86" endline="88">
{
    super (newView);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeConnectionEndHandle.java" startline="91" endline="95">
{
    Connector tempEndConnector = connection.getEndConnector ();
    connection.connectEnd (getOldConnector ());
    return tempEndConnector;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeConnectionHandle.java" startline="41" endline="45">
{
    super (owner);
    setConnection ((ConnectionFigure) owner ());
    setTargetFigure (null);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeConnectionHandle.java" startline="72" endline="78">
{
    if (target () == getConnection ().getStartConnector ()) {
        return getConnection ().getEndConnector ();
    }

    return getConnection ().getStartConnector ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeConnectionHandle.java" startline="74" endline="76">
{
    return getConnection ().getEndConnector ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeConnectionHandle.java" startline="84" endline="92">
{
    fOriginalTarget = target ();
    fStart = new Point (x, y);
    setUndoActivity (createUndoActivity (view));
    ((ChangeConnectionHandle.UndoActivity) getUndoActivity ()).setOldConnector (target ());
    disconnect ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeConnectionHandle.java" startline="98" endline="121">
{
    Point p = new Point (x, y);
    Figure f = findConnectableFigure (x, y, view.drawing ());
    if (f != getTargetFigure ()) {
        if (getTargetFigure () != null) {
            getTargetFigure ().connectorVisibility (false, null);
        }

        setTargetFigure (f);
        if (getTargetFigure () != null) {
            getTargetFigure ().connectorVisibility (true, getConnection ());
        }

    }

    Connector target = findConnectionTarget (p.x, p.y, view.drawing ());
    if (target != null) {
        p = Geom.center (target.displayBox ());
    }

    setPoint (p.x, p.y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeConnectionHandle.java" startline="103" endline="113">
{
    if (getTargetFigure () != null) {
        getTargetFigure ().connectorVisibility (false, null);
    }

    setTargetFigure (f);
    if (getTargetFigure () != null) {
        getTargetFigure ().connectorVisibility (true, getConnection ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeConnectionHandle.java" startline="105" endline="107">
{
    getTargetFigure ().connectorVisibility (false, null);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeConnectionHandle.java" startline="110" endline="112">
{
    getTargetFigure ().connectorVisibility (true, getConnection ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeConnectionHandle.java" startline="117" endline="119">
{
    p = Geom.center (target.displayBox ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeConnectionHandle.java" startline="128" endline="158">
{
    Connector target = findConnectionTarget (x, y, view.drawing ());
    if (target == null) {
        target = fOriginalTarget;
    }

    setPoint (x, y);
    connect (target);
    getConnection ().updateConnection ();
    Connector oldConnector = ((ChangeConnectionHandle.UndoActivity) getUndoActivity ()).getOldConnector ();
    if ((oldConnector == null) || (target () == null) || (oldConnector.owner () == target ().owner ())) {
        setUndoActivity (null);
    }
    else {
        getUndoActivity ().setAffectedFigures (new SingleFigureEnumerator (getConnection ()));
    }

    if (getTargetFigure () != null) {
        getTargetFigure ().connectorVisibility (false, null);
        setTargetFigure (null);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeConnectionHandle.java" startline="131" endline="133">
{
    target = fOriginalTarget;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeConnectionHandle.java" startline="145" endline="147">
{
    setUndoActivity (null);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeConnectionHandle.java" startline="149" endline="151">
{
    getUndoActivity ().setAffectedFigures (new SingleFigureEnumerator (getConnection ()));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeConnectionHandle.java" startline="154" endline="157">
{
    getTargetFigure ().connectorVisibility (false, null);
    setTargetFigure (null);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeConnectionHandle.java" startline="161" endline="172">
{
    Figure target = findConnectableFigure (x, y, drawing);
    if ((target != null) && target.canConnect () && target != fOriginalTarget && ! target.includes (owner ()) && getConnection ().canConnect (source ().owner (), target)) {
        return findConnector (x, y, target);
    }

    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeConnectionHandle.java" startline="168" endline="170">
{
    return findConnector (x, y, target);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeConnectionHandle.java" startline="175" endline="177">
{
    return f.connectorAt (x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeConnectionHandle.java" startline="183" endline="191">
{
    Rectangle r = displayBox ();
    g.setColor (Color.green);
    g.fillRect (r.x, r.y, r.width, r.height);
    g.setColor (Color.black);
    g.drawRect (r.x, r.y, r.width, r.height);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeConnectionHandle.java" startline="194" endline="208">
{
    FigureEnumeration fe = drawing.figuresReverse ();
    while (fe.hasNextFigure ()) {
        Figure figure = fe.nextFigure ();
        if (! figure.includes (getConnection ()) && figure.canConnect ()) {
            if (figure.containsPoint (x, y)) {
                return figure;
            }

        }

    }

    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeConnectionHandle.java" startline="197" endline="206">
{
    Figure figure = fe.nextFigure ();
    if (! figure.includes (getConnection ()) && figure.canConnect ()) {
        if (figure.containsPoint (x, y)) {
            return figure;
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeConnectionHandle.java" startline="200" endline="205">
{
    if (figure.containsPoint (x, y)) {
        return figure;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeConnectionHandle.java" startline="202" endline="204">
{
    return figure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeConnectionHandle.java" startline="211" endline="213">
{
    myConnection = newConnection;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeConnectionHandle.java" startline="216" endline="218">
{
    return myConnection;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeConnectionHandle.java" startline="221" endline="223">
{
    myTarget = newTarget;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeConnectionHandle.java" startline="226" endline="228">
{
    return myTarget;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeConnectionHandle.java" startline="240" endline="244">
{
    super (newView);
    setUndoable (true);
    setRedoable (true);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeConnectionHandle.java" startline="247" endline="255">
{
    if (! super.undo ()) {
        return false;
    }

    swapConnectors ();
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeConnectionHandle.java" startline="249" endline="251">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeConnectionHandle.java" startline="258" endline="267">
{
    if (! isRedoable ()) {
        return false;
    }

    swapConnectors ();
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeConnectionHandle.java" startline="261" endline="263">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeConnectionHandle.java" startline="270" endline="278">
{
    FigureEnumeration fe = getAffectedFigures ();
    if (fe.hasNextFigure ()) {
        ConnectionFigure connection = (ConnectionFigure) fe.nextFigure ();
        setOldConnector (replaceConnector (connection));
        connection.updateConnection ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeConnectionHandle.java" startline="273" endline="277">
{
    ConnectionFigure connection = (ConnectionFigure) fe.nextFigure ();
    setOldConnector (replaceConnector (connection));
    connection.updateConnection ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeConnectionHandle.java" startline="283" endline="285">
{
    myOldConnector = newOldConnector;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeConnectionHandle.java" startline="288" endline="290">
{
    return myOldConnector;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeConnectionStartHandle.java" startline="32" endline="34">
{
    super (owner);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeConnectionStartHandle.java" startline="40" endline="42">
{
    return getConnection ().getStartConnector ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeConnectionStartHandle.java" startline="48" endline="50">
{
    getConnection ().disconnectStart ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeConnectionStartHandle.java" startline="56" endline="58">
{
    getConnection ().connectStart (c);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeConnectionStartHandle.java" startline="64" endline="66">
{
    getConnection ().startPoint (x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeConnectionStartHandle.java" startline="72" endline="74">
{
    return getConnection ().startPoint ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeConnectionStartHandle.java" startline="80" endline="82">
{
    return new ChangeConnectionStartHandle.UndoActivity (newView);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeConnectionStartHandle.java" startline="87" endline="89">
{
    super (newView);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChangeConnectionStartHandle.java" startline="92" endline="96">
{
    Connector tempStartConnector = connection.getStartConnector ();
    connection.connectStart (getOldConnector ());
    return tempStartConnector;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChopBoxConnector.java" startline="36" endline="37">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChopBoxConnector.java" startline="40" endline="42">
{
    super (owner);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChopBoxConnector.java" startline="45" endline="60">
{
    Figure startFigure = connection.getStartConnector ().owner ();
    Rectangle r2 = connection.getEndConnector ().displayBox ();
    Point r2c = null;
    if (connection.pointCount () == 2) {
        r2c = new Point (r2.x + r2.width / 2, r2.y + r2.height / 2);
    }
    else {
        r2c = connection.pointAt (1);
    }

    return chop (startFigure, r2c);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChopBoxConnector.java" startline="51" endline="53">
{
    r2c = new Point (r2.x + r2.width / 2, r2.y + r2.height / 2);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChopBoxConnector.java" startline="55" endline="57">
{
    r2c = connection.pointAt (1);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChopBoxConnector.java" startline="63" endline="78">
{
    Figure endFigure = connection.getEndConnector ().owner ();
    Rectangle r1 = connection.getStartConnector ().displayBox ();
    Point r1c = null;
    if (connection.pointCount () == 2) {
        r1c = new Point (r1.x + r1.width / 2, r1.y + r1.height / 2);
    }
    else {
        r1c = connection.pointAt (connection.pointCount () - 2);
    }

    return chop (endFigure, r1c);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChopBoxConnector.java" startline="69" endline="71">
{
    r1c = new Point (r1.x + r1.width / 2, r1.y + r1.height / 2);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChopBoxConnector.java" startline="73" endline="75">
{
    r1c = connection.pointAt (connection.pointCount () - 2);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ChopBoxConnector.java" startline="81" endline="84">
{
    Rectangle r = target.displayBox ();
    return Geom.angleToPoint (r, (Geom.pointToAngle (r, from)));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="59" endline="63">
{
    fFigures = CollectionsFactory.current ().createList ();
    _nLowestZ = 0;
    _nHighestZ = 0;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="73" endline="82">
{
    if (! containsFigure (figure)) {
        figure.setZValue (++ _nHighestZ);
        fFigures.add (figure);
        figure.addToContainer (this);
        _addToQuadTree (figure);
    }

    return figure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="75" endline="80">
{
    figure.setZValue (++ _nHighestZ);
    fFigures.add (figure);
    figure.addToContainer (this);
    _addToQuadTree (figure);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="91" endline="93">
{
    addAll (new FigureEnumerator (newFigures));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="102" endline="107">
{
    while (fe.hasNextFigure ()) {
        add (fe.nextFigure ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="104" endline="106">
{
    add (fe.nextFigure ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="117" endline="124">
{
    Figure orphanedFigure = orphan (figure);
    if (orphanedFigure != null) {
        orphanedFigure.release ();
    }

    return orphanedFigure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="120" endline="122">
{
    orphanedFigure.release ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="133" endline="135">
{
    removeAll (new FigureEnumerator (figures));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="142" endline="147">
{
    while (fe.hasNextFigure ()) {
        remove (fe.nextFigure ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="144" endline="146">
{
    remove (fe.nextFigure ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="154" endline="166">
{
    FigureEnumeration fe = figures ();
    while (fe.hasNextFigure ()) {
        Figure figure = fe.nextFigure ();
        figure.removeFromContainer (this);
    }

    fFigures.clear ();
    _clearQuadTree ();
    _nLowestZ = 0;
    _nHighestZ = 0;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="157" endline="160">
{
    Figure figure = fe.nextFigure ();
    figure.removeFromContainer (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="176" endline="181">
{
    figure.removeFromContainer (this);
    fFigures.remove (figure);
    _removeFromQuadTree (figure);
    return figure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="191" endline="193">
{
    orphanAll (new FigureEnumerator (newFigures));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="196" endline="201">
{
    while (fe.hasNextFigure ()) {
        orphan (fe.nextFigure ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="198" endline="200">
{
    orphan (fe.nextFigure ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="212" endline="224">
{
    int index = fFigures.indexOf (figure);
    if (index != - 1) {
        replacement.setZValue (figure.getZValue ());
        replacement.addToContainer (this);
        figure.removeFromContainer (this);
        fFigures.set (index, replacement);
        figure.changed ();
        replacement.changed ();
    }

    return replacement;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="215" endline="222">
{
    replacement.setZValue (figure.getZValue ());
    replacement.addToContainer (this);
    figure.removeFromContainer (this);
    fFigures.set (index, replacement);
    figure.changed ();
    replacement.changed ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="232" endline="241">
{
    if (containsFigure (figure)) {
        fFigures.remove (figure);
        fFigures.add (0, figure);
        _nLowestZ --;
        figure.setZValue (_nLowestZ);
        figure.changed ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="234" endline="240">
{
    fFigures.remove (figure);
    fFigures.add (0, figure);
    _nLowestZ --;
    figure.setZValue (_nLowestZ);
    figure.changed ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="249" endline="258">
{
    if (containsFigure (figure)) {
        fFigures.remove (figure);
        fFigures.add (figure);
        _nHighestZ ++;
        figure.setZValue (_nHighestZ);
        figure.changed ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="251" endline="257">
{
    fFigures.remove (figure);
    fFigures.add (figure);
    _nHighestZ ++;
    figure.setZValue (_nHighestZ);
    figure.changed ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="279" endline="304">
{
    if (containsFigure (figure)) {
        if (layerNr >= fFigures.size ()) {
            layerNr = fFigures.size () - 1;
        }

        Figure layerFigure = getFigureFromLayer (layerNr);
        int layerFigureZValue = layerFigure.getZValue ();
        int figureLayer = getLayer (figure);
        if (figureLayer < layerNr) {
            assignFiguresToPredecessorZValue (figureLayer + 1, layerNr);
        }
        else if (figureLayer > layerNr) {
            assignFiguresToSuccessorZValue (layerNr, figureLayer - 1);
        }

        fFigures.remove (figure);
        fFigures.add (layerNr, figure);
        figure.setZValue (layerFigureZValue);
        figure.changed ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="281" endline="303">
{
    if (layerNr >= fFigures.size ()) {
        layerNr = fFigures.size () - 1;
    }

    Figure layerFigure = getFigureFromLayer (layerNr);
    int layerFigureZValue = layerFigure.getZValue ();
    int figureLayer = getLayer (figure);
    if (figureLayer < layerNr) {
        assignFiguresToPredecessorZValue (figureLayer + 1, layerNr);
    }
    else if (figureLayer > layerNr) {
        assignFiguresToSuccessorZValue (layerNr, figureLayer - 1);
    }

    fFigures.remove (figure);
    fFigures.add (layerNr, figure);
    figure.setZValue (layerFigureZValue);
    figure.changed ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="283" endline="285">
{
    layerNr = fFigures.size () - 1;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="291" endline="293">
{
    assignFiguresToPredecessorZValue (figureLayer + 1, layerNr);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="295" endline="297">
{
    assignFiguresToSuccessorZValue (layerNr, figureLayer - 1);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="307" endline="321">
{
    if (upperBound >= fFigures.size ()) {
        upperBound = fFigures.size () - 1;
    }

    for (int i = upperBound;
    i >= lowerBound; i --) {
        Figure currentFigure = (Figure) fFigures.get (i);
        Figure predecessorFigure = (Figure) fFigures.get (i - 1);
        currentFigure.setZValue (predecessorFigure.getZValue ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="311" endline="313">
{
    upperBound = fFigures.size () - 1;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="316" endline="320">
{
    Figure currentFigure = (Figure) fFigures.get (i);
    Figure predecessorFigure = (Figure) fFigures.get (i - 1);
    currentFigure.setZValue (predecessorFigure.getZValue ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="324" endline="336">
{
    if (upperBound >= fFigures.size ()) {
        upperBound = fFigures.size () - 1;
    }

    for (int i = upperBound;
    i >= lowerBound; i --) {
        Figure currentFigure = (Figure) fFigures.get (i);
        Figure successorFigure = (Figure) fFigures.get (i + 1);
        currentFigure.setZValue (successorFigure.getZValue ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="326" endline="328">
{
    upperBound = fFigures.size () - 1;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="331" endline="335">
{
    Figure currentFigure = (Figure) fFigures.get (i);
    Figure successorFigure = (Figure) fFigures.get (i + 1);
    currentFigure.setZValue (successorFigure.getZValue ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="348" endline="357">
{
    if (! containsFigure (figure)) {
        return - 1;
    }
    else {
        return fFigures.indexOf (figure);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="350" endline="352">
{
    return - 1;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="354" endline="356">
{
    return fFigures.indexOf (figure);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="368" endline="377">
{
    if ((layerNr >= 0) && (layerNr < fFigures.size ())) {
        return (Figure) fFigures.get (layerNr);
    }
    else {
        return null;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="370" endline="372">
{
    return (Figure) fFigures.get (layerNr);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="374" endline="376">
{
    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="384" endline="386">
{
    draw (g, figures ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="393" endline="398">
{
    while (fe.hasNextFigure ()) {
        fe.nextFigure ().draw (g);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="395" endline="397">
{
    fe.nextFigure ().draw (g);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="404" endline="406">
{
    return (Figure) fFigures.get (i);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="416" endline="418">
{
    return new FigureEnumerator (CollectionsFactory.current ().createList (fFigures));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="426" endline="456">
{
    if (_theQuadTree != null) {
        FigureEnumeration fe = _theQuadTree.getAllWithin (new Bounds (viewRectangle).asRectangle2D ());
        List l2 = CollectionsFactory.current ().createList ();
        while (fe.hasNextFigure ()) {
            Figure f = fe.nextFigure ();
            l2.add (new OrderedFigureElement (f, f.getZValue ()));
        }

        Collections.sort (l2);
        List l3 = CollectionsFactory.current ().createList ();
        for (Iterator iter = l2.iterator ();
        iter.hasNext ();) {
            OrderedFigureElement ofe = (OrderedFigureElement) iter.next ();
            l3.add (ofe.getFigure ());
        }

        return new FigureEnumerator (l3);
    }

    return figures ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="428" endline="453">
{
    FigureEnumeration fe = _theQuadTree.getAllWithin (new Bounds (viewRectangle).asRectangle2D ());
    List l2 = CollectionsFactory.current ().createList ();
    while (fe.hasNextFigure ()) {
        Figure f = fe.nextFigure ();
        l2.add (new OrderedFigureElement (f, f.getZValue ()));
    }

    Collections.sort (l2);
    List l3 = CollectionsFactory.current ().createList ();
    for (Iterator iter = l2.iterator ();
    iter.hasNext ();) {
        OrderedFigureElement ofe = (OrderedFigureElement) iter.next ();
        l3.add (ofe.getFigure ());
    }

    return new FigureEnumerator (l3);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="436" endline="440">
{
    Figure f = fe.nextFigure ();
    l2.add (new OrderedFigureElement (f, f.getZValue ()));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="447" endline="450">
{
    OrderedFigureElement ofe = (OrderedFigureElement) iter.next ();
    l3.add (ofe.getFigure ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="462" endline="464">
{
    return fFigures.size ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="470" endline="472">
{
    return fFigures.contains (checkFigure);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="479" endline="481">
{
    return new ReverseFigureEnumerator (CollectionsFactory.current ().createList (fFigures));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="488" endline="499">
{
    FigureEnumeration fe = figuresReverse ();
    while (fe.hasNextFigure ()) {
        Figure figure = fe.nextFigure ();
        if (figure.containsPoint (x, y)) {
            return figure;
        }

    }

    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="491" endline="497">
{
    Figure figure = fe.nextFigure ();
    if (figure.containsPoint (x, y)) {
        return figure;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="494" endline="496">
{
    return figure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="505" endline="517">
{
    FigureEnumeration fe = figuresReverse ();
    while (fe.hasNextFigure ()) {
        Figure figure = fe.nextFigure ();
        Rectangle fr = figure.displayBox ();
        if (r.intersects (fr)) {
            return figure;
        }

    }

    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="508" endline="515">
{
    Figure figure = fe.nextFigure ();
    Rectangle fr = figure.displayBox ();
    if (r.intersects (fr)) {
        return figure;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="512" endline="514">
{
    return figure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="529" endline="545">
{
    if (without == null) {
        return findFigure (x, y);
    }

    FigureEnumeration fe = figuresReverse ();
    while (fe.hasNextFigure ()) {
        Figure figure = fe.nextFigure ();
        if (figure.containsPoint (x, y) && ! figure.includes (without)) {
            return figure;
        }

    }

    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="531" endline="533">
{
    return findFigure (x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="537" endline="543">
{
    Figure figure = fe.nextFigure ();
    if (figure.containsPoint (x, y) && ! figure.includes (without)) {
        return figure;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="540" endline="542">
{
    return figure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="554" endline="571">
{
    if (without == null) {
        return findFigure (r);
    }

    FigureEnumeration fe = figuresReverse ();
    while (fe.hasNextFigure ()) {
        Figure figure = fe.nextFigure ();
        Rectangle fr = figure.displayBox ();
        if (r.intersects (fr) && ! figure.includes (without)) {
            return figure;
        }

    }

    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="556" endline="558">
{
    return findFigure (r);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="562" endline="569">
{
    Figure figure = fe.nextFigure ();
    Rectangle fr = figure.displayBox ();
    if (r.intersects (fr) && ! figure.includes (without)) {
        return figure;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="566" endline="568">
{
    return figure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="580" endline="600">
{
    FigureEnumeration fe = figuresReverse ();
    while (fe.hasNextFigure ()) {
        Figure figure = fe.nextFigure ().findFigureInside (x, y);
        if (figure != null) {
            return figure;
        }

    }

    if (containsPoint (x, y)) {
        return this;
    }
    else {
        return null;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="583" endline="589">
{
    Figure figure = fe.nextFigure ().findFigureInside (x, y);
    if (figure != null) {
        return figure;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="586" endline="588">
{
    return figure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="593" endline="595">
{
    return this;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="597" endline="599">
{
    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="609" endline="637">
{
    if (without == null) {
        return findFigureInside (x, y);
    }

    FigureEnumeration fe = figuresReverse ();
    while (fe.hasNextFigure ()) {
        Figure figure = fe.nextFigure ();
        if (figure != without) {
            Figure found = figure.findFigureInside (x, y);
            if ((found != null) && ! figure.includes (without)) {
                return found;
            }

        }

    }

    if (containsPoint (x, y)) {
        return this;
    }
    else {
        return null;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="611" endline="613">
{
    return findFigureInside (x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="617" endline="627">
{
    Figure figure = fe.nextFigure ();
    if (figure != without) {
        Figure found = figure.findFigureInside (x, y);
        if ((found != null) && ! figure.includes (without)) {
            return found;
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="620" endline="626">
{
    Figure found = figure.findFigureInside (x, y);
    if ((found != null) && ! figure.includes (without)) {
        return found;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="623" endline="625">
{
    return found;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="630" endline="632">
{
    return this;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="634" endline="636">
{
    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="645" endline="661">
{
    if (super.includes (figure)) {
        return true;
    }

    FigureEnumeration fe = figures ();
    while (fe.hasNextFigure ()) {
        Figure f = fe.nextFigure ();
        if (f.includes (figure)) {
            return true;
        }

    }

    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="647" endline="649">
{
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="653" endline="659">
{
    Figure f = fe.nextFigure ();
    if (f.includes (figure)) {
        return true;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="656" endline="658">
{
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="670" endline="676">
{
    FigureEnumeration fe = figures ();
    while (fe.hasNextFigure ()) {
        fe.nextFigure ().moveBy (x, y);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="673" endline="675">
{
    fe.nextFigure ().moveBy (x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="682" endline="691">
{
    FigureEnumeration fe = figures ();
    while (fe.hasNextFigure ()) {
        Figure figure = fe.nextFigure ();
        figure.release ();
    }

    super.release ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="685" endline="688">
{
    Figure figure = fe.nextFigure ();
    figure.release ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="698" endline="703">
{
    if (listener () != null) {
        listener ().figureInvalidated (e);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="700" endline="702">
{
    listener ().figureInvalidated (e);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="710" endline="715">
{
    if (listener () != null) {
        listener ().figureRequestRemove (new FigureChangeEvent (this));
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="712" endline="714">
{
    listener ().figureRequestRemove (new FigureChangeEvent (this));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="722" endline="727">
{
    if (listener () != null) {
        listener ().figureRequestUpdate (e);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="724" endline="726">
{
    listener ().figureRequestUpdate (e);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="730" endline="733">
{
    _removeFromQuadTree (e.getFigure ());
    _addToQuadTree (e.getFigure ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="736" endline="741">
{
    if (listener () != null) {
        listener ().figureRemoved (e);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="738" endline="740">
{
    listener ().figureRemoved (e);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="747" endline="755">
{
    super.write (dw);
    dw.writeInt (figureCount ());
    FigureEnumeration fe = figures ();
    while (fe.hasNextFigure ()) {
        dw.writeStorable (fe.nextFigure ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="752" endline="754">
{
    dw.writeStorable (fe.nextFigure ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="761" endline="770">
{
    super.read (dr);
    int size = dr.readInt ();
    fFigures = CollectionsFactory.current ().createList (size);
    for (int i = 0;
    i < size; i ++) {
        add ((Figure) dr.readStorable ());
    }

    init (displayBox ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="766" endline="768">
{
    add ((Figure) dr.readStorable ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="774" endline="786">
{
    s.defaultReadObject ();
    FigureEnumeration fe = figures ();
    while (fe.hasNextFigure ()) {
        Figure figure = fe.nextFigure ();
        figure.addToContainer (this);
    }

    init (new Rectangle (0, 0));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="780" endline="783">
{
    Figure figure = fe.nextFigure ();
    figure.addToContainer (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="800" endline="808">
{
    _theQuadTree = new QuadTree (new Bounds (viewRectangle).asRectangle2D ());
    FigureEnumeration fe = figures ();
    while (fe.hasNextFigure ()) {
        _addToQuadTree (fe.nextFigure ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="805" endline="807">
{
    _addToQuadTree (fe.nextFigure ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="811" endline="829">
{
    if (_theQuadTree != null) {
        Rectangle r = f.displayBox ();
        if (r.height == 0) {
            r.grow (0, 1);
        }

        if (r.width == 0) {
            r.grow (1, 0);
        }

        _theQuadTree.add (f, new Bounds (r).asRectangle2D ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="813" endline="828">
{
    Rectangle r = f.displayBox ();
    if (r.height == 0) {
        r.grow (0, 1);
    }

    if (r.width == 0) {
        r.grow (1, 0);
    }

    _theQuadTree.add (f, new Bounds (r).asRectangle2D ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="819" endline="821">
{
    r.grow (0, 1);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="823" endline="825">
{
    r.grow (1, 0);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="832" endline="837">
{
    if (_theQuadTree != null) {
        _theQuadTree.remove (f);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="834" endline="836">
{
    _theQuadTree.remove (f);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="840" endline="845">
{
    if (_theQuadTree != null) {
        _theQuadTree.clear ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CompositeFigure.java" startline="842" endline="844">
{
    _theQuadTree.clear ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionHandle.java" startline="57" endline="60">
{
    super (owner, l);
    fPrototype = prototype;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionHandle.java" startline="66" endline="72">
{
    setConnection (createConnection ());
    Point p = locate ();
    getConnection ().startPoint (p.x, p.y);
    getConnection ().endPoint (p.x, p.y);
    view.drawing ().add (getConnection ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionHandle.java" startline="78" endline="101">
{
    Point p = new Point (x, y);
    Figure f = findConnectableFigure (x, y, view.drawing ());
    if (f != getTargetFigure ()) {
        if (getTargetFigure () != null) {
            getTargetFigure ().connectorVisibility (false, null);
        }

        setTargetFigure (f);
        if (getTargetFigure () != null) {
            getTargetFigure ().connectorVisibility (true, getConnection ());
        }

    }

    Connector target = findConnectionTarget (p.x, p.y, view.drawing ());
    if (target != null) {
        p = Geom.center (target.displayBox ());
    }

    getConnection ().endPoint (p.x, p.y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionHandle.java" startline="83" endline="93">
{
    if (getTargetFigure () != null) {
        getTargetFigure ().connectorVisibility (false, null);
    }

    setTargetFigure (f);
    if (getTargetFigure () != null) {
        getTargetFigure ().connectorVisibility (true, getConnection ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionHandle.java" startline="85" endline="87">
{
    getTargetFigure ().connectorVisibility (false, null);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionHandle.java" startline="90" endline="92">
{
    getTargetFigure ().connectorVisibility (true, getConnection ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionHandle.java" startline="97" endline="99">
{
    p = Geom.center (target.displayBox ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionHandle.java" startline="108" endline="126">
{
    Connector target = findConnectionTarget (x, y, view.drawing ());
    if (target != null) {
        getConnection ().connectStart (startConnector ());
        getConnection ().connectEnd (target);
        getConnection ().updateConnection ();
    }
    else {
        view.drawing ().remove (getConnection ());
    }

    setConnection (null);
    if (getTargetFigure () != null) {
        getTargetFigure ().connectorVisibility (false, null);
        setTargetFigure (null);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionHandle.java" startline="111" endline="115">
{
    getConnection ().connectStart (startConnector ());
    getConnection ().connectEnd (target);
    getConnection ().updateConnection ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionHandle.java" startline="117" endline="119">
{
    view.drawing ().remove (getConnection ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionHandle.java" startline="122" endline="125">
{
    getTargetFigure ().connectorVisibility (false, null);
    setTargetFigure (null);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionHandle.java" startline="129" endline="132">
{
    Point p = locate ();
    return owner ().connectorAt (p.x, p.y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionHandle.java" startline="139" endline="141">
{
    return (ConnectionFigure) fPrototype.clone ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionHandle.java" startline="147" endline="156">
{
    Figure target = findConnectableFigure (x, y, drawing);
    if ((target != null) && target.canConnect () && ! target.includes (owner ()) && getConnection ().canConnect (owner (), target)) {
        return findConnector (x, y, target);
    }

    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionHandle.java" startline="152" endline="154">
{
    return findConnector (x, y, target);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionHandle.java" startline="159" endline="171">
{
    FigureEnumeration fe = drawing.figuresReverse ();
    while (fe.hasNextFigure ()) {
        Figure figure = fe.nextFigure ();
        if (! figure.includes (getConnection ()) && figure.canConnect () && figure.containsPoint (x, y)) {
            return figure;
        }

    }

    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionHandle.java" startline="162" endline="169">
{
    Figure figure = fe.nextFigure ();
    if (! figure.includes (getConnection ()) && figure.canConnect () && figure.containsPoint (x, y)) {
        return figure;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionHandle.java" startline="166" endline="168">
{
    return figure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionHandle.java" startline="174" endline="176">
{
    return f.connectorAt (x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionHandle.java" startline="184" endline="188">
{
    Rectangle r = displayBox ();
    g.setColor (Color.blue);
    g.drawOval (r.x, r.y, r.width, r.height);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionHandle.java" startline="191" endline="193">
{
    myConnection = newConnection;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionHandle.java" startline="196" endline="198">
{
    return myConnection;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionHandle.java" startline="201" endline="203">
{
    return myTargetFigure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionHandle.java" startline="206" endline="208">
{
    myTargetFigure = newTargetFigure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="81" endline="84">
{
    super (newDrawingEditor);
    fPrototype = newPrototype;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="90" endline="92">
{
    trackConnectors (e, x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="100" endline="134">
{
    super.mouseDown (e, x, y);
    int ex = e.getX ();
    int ey = e.getY ();
    setTargetFigure (findConnectionStart (ex, ey, drawing ()));
    if (getTargetFigure () != null) {
        setStartConnector (findConnector (ex, ey, getTargetFigure ()));
        if (getStartConnector () != null) {
            setConnection (createConnection ());
            getConnection ().startPoint (ex, ey);
            getConnection ().endPoint (ex, ey);
            setAddedFigure (view ().add (getConnection ()));
        }

    }
    else {
        ConnectionFigure connection = findConnection (ex, ey, drawing ());
        if (connection != null) {
            if (! connection.joinSegments (ex, ey)) {
                fSplitPoint = connection.splitSegment (ex, ey);
                fEditedConnection = connection;
            }
            else {
                fEditedConnection = null;
            }

        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="106" endline="115">
{
    setStartConnector (findConnector (ex, ey, getTargetFigure ()));
    if (getStartConnector () != null) {
        setConnection (createConnection ());
        getConnection ().startPoint (ex, ey);
        getConnection ().endPoint (ex, ey);
        setAddedFigure (view ().add (getConnection ()));
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="109" endline="114">
{
    setConnection (createConnection ());
    getConnection ().startPoint (ex, ey);
    getConnection ().endPoint (ex, ey);
    setAddedFigure (view ().add (getConnection ()));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="117" endline="133">
{
    ConnectionFigure connection = findConnection (ex, ey, drawing ());
    if (connection != null) {
        if (! connection.joinSegments (ex, ey)) {
            fSplitPoint = connection.splitSegment (ex, ey);
            fEditedConnection = connection;
        }
        else {
            fEditedConnection = null;
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="122" endline="132">
{
    if (! connection.joinSegments (ex, ey)) {
        fSplitPoint = connection.splitSegment (ex, ey);
        fEditedConnection = connection;
    }
    else {
        fEditedConnection = null;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="124" endline="127">
{
    fSplitPoint = connection.splitSegment (ex, ey);
    fEditedConnection = connection;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="129" endline="131">
{
    fEditedConnection = null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="140" endline="156">
{
    Point p = new Point (e.getX (), e.getY ());
    if (getConnection () != null) {
        trackConnectors (e, x, y);
        if (getTargetConnector () != null) {
            p = Geom.center (getTargetConnector ().displayBox ());
        }

        getConnection ().endPoint (p.x, p.y);
    }
    else if (fEditedConnection != null) {
        Point pp = new Point (x, y);
        fEditedConnection.setPointAt (pp, fSplitPoint);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="143" endline="150">
{
    trackConnectors (e, x, y);
    if (getTargetConnector () != null) {
        p = Geom.center (getTargetConnector ().displayBox ());
    }

    getConnection ().endPoint (p.x, p.y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="146" endline="148">
{
    p = Geom.center (getTargetConnector ().displayBox ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="152" endline="155">
{
    Point pp = new Point (x, y);
    fEditedConnection.setPointAt (pp, fSplitPoint);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="163" endline="194">
{
    Figure c = null;
    if (getStartConnector () != null) {
        c = findTarget (e.getX (), e.getY (), drawing ());
    }

    if (c != null) {
        setEndConnector (findConnector (e.getX (), e.getY (), c));
        if (getEndConnector () != null) {
            getConnection ().connectStart (getStartConnector ());
            getConnection ().connectEnd (getEndConnector ());
            getConnection ().updateConnection ();
            setUndoActivity (createUndoActivity ());
            getUndoActivity ().setAffectedFigures (new SingleFigureEnumerator (getAddedFigure ()));
        }

    }
    else if (getConnection () != null) {
        view ().remove (getConnection ());
    }

    setConnection (null);
    setStartConnector (null);
    setEndConnector (null);
    setAddedFigure (null);
    editor ().toolDone ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="166" endline="168">
{
    c = findTarget (e.getX (), e.getY (), drawing ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="171" endline="183">
{
    setEndConnector (findConnector (e.getX (), e.getY (), c));
    if (getEndConnector () != null) {
        getConnection ().connectStart (getStartConnector ());
        getConnection ().connectEnd (getEndConnector ());
        getConnection ().updateConnection ();
        setUndoActivity (createUndoActivity ());
        getUndoActivity ().setAffectedFigures (new SingleFigureEnumerator (getAddedFigure ()));
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="174" endline="182">
{
    getConnection ().connectStart (getStartConnector ());
    getConnection ().connectEnd (getEndConnector ());
    getConnection ().updateConnection ();
    setUndoActivity (createUndoActivity ());
    getUndoActivity ().setAffectedFigures (new SingleFigureEnumerator (getAddedFigure ()));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="185" endline="187">
{
    view ().remove (getConnection ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="197" endline="203">
{
    super.deactivate ();
    if (getTargetFigure () != null) {
        getTargetFigure ().connectorVisibility (false, null);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="200" endline="202">
{
    getTargetFigure ().connectorVisibility (false, null);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="210" endline="212">
{
    return (ConnectionFigure) fPrototype.clone ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="218" endline="220">
{
    return findConnectableFigure (x, y, drawing);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="230" endline="243">
{
    Figure target = findConnectableFigure (x, y, drawing);
    Figure start = getStartConnector ().owner ();
    if (target != null && getConnection () != null && target.canConnect () && ! target.includes (start) && getConnection ().canConnect (start, target)) {
        return target;
    }

    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="239" endline="241">
{
    return target;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="249" endline="261">
{
    FigureEnumeration fe = drawing.figuresReverse ();
    while (fe.hasNextFigure ()) {
        Figure figure = fe.nextFigure ();
        figure = figure.findFigureInside (x, y);
        if (figure != null && (figure instanceof ConnectionFigure)) {
            return (ConnectionFigure) figure;
        }

    }

    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="252" endline="259">
{
    Figure figure = fe.nextFigure ();
    figure = figure.findFigureInside (x, y);
    if (figure != null && (figure instanceof ConnectionFigure)) {
        return (ConnectionFigure) figure;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="256" endline="258">
{
    return (ConnectionFigure) figure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="264" endline="266">
{
    myConnection = newConnection;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="272" endline="274">
{
    return myConnection;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="281" endline="331">
{
    Figure c = null;
    if (getStartConnector () == null) {
        c = findSource (x, y, getActiveDrawing ());
    }
    else {
        c = findTarget (x, y, getActiveDrawing ());
    }

    if (c != getTargetFigure ()) {
        if (getTargetFigure () != null) {
            getTargetFigure ().connectorVisibility (false, null);
        }

        setTargetFigure (c);
        if (getTargetFigure () != null) {
            getTargetFigure ().connectorVisibility (true, getConnection ());
        }

    }

    Connector cc = null;
    if (c != null) {
        cc = findConnector (e.getX (), e.getY (), c);
    }

    if (cc != getTargetConnector ()) {
        setTargetConnector (cc);
    }

    getActiveView ().checkDamage ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="288" endline="290">
{
    c = findSource (x, y, getActiveDrawing ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="292" endline="294">
{
    c = findTarget (x, y, getActiveDrawing ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="305" endline="315">
{
    if (getTargetFigure () != null) {
        getTargetFigure ().connectorVisibility (false, null);
    }

    setTargetFigure (c);
    if (getTargetFigure () != null) {
        getTargetFigure ().connectorVisibility (true, getConnection ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="307" endline="309">
{
    getTargetFigure ().connectorVisibility (false, null);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="312" endline="314">
{
    getTargetFigure ().connectorVisibility (true, getConnection ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="321" endline="323">
{
    cc = findConnector (e.getX (), e.getY (), c);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="325" endline="327">
{
    setTargetConnector (cc);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="334" endline="336">
{
    return f.connectorAt (x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="342" endline="349">
{
    Figure target = findConnectableFigure (x, y, drawing);
    if ((target != null) && target.canConnect ()) {
        return target;
    }

    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="345" endline="347">
{
    return target;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="356" endline="368">
{
    FigureEnumeration fe = drawing.figuresReverse ();
    while (fe.hasNextFigure ()) {
        Figure figure = fe.nextFigure ();
        if (! figure.includes (getConnection ()) && figure.canConnect () && figure.containsPoint (x, y)) {
            return figure;
        }

    }

    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="359" endline="366">
{
    Figure figure = fe.nextFigure ();
    if (! figure.includes (getConnection ()) && figure.canConnect () && figure.containsPoint (x, y)) {
        return figure;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="363" endline="365">
{
    return figure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="371" endline="373">
{
    myStartConnector = newStartConnector;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="376" endline="378">
{
    return myStartConnector;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="381" endline="383">
{
    myEndConnector = newEndConnector;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="386" endline="388">
{
    return myEndConnector;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="391" endline="393">
{
    myTargetConnector = newTargetConnector;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="396" endline="398">
{
    return myTargetConnector;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="401" endline="403">
{
    myTarget = newTarget;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="406" endline="408">
{
    return myTarget;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="415" endline="417">
{
    return myAddedFigure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="420" endline="422">
{
    myAddedFigure = newAddedFigure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="428" endline="430">
{
    return new ConnectionTool.UndoActivity (view (), getConnection ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="440" endline="447">
{
    super (newDrawingView);
    setConnection (newConnection);
    myStartConnector = getConnection ().getStartConnector ();
    myEndConnector = getConnection ().getEndConnector ();
    setUndoable (true);
    setRedoable (true);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="454" endline="472">
{
    if (! super.undo ()) {
        return false;
    }

    getConnection ().disconnectStart ();
    getConnection ().disconnectEnd ();
    FigureEnumeration fe = getAffectedFigures ();
    while (fe.hasNextFigure ()) {
        getDrawingView ().drawing ().orphan (fe.nextFigure ());
    }

    getDrawingView ().clearSelection ();
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="456" endline="458">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="465" endline="467">
{
    getDrawingView ().drawing ().orphan (fe.nextFigure ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="479" endline="492">
{
    if (! super.redo ()) {
        return false;
    }

    getConnection ().connectStart (myStartConnector);
    getConnection ().connectEnd (myEndConnector);
    getConnection ().updateConnection ();
    getDrawingView ().insertFigures (getAffectedFigures (), 0, 0, false);
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="481" endline="483">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="495" endline="497">
{
    myConnection = newConnection;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ConnectionTool.java" startline="503" endline="505">
{
    return myConnection;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CopyCommand.java" startline="33" endline="35">
{
    super (name, newDrawingEditor);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CopyCommand.java" startline="38" endline="41">
{
    super.execute ();
    copyFigures (view ().selection (), view ().selectionCount ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CopyCommand.java" startline="44" endline="46">
{
    return view ().selectionCount () > 0;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CreationTool.java" startline="61" endline="64">
{
    super (newDrawingEditor);
    setPrototypeFigure (prototype);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CreationTool.java" startline="71" endline="73">
{
    this (newDrawingEditor, null);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CreationTool.java" startline="79" endline="85">
{
    super.activate ();
    if (isUsable ()) {
        getActiveView ().setCursor (Cursor.getPredefinedCursor (Cursor.CROSSHAIR_CURSOR));
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CreationTool.java" startline="82" endline="84">
{
    getActiveView ().setCursor (Cursor.getPredefinedCursor (Cursor.CROSSHAIR_CURSOR));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CreationTool.java" startline="91" endline="96">
{
    super.mouseDown (e, x, y);
    setCreatedFigure (createFigure ());
    setAddedFigure (view ().add (getCreatedFigure ()));
    getAddedFigure ().displayBox (new Point (getAnchorX (), getAnchorY ()), new Point (getAnchorX (), getAnchorY ()));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CreationTool.java" startline="102" endline="108">
{
    if (getPrototypeFigure () == null) {
        throw new JHotDrawRuntimeException ("No protoype defined");
    }

    return (Figure) getPrototypeFigure ().clone ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CreationTool.java" startline="104" endline="106">
{
    throw new JHotDrawRuntimeException ("No protoype defined");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CreationTool.java" startline="114" endline="119">
{
    if (getAddedFigure () != null) {
        getAddedFigure ().displayBox (new Point (getAnchorX (), getAnchorY ()), new Point (x, y));
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CreationTool.java" startline="116" endline="118">
{
    getAddedFigure ().displayBox (new Point (getAnchorX (), getAnchorY ()), new Point (x, y));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CreationTool.java" startline="127" endline="148">
{
    if (getAddedFigure () != null) {
        if (getCreatedFigure ().isEmpty ()) {
            drawing ().remove (getAddedFigure ());
            setUndoActivity (null);
        }
        else {
            setUndoActivity (createUndoActivity ());
            getUndoActivity ().setAffectedFigures (new SingleFigureEnumerator (getAddedFigure ()));
        }

        setAddedFigure (null);
    }

    setCreatedFigure (null);
    editor ().toolDone ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CreationTool.java" startline="129" endline="145">
{
    if (getCreatedFigure ().isEmpty ()) {
        drawing ().remove (getAddedFigure ());
        setUndoActivity (null);
    }
    else {
        setUndoActivity (createUndoActivity ());
        getUndoActivity ().setAffectedFigures (new SingleFigureEnumerator (getAddedFigure ()));
    }

    setAddedFigure (null);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CreationTool.java" startline="131" endline="135">
{
    drawing ().remove (getAddedFigure ());
    setUndoActivity (null);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CreationTool.java" startline="137" endline="143">
{
    setUndoActivity (createUndoActivity ());
    getUndoActivity ().setAffectedFigures (new SingleFigureEnumerator (getAddedFigure ()));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CreationTool.java" startline="157" endline="159">
{
    myPrototypeFigure = newPrototypeFigure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CreationTool.java" startline="168" endline="170">
{
    return myPrototypeFigure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CreationTool.java" startline="176" endline="178">
{
    return fCreatedFigure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CreationTool.java" startline="184" endline="186">
{
    fCreatedFigure = newCreatedFigure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CreationTool.java" startline="193" endline="195">
{
    return myAddedFigure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CreationTool.java" startline="201" endline="203">
{
    myAddedFigure = newAddedFigure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CreationTool.java" startline="209" endline="211">
{
    return new PasteCommand.UndoActivity (view ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CutCommand.java" startline="35" endline="37">
{
    super (name, newDrawingEditor);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CutCommand.java" startline="40" endline="48">
{
    super.execute ();
    setUndoActivity (createUndoActivity ());
    getUndoActivity ().setAffectedFigures (view ().selection ());
    copyFigures (getUndoActivity ().getAffectedFigures (), view ().selectionCount ());
    deleteFigures (getUndoActivity ().getAffectedFigures ());
    view ().checkDamage ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CutCommand.java" startline="51" endline="53">
{
    return view ().selectionCount () > 0;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CutCommand.java" startline="59" endline="61">
{
    return new CutCommand.UndoActivity (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CutCommand.java" startline="68" endline="73">
{
    super (newCommand.view ());
    myCommand = newCommand;
    setUndoable (true);
    setRedoable (true);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CutCommand.java" startline="76" endline="88">
{
    if (super.undo () && getAffectedFigures ().hasNextFigure ()) {
        getDrawingView ().clearSelection ();
        setAffectedFigures (myCommand.insertFigures (getAffectedFigures (), 0, 0));
        return true;
    }

    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CutCommand.java" startline="78" endline="85">
{
    getDrawingView ().clearSelection ();
    setAffectedFigures (myCommand.insertFigures (getAffectedFigures (), 0, 0));
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CutCommand.java" startline="91" endline="101">
{
    if (isRedoable ()) {
        myCommand.copyFigures (getAffectedFigures (), getDrawingView ().selectionCount ());
        myCommand.deleteFigures (getAffectedFigures ());
        return true;
    }

    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/CutCommand.java" startline="94" endline="98">
{
    myCommand.copyFigures (getAffectedFigures (), getDrawingView ().selectionCount ());
    myCommand.deleteFigures (getAffectedFigures ());
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DecoratorFigure.java" startline="53" endline="55">
{
    initialize ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DecoratorFigure.java" startline="61" endline="64">
{
    initialize ();
    decorate (figure);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DecoratorFigure.java" startline="71" endline="72">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DecoratorFigure.java" startline="78" endline="80">
{
    return getDecoratedFigure ().connectionInsets ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DecoratorFigure.java" startline="86" endline="88">
{
    return getDecoratedFigure ().canConnect ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DecoratorFigure.java" startline="94" endline="96">
{
    return getDecoratedFigure ().containsPoint (x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DecoratorFigure.java" startline="102" endline="106">
{
    setDecoratedFigure (figure);
    getDecoratedFigure ().addToContainer (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DecoratorFigure.java" startline="112" endline="116">
{
    getDecoratedFigure ().removeFromContainer (this);
    removeDependendFigure (getDecoratedFigure ());
    return getDecoratedFigure ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DecoratorFigure.java" startline="119" endline="121">
{
    myDecoratedFigure = newDecoratedFigure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DecoratorFigure.java" startline="124" endline="126">
{
    return myDecoratedFigure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DecoratorFigure.java" startline="132" endline="134">
{
    return getDecoratedFigure ().displayBox ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DecoratorFigure.java" startline="140" endline="142">
{
    getDecoratedFigure ().basicDisplayBox (origin, corner);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DecoratorFigure.java" startline="148" endline="150">
{
    getDecoratedFigure ().draw (g);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DecoratorFigure.java" startline="156" endline="168">
{
    Figure foundFigure = getDecoratedFigure ().findFigureInside (x, y);
    if ((foundFigure != null) && (foundFigure == getDecoratedFigure ())) {
        return this;
    }
    else {
        return foundFigure;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DecoratorFigure.java" startline="161" endline="163">
{
    return this;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DecoratorFigure.java" startline="165" endline="167">
{
    return foundFigure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DecoratorFigure.java" startline="174" endline="176">
{
    return getDecoratedFigure ().handles ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DecoratorFigure.java" startline="182" endline="184">
{
    return (super.includes (figure) || getDecoratedFigure ().includes (figure));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DecoratorFigure.java" startline="190" endline="192">
{
    getDecoratedFigure ().moveBy (x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DecoratorFigure.java" startline="198" endline="200">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DecoratorFigure.java" startline="206" endline="210">
{
    super.release ();
    getDecoratedFigure ().removeFromContainer (this);
    getDecoratedFigure ().release ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DecoratorFigure.java" startline="217" endline="222">
{
    if (listener () != null) {
        listener ().figureInvalidated (e);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DecoratorFigure.java" startline="219" endline="221">
{
    listener ().figureInvalidated (e);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DecoratorFigure.java" startline="225" endline="226">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DecoratorFigure.java" startline="229" endline="230">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DecoratorFigure.java" startline="237" endline="242">
{
    if (listener () != null) {
        listener ().figureRequestUpdate (e);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DecoratorFigure.java" startline="239" endline="241">
{
    listener ().figureRequestUpdate (e);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DecoratorFigure.java" startline="249" endline="254">
{
    if (listener () != null) {
        listener ().figureRequestRemove (new FigureChangeEvent (this));
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DecoratorFigure.java" startline="251" endline="253">
{
    listener ().figureRequestRemove (new FigureChangeEvent (this));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DecoratorFigure.java" startline="260" endline="262">
{
    return getDecoratedFigure ().figures ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DecoratorFigure.java" startline="268" endline="270">
{
    return getDecoratedFigure ().decompose ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DecoratorFigure.java" startline="278" endline="280">
{
    getDecoratedFigure ().setAttribute (name, value);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DecoratorFigure.java" startline="286" endline="288">
{
    getDecoratedFigure ().setAttribute (attributeConstant, value);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DecoratorFigure.java" startline="296" endline="298">
{
    return getDecoratedFigure ().getAttribute (name);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DecoratorFigure.java" startline="304" endline="306">
{
    return getDecoratedFigure ().getAttribute (attributeConstant);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DecoratorFigure.java" startline="312" endline="314">
{
    return getDecoratedFigure ().connectedTextLocator (text);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DecoratorFigure.java" startline="320" endline="322">
{
    return getDecoratedFigure ().connectorAt (x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DecoratorFigure.java" startline="328" endline="330">
{
    getDecoratedFigure ().connectorVisibility (isVisible, null);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DecoratorFigure.java" startline="336" endline="339">
{
    super.write (dw);
    dw.writeStorable (getDecoratedFigure ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DecoratorFigure.java" startline="345" endline="348">
{
    super.read (dr);
    decorate ((Figure) dr.readStorable ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DecoratorFigure.java" startline="352" endline="357">
{
    s.defaultReadObject ();
    getDecoratedFigure ().addToContainer (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DecoratorFigure.java" startline="365" endline="367">
{
    return getDecoratedFigure ().getTextHolder ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DecoratorFigure.java" startline="370" endline="372">
{
    return getDecoratedFigure ().getDependendFigures ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DecoratorFigure.java" startline="375" endline="377">
{
    getDecoratedFigure ().addDependendFigure (newDependendFigure);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DecoratorFigure.java" startline="380" endline="382">
{
    getDecoratedFigure ().removeDependendFigure (oldDependendFigure);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DeleteCommand.java" startline="32" endline="34">
{
    super (name, newDrawingEditor);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DeleteCommand.java" startline="37" endline="43">
{
    super.execute ();
    setUndoActivity (createUndoActivity ());
    getUndoActivity ().setAffectedFigures (view ().selection ());
    deleteFigures (getUndoActivity ().getAffectedFigures ());
    view ().checkDamage ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DeleteCommand.java" startline="46" endline="48">
{
    return view ().selectionCount () > 0;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DeleteCommand.java" startline="54" endline="56">
{
    return new DeleteCommand.UndoActivity (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DeleteCommand.java" startline="63" endline="68">
{
    super (newCommand.view ());
    myCommand = newCommand;
    setUndoable (true);
    setRedoable (true);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DeleteCommand.java" startline="71" endline="81">
{
    if (super.undo () && getAffectedFigures ().hasNextFigure ()) {
        getDrawingView ().clearSelection ();
        setAffectedFigures (myCommand.insertFigures (getAffectedFigures (), 0, 0));
        return true;
    }

    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DeleteCommand.java" startline="73" endline="78">
{
    getDrawingView ().clearSelection ();
    setAffectedFigures (myCommand.insertFigures (getAffectedFigures (), 0, 0));
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DeleteCommand.java" startline="84" endline="95">
{
    if (isRedoable ()) {
        myCommand.deleteFigures (getAffectedFigures ());
        getDrawingView ().clearSelection ();
        return true;
    }

    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DeleteCommand.java" startline="87" endline="92">
{
    myCommand.deleteFigures (getAffectedFigures ());
    getDrawingView ().clearSelection ();
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DeleteFromDrawingVisitor.java" startline="29" endline="32">
{
    myDeletedFigures = CollectionsFactory.current ().createSet ();
    setDrawing (newDrawing);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DeleteFromDrawingVisitor.java" startline="35" endline="37">
{
    myDrawing = newDrawing;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DeleteFromDrawingVisitor.java" startline="40" endline="42">
{
    return myDrawing;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DeleteFromDrawingVisitor.java" startline="45" endline="51">
{
    if (! myDeletedFigures.contains (hostFigure) && getDrawing ().containsFigure (hostFigure)) {
        Figure orphanedFigure = getDrawing ().orphan (hostFigure);
        myDeletedFigures.add (orphanedFigure);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DeleteFromDrawingVisitor.java" startline="47" endline="50">
{
    Figure orphanedFigure = getDrawing ().orphan (hostFigure);
    myDeletedFigures.add (orphanedFigure);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DeleteFromDrawingVisitor.java" startline="54" endline="55">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DeleteFromDrawingVisitor.java" startline="58" endline="61">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DeleteFromDrawingVisitor.java" startline="64" endline="66">
{
    return new FigureEnumerator (myDeletedFigures);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DragTracker.java" startline="36" endline="39">
{
    super (newDrawingEditor);
    fAnchorFigure = anchor;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DragTracker.java" startline="42" endline="60">
{
    super.mouseDown (e, x, y);
    fLastX = x;
    fLastY = y;
    if (e.isShiftDown ()) {
        getActiveView ().toggleSelection (fAnchorFigure);
        fAnchorFigure = null;
    }
    else if (! getActiveView ().isFigureSelected (fAnchorFigure)) {
        getActiveView ().clearSelection ();
        getActiveView ().addToSelection (fAnchorFigure);
    }

    setUndoActivity (createUndoActivity ());
    getUndoActivity ().setAffectedFigures (getActiveView ().selection ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DragTracker.java" startline="48" endline="51">
{
    getActiveView ().toggleSelection (fAnchorFigure);
    fAnchorFigure = null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DragTracker.java" startline="53" endline="56">
{
    getActiveView ().clearSelection ();
    getActiveView ().addToSelection (fAnchorFigure);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DragTracker.java" startline="63" endline="77">
{
    super.mouseDrag (e, x, y);
    fMoved = (Math.abs (x - getAnchorX ()) > 4) || (Math.abs (y - getAnchorY ()) > 4);
    if (fMoved) {
        FigureEnumeration figures = getUndoActivity ().getAffectedFigures ();
        while (figures.hasNextFigure ()) {
            figures.nextFigure ().moveBy (x - fLastX, y - fLastY);
        }

    }

    fLastX = x;
    fLastY = y;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DragTracker.java" startline="68" endline="74">
{
    FigureEnumeration figures = getUndoActivity ().getAffectedFigures ();
    while (figures.hasNextFigure ()) {
        figures.nextFigure ().moveBy (x - fLastX, y - fLastY);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DragTracker.java" startline="71" endline="73">
{
    figures.nextFigure ().moveBy (x - fLastX, y - fLastY);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DragTracker.java" startline="80" endline="83">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DragTracker.java" startline="86" endline="95">
{
    if (fMoved) {
        ((DragTracker.UndoActivity) getUndoActivity ()).setBackupPoint (new Point (fLastX, fLastY));
    }
    else {
        setUndoActivity (null);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DragTracker.java" startline="88" endline="90">
{
    ((DragTracker.UndoActivity) getUndoActivity ()).setBackupPoint (new Point (fLastX, fLastY));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DragTracker.java" startline="92" endline="94">
{
    setUndoActivity (null);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DragTracker.java" startline="101" endline="103">
{
    return new DragTracker.UndoActivity (getActiveView (), new Point (fLastX, fLastY));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DragTracker.java" startline="111" endline="116">
{
    super (newDrawingView);
    setOriginalPoint (newOriginalPoint);
    setUndoable (true);
    setRedoable (true);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DragTracker.java" startline="123" endline="130">
{
    if (! super.undo ()) {
        return false;
    }

    moveAffectedFigures (getBackupPoint (), getOriginalPoint ());
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DragTracker.java" startline="125" endline="127">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DragTracker.java" startline="137" endline="144">
{
    if (! super.redo ()) {
        return false;
    }

    moveAffectedFigures (getOriginalPoint (), getBackupPoint ());
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DragTracker.java" startline="139" endline="141">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DragTracker.java" startline="147" endline="149">
{
    myBackupPoint = newBackupPoint;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DragTracker.java" startline="152" endline="154">
{
    return myBackupPoint;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DragTracker.java" startline="157" endline="159">
{
    myOriginalPoint = newOriginalPoint;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DragTracker.java" startline="162" endline="164">
{
    return myOriginalPoint;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DragTracker.java" startline="167" endline="174">
{
    FigureEnumeration figures = getAffectedFigures ();
    while (figures.hasNextFigure ()) {
        figures.nextFigure ().moveBy (endPoint.x - startPoint.x, endPoint.y - startPoint.y);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DragTracker.java" startline="170" endline="173">
{
    figures.nextFigure ().moveBy (endPoint.x - startPoint.x, endPoint.y - startPoint.y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DuplicateCommand.java" startline="31" endline="33">
{
    super (name, newDrawingEditor);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DuplicateCommand.java" startline="36" endline="49">
{
    super.execute ();
    setUndoActivity (createUndoActivity ());
    FigureSelection selection = view ().getFigureSelection ();
    FigureEnumeration figures = (FigureEnumeration) selection.getData (StandardFigureSelection.TYPE);
    getUndoActivity ().setAffectedFigures (figures);
    view ().clearSelection ();
    getUndoActivity ().setAffectedFigures (insertFigures (getUndoActivity ().getAffectedFigures (), 10, 10));
    view ().checkDamage ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DuplicateCommand.java" startline="52" endline="54">
{
    return view ().selectionCount () > 0;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/DuplicateCommand.java" startline="60" endline="62">
{
    return new PasteCommand.UndoActivity (view ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/FastBufferedUpdateStrategy.java" startline="41" endline="42">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/FastBufferedUpdateStrategy.java" startline="47" endline="97">
{
    _checkCaches (view);
    if (_bRedrawAll == true) {
        Graphics imageGraphics = _doubleBufferedImage.getGraphics ();
        view.drawAll (imageGraphics);
    }
    else {
        Rectangle viewClipRectangle = g.getClipBounds ();
        int nX1 = viewClipRectangle.x;
        int nY1 = viewClipRectangle.y;
        int nX2 = viewClipRectangle.x + viewClipRectangle.width;
        int nY2 = viewClipRectangle.y + viewClipRectangle.height;
        if (nX1 < 0) {
            nX1 = 0;
        }

        if (nY1 < 0) {
            nY1 = 0;
        }

        if (nX2 < 0) {
            nX2 = 0;
        }

        if (nY2 < 0) {
            nY2 = 0;
        }

        Rectangle viewClipRectangle2 = new Rectangle (nX1, nY1, nX2 - nX1, nY2 - nY1);
        Drawing theDrawing = view.drawing ();
        FigureEnumeration fe = theDrawing.figures (viewClipRectangle2);
        Graphics imageGraphics = _scratchPadBufferedImage.getGraphics ();
        imageGraphics.setColor (view.getBackground ());
        imageGraphics.fillRect (nX1, nY1, nX2 - nX1, nY2 - nY1);
        view.draw (imageGraphics, fe);
        Graphics dbGraphics = _doubleBufferedImage.getGraphics ();
        dbGraphics.drawImage (_scratchPadBufferedImage, nX1, nY1, nX2, nY2, nX1, nY1, nX2, nY2, view);
    }

    g.drawImage (_doubleBufferedImage, 0, 0, view);
    _bRedrawAll = false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/FastBufferedUpdateStrategy.java" startline="50" endline="53">
{
    Graphics imageGraphics = _doubleBufferedImage.getGraphics ();
    view.drawAll (imageGraphics);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/FastBufferedUpdateStrategy.java" startline="55" endline="93">
{
    Rectangle viewClipRectangle = g.getClipBounds ();
    int nX1 = viewClipRectangle.x;
    int nY1 = viewClipRectangle.y;
    int nX2 = viewClipRectangle.x + viewClipRectangle.width;
    int nY2 = viewClipRectangle.y + viewClipRectangle.height;
    if (nX1 < 0) {
        nX1 = 0;
    }

    if (nY1 < 0) {
        nY1 = 0;
    }

    if (nX2 < 0) {
        nX2 = 0;
    }

    if (nY2 < 0) {
        nY2 = 0;
    }

    Rectangle viewClipRectangle2 = new Rectangle (nX1, nY1, nX2 - nX1, nY2 - nY1);
    Drawing theDrawing = view.drawing ();
    FigureEnumeration fe = theDrawing.figures (viewClipRectangle2);
    Graphics imageGraphics = _scratchPadBufferedImage.getGraphics ();
    imageGraphics.setColor (view.getBackground ());
    imageGraphics.fillRect (nX1, nY1, nX2 - nX1, nY2 - nY1);
    view.draw (imageGraphics, fe);
    Graphics dbGraphics = _doubleBufferedImage.getGraphics ();
    dbGraphics.drawImage (_scratchPadBufferedImage, nX1, nY1, nX2, nY2, nX1, nY1, nX2, nY2, view);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/FastBufferedUpdateStrategy.java" startline="63" endline="65">
{
    nX1 = 0;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/FastBufferedUpdateStrategy.java" startline="67" endline="69">
{
    nY1 = 0;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/FastBufferedUpdateStrategy.java" startline="71" endline="73">
{
    nX2 = 0;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/FastBufferedUpdateStrategy.java" startline="75" endline="77">
{
    nY2 = 0;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/FastBufferedUpdateStrategy.java" startline="104" endline="129">
{
    Dimension d = view.getSize ();
    if ((_doubleBufferedImage == null) || (_nImageWidth != d.width) || (_nImageHeight != d.height)) {
        _doubleBufferedImage = new BufferedImage (d.width, d.height, BufferedImage.TYPE_INT_RGB);
        _bRedrawAll = true;
    }

    if ((_scratchPadBufferedImage == null) || (_nImageWidth != d.width) || (_nImageHeight != d.height)) {
        _scratchPadBufferedImage = new BufferedImage (d.width, d.height, BufferedImage.TYPE_INT_RGB);
        Graphics imageGraphics = _scratchPadBufferedImage.getGraphics ();
        view.drawBackground (imageGraphics);
        _bRedrawAll = true;
    }

    _nImageWidth = d.width;
    _nImageHeight = d.height;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/FastBufferedUpdateStrategy.java" startline="110" endline="114">
{
    _doubleBufferedImage = new BufferedImage (d.width, d.height, BufferedImage.TYPE_INT_RGB);
    _bRedrawAll = true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/FastBufferedUpdateStrategy.java" startline="119" endline="125">
{
    _scratchPadBufferedImage = new BufferedImage (d.width, d.height, BufferedImage.TYPE_INT_RGB);
    Graphics imageGraphics = _scratchPadBufferedImage.getGraphics ();
    view.drawBackground (imageGraphics);
    _bRedrawAll = true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/FigureAndEnumerator.java" startline="27" endline="30">
{
    myFE1 = newFE1;
    myFE2 = newFE2;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/FigureAndEnumerator.java" startline="33" endline="47">
{
    if (myFE1.hasNextFigure ()) {
        return myFE1.nextFigure ();
    }
    else if (myFE2.hasNextFigure ()) {
        return myFE2.nextFigure ();
    }
    else {
        return null;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/FigureAndEnumerator.java" startline="35" endline="37">
{
    return myFE1.nextFigure ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/FigureAndEnumerator.java" startline="39" endline="41">
{
    return myFE2.nextFigure ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/FigureAndEnumerator.java" startline="43" endline="46">
{
    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/FigureAndEnumerator.java" startline="50" endline="52">
{
    return myFE1.hasNextFigure () || myFE2.hasNextFigure ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/FigureAndEnumerator.java" startline="61" endline="64">
{
    myFE1.reset ();
    myFE2.reset ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/FigureChangeAdapter.java" startline="27" endline="27">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/FigureChangeAdapter.java" startline="32" endline="32">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/FigureChangeAdapter.java" startline="37" endline="37">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/FigureChangeAdapter.java" startline="42" endline="42">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/FigureChangeAdapter.java" startline="48" endline="48">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/FigureChangeEventMulticaster.java" startline="29" endline="31">
{
    super (a, b);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/FigureChangeEventMulticaster.java" startline="34" endline="37">
{
    ((FigureChangeListener) a).figureInvalidated (e);
    ((FigureChangeListener) b).figureInvalidated (e);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/FigureChangeEventMulticaster.java" startline="40" endline="43">
{
    ((FigureChangeListener) a).figureRequestRemove (e);
    ((FigureChangeListener) b).figureRequestRemove (e);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/FigureChangeEventMulticaster.java" startline="46" endline="49">
{
    ((FigureChangeListener) a).figureRequestUpdate (e);
    ((FigureChangeListener) b).figureRequestUpdate (e);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/FigureChangeEventMulticaster.java" startline="52" endline="55">
{
    ((FigureChangeListener) a).figureChanged (e);
    ((FigureChangeListener) b).figureChanged (e);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/FigureChangeEventMulticaster.java" startline="58" endline="61">
{
    ((FigureChangeListener) a).figureRemoved (e);
    ((FigureChangeListener) b).figureRemoved (e);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/FigureChangeEventMulticaster.java" startline="64" endline="66">
{
    return (FigureChangeListener) addInternal (a, b);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/FigureChangeEventMulticaster.java" startline="70" endline="72">
{
    return (FigureChangeListener) removeInternal (l, oldl);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/FigureChangeEventMulticaster.java" startline="75" endline="94">
{
    if (oldl == a) {
        return b;
    }

    if (oldl == b) {
        return a;
    }

    EventListener a2 = removeInternal ((FigureChangeListener) a, oldl);
    EventListener b2 = removeInternal ((FigureChangeListener) b, oldl);
    if (a2 == a && b2 == b) {
        return this;
    }
    else {
        return addInternal ((FigureChangeListener) a2, (FigureChangeListener) b2);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/FigureChangeEventMulticaster.java" startline="77" endline="79">
{
    return b;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/FigureChangeEventMulticaster.java" startline="81" endline="83">
{
    return a;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/FigureChangeEventMulticaster.java" startline="87" endline="89">
{
    return this;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/FigureChangeEventMulticaster.java" startline="91" endline="93">
{
    return addInternal ((FigureChangeListener) a2, (FigureChangeListener) b2);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/FigureChangeEventMulticaster.java" startline="97" endline="107">
{
    if (a == null) {
        return b;
    }

    if (b == null) {
        return a;
    }

    return new FigureChangeEventMulticaster (a, b);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/FigureChangeEventMulticaster.java" startline="99" endline="101">
{
    return b;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/FigureChangeEventMulticaster.java" startline="103" endline="105">
{
    return a;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/FigureChangeEventMulticaster.java" startline="110" endline="123">
{
    if (l == oldl || l == null) {
        return null;
    }
    else if (l instanceof FigureChangeEventMulticaster) {
        return ((FigureChangeEventMulticaster) l).remove (oldl);
    }
    else {
        return l;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/FigureChangeEventMulticaster.java" startline="112" endline="114">
{
    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/FigureChangeEventMulticaster.java" startline="116" endline="118">
{
    return ((FigureChangeEventMulticaster) l).remove (oldl);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/FigureChangeEventMulticaster.java" startline="120" endline="122">
{
    return l;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/FigureEnumerator.java" startline="35" endline="38">
{
    myInitialCollection = c;
    reset ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/FigureEnumerator.java" startline="45" endline="47">
{
    return myIterator.hasNext ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/FigureEnumerator.java" startline="55" endline="57">
{
    return (Figure) myIterator.next ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/FigureEnumerator.java" startline="60" endline="62">
{
    return singletonEmptyEnumerator;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/FigureEnumerator.java" startline="71" endline="73">
{
    myIterator = myInitialCollection.iterator ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/FigureTransferCommand.java" startline="32" endline="34">
{
    super (name, newDrawingEditor);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/FigureTransferCommand.java" startline="40" endline="48">
{
    DeleteFromDrawingVisitor deleteVisitor = new DeleteFromDrawingVisitor (view ().drawing ());
    while (fe.hasNextFigure ()) {
        fe.nextFigure ().visit (deleteVisitor);
    }

    view ().clearSelection ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/FigureTransferCommand.java" startline="43" endline="45">
{
    fe.nextFigure ().visit (deleteVisitor);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/FigureTransferCommand.java" startline="54" endline="56">
{
    Clipboard.getClipboard ().setContents (new StandardFigureSelection (fe, figureCount));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/FigureTransferCommand.java" startline="68" endline="70">
{
    return view ().insertFigures (fe, dx, dy, false);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/GridConstrainer.java" startline="32" endline="35">
{
    fGridX = Math.max (1, x);
    fGridY = Math.max (1, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/GridConstrainer.java" startline="42" endline="46">
{
    p.x = ((p.x + fGridX / 2) / fGridX) * fGridX;
    p.y = ((p.y + fGridY / 2) / fGridY) * fGridY;
    return p;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/GridConstrainer.java" startline="52" endline="54">
{
    return fGridX;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/GridConstrainer.java" startline="60" endline="62">
{
    return fGridY;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/HandleAndEnumerator.java" startline="30" endline="33">
{
    myHE1 = newHE1;
    myHE2 = newHE2;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/HandleAndEnumerator.java" startline="36" endline="50">
{
    if (myHE1.hasNextHandle ()) {
        return myHE1.nextHandle ();
    }
    else if (myHE2.hasNextHandle ()) {
        return myHE2.nextHandle ();
    }
    else {
        return null;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/HandleAndEnumerator.java" startline="38" endline="40">
{
    return myHE1.nextHandle ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/HandleAndEnumerator.java" startline="42" endline="44">
{
    return myHE2.nextHandle ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/HandleAndEnumerator.java" startline="46" endline="49">
{
    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/HandleAndEnumerator.java" startline="53" endline="55">
{
    return myHE1.hasNextHandle () || myHE2.hasNextHandle ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/HandleAndEnumerator.java" startline="58" endline="62">
{
    List joinedList = myHE1.toList ();
    joinedList.addAll (myHE2.toList ());
    return joinedList;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/HandleAndEnumerator.java" startline="65" endline="68">
{
    myHE1.reset ();
    myHE2.reset ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/HandleEnumerator.java" startline="35" endline="38">
{
    myInitialCollection = c;
    reset ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/HandleEnumerator.java" startline="45" endline="47">
{
    return myIterator.hasNext ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/HandleEnumerator.java" startline="55" endline="57">
{
    return (Handle) myIterator.next ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/HandleEnumerator.java" startline="69" endline="78">
{
    List handles = CollectionsFactory.current ().createList ();
    while (hasNextHandle ()) {
        handles.add (nextHandle ());
    }

    myIterator = handles.iterator ();
    return handles;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/HandleEnumerator.java" startline="72" endline="74">
{
    handles.add (nextHandle ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/HandleEnumerator.java" startline="87" endline="89">
{
    myIterator = myInitialCollection.iterator ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/HandleEnumerator.java" startline="92" endline="94">
{
    return singletonEmptyEnumerator;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/HandleTracker.java" startline="30" endline="33">
{
    super (newDrawingEditor);
    fAnchorHandle = anchorHandle;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/HandleTracker.java" startline="36" endline="39">
{
    super.mouseDown (e, x, y);
    fAnchorHandle.invokeStart (x, y, view ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/HandleTracker.java" startline="42" endline="45">
{
    super.mouseDrag (e, x, y);
    fAnchorHandle.invokeStep (x, y, getAnchorX (), getAnchorY (), view ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/HandleTracker.java" startline="48" endline="51">
{
    super.mouseUp (e, x, y);
    fAnchorHandle.invokeEnd (x, y, getAnchorX (), getAnchorY (), view ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/HandleTracker.java" startline="54" endline="57">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/InsertIntoDrawingVisitor.java" startline="29" endline="32">
{
    myInsertedFigures = CollectionsFactory.current ().createSet ();
    setDrawing (newDrawing);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/InsertIntoDrawingVisitor.java" startline="35" endline="37">
{
    myDrawing = newDrawing;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/InsertIntoDrawingVisitor.java" startline="40" endline="42">
{
    return myDrawing;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/InsertIntoDrawingVisitor.java" startline="45" endline="51">
{
    if (! myInsertedFigures.contains (hostFigure) && ! getDrawing ().includes (hostFigure)) {
        Figure addedFigure = getDrawing ().add (hostFigure);
        myInsertedFigures.add (addedFigure);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/InsertIntoDrawingVisitor.java" startline="47" endline="50">
{
    Figure addedFigure = getDrawing ().add (hostFigure);
    myInsertedFigures.add (addedFigure);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/InsertIntoDrawingVisitor.java" startline="54" endline="55">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/InsertIntoDrawingVisitor.java" startline="58" endline="60">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/InsertIntoDrawingVisitor.java" startline="63" endline="65">
{
    return new FigureEnumerator (myInsertedFigures);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/LocatorConnector.java" startline="47" endline="49">
{
    setLocator (null);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/LocatorConnector.java" startline="52" endline="55">
{
    super (owner);
    setLocator (l);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/LocatorConnector.java" startline="61" endline="63">
{
    return displayBox ().contains (x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/LocatorConnector.java" startline="69" endline="76">
{
    Point p = getLocator ().locate (owner ());
    return new Rectangle (p.x - SIZE / 2, p.y - SIZE / 2, SIZE, SIZE);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/LocatorConnector.java" startline="82" endline="89">
{
    Rectangle r = displayBox ();
    g.setColor (Color.blue);
    g.fillOval (r.x, r.y, r.width, r.height);
    g.setColor (Color.black);
    g.drawOval (r.x, r.y, r.width, r.height);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/LocatorConnector.java" startline="95" endline="98">
{
    super.write (dw);
    dw.writeStorable (getLocator ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/LocatorConnector.java" startline="104" endline="107">
{
    super.read (dr);
    setLocator ((Locator) dr.readStorable ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/LocatorConnector.java" startline="110" endline="112">
{
    myLocator = newLocator;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/LocatorConnector.java" startline="115" endline="117">
{
    return myLocator;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/LocatorHandle.java" startline="34" endline="37">
{
    super (owner);
    fLocator = l;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/LocatorHandle.java" startline="43" endline="45">
{
    return fLocator;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/LocatorHandle.java" startline="52" endline="54">
{
    return fLocator.locate (owner ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullDrawingView.java" startline="40" endline="43">
{
    setEditor (editor);
    setDrawing (new StandardDrawing ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullDrawingView.java" startline="49" endline="51">
{
    myDrawingEditor = editor;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullDrawingView.java" startline="57" endline="59">
{
    return editor ().tool ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullDrawingView.java" startline="65" endline="67">
{
    return myDrawing;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullDrawingView.java" startline="73" endline="75">
{
    myDrawing = d;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullDrawingView.java" startline="81" endline="83">
{
    return myDrawingEditor;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullDrawingView.java" startline="90" endline="92">
{
    return figure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullDrawingView.java" startline="99" endline="101">
{
    return figure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullDrawingView.java" startline="107" endline="109">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullDrawingView.java" startline="115" endline="117">
{
    return new Dimension ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullDrawingView.java" startline="123" endline="125">
{
    return new Dimension ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullDrawingView.java" startline="131" endline="133">
{
    return new Dimension ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullDrawingView.java" startline="140" endline="142">
{
    myUpdateStrategy = newUpdateStrategy;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullDrawingView.java" startline="149" endline="151">
{
    return myUpdateStrategy;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullDrawingView.java" startline="161" endline="163">
{
    return FigureEnumerator.getEmptyEnumeration ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullDrawingView.java" startline="172" endline="174">
{
    return FigureEnumerator.getEmptyEnumeration ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullDrawingView.java" startline="180" endline="182">
{
    return 0;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullDrawingView.java" startline="188" endline="190">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullDrawingView.java" startline="196" endline="198">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullDrawingView.java" startline="204" endline="206">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullDrawingView.java" startline="212" endline="214">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullDrawingView.java" startline="220" endline="222">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullDrawingView.java" startline="229" endline="231">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullDrawingView.java" startline="237" endline="239">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullDrawingView.java" startline="246" endline="248">
{
    return new StandardFigureSelection (selection (), 0);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullDrawingView.java" startline="255" endline="257">
{
    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullDrawingView.java" startline="263" endline="265">
{
    return new Point ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullDrawingView.java" startline="271" endline="273">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullDrawingView.java" startline="279" endline="281">
{
    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullDrawingView.java" startline="287" endline="289">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullDrawingView.java" startline="295" endline="297">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullDrawingView.java" startline="305" endline="307">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullDrawingView.java" startline="313" endline="315">
{
    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullDrawingView.java" startline="321" endline="323">
{
    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullDrawingView.java" startline="329" endline="331">
{
    return myBackgroundColor;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullDrawingView.java" startline="337" endline="339">
{
    myBackgroundColor = c;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullDrawingView.java" startline="347" endline="349">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullDrawingView.java" startline="357" endline="359">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullDrawingView.java" startline="365" endline="367">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullDrawingView.java" startline="373" endline="375">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullDrawingView.java" startline="383" endline="385">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullDrawingView.java" startline="391" endline="393">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullDrawingView.java" startline="400" endline="402">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullDrawingView.java" startline="409" endline="411">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullDrawingView.java" startline="418" endline="420">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullDrawingView.java" startline="427" endline="429">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullDrawingView.java" startline="435" endline="437">
{
    return FigureEnumerator.getEmptyEnumeration ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullDrawingView.java" startline="446" endline="448">
{
    return FigureEnumerator.getEmptyEnumeration ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullDrawingView.java" startline="451" endline="453">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullDrawingView.java" startline="456" endline="458">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullDrawingView.java" startline="461" endline="463">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullDrawingView.java" startline="466" endline="468">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullDrawingView.java" startline="471" endline="482">
{
    if (drawingViewManager.containsKey (editor)) {
        return (DrawingView) drawingViewManager.get (editor);
    }
    else {
        DrawingView newDrawingView = new NullDrawingView (editor);
        drawingViewManager.put (editor, newDrawingView);
        return newDrawingView;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullDrawingView.java" startline="473" endline="475">
{
    return (DrawingView) drawingViewManager.get (editor);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullDrawingView.java" startline="477" endline="481">
{
    DrawingView newDrawingView = new NullDrawingView (editor);
    drawingViewManager.put (editor, newDrawingView);
    return newDrawingView;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullHandle.java" startline="38" endline="40">
{
    super (owner, locator);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullHandle.java" startline="47" endline="52">
{
    Rectangle r = displayBox ();
    g.setColor (Color.black);
    g.drawRect (r.x, r.y, r.width, r.height);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullTool.java" startline="28" endline="30">
{
    super (newDrawingEditor);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullTool.java" startline="33" endline="35">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullTool.java" startline="38" endline="40">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/NullTool.java" startline="43" endline="45">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/OffsetLocator.java" startline="39" endline="43">
{
    fBase = null;
    fOffsetX = 0;
    fOffsetY = 0;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/OffsetLocator.java" startline="46" endline="49">
{
    this ();
    fBase = base;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/OffsetLocator.java" startline="52" endline="56">
{
    this (base);
    fOffsetX = offsetX;
    fOffsetY = offsetY;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/OffsetLocator.java" startline="59" endline="64">
{
    Point p = fBase.locate (owner);
    p.x += fOffsetX;
    p.y += fOffsetY;
    return p;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/OffsetLocator.java" startline="67" endline="70">
{
    fOffsetX += dx;
    fOffsetY += dy;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/OffsetLocator.java" startline="73" endline="78">
{
    super.write (dw);
    dw.writeInt (fOffsetX);
    dw.writeInt (fOffsetY);
    dw.writeStorable (fBase);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/OffsetLocator.java" startline="81" endline="86">
{
    super.read (dr);
    fOffsetX = dr.readInt ();
    fOffsetY = dr.readInt ();
    fBase = (Locator) dr.readStorable ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/OrderedFigureElement.java" startline="31" endline="34">
{
    _theFigure = aFigure;
    _nZ = nZ;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/OrderedFigureElement.java" startline="39" endline="41">
{
    return _theFigure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/OrderedFigureElement.java" startline="44" endline="46">
{
    return _nZ;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/OrderedFigureElement.java" startline="49" endline="62">
{
    OrderedFigureElement ofe = (OrderedFigureElement) o;
    if (_nZ == ofe.getZValue ()) {
        return 0;
    }

    if (_nZ > ofe.getZValue ()) {
        return 1;
    }

    return - 1;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/OrderedFigureElement.java" startline="52" endline="54">
{
    return 0;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/OrderedFigureElement.java" startline="57" endline="59">
{
    return 1;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/PasteCommand.java" startline="34" endline="36">
{
    super (name, newDrawingEditor);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/PasteCommand.java" startline="39" endline="64">
{
    super.execute ();
    Point lastClick = view ().lastClick ();
    FigureSelection selection = (FigureSelection) Clipboard.getClipboard ().getContents ();
    if (selection != null) {
        setUndoActivity (createUndoActivity ());
        getUndoActivity ().setAffectedFigures ((FigureEnumerator) selection.getData (StandardFigureSelection.TYPE));
        if (! getUndoActivity ().getAffectedFigures ().hasNextFigure ()) {
            setUndoActivity (null);
            return;
        }

        Rectangle r = getBounds (getUndoActivity ().getAffectedFigures ());
        view ().clearSelection ();
        FigureEnumeration fe = insertFigures (getUndoActivity ().getAffectedFigures (), lastClick.x - r.x, lastClick.y - r.y);
        getUndoActivity ().setAffectedFigures (fe);
        view ().checkDamage ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/PasteCommand.java" startline="44" endline="63">
{
    setUndoActivity (createUndoActivity ());
    getUndoActivity ().setAffectedFigures ((FigureEnumerator) selection.getData (StandardFigureSelection.TYPE));
    if (! getUndoActivity ().getAffectedFigures ().hasNextFigure ()) {
        setUndoActivity (null);
        return;
    }

    Rectangle r = getBounds (getUndoActivity ().getAffectedFigures ());
    view ().clearSelection ();
    FigureEnumeration fe = insertFigures (getUndoActivity ().getAffectedFigures (), lastClick.x - r.x, lastClick.y - r.y);
    getUndoActivity ().setAffectedFigures (fe);
    view ().checkDamage ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/PasteCommand.java" startline="50" endline="53">
{
    setUndoActivity (null);
    return;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/PasteCommand.java" startline="67" endline="69">
{
    return Clipboard.getClipboard ().getContents () != null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/PasteCommand.java" startline="72" endline="79">
{
    Rectangle r = fe.nextFigure ().displayBox ();
    while (fe.hasNextFigure ()) {
        r.add (fe.nextFigure ().displayBox ());
    }

    return r;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/PasteCommand.java" startline="75" endline="77">
{
    r.add (fe.nextFigure ().displayBox ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/PasteCommand.java" startline="85" endline="87">
{
    return new PasteCommand.UndoActivity (view ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/PasteCommand.java" startline="93" endline="97">
{
    super (newDrawingView);
    setUndoable (true);
    setRedoable (true);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/PasteCommand.java" startline="100" endline="116">
{
    if (! super.undo ()) {
        return false;
    }

    DeleteFromDrawingVisitor deleteVisitor = new DeleteFromDrawingVisitor (getDrawingView ().drawing ());
    FigureEnumeration fe = getAffectedFigures ();
    while (fe.hasNextFigure ()) {
        fe.nextFigure ().visit (deleteVisitor);
    }

    getDrawingView ().clearSelection ();
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/PasteCommand.java" startline="102" endline="104">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/PasteCommand.java" startline="109" endline="111">
{
    fe.nextFigure ().visit (deleteVisitor);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/PasteCommand.java" startline="119" endline="131">
{
    if (! isRedoable ()) {
        return false;
    }

    getDrawingView ().clearSelection ();
    setAffectedFigures (getDrawingView ().insertFigures (getAffectedFigures (), 0, 0, false));
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/PasteCommand.java" startline="122" endline="124">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/PeripheralLocator.java" startline="31" endline="33">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/PeripheralLocator.java" startline="36" endline="43">
{
    fPPS = pointsPerSide;
    fIndex = index;
    if (index >= pointsPerSide * 4) {
        throw new IllegalArgumentException ("Index must be within the range of points starting with index = 0.");
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/PeripheralLocator.java" startline="40" endline="42">
{
    throw new IllegalArgumentException ("Index must be within the range of points starting with index = 0.");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/PeripheralLocator.java" startline="46" endline="81">
{
    Rectangle r = parm1.displayBox ();
    int circumference = r.width * 2 + r.height * 2;
    int insets = 2 * 4 * CORNERSPACE;
    int spacing = circumference / (fPPS * 4 + 4);
    float hSpacing = (float) r.width / (fPPS + 1);
    float vSpacing = (float) r.height / (fPPS + 1);
    int x, y;
    if (fIndex < fPPS) {
        x = Math.round ((fIndex + 1.0f) * hSpacing);
        y = 0;
    }
    else if (fIndex < fPPS * 2) {
        x = Math.round ((fPPS + 1) * hSpacing);
        y = Math.round ((fIndex + 1 - fPPS) * vSpacing);
    }
    else if (fIndex < fPPS * 3) {
        x = Math.round (((fPPS + 1) - (fIndex + 1 - fPPS * 2)) * hSpacing);
        y = Math.round ((fPPS + 1) * vSpacing);
    }
    else {
        x = 0;
        y = Math.round (((fPPS + 1) - (fIndex + 1 - fPPS * 3)) * vSpacing);
    }

    x = x + r.x;
    y = y + r.y;
    return new Point ((int) x, (int) y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/PeripheralLocator.java" startline="59" endline="62">
{
    x = Math.round ((fIndex + 1.0f) * hSpacing);
    y = 0;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/PeripheralLocator.java" startline="64" endline="67">
{
    x = Math.round ((fPPS + 1) * hSpacing);
    y = Math.round ((fIndex + 1 - fPPS) * vSpacing);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/PeripheralLocator.java" startline="69" endline="72">
{
    x = Math.round (((fPPS + 1) - (fIndex + 1 - fPPS * 2)) * hSpacing);
    y = Math.round ((fPPS + 1) * vSpacing);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/PeripheralLocator.java" startline="74" endline="77">
{
    x = 0;
    y = Math.round (((fPPS + 1) - (fIndex + 1 - fPPS * 3)) * vSpacing);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/QuadTree.java" startline="45" endline="47">
{
    this (2, absoluteBoundingRectangle2D);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/QuadTree.java" startline="51" endline="53">
{
    _init (nMaxTreeDepth, absoluteBoundingRectangle2D);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/QuadTree.java" startline="58" endline="130">
{
    if (_nMaxTreeDepth == 1) {
        if (absoluteBoundingRectangle2D.intersects (_absoluteBoundingRectangle2D)) {
            _theHashtable.put (anObject, absoluteBoundingRectangle2D);
        }
        else {
            _outsideHashtable.put (anObject, absoluteBoundingRectangle2D);
        }

        return;
    }

    boolean bNW = absoluteBoundingRectangle2D.intersects (_nwQuadTree.getAbsoluteBoundingRectangle2D ());
    boolean bNE = absoluteBoundingRectangle2D.intersects (_neQuadTree.getAbsoluteBoundingRectangle2D ());
    boolean bSW = absoluteBoundingRectangle2D.intersects (_swQuadTree.getAbsoluteBoundingRectangle2D ());
    boolean bSE = absoluteBoundingRectangle2D.intersects (_seQuadTree.getAbsoluteBoundingRectangle2D ());
    int nCount = 0;
    if (bNW == true) {
        nCount ++;
    }

    if (bNE == true) {
        nCount ++;
    }

    if (bSW == true) {
        nCount ++;
    }

    if (bSE == true) {
        nCount ++;
    }

    if (nCount > 1) {
        _theHashtable.put (anObject, absoluteBoundingRectangle2D);
        return;
    }

    if (nCount == 0) {
        _outsideHashtable.put (anObject, absoluteBoundingRectangle2D);
        return;
    }

    if (bNW == true) {
        _nwQuadTree.add (anObject, absoluteBoundingRectangle2D);
    }

    if (bNE == true) {
        _neQuadTree.add (anObject, absoluteBoundingRectangle2D);
    }

    if (bSW == true) {
        _swQuadTree.add (anObject, absoluteBoundingRectangle2D);
    }

    if (bSE == true) {
        _seQuadTree.add (anObject, absoluteBoundingRectangle2D);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/QuadTree.java" startline="60" endline="70">
{
    if (absoluteBoundingRectangle2D.intersects (_absoluteBoundingRectangle2D)) {
        _theHashtable.put (anObject, absoluteBoundingRectangle2D);
    }
    else {
        _outsideHashtable.put (anObject, absoluteBoundingRectangle2D);
    }

    return;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/QuadTree.java" startline="62" endline="64">
{
    _theHashtable.put (anObject, absoluteBoundingRectangle2D);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/QuadTree.java" startline="66" endline="68">
{
    _outsideHashtable.put (anObject, absoluteBoundingRectangle2D);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/QuadTree.java" startline="87" endline="89">
{
    nCount ++;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/QuadTree.java" startline="91" endline="93">
{
    nCount ++;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/QuadTree.java" startline="95" endline="97">
{
    nCount ++;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/QuadTree.java" startline="99" endline="101">
{
    nCount ++;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/QuadTree.java" startline="104" endline="107">
{
    _theHashtable.put (anObject, absoluteBoundingRectangle2D);
    return;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/QuadTree.java" startline="109" endline="112">
{
    _outsideHashtable.put (anObject, absoluteBoundingRectangle2D);
    return;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/QuadTree.java" startline="115" endline="117">
{
    _nwQuadTree.add (anObject, absoluteBoundingRectangle2D);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/QuadTree.java" startline="119" endline="121">
{
    _neQuadTree.add (anObject, absoluteBoundingRectangle2D);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/QuadTree.java" startline="123" endline="125">
{
    _swQuadTree.add (anObject, absoluteBoundingRectangle2D);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/QuadTree.java" startline="127" endline="129">
{
    _seQuadTree.add (anObject, absoluteBoundingRectangle2D);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/QuadTree.java" startline="133" endline="174">
{
    Object returnObject = _theHashtable.remove (anObject);
    if (returnObject != null) {
        return returnObject;
    }

    if (_nMaxTreeDepth > 1) {
        returnObject = _nwQuadTree.remove (anObject);
        if (returnObject != null) {
            return returnObject;
        }

        returnObject = _neQuadTree.remove (anObject);
        if (returnObject != null) {
            return returnObject;
        }

        returnObject = _swQuadTree.remove (anObject);
        if (returnObject != null) {
            return returnObject;
        }

        returnObject = _seQuadTree.remove (anObject);
        if (returnObject != null) {
            return returnObject;
        }

    }

    returnObject = _outsideHashtable.remove (anObject);
    if (returnObject != null) {
        return returnObject;
    }

    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/QuadTree.java" startline="136" endline="138">
{
    return returnObject;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/QuadTree.java" startline="141" endline="165">
{
    returnObject = _nwQuadTree.remove (anObject);
    if (returnObject != null) {
        return returnObject;
    }

    returnObject = _neQuadTree.remove (anObject);
    if (returnObject != null) {
        return returnObject;
    }

    returnObject = _swQuadTree.remove (anObject);
    if (returnObject != null) {
        return returnObject;
    }

    returnObject = _seQuadTree.remove (anObject);
    if (returnObject != null) {
        return returnObject;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/QuadTree.java" startline="144" endline="146">
{
    return returnObject;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/QuadTree.java" startline="150" endline="152">
{
    return returnObject;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/QuadTree.java" startline="156" endline="158">
{
    return returnObject;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/QuadTree.java" startline="162" endline="164">
{
    return returnObject;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/QuadTree.java" startline="169" endline="171">
{
    return returnObject;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/QuadTree.java" startline="178" endline="188">
{
    _theHashtable.clear ();
    _outsideHashtable.clear ();
    if (_nMaxTreeDepth > 1) {
        _nwQuadTree.clear ();
        _neQuadTree.clear ();
        _swQuadTree.clear ();
        _seQuadTree.clear ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/QuadTree.java" startline="182" endline="187">
{
    _nwQuadTree.clear ();
    _neQuadTree.clear ();
    _swQuadTree.clear ();
    _seQuadTree.clear ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/QuadTree.java" startline="191" endline="193">
{
    return _nMaxTreeDepth;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/QuadTree.java" startline="211" endline="249">
{
    List l = CollectionsFactory.current ().createList ();
    for (Iterator ii = _outsideHashtable.keySet ().iterator ();
    ii.hasNext ();) {
        Object anObject = ii.next ();
        Rectangle2D itsAbsoluteBoundingRectangle2D = (Rectangle2D) _outsideHashtable.get (anObject);
        if (itsAbsoluteBoundingRectangle2D.intersects (r)) {
            l.add (anObject);
        }

    }

    if (_absoluteBoundingRectangle2D.intersects (r)) {
        for (Iterator i = _theHashtable.keySet ().iterator ();
        i.hasNext ();) {
            Object anObject = i.next ();
            Rectangle2D itsAbsoluteBoundingRectangle2D = (Rectangle2D) _theHashtable.get (anObject);
            if (itsAbsoluteBoundingRectangle2D.intersects (r)) {
                l.add (anObject);
            }

        }

        if (_nMaxTreeDepth > 1) {
            l.add (_nwQuadTree.getAllWithin (r));
            l.add (_neQuadTree.getAllWithin (r));
            l.add (_swQuadTree.getAllWithin (r));
            l.add (_seQuadTree.getAllWithin (r));
        }

    }

    return new FigureEnumerator (l);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/QuadTree.java" startline="214" endline="223">
{
    Object anObject = ii.next ();
    Rectangle2D itsAbsoluteBoundingRectangle2D = (Rectangle2D) _outsideHashtable.get (anObject);
    if (itsAbsoluteBoundingRectangle2D.intersects (r)) {
        l.add (anObject);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/QuadTree.java" startline="220" endline="222">
{
    l.add (anObject);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/QuadTree.java" startline="226" endline="246">
{
    for (Iterator i = _theHashtable.keySet ().iterator ();
    i.hasNext ();) {
        Object anObject = i.next ();
        Rectangle2D itsAbsoluteBoundingRectangle2D = (Rectangle2D) _theHashtable.get (anObject);
        if (itsAbsoluteBoundingRectangle2D.intersects (r)) {
            l.add (anObject);
        }

    }

    if (_nMaxTreeDepth > 1) {
        l.add (_nwQuadTree.getAllWithin (r));
        l.add (_neQuadTree.getAllWithin (r));
        l.add (_swQuadTree.getAllWithin (r));
        l.add (_seQuadTree.getAllWithin (r));
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/QuadTree.java" startline="228" endline="237">
{
    Object anObject = i.next ();
    Rectangle2D itsAbsoluteBoundingRectangle2D = (Rectangle2D) _theHashtable.get (anObject);
    if (itsAbsoluteBoundingRectangle2D.intersects (r)) {
        l.add (anObject);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/QuadTree.java" startline="234" endline="236">
{
    l.add (anObject);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/QuadTree.java" startline="240" endline="245">
{
    l.add (_nwQuadTree.getAllWithin (r));
    l.add (_neQuadTree.getAllWithin (r));
    l.add (_swQuadTree.getAllWithin (r));
    l.add (_seQuadTree.getAllWithin (r));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/QuadTree.java" startline="252" endline="254">
{
    return _absoluteBoundingRectangle2D;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/QuadTree.java" startline="259" endline="274">
{
    _absoluteBoundingRectangle2D.setRect (absoluteBoundingRectangle2D);
    _nMaxTreeDepth = nMaxTreeDepth;
    if (_nMaxTreeDepth > 1) {
        _nwQuadTree = new QuadTree (_nMaxTreeDepth - 1, _makeNorthwest (absoluteBoundingRectangle2D));
        _neQuadTree = new QuadTree (_nMaxTreeDepth - 1, _makeNortheast (absoluteBoundingRectangle2D));
        _swQuadTree = new QuadTree (_nMaxTreeDepth - 1, _makeSouthwest (absoluteBoundingRectangle2D));
        _seQuadTree = new QuadTree (_nMaxTreeDepth - 1, _makeSoutheast (absoluteBoundingRectangle2D));
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/QuadTree.java" startline="264" endline="273">
{
    _nwQuadTree = new QuadTree (_nMaxTreeDepth - 1, _makeNorthwest (absoluteBoundingRectangle2D));
    _neQuadTree = new QuadTree (_nMaxTreeDepth - 1, _makeNortheast (absoluteBoundingRectangle2D));
    _swQuadTree = new QuadTree (_nMaxTreeDepth - 1, _makeSouthwest (absoluteBoundingRectangle2D));
    _seQuadTree = new QuadTree (_nMaxTreeDepth - 1, _makeSoutheast (absoluteBoundingRectangle2D));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/QuadTree.java" startline="277" endline="279">
{
    return new Rectangle2D.Double (r.getX (), r.getY (), r.getWidth () / 2.0, r.getHeight () / 2.0);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/QuadTree.java" startline="282" endline="285">
{
    return new Rectangle2D.Double (r.getX () + r.getWidth () / 2.0, r.getY (), r.getWidth () / 2.0, r.getHeight () / 2.0);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/QuadTree.java" startline="288" endline="291">
{
    return new Rectangle2D.Double (r.getX (), r.getY () + r.getHeight () / 2.0, r.getWidth () / 2.0, r.getHeight () / 2.0);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/QuadTree.java" startline="294" endline="298">
{
    return new Rectangle2D.Double (r.getX () + r.getWidth () / 2.0, r.getY () + r.getHeight () / 2.0, r.getWidth () / 2.0, r.getHeight () / 2.0);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/RelativeLocator.java" startline="39" endline="42">
{
    fRelativeX = 0.0;
    fRelativeY = 0.0;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/RelativeLocator.java" startline="45" endline="55">
{
    if (RelativeLocator.class.isInstance (o)) {
        RelativeLocator rl = (RelativeLocator) o;
        if ((rl.fRelativeX) == fRelativeX && (rl.fRelativeY == fRelativeY)) {
            return true;
        }

    }

    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/RelativeLocator.java" startline="47" endline="53">
{
    RelativeLocator rl = (RelativeLocator) o;
    if ((rl.fRelativeX) == fRelativeX && (rl.fRelativeY == fRelativeY)) {
        return true;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/RelativeLocator.java" startline="50" endline="52">
{
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/RelativeLocator.java" startline="58" endline="61">
{
    fRelativeX = relativeX;
    fRelativeY = relativeY;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/RelativeLocator.java" startline="64" endline="70">
{
    Rectangle r = owner.displayBox ();
    return new Point (r.x + (int) (r.width * fRelativeX), r.y + (int) (r.height * fRelativeY));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/RelativeLocator.java" startline="73" endline="77">
{
    super.write (dw);
    dw.writeDouble (fRelativeX);
    dw.writeDouble (fRelativeY);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/RelativeLocator.java" startline="80" endline="84">
{
    super.read (dr);
    fRelativeX = dr.readDouble ();
    fRelativeY = dr.readDouble ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/RelativeLocator.java" startline="87" endline="89">
{
    return new RelativeLocator (1.0, 0.5);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/RelativeLocator.java" startline="95" endline="97">
{
    return new RelativeLocator (0.5, 0.0);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/RelativeLocator.java" startline="103" endline="105">
{
    return new RelativeLocator (0.0, 0.5);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/RelativeLocator.java" startline="111" endline="113">
{
    return new RelativeLocator (1.0, 0.0);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/RelativeLocator.java" startline="119" endline="121">
{
    return new RelativeLocator (0.0, 0.0);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/RelativeLocator.java" startline="127" endline="129">
{
    return new RelativeLocator (0.5, 1.0);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/RelativeLocator.java" startline="135" endline="137">
{
    return new RelativeLocator (1.0, 1.0);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/RelativeLocator.java" startline="143" endline="145">
{
    return new RelativeLocator (0.0, 1.0);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/RelativeLocator.java" startline="151" endline="153">
{
    return new RelativeLocator (0.5, 0.5);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ReverseFigureEnumerator.java" startline="31" endline="34">
{
    myInitialList = l;
    reset ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ReverseFigureEnumerator.java" startline="41" endline="43">
{
    return myIterator.hasNext ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ReverseFigureEnumerator.java" startline="51" endline="53">
{
    return (Figure) myIterator.next ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ReverseFigureEnumerator.java" startline="62" endline="64">
{
    myIterator = new ReverseListEnumerator (myInitialList);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SelectAllCommand.java" startline="32" endline="34">
{
    super (name, newDrawingEditor);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SelectAllCommand.java" startline="37" endline="43">
{
    super.execute ();
    setUndoActivity (createUndoActivity ());
    getUndoActivity ().setAffectedFigures (view ().selection ());
    view ().addToSelectionAll (view ().drawing ().figures ());
    view ().checkDamage ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SelectAllCommand.java" startline="51" endline="59">
{
    FigureEnumeration fe = view ().drawing ().figures ();
    if (fe.hasNextFigure () && (fe.nextFigure () != null)) {
        return true;
    }

    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SelectAllCommand.java" startline="54" endline="56">
{
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SelectAllCommand.java" startline="65" endline="67">
{
    return new SelectAllCommand.UndoActivity (view ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SelectAllCommand.java" startline="72" endline="76">
{
    super (newDrawingView);
    setUndoable (true);
    setRedoable (true);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SelectAllCommand.java" startline="79" endline="89">
{
    if (! super.undo ()) {
        return false;
    }

    getDrawingView ().clearSelection ();
    getDrawingView ().addToSelectionAll (getAffectedFigures ());
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SelectAllCommand.java" startline="81" endline="83">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SelectAllCommand.java" startline="92" endline="101">
{
    if (isRedoable ()) {
        getDrawingView ().addToSelectionAll (getDrawingView ().drawing ().figures ());
        return true;
    }

    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SelectAllCommand.java" startline="95" endline="98">
{
    getDrawingView ().addToSelectionAll (getDrawingView ().drawing ().figures ());
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SelectAreaTracker.java" startline="30" endline="32">
{
    this (newDrawingEditor, Color.black);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SelectAreaTracker.java" startline="35" endline="38">
{
    super (newDrawingEditor);
    fRubberBandColor = rubberBandColor;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SelectAreaTracker.java" startline="41" endline="46">
{
    super.mouseDown (e, e.getX (), e.getY ());
    rubberBand (getAnchorX (), getAnchorY (), getAnchorX (), getAnchorY ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SelectAreaTracker.java" startline="49" endline="53">
{
    super.mouseDrag (e, x, y);
    eraseRubberBand ();
    rubberBand (getAnchorX (), getAnchorY (), x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SelectAreaTracker.java" startline="56" endline="60">
{
    eraseRubberBand ();
    selectGroup (e.isShiftDown ());
    super.mouseUp (e, x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SelectAreaTracker.java" startline="63" endline="67">
{
    fSelectGroup = new Rectangle (new Point (x1, y1));
    fSelectGroup.add (new Point (x2, y2));
    drawXORRect (fSelectGroup);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SelectAreaTracker.java" startline="70" endline="72">
{
    drawXORRect (fSelectGroup);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SelectAreaTracker.java" startline="75" endline="99">
{
    Graphics g = view ().getGraphics ();
    if (g != null) {
        try {
            if (g instanceof Graphics2D) {
                Stroke dashedStroke = new BasicStroke (1.0f, BasicStroke.CAP_SQUARE, BasicStroke.JOIN_MITER, 10.0f, new float [] {5f, 5f, 5f, 5f}, 5.0f);
                ((Graphics2D) g).setStroke (dashedStroke);
            }

            g.setXORMode (view ().getBackground ());
            g.setColor (fRubberBandColor);
            g.drawRect (r.x, r.y, r.width, r.height);
        }
        finally {
            g.dispose ();
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SelectAreaTracker.java" startline="78" endline="98">
{
    try {
        if (g instanceof Graphics2D) {
            Stroke dashedStroke = new BasicStroke (1.0f, BasicStroke.CAP_SQUARE, BasicStroke.JOIN_MITER, 10.0f, new float [] {5f, 5f, 5f, 5f}, 5.0f);
            ((Graphics2D) g).setStroke (dashedStroke);
        }

        g.setXORMode (view ().getBackground ());
        g.setColor (fRubberBandColor);
        g.drawRect (r.x, r.y, r.width, r.height);
    }
    finally {
        g.dispose ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SelectAreaTracker.java" startline="80" endline="93">
{
    if (g instanceof Graphics2D) {
        Stroke dashedStroke = new BasicStroke (1.0f, BasicStroke.CAP_SQUARE, BasicStroke.JOIN_MITER, 10.0f, new float [] {5f, 5f, 5f, 5f}, 5.0f);
        ((Graphics2D) g).setStroke (dashedStroke);
    }

    g.setXORMode (view ().getBackground ());
    g.setColor (fRubberBandColor);
    g.drawRect (r.x, r.y, r.width, r.height);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SelectAreaTracker.java" startline="82" endline="88">
{
    Stroke dashedStroke = new BasicStroke (1.0f, BasicStroke.CAP_SQUARE, BasicStroke.JOIN_MITER, 10.0f, new float [] {5f, 5f, 5f, 5f}, 5.0f);
    ((Graphics2D) g).setStroke (dashedStroke);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SelectAreaTracker.java" startline="95" endline="97">
{
    g.dispose ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SelectAreaTracker.java" startline="102" endline="120">
{
    FigureEnumeration fe = drawing ().figuresReverse ();
    while (fe.hasNextFigure ()) {
        Figure figure = fe.nextFigure ();
        Rectangle r2 = figure.displayBox ();
        if (fSelectGroup.contains (r2.x, r2.y) && fSelectGroup.contains (r2.x + r2.width, r2.y + r2.height)) {
            if (toggle) {
                view ().toggleSelection (figure);
            }
            else {
                view ().addToSelection (figure);
            }

        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SelectAreaTracker.java" startline="105" endline="119">
{
    Figure figure = fe.nextFigure ();
    Rectangle r2 = figure.displayBox ();
    if (fSelectGroup.contains (r2.x, r2.y) && fSelectGroup.contains (r2.x + r2.width, r2.y + r2.height)) {
        if (toggle) {
            view ().toggleSelection (figure);
        }
        else {
            view ().addToSelection (figure);
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SelectAreaTracker.java" startline="109" endline="118">
{
    if (toggle) {
        view ().toggleSelection (figure);
    }
    else {
        view ().addToSelection (figure);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SelectAreaTracker.java" startline="111" endline="113">
{
    view ().toggleSelection (figure);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SelectAreaTracker.java" startline="115" endline="117">
{
    view ().addToSelection (figure);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SelectionTool.java" startline="43" endline="45">
{
    super (newDrawingEditor);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SelectionTool.java" startline="51" endline="86">
{
    super.mouseDown (e, x, y);
    if (getDelegateTool () != null) {
        return;
    }

    view ().freezeView ();
    Handle handle = view ().findHandle (e.getX (), e.getY ());
    if (handle != null) {
        setDelegateTool (createHandleTracker (view (), handle));
    }
    else {
        Figure figure = drawing ().findFigure (e.getX (), e.getY ());
        if (figure != null) {
            setDelegateTool (createDragTracker (figure));
        }
        else {
            if (! e.isShiftDown ()) {
                view ().clearSelection ();
            }

            setDelegateTool (createAreaTracker ());
        }

    }

    getDelegateTool ().activate ();
    getDelegateTool ().mouseDown (e, x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SelectionTool.java" startline="57" endline="59">
{
    return;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SelectionTool.java" startline="65" endline="67">
{
    setDelegateTool (createHandleTracker (view (), handle));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SelectionTool.java" startline="69" endline="83">
{
    Figure figure = drawing ().findFigure (e.getX (), e.getY ());
    if (figure != null) {
        setDelegateTool (createDragTracker (figure));
    }
    else {
        if (! e.isShiftDown ()) {
            view ().clearSelection ();
        }

        setDelegateTool (createAreaTracker ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SelectionTool.java" startline="72" endline="74">
{
    setDelegateTool (createDragTracker (figure));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SelectionTool.java" startline="76" endline="82">
{
    if (! e.isShiftDown ()) {
        view ().clearSelection ();
    }

    setDelegateTool (createAreaTracker ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SelectionTool.java" startline="78" endline="80">
{
    view ().clearSelection ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SelectionTool.java" startline="93" endline="98">
{
    if (evt.getSource () == getActiveView ()) {
        DragNDropTool.setCursor (evt.getX (), evt.getY (), getActiveView ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SelectionTool.java" startline="95" endline="97">
{
    DragNDropTool.setCursor (evt.getX (), evt.getY (), getActiveView ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SelectionTool.java" startline="105" endline="110">
{
    if (getDelegateTool () != null) {
        getDelegateTool ().mouseDrag (e, x, y);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SelectionTool.java" startline="107" endline="109">
{
    getDelegateTool ().mouseDrag (e, x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SelectionTool.java" startline="117" endline="128">
{
    if (getDelegateTool () != null) {
        getDelegateTool ().mouseUp (e, x, y);
        getDelegateTool ().deactivate ();
        setDelegateTool (null);
    }

    if (view () != null) {
        view ().unfreezeView ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SelectionTool.java" startline="119" endline="123">
{
    getDelegateTool ().mouseUp (e, x, y);
    getDelegateTool ().deactivate ();
    setDelegateTool (null);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SelectionTool.java" startline="125" endline="127">
{
    view ().unfreezeView ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SelectionTool.java" startline="134" endline="136">
{
    return new HandleTracker (editor (), new UndoableHandle (handle, view));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SelectionTool.java" startline="142" endline="144">
{
    return new UndoableTool (new DragTracker (editor (), f));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SelectionTool.java" startline="151" endline="153">
{
    return new SelectAreaTracker (editor ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SelectionTool.java" startline="156" endline="158">
{
    return fChild;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SelectionTool.java" startline="161" endline="163">
{
    fChild = newDelegateTool;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SendToBackCommand.java" startline="33" endline="35">
{
    super (name, newDrawingEditor);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SendToBackCommand.java" startline="38" endline="48">
{
    super.execute ();
    setUndoActivity (createUndoActivity ());
    getUndoActivity ().setAffectedFigures (view ().selectionZOrdered ());
    FigureEnumeration fe = getUndoActivity ().getAffectedFigures ();
    while (fe.hasNextFigure ()) {
        view ().drawing ().sendToBack (fe.nextFigure ());
    }

    view ().checkDamage ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SendToBackCommand.java" startline="44" endline="46">
{
    view ().drawing ().sendToBack (fe.nextFigure ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SendToBackCommand.java" startline="51" endline="53">
{
    return view ().selectionCount () > 0;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SendToBackCommand.java" startline="56" endline="58">
{
    return new SendToBackCommand.UndoActivity (view ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SendToBackCommand.java" startline="65" endline="70">
{
    super (newDrawingView);
    myOriginalLayers = new Hashtable ();
    setUndoable (true);
    setRedoable (true);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SendToBackCommand.java" startline="73" endline="88">
{
    if (! super.undo ()) {
        return false;
    }

    FigureEnumeration fe = getAffectedFigures ();
    while (fe.hasNextFigure ()) {
        Figure currentFigure = fe.nextFigure ();
        int currentFigureLayer = getOriginalLayer (currentFigure);
        getDrawingView ().drawing ().sendToLayer (currentFigure, currentFigureLayer);
    }

    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SendToBackCommand.java" startline="75" endline="77">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SendToBackCommand.java" startline="81" endline="85">
{
    Figure currentFigure = fe.nextFigure ();
    int currentFigureLayer = getOriginalLayer (currentFigure);
    getDrawingView ().drawing ().sendToLayer (currentFigure, currentFigureLayer);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SendToBackCommand.java" startline="91" endline="105">
{
    if (! isRedoable ()) {
        return false;
    }

    FigureEnumeration fe = getAffectedFigures ();
    while (fe.hasNextFigure ()) {
        sendToCommand (fe.nextFigure ());
    }

    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SendToBackCommand.java" startline="94" endline="96">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SendToBackCommand.java" startline="100" endline="102">
{
    sendToCommand (fe.nextFigure ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SendToBackCommand.java" startline="108" endline="110">
{
    getDrawingView ().drawing ().sendToBack (f);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SendToBackCommand.java" startline="113" endline="115">
{
    myOriginalLayers.put (affectedFigure, new Integer (newOriginalLayer));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SendToBackCommand.java" startline="118" endline="120">
{
    return ((Integer) myOriginalLayers.get (lookupAffectedFigure)).intValue ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SendToBackCommand.java" startline="123" endline="134">
{
    super.setAffectedFigures (fe);
    FigureEnumeration copyFe = getAffectedFigures ();
    while (copyFe.hasNextFigure ()) {
        Figure f = copyFe.nextFigure ();
        int originalLayer = getDrawingView ().drawing ().getLayer (f);
        addOriginalLayer (f, originalLayer);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SendToBackCommand.java" startline="129" endline="133">
{
    Figure f = copyFe.nextFigure ();
    int originalLayer = getDrawingView ().drawing ().getLayer (f);
    addOriginalLayer (f, originalLayer);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SimpleUpdateStrategy.java" startline="39" endline="41">
{
    view.drawAll (g);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SingleFigureEnumerator.java" startline="30" endline="33">
{
    myInitialFigure = newSingleFigure;
    reset ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SingleFigureEnumerator.java" startline="40" endline="42">
{
    return mySingleFigure != null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SingleFigureEnumerator.java" startline="50" endline="54">
{
    Figure returnFigure = mySingleFigure;
    mySingleFigure = null;
    return returnFigure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/SingleFigureEnumerator.java" startline="63" endline="65">
{
    mySingleFigure = myInitialFigure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawing.java" startline="58" endline="62">
{
    super ();
    fListeners = CollectionsFactory.current ().createList (2);
    init (new Rectangle (- 500, - 500, 2000, 2000));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawing.java" startline="68" endline="74">
{
    if (fListeners == null) {
        fListeners = CollectionsFactory.current ().createList (2);
    }

    fListeners.add (listener);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawing.java" startline="70" endline="72">
{
    fListeners = CollectionsFactory.current ().createList (2);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawing.java" startline="80" endline="82">
{
    fListeners.remove (listener);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawing.java" startline="88" endline="90">
{
    return fListeners.iterator ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawing.java" startline="100" endline="109">
{
    Figure orphanedFigure = super.orphan (figure);
    if (orphanedFigure.listener () != null) {
        Rectangle rect = invalidateRectangle (displayBox ());
        orphanedFigure.listener ().figureRequestRemove (new FigureChangeEvent (orphanedFigure, rect));
    }

    return orphanedFigure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawing.java" startline="104" endline="107">
{
    Rectangle rect = invalidateRectangle (displayBox ());
    orphanedFigure.listener ().figureRequestRemove (new FigureChangeEvent (orphanedFigure, rect));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawing.java" startline="112" endline="121">
{
    Figure addedFigure = super.add (figure);
    if (addedFigure.listener () != null) {
        Rectangle rect = invalidateRectangle (displayBox ());
        addedFigure.listener ().figureRequestUpdate (new FigureChangeEvent (figure, rect));
        return addedFigure;
    }

    return addedFigure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawing.java" startline="115" endline="119">
{
    Rectangle rect = invalidateRectangle (displayBox ());
    addedFigure.listener ().figureRequestUpdate (new FigureChangeEvent (figure, rect));
    return addedFigure;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawing.java" startline="129" endline="138">
{
    if (fListeners != null) {
        for (int i = 0;
        i < fListeners.size (); i ++) {
            DrawingChangeListener l = (DrawingChangeListener) fListeners.get (i);
            l.drawingInvalidated (new DrawingChangeEvent (this, e.getInvalidatedRectangle ()));
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawing.java" startline="131" endline="137">
{
    for (int i = 0;
    i < fListeners.size (); i ++) {
        DrawingChangeListener l = (DrawingChangeListener) fListeners.get (i);
        l.drawingInvalidated (new DrawingChangeEvent (this, e.getInvalidatedRectangle ()));
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawing.java" startline="133" endline="136">
{
    DrawingChangeListener l = (DrawingChangeListener) fListeners.get (i);
    l.drawingInvalidated (new DrawingChangeEvent (this, e.getInvalidatedRectangle ()));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawing.java" startline="144" endline="153">
{
    if (fListeners != null) {
        for (int i = 0;
        i < fListeners.size (); i ++) {
            DrawingChangeListener l = (DrawingChangeListener) fListeners.get (i);
            l.drawingTitleChanged (new DrawingChangeEvent (this, null));
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawing.java" startline="146" endline="152">
{
    for (int i = 0;
    i < fListeners.size (); i ++) {
        DrawingChangeListener l = (DrawingChangeListener) fListeners.get (i);
        l.drawingTitleChanged (new DrawingChangeEvent (this, null));
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawing.java" startline="148" endline="151">
{
    DrawingChangeListener l = (DrawingChangeListener) fListeners.get (i);
    l.drawingTitleChanged (new DrawingChangeEvent (this, null));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawing.java" startline="159" endline="168">
{
    if (fListeners != null) {
        for (int i = 0;
        i < fListeners.size (); i ++) {
            DrawingChangeListener l = (DrawingChangeListener) fListeners.get (i);
            l.drawingRequestUpdate (new DrawingChangeEvent (this, null));
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawing.java" startline="161" endline="167">
{
    for (int i = 0;
    i < fListeners.size (); i ++) {
        DrawingChangeListener l = (DrawingChangeListener) fListeners.get (i);
        l.drawingRequestUpdate (new DrawingChangeEvent (this, null));
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawing.java" startline="163" endline="166">
{
    DrawingChangeListener l = (DrawingChangeListener) fListeners.get (i);
    l.drawingRequestUpdate (new DrawingChangeEvent (this, null));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawing.java" startline="175" endline="182">
{
    List handles = CollectionsFactory.current ().createList ();
    handles.add (new NullHandle (this, RelativeLocator.northWest ()));
    handles.add (new NullHandle (this, RelativeLocator.northEast ()));
    handles.add (new NullHandle (this, RelativeLocator.southWest ()));
    handles.add (new NullHandle (this, RelativeLocator.southEast ()));
    return new HandleEnumerator (handles);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawing.java" startline="188" endline="202">
{
    if (fFigures.size () > 0) {
        FigureEnumeration fe = figures ();
        Rectangle r = fe.nextFigure ().displayBox ();
        while (fe.hasNextFigure ()) {
            r.add (fe.nextFigure ().displayBox ());
        }

        return r;
    }

    return new Rectangle (0, 0, 0, 0);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawing.java" startline="190" endline="200">
{
    FigureEnumeration fe = figures ();
    Rectangle r = fe.nextFigure ().displayBox ();
    while (fe.hasNextFigure ()) {
        r.add (fe.nextFigure ().displayBox ());
    }

    return r;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawing.java" startline="196" endline="198">
{
    r.add (fe.nextFigure ().displayBox ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawing.java" startline="205" endline="206">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawing.java" startline="212" endline="228">
{
    Thread current = Thread.currentThread ();
    if (fDrawingLockHolder == current) {
        return;
    }

    while (fDrawingLockHolder != null) {
        try {
            wait ();
        }
        catch (InterruptedException ex) {
        }

    }

    fDrawingLockHolder = current;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawing.java" startline="216" endline="218">
{
    return;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawing.java" startline="220" endline="226">
{
    try {
        wait ();
    }
    catch (InterruptedException ex) {
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawing.java" startline="222" endline="224">
{
    wait ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawing.java" startline="225" endline="225">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawing.java" startline="234" endline="240">
{
    if (fDrawingLockHolder != null) {
        fDrawingLockHolder = null;
        notify ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawing.java" startline="236" endline="239">
{
    fDrawingLockHolder = null;
    notify ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawing.java" startline="244" endline="249">
{
    s.defaultReadObject ();
    fListeners = CollectionsFactory.current ().createList (2);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawing.java" startline="252" endline="254">
{
    return myTitle;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawing.java" startline="257" endline="259">
{
    myTitle = newTitle;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="134" endline="136">
{
    this (editor, MINIMUM_WIDTH, MINIMUM_HEIGHT);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="139" endline="159">
{
    setAutoscrolls (true);
    counter ++;
    fEditor = editor;
    fViewSize = new Dimension (width, height);
    setSize (width, height);
    fSelectionListeners = CollectionsFactory.current ().createList ();
    addFigureSelectionListener (editor ());
    setLastClick (new Point (0, 0));
    fConstrainer = null;
    fSelection = CollectionsFactory.current ().createList ();
    setDisplayUpdate (createDisplayUpdate ());
    setBackground (Color.lightGray);
    addMouseListener (createMouseListener ());
    addMouseMotionListener (createMouseMotionListener ());
    addKeyListener (createKeyListener ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="162" endline="164">
{
    return new DrawingViewMouseListener ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="167" endline="169">
{
    return new DrawingViewMouseMotionListener ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="172" endline="174">
{
    return new DrawingViewKeyListener ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="180" endline="183">
{
    return new SimpleUpdateStrategy ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="189" endline="191">
{
    fEditor = editor;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="197" endline="199">
{
    return editor ().tool ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="205" endline="207">
{
    return fDrawing;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="213" endline="228">
{
    if (drawing () != null) {
        clearSelection ();
        drawing ().removeDrawingChangeListener (this);
    }

    fDrawing = d;
    if (drawing () != null) {
        drawing ().addDrawingChangeListener (this);
    }

    checkMinimumSize ();
    repaint ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="215" endline="218">
{
    clearSelection ();
    drawing ().removeDrawingChangeListener (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="222" endline="224">
{
    drawing ().addDrawingChangeListener (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="234" endline="236">
{
    return fEditor;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="243" endline="245">
{
    return drawing ().add (figure);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="252" endline="254">
{
    return drawing ().remove (figure);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="260" endline="266">
{
    FigureEnumeration fe = new FigureEnumerator (figures);
    while (fe.hasNextFigure ()) {
        add (fe.nextFigure ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="263" endline="265">
{
    add (fe.nextFigure ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="272" endline="284">
{
    while (fe.hasNextFigure ()) {
        Figure figure = fe.nextFigure ();
        if (figure.includes (inf)) {
            return true;
        }

    }

    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="274" endline="281">
{
    Figure figure = fe.nextFigure ();
    if (figure.includes (inf)) {
        return true;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="278" endline="280">
{
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="294" endline="351">
{
    if (fe == null) {
        return FigureEnumerator.getEmptyEnumeration ();
    }

    List vCF = CollectionsFactory.current ().createList (10);
    InsertIntoDrawingVisitor visitor = new InsertIntoDrawingVisitor (drawing ());
    while (fe.hasNextFigure ()) {
        Figure figure = fe.nextFigure ();
        if (figure instanceof ConnectionFigure) {
            vCF.add (figure);
        }
        else if (figure != null) {
            figure.moveBy (dx, dy);
            figure.visit (visitor);
        }

    }

    FigureEnumeration ecf = new FigureEnumerator (vCF);
    while (ecf.hasNextFigure ()) {
        ConnectionFigure cf = (ConnectionFigure) ecf.nextFigure ();
        Figure sf = cf.startFigure ();
        Figure ef = cf.endFigure ();
        if (figureExists (sf, drawing ().figures ()) && figureExists (ef, drawing ().figures ()) && (! bCheck || cf.canConnect (sf, ef))) {
            if (bCheck) {
                Point sp = sf.center ();
                Point ep = ef.center ();
                Connector fStartConnector = cf.startFigure ().connectorAt (ep.x, ep.y);
                Connector fEndConnector = cf.endFigure ().connectorAt (sp.x, sp.y);
                if (fEndConnector != null && fStartConnector != null) {
                    cf.connectStart (fStartConnector);
                    cf.connectEnd (fEndConnector);
                    cf.updateConnection ();
                }

            }

            cf.visit (visitor);
        }

    }

    addToSelectionAll (visitor.getInsertedFigures ());
    return visitor.getInsertedFigures ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="296" endline="298">
{
    return FigureEnumerator.getEmptyEnumeration ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="304" endline="315">
{
    Figure figure = fe.nextFigure ();
    if (figure instanceof ConnectionFigure) {
        vCF.add (figure);
    }
    else if (figure != null) {
        figure.moveBy (dx, dy);
        figure.visit (visitor);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="307" endline="309">
{
    vCF.add (figure);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="311" endline="314">
{
    figure.moveBy (dx, dy);
    figure.visit (visitor);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="320" endline="347">
{
    ConnectionFigure cf = (ConnectionFigure) ecf.nextFigure ();
    Figure sf = cf.startFigure ();
    Figure ef = cf.endFigure ();
    if (figureExists (sf, drawing ().figures ()) && figureExists (ef, drawing ().figures ()) && (! bCheck || cf.canConnect (sf, ef))) {
        if (bCheck) {
            Point sp = sf.center ();
            Point ep = ef.center ();
            Connector fStartConnector = cf.startFigure ().connectorAt (ep.x, ep.y);
            Connector fEndConnector = cf.endFigure ().connectorAt (sp.x, sp.y);
            if (fEndConnector != null && fStartConnector != null) {
                cf.connectStart (fStartConnector);
                cf.connectEnd (fEndConnector);
                cf.updateConnection ();
            }

        }

        cf.visit (visitor);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="328" endline="346">
{
    if (bCheck) {
        Point sp = sf.center ();
        Point ep = ef.center ();
        Connector fStartConnector = cf.startFigure ().connectorAt (ep.x, ep.y);
        Connector fEndConnector = cf.endFigure ().connectorAt (sp.x, sp.y);
        if (fEndConnector != null && fStartConnector != null) {
            cf.connectStart (fStartConnector);
            cf.connectEnd (fEndConnector);
            cf.updateConnection ();
        }

    }

    cf.visit (visitor);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="331" endline="343">
{
    Point sp = sf.center ();
    Point ep = ef.center ();
    Connector fStartConnector = cf.startFigure ().connectorAt (ep.x, ep.y);
    Connector fEndConnector = cf.endFigure ().connectorAt (sp.x, sp.y);
    if (fEndConnector != null && fStartConnector != null) {
        cf.connectStart (fStartConnector);
        cf.connectEnd (fEndConnector);
        cf.updateConnection ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="338" endline="342">
{
    cf.connectStart (fStartConnector);
    cf.connectEnd (fEndConnector);
    cf.updateConnection ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="357" endline="388">
{
    if (inFigure == null || ! inFigure.canConnect ()) {
        return null;
    }

    List result = CollectionsFactory.current ().createList (5);
    FigureEnumeration figures = drawing ().figures ();
    while (figures.hasNextFigure ()) {
        Figure f = figures.nextFigure ();
        if ((f instanceof ConnectionFigure) && ! (isFigureSelected (f))) {
            ConnectionFigure cf = (ConnectionFigure) f;
            if (cf.startFigure ().includes (inFigure) || cf.endFigure ().includes (inFigure)) {
                result.add (f);
            }

        }

    }

    return new FigureEnumerator (result);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="360" endline="362">
{
    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="372" endline="385">
{
    Figure f = figures.nextFigure ();
    if ((f instanceof ConnectionFigure) && ! (isFigureSelected (f))) {
        ConnectionFigure cf = (ConnectionFigure) f;
        if (cf.startFigure ().includes (inFigure) || cf.endFigure ().includes (inFigure)) {
            result.add (f);
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="376" endline="384">
{
    ConnectionFigure cf = (ConnectionFigure) f;
    if (cf.startFigure ().includes (inFigure) || cf.endFigure ().includes (inFigure)) {
        result.add (f);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="381" endline="383">
{
    result.add (f);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="394" endline="396">
{
    return fViewSize;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="402" endline="404">
{
    return getMinimumSize ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="411" endline="413">
{
    fUpdateStrategy = updateStrategy;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="420" endline="422">
{
    return fUpdateStrategy;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="432" endline="434">
{
    return selectionZOrdered ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="443" endline="456">
{
    List result = CollectionsFactory.current ().createList (selectionCount ());
    FigureEnumeration figures = drawing ().figures ();
    while (figures.hasNextFigure ()) {
        Figure f = figures.nextFigure ();
        if (isFigureSelected (f)) {
            result.add (f);
        }

    }

    return new ReverseFigureEnumerator (result);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="448" endline="454">
{
    Figure f = figures.nextFigure ();
    if (isFigureSelected (f)) {
        result.add (f);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="451" endline="453">
{
    result.add (f);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="462" endline="464">
{
    return fSelection.size ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="470" endline="472">
{
    return fSelection.contains (checkFigure);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="479" endline="487">
{
    if (! isFigureSelected (figure) && drawing ().includes (figure)) {
        fSelection.add (figure);
        fSelectionHandles = null;
        figure.invalidate ();
        fireSelectionChanged ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="481" endline="486">
{
    fSelection.add (figure);
    fSelectionHandles = null;
    figure.invalidate ();
    fireSelectionChanged ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="493" endline="495">
{
    addToSelectionAll (new FigureEnumerator (figures));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="501" endline="506">
{
    while (fe.hasNextFigure ()) {
        addToSelection (fe.nextFigure ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="503" endline="505">
{
    addToSelection (fe.nextFigure ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="512" endline="520">
{
    if (isFigureSelected (figure)) {
        fSelection.remove (figure);
        fSelectionHandles = null;
        figure.invalidate ();
        fireSelectionChanged ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="514" endline="519">
{
    fSelection.remove (figure);
    fSelectionHandles = null;
    figure.invalidate ();
    fireSelectionChanged ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="527" endline="537">
{
    if (isFigureSelected (figure)) {
        removeFromSelection (figure);
    }
    else {
        addToSelection (figure);
    }

    fireSelectionChanged ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="529" endline="531">
{
    removeFromSelection (figure);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="533" endline="535">
{
    addToSelection (figure);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="543" endline="559">
{
    if (selectionCount () == 0) {
        return;
    }

    FigureEnumeration fe = selection ();
    while (fe.hasNextFigure ()) {
        fe.nextFigure ().invalidate ();
    }

    fSelection = CollectionsFactory.current ().createList ();
    fSelectionHandles = null;
    fireSelectionChanged ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="546" endline="549">
{
    return;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="553" endline="555">
{
    fe.nextFigure ().invalidate ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="565" endline="581">
{
    if (fSelectionHandles == null) {
        fSelectionHandles = CollectionsFactory.current ().createList ();
        FigureEnumeration fe = selection ();
        while (fe.hasNextFigure ()) {
            Figure figure = fe.nextFigure ();
            HandleEnumeration kk = figure.handles ();
            while (kk.hasNextHandle ()) {
                fSelectionHandles.add (kk.nextHandle ());
            }

        }

    }

    return new HandleEnumerator (fSelectionHandles);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="567" endline="579">
{
    fSelectionHandles = CollectionsFactory.current ().createList ();
    FigureEnumeration fe = selection ();
    while (fe.hasNextFigure ()) {
        Figure figure = fe.nextFigure ();
        HandleEnumeration kk = figure.handles ();
        while (kk.hasNextHandle ()) {
            fSelectionHandles.add (kk.nextHandle ());
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="571" endline="578">
{
    Figure figure = fe.nextFigure ();
    HandleEnumeration kk = figure.handles ();
    while (kk.hasNextHandle ()) {
        fSelectionHandles.add (kk.nextHandle ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="575" endline="577">
{
    fSelectionHandles.add (kk.nextHandle ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="588" endline="590">
{
    return new StandardFigureSelection (selectionZOrdered (), selectionCount ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="597" endline="610">
{
    Handle handle;
    HandleEnumeration he = selectionHandles ();
    while (he.hasNextHandle ()) {
        handle = he.nextHandle ();
        if (handle.containsPoint (x, y)) {
            return handle;
        }

    }

    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="602" endline="608">
{
    handle = he.nextHandle ();
    if (handle.containsPoint (x, y)) {
        return handle;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="605" endline="607">
{
    return handle;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="618" endline="627">
{
    if (fSelectionListeners != null) {
        for (int i = 0;
        i < fSelectionListeners.size (); i ++) {
            FigureSelectionListener l = (FigureSelectionListener) fSelectionListeners.get (i);
            l.figureSelectionChanged (this);
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="620" endline="626">
{
    for (int i = 0;
    i < fSelectionListeners.size (); i ++) {
        FigureSelectionListener l = (FigureSelectionListener) fSelectionListeners.get (i);
        l.figureSelectionChanged (this);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="622" endline="625">
{
    FigureSelectionListener l = (FigureSelectionListener) fSelectionListeners.get (i);
    l.figureSelectionChanged (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="630" endline="632">
{
    return fDamage;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="635" endline="637">
{
    fDamage = r;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="643" endline="645">
{
    return fLastClick;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="648" endline="650">
{
    fLastClick = newLastClick;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="656" endline="658">
{
    fConstrainer = c;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="664" endline="666">
{
    return fConstrainer;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="672" endline="685">
{
    Dimension size = getSize ();
    p.x = Geom.range (1, size.width, p.x);
    p.y = Geom.range (1, size.height, p.y);
    if (fConstrainer != null) {
        return fConstrainer.constrainPoint (p);
    }

    return p;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="681" endline="683">
{
    return fConstrainer.constrainPoint (p);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="688" endline="695">
{
    FigureEnumeration figures = selection ();
    while (figures.hasNextFigure ()) {
        figures.nextFigure ().moveBy (dx, dy);
    }

    checkDamage ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="691" endline="693">
{
    figures.nextFigure ().moveBy (dx, dy);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="701" endline="711">
{
    Iterator each = drawing ().drawingChangeListeners ();
    while (each.hasNext ()) {
        Object l = each.next ();
        if (l instanceof DrawingView) {
            ((DrawingView) l).repairDamage ();
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="704" endline="710">
{
    Object l = each.next ();
    if (l instanceof DrawingView) {
        ((DrawingView) l).repairDamage ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="707" endline="709">
{
    ((DrawingView) l).repairDamage ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="714" endline="720">
{
    if (getDamage () != null) {
        repaint (getDamage ().x, getDamage ().y, getDamage ().width, getDamage ().height);
        setDamage (null);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="716" endline="719">
{
    repaint (getDamage ().x, getDamage ().y, getDamage ().width, getDamage ().height);
    setDamage (null);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="723" endline="737">
{
    Rectangle r = e.getInvalidatedRectangle ();
    if (getDamage () == null) {
        setDamage (r);
    }
    else {
        Rectangle damagedR = getDamage ();
        damagedR.add (r);
        setDamage (damagedR);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="726" endline="728">
{
    setDamage (r);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="730" endline="736">
{
    Rectangle damagedR = getDamage ();
    damagedR.add (r);
    setDamage (damagedR);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="740" endline="742">
{
    repairDamage ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="745" endline="746">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="754" endline="756">
{
    getDisplayUpdate ().draw (g, this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="764" endline="780">
{
    boolean isPrinting = g instanceof PrintGraphics;
    drawBackground (g);
    if ((fBackgrounds != null) && ! isPrinting) {
        drawPainters (g, fBackgrounds);
    }

    drawDrawing (g);
    if ((fForegrounds != null) && ! isPrinting) {
        drawPainters (g, fForegrounds);
    }

    if (! isPrinting) {
        drawHandles (g);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="768" endline="770">
{
    drawPainters (g, fBackgrounds);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="773" endline="775">
{
    drawPainters (g, fForegrounds);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="777" endline="779">
{
    drawHandles (g);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="789" endline="805">
{
    boolean isPrinting = g instanceof PrintGraphics;
    if ((fBackgrounds != null) && ! isPrinting) {
        drawPainters (g, fBackgrounds);
    }

    drawing ().draw (g, fe);
    if ((fForegrounds != null) && ! isPrinting) {
        drawPainters (g, fForegrounds);
    }

    if (! isPrinting) {
        drawHandles (g);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="793" endline="795">
{
    drawPainters (g, fBackgrounds);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="798" endline="800">
{
    drawPainters (g, fForegrounds);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="802" endline="804">
{
    drawHandles (g);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="811" endline="817">
{
    HandleEnumeration he = selectionHandles ();
    while (he.hasNextHandle ()) {
        (he.nextHandle ()).draw (g);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="814" endline="816">
{
    (he.nextHandle ()).draw (g);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="823" endline="825">
{
    drawing ().draw (g);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="833" endline="836">
{
    g.setColor (getBackground ());
    g.fillRect (0, 0, getBounds ().width, getBounds ().height);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="839" endline="844">
{
    for (int i = 0;
    i < v.size (); i ++) {
        ((Painter) v.get (i)).draw (g, this);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="841" endline="843">
{
    ((Painter) v.get (i)).draw (g, this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="850" endline="857">
{
    if (fBackgrounds == null) {
        fBackgrounds = CollectionsFactory.current ().createList (3);
    }

    fBackgrounds.add (painter);
    repaint ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="852" endline="854">
{
    fBackgrounds = CollectionsFactory.current ().createList (3);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="863" endline="869">
{
    if (fBackgrounds != null) {
        fBackgrounds.remove (painter);
    }

    repaint ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="865" endline="867">
{
    fBackgrounds.remove (painter);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="872" endline="874">
{
    return fBackgrounds;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="880" endline="886">
{
    if (fForegrounds != null) {
        fForegrounds.remove (painter);
    }

    repaint ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="882" endline="884">
{
    fForegrounds.remove (painter);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="892" endline="899">
{
    if (fForegrounds == null) {
        fForegrounds = CollectionsFactory.current ().createList (3);
    }

    fForegrounds.add (painter);
    repaint ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="894" endline="896">
{
    fForegrounds = CollectionsFactory.current ().createList (3);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="902" endline="904">
{
    return fForegrounds;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="911" endline="913">
{
    drawing ().lock ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="920" endline="922">
{
    drawing ().unlock ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="926" endline="936">
{
    s.defaultReadObject ();
    fSelection = CollectionsFactory.current ().createList ();
    if (drawing () != null) {
        drawing ().addDrawingChangeListener (this);
    }

    fSelectionListeners = CollectionsFactory.current ().createList ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="932" endline="934">
{
    drawing ().addDrawingChangeListener (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="939" endline="948">
{
    Dimension d = getDrawingSize ();
    if (fViewSize.height < d.height || fViewSize.width < d.width) {
        fViewSize.height = d.height + SCROLL_OFFSET;
        fViewSize.width = d.width + SCROLL_OFFSET;
        setSize (fViewSize);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="943" endline="947">
{
    fViewSize.height = d.height + SCROLL_OFFSET;
    fViewSize.width = d.width + SCROLL_OFFSET;
    setSize (fViewSize);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="955" endline="965">
{
    FigureEnumeration fe = drawing ().figures ();
    Dimension d = new Dimension (0, 0);
    while (fe.hasNextFigure ()) {
        Rectangle r = fe.nextFigure ().displayBox ();
        d.width = Math.max (d.width, r.x + r.width);
        d.height = Math.max (d.height, r.y + r.height);
    }

    return d;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="959" endline="963">
{
    Rectangle r = fe.nextFigure ().displayBox ();
    d.width = Math.max (d.width, r.x + r.width);
    d.height = Math.max (d.height, r.y + r.height);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="968" endline="970">
{
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="973" endline="975">
{
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="977" endline="977">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="978" endline="978">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="985" endline="987">
{
    fSelectionListeners.add (fsl);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="994" endline="996">
{
    fSelectionListeners.remove (fsl);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="999" endline="1001">
{
    return java.awt.dnd.DnDConstants.ACTION_COPY_OR_MOVE;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="1008" endline="1010">
{
    ash.autoscroll (p);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="1012" endline="1014">
{
    return ash.getAutoscrollInsets ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="1018" endline="1020">
{
    super (margin);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="1022" endline="1024">
{
    return StandardDrawingView.this.getSize ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="1026" endline="1028">
{
    return StandardDrawingView.this.getVisibleRect ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="1030" endline="1032">
{
    StandardDrawingView.this.scrollRectToVisible (aRect);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="1036" endline="1038">
{
    return "DrawingView Nr: " + myCounter;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="1046" endline="1051">
{
    JOptionPane.showMessageDialog (this, t.getClass ().getName () + " - " + t.getMessage (), "Error", JOptionPane.ERROR_MESSAGE);
    t.printStackTrace ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="1060" endline="1073">
{
    try {
        requestFocus ();
        Point p = constrainPoint (new Point (e.getX (), e.getY ()));
        setLastClick (new Point (e.getX (), e.getY ()));
        tool ().mouseDown (e, p.x, p.y);
        checkDamage ();
    }
    catch (Throwable t) {
        handleMouseEventException (t);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="1062" endline="1068">
{
    requestFocus ();
    Point p = constrainPoint (new Point (e.getX (), e.getY ()));
    setLastClick (new Point (e.getX (), e.getY ()));
    tool ().mouseDown (e, p.x, p.y);
    checkDamage ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="1070" endline="1072">
{
    handleMouseEventException (t);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="1080" endline="1091">
{
    try {
        Point p = constrainPoint (new Point (e.getX (), e.getY ()));
        tool ().mouseUp (e, p.x, p.y);
        checkDamage ();
    }
    catch (Throwable t) {
        handleMouseEventException (t);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="1082" endline="1086">
{
    Point p = constrainPoint (new Point (e.getX (), e.getY ()));
    tool ().mouseUp (e, p.x, p.y);
    checkDamage ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="1088" endline="1090">
{
    handleMouseEventException (t);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="1101" endline="1112">
{
    try {
        Point p = constrainPoint (new Point (e.getX (), e.getY ()));
        tool ().mouseDrag (e, p.x, p.y);
        checkDamage ();
    }
    catch (Throwable t) {
        handleMouseEventException (t);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="1103" endline="1107">
{
    Point p = constrainPoint (new Point (e.getX (), e.getY ()));
    tool ().mouseDrag (e, p.x, p.y);
    checkDamage ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="1109" endline="1111">
{
    handleMouseEventException (t);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="1119" endline="1128">
{
    try {
        tool ().mouseMove (e, e.getX (), e.getY ());
    }
    catch (Throwable t) {
        handleMouseEventException (t);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="1121" endline="1123">
{
    tool ().mouseMove (e, e.getX (), e.getY ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="1125" endline="1127">
{
    handleMouseEventException (t);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="1136" endline="1138">
{
    deleteCmd = createDeleteCommand ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="1146" endline="1166">
{
    int code = e.getKeyCode ();
    if ((code == KeyEvent.VK_BACK_SPACE) || (code == KeyEvent.VK_DELETE)) {
        if (deleteCmd.isExecutable ()) {
            deleteCmd.execute ();
        }

    }
    else if ((code == KeyEvent.VK_DOWN) || (code == KeyEvent.VK_UP) || (code == KeyEvent.VK_RIGHT) || (code == KeyEvent.VK_LEFT)) {
        handleCursorKey (code);
    }
    else {
        tool ().keyDown (e, code);
    }

    checkDamage ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="1149" endline="1155">
{
    if (deleteCmd.isExecutable ()) {
        deleteCmd.execute ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="1151" endline="1154">
{
    deleteCmd.execute ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="1158" endline="1160">
{
    handleCursorKey (code);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="1162" endline="1164">
{
    tool ().keyDown (e, code);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="1173" endline="1199">
{
    int dx = 0, dy = 0;
    int stepX = 1, stepY = 1;
    if (fConstrainer != null) {
        stepX = fConstrainer.getStepX ();
        stepY = fConstrainer.getStepY ();
    }

    switch (key) {
        case KeyEvent.VK_DOWN :
            dy = stepY;
            break;
        case KeyEvent.VK_UP :
            dy = - stepY;
            break;
        case KeyEvent.VK_RIGHT :
            dx = stepX;
            break;
        case KeyEvent.VK_LEFT :
            dx = - stepX;
            break;
    }
    moveSelection (dx, dy);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="1178" endline="1181">
{
    stepX = fConstrainer.getStepX ();
    stepY = fConstrainer.getStepY ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="1202" endline="1204">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="1207" endline="1209">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="1212" endline="1214">
{
    return new UndoableCommand (new DeleteCommand ("Delete", editor ()));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="1218" endline="1226">
{
    return new DNDHelper () {

        protected DrawingView view () {
            return StandardDrawingView.this;
        }

    }

    ;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="1222" endline="1224">
{
    return StandardDrawingView.this;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="1229" endline="1235">
{
    if (dndh == null) {
        dndh = createDNDHelper ();
    }

    return dndh;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="1231" endline="1233">
{
    dndh = createDNDHelper ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="1238" endline="1240">
{
    return getDNDHelper ().setDragSourceActive (state);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardDrawingView.java" startline="1243" endline="1245">
{
    return getDNDHelper ().setDropTargetActive (state);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardFigureSelection.java" startline="44" endline="56">
{
    ByteArrayOutputStream output = new ByteArrayOutputStream (200);
    StorableOutput writer = new StorableOutput (output);
    writer.writeInt (figureCount);
    while (fe.hasNextFigure ()) {
        writer.writeStorable (fe.nextFigure ());
    }

    writer.close ();
    fData = output.toByteArray ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardFigureSelection.java" startline="51" endline="53">
{
    writer.writeStorable (fe.nextFigure ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardFigureSelection.java" startline="62" endline="64">
{
    return TYPE;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardFigureSelection.java" startline="73" endline="97">
{
    if (type.equals (TYPE)) {
        InputStream input = new ByteArrayInputStream (fData);
        List result = CollectionsFactory.current ().createList (10);
        StorableInput reader = new StorableInput (input);
        int numRead = 0;
        try {
            int count = reader.readInt ();
            while (numRead < count) {
                Figure newFigure = (Figure) reader.readStorable ();
                result.add (newFigure);
                numRead ++;
            }

        }
        catch (IOException e) {
            System.err.println (e.toString ());
        }

        return new FigureEnumerator (result);
    }

    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardFigureSelection.java" startline="75" endline="95">
{
    InputStream input = new ByteArrayInputStream (fData);
    List result = CollectionsFactory.current ().createList (10);
    StorableInput reader = new StorableInput (input);
    int numRead = 0;
    try {
        int count = reader.readInt ();
        while (numRead < count) {
            Figure newFigure = (Figure) reader.readStorable ();
            result.add (newFigure);
            numRead ++;
        }

    }
    catch (IOException e) {
        System.err.println (e.toString ());
    }

    return new FigureEnumerator (result);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardFigureSelection.java" startline="81" endline="89">
{
    int count = reader.readInt ();
    while (numRead < count) {
        Figure newFigure = (Figure) reader.readStorable ();
        result.add (newFigure);
        numRead ++;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardFigureSelection.java" startline="84" endline="88">
{
    Figure newFigure = (Figure) reader.readStorable ();
    result.add (newFigure);
    numRead ++;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardFigureSelection.java" startline="91" endline="93">
{
    System.err.println (e.toString ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/StandardFigureSelection.java" startline="100" endline="103">
{
    StandardFigureSelection duplicater = new StandardFigureSelection (toBeCloned, figureCount);
    return (FigureEnumeration) duplicater.getData (duplicater.getType ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ToggleGridCommand.java" startline="34" endline="37">
{
    super (name, newDrawingEditor);
    fGrid = new Point (grid.x, grid.y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ToggleGridCommand.java" startline="40" endline="51">
{
    super.execute ();
    PointConstrainer grid = view ().getConstrainer ();
    if (grid != null) {
        view ().setConstrainer (null);
    }
    else {
        view ().setConstrainer (new GridConstrainer (fGrid.x, fGrid.y));
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ToggleGridCommand.java" startline="44" endline="46">
{
    view ().setConstrainer (null);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ToggleGridCommand.java" startline="48" endline="50">
{
    view ().setConstrainer (new GridConstrainer (fGrid.x, fGrid.y));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ToolButton.java" startline="34" endline="83">
{
    super (listener);
    tool.addToolListener (this);
    setEnabled (tool.isUsable ());
    Iconkit kit = Iconkit.instance ();
    if (kit == null) {
        throw new JHotDrawRuntimeException ("Iconkit instance isn't set");
    }

    Image im [] = new Image [3];
    im [0] = kit.loadImageResource (iconName + "1.gif");
    im [1] = kit.loadImageResource (iconName + "2.gif");
    im [2] = kit.loadImageResource (iconName + "3.gif");
    MediaTracker tracker = new MediaTracker (this);
    for (int i = 0;
    i < 3; i ++) {
        tracker.addImage (im [i], i);
    }

    try {
        tracker.waitForAll ();
    }
    catch (Exception e) {
    }

    setPaletteIcon (new PaletteIcon (new Dimension (24, 24), im [0], im [1], im [2]));
    setTool (tool);
    setName (name);
    if (im [0] != null) {
        setIcon (new ImageIcon (im [0]));
    }

    if (im [1] != null) {
        setPressedIcon (new ImageIcon (im [1]));
    }

    if (im [2] != null) {
        setSelectedIcon (new ImageIcon (im [2]));
    }

    setToolTipText (name);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ToolButton.java" startline="42" endline="44">
{
    throw new JHotDrawRuntimeException ("Iconkit instance isn't set");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ToolButton.java" startline="53" endline="55">
{
    tracker.addImage (im [i], i);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ToolButton.java" startline="57" endline="59">
{
    tracker.waitForAll ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ToolButton.java" startline="61" endline="63">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ToolButton.java" startline="71" endline="73">
{
    setIcon (new ImageIcon (im [0]));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ToolButton.java" startline="75" endline="77">
{
    setPressedIcon (new ImageIcon (im [1]));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ToolButton.java" startline="79" endline="81">
{
    setSelectedIcon (new ImageIcon (im [2]));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ToolButton.java" startline="86" endline="88">
{
    return myTool;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ToolButton.java" startline="91" endline="93">
{
    return getName ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ToolButton.java" startline="96" endline="98">
{
    return tool ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ToolButton.java" startline="101" endline="103">
{
    return new Dimension (getPaletteIcon ().getWidth (), getPaletteIcon ().getHeight ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ToolButton.java" startline="106" endline="108">
{
    return new Dimension (getPaletteIcon ().getWidth (), getPaletteIcon ().getHeight ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ToolButton.java" startline="111" endline="113">
{
    return new Dimension (getPaletteIcon ().getWidth (), getPaletteIcon ().getHeight ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ToolButton.java" startline="130" endline="135">
{
    if (getPaletteIcon ().selected () != null) {
        g.drawImage (getPaletteIcon ().selected (), 0, 0, this);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ToolButton.java" startline="132" endline="134">
{
    g.drawImage (getPaletteIcon ().selected (), 0, 0, this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ToolButton.java" startline="138" endline="149">
{
    if (isSelected ()) {
        paintSelected (g);
    }
    else {
        super.paint (g);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ToolButton.java" startline="142" endline="144">
{
    paintSelected (g);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ToolButton.java" startline="146" endline="148">
{
    super.paint (g);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ToolButton.java" startline="152" endline="154">
{
    setEnabled (true);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ToolButton.java" startline="157" endline="160">
{
    setEnabled (false);
    setSelected (false);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ToolButton.java" startline="163" endline="164">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ToolButton.java" startline="167" endline="168">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ToolButton.java" startline="171" endline="173">
{
    setEnabled (true);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ToolButton.java" startline="176" endline="178">
{
    setEnabled (false);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ToolButton.java" startline="181" endline="183">
{
    return myIcon;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ToolButton.java" startline="186" endline="188">
{
    this.myIcon = myIcon;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/standard/ToolButton.java" startline="191" endline="193">
{
    this.myTool = myTool;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="43" endline="48">
{
    _dX1 = x;
    _dX2 = x;
    _dY1 = y;
    _dY2 = y;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="51" endline="56">
{
    _dX1 = Math.min (x1, x2);
    _dX2 = Math.max (x1, x2);
    _dY1 = Math.min (y1, y2);
    _dY2 = Math.max (y1, y2);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="59" endline="61">
{
    this (aPoint2D.getX (), aPoint2D.getY ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="64" endline="67">
{
    this (firstPoint2D.getX (), firstPoint2D.getY (), secondPoint2D.getX (), secondPoint2D.getY ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="70" endline="73">
{
    this (aBounds.getLesserX (), aBounds.getLesserY (), aBounds.getGreaterX (), aBounds.getGreaterY ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="76" endline="81">
{
    _dX1 = aRectangle2D.getMinX ();
    _dX2 = aRectangle2D.getMaxX ();
    _dY1 = aRectangle2D.getMinY ();
    _dY2 = aRectangle2D.getMaxY ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="84" endline="89">
{
    _dX1 = centerPoint2D.getX () - (dWidth / 2.0);
    _dX2 = centerPoint2D.getX () + (dWidth / 2.0);
    _dY1 = centerPoint2D.getY () - (dHeight / 2.0);
    _dY2 = centerPoint2D.getY () + (dHeight / 2.0);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="92" endline="94">
{
    this (0, 0, aDimension.width, aDimension.height);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="97" endline="99">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="104" endline="106">
{
    return _dX1;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="109" endline="111">
{
    return _dX2;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="114" endline="116">
{
    return _dY1;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="119" endline="121">
{
    return _dY2;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="124" endline="126">
{
    return _dX1;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="129" endline="131">
{
    return _dX2;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="134" endline="136">
{
    return _dY1;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="139" endline="141">
{
    return _dY2;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="144" endline="146">
{
    return _dX2 - _dX1;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="149" endline="151">
{
    return _dY2 - _dY1;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="154" endline="157">
{
    return new Rectangle2D.Double (getLesserX (), getLesserY (), getWidth (), getHeight ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="160" endline="165">
{
    Point2D currentCenterPoint2D = getCenter ();
    double dDeltaX = centerPoint2D.getX () - currentCenterPoint2D.getX ();
    double dDeltaY = centerPoint2D.getY () - currentCenterPoint2D.getY ();
    offset (dDeltaX, dDeltaY);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="168" endline="170">
{
    return new Point2D.Double ((_dX1 + _dX2) / 2.0, (_dY1 + _dY2) / 2.0);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="173" endline="183">
{
    double dWidth = _dX2 - _dX1;
    double dHeight = _dY2 - _dY1;
    double dNewWidth = (dWidth * dRatio);
    double dNewHeight = (dHeight * dRatio);
    Point2D centerPoint2D = getCenter ();
    _dX1 = centerPoint2D.getX () - (dNewWidth / 2.0);
    _dY1 = centerPoint2D.getY () - (dNewHeight / 2.0);
    _dX2 = centerPoint2D.getX () + (dNewWidth / 2.0);
    _dY2 = centerPoint2D.getY () + (dNewHeight / 2.0);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="186" endline="192">
{
    double dWidth = _dX2 - _dX1;
    double dHeight = _dY2 - _dY1;
    double dDeltaX = (dWidth * nXPercentage) / 100.0;
    double dDeltaY = (dHeight * nYPercentage) / 100.0;
    offset (dDeltaX, dDeltaY);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="195" endline="200">
{
    _dX1 += dDeltaX;
    _dX2 += dDeltaX;
    _dY1 += dDeltaY;
    _dY2 += dDeltaY;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="208" endline="226">
{
    double dCurrentRatio = getWidth () / getHeight ();
    if (dCurrentRatio < dRatio) {
        double dNewWidth = dRatio * getHeight ();
        double dCenterX = (_dX1 + _dX2) / 2.0;
        double dDelta = dNewWidth / 2.0;
        _dX1 = dCenterX - dDelta;
        _dX2 = dCenterX + dDelta;
    }

    if (dCurrentRatio > dRatio) {
        double dNewHeight = getWidth () / dRatio;
        double dCenterY = (_dY1 + _dY2) / 2.0;
        double dDelta = dNewHeight / 2.0;
        _dY1 = dCenterY - dDelta;
        _dY2 = dCenterY + dDelta;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="211" endline="217">
{
    double dNewWidth = dRatio * getHeight ();
    double dCenterX = (_dX1 + _dX2) / 2.0;
    double dDelta = dNewWidth / 2.0;
    _dX1 = dCenterX - dDelta;
    _dX2 = dCenterX + dDelta;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="219" endline="225">
{
    double dNewHeight = getWidth () / dRatio;
    double dCenterY = (_dY1 + _dY2) / 2.0;
    double dDelta = dNewHeight / 2.0;
    _dY1 = dCenterY - dDelta;
    _dY2 = dCenterY + dDelta;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="229" endline="232">
{
    _dX1 = min (_dX1, _dX2, x);
    _dX2 = max (_dX1, _dX2, x);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="235" endline="238">
{
    _dY1 = min (_dY1, _dY2, y);
    _dY2 = max (_dY1, _dY2, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="241" endline="244">
{
    includeXCoordinate (x);
    includeYCoordinate (y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="247" endline="249">
{
    includePoint (aPoint2D.getX (), aPoint2D.getY ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="252" endline="255">
{
    includePoint (x1, y1);
    includePoint (x2, y2);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="258" endline="261">
{
    includeLine (onePoint2D.getX (), onePoint2D.getY (), twoPoint2D.getX (), twoPoint2D.getY ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="264" endline="269">
{
    includeXCoordinate (aBounds.getLesserX ());
    includeXCoordinate (aBounds.getGreaterX ());
    includeYCoordinate (aBounds.getLesserY ());
    includeYCoordinate (aBounds.getGreaterY ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="272" endline="277">
{
    includeXCoordinate (aRectangle2D.getMinX ());
    includeXCoordinate (aRectangle2D.getMaxX ());
    includeYCoordinate (aRectangle2D.getMinY ());
    includeYCoordinate (aRectangle2D.getMaxY ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="280" endline="294">
{
    _dX1 = Math.max (_dX1, aBounds.getLesserX ());
    _dY1 = Math.max (_dY1, aBounds.getLesserY ());
    _dX2 = Math.min (_dX2, aBounds.getGreaterX ());
    _dY2 = Math.min (_dY2, aBounds.getGreaterY ());
    if (_dX1 > _dX2) {
        _dX1 = _dX2;
    }

    if (_dY1 > _dY2) {
        _dY1 = _dY2;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="287" endline="289">
{
    _dX1 = _dX2;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="291" endline="293">
{
    _dY1 = _dY2;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="297" endline="299">
{
    return ((_dX1 <= x) && (x <= _dX2) && (_dY1 <= y) && (y <= _dY2));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="302" endline="304">
{
    return intersectsPoint (aPoint2D.getX (), aPoint2D.getY ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="308" endline="352">
{
    if (intersectsPoint (x1, y1)) {
        return true;
    }

    if (intersectsPoint (x2, y2)) {
        return true;
    }

    if ((x1 < _dX1) && (x2 < _dX1)) {
        return false;
    }

    if ((x1 > _dX2) && (x2 > _dX2)) {
        return false;
    }

    if ((y1 < _dY1) && (y2 < _dY1)) {
        return false;
    }

    if ((y1 > _dY2) && (y2 > _dY2)) {
        return false;
    }

    if (((_dX1 <= x1) && (x1 <= _dX2)) && ((_dX1 <= x2) && (x2 <= _dX2))) {
        return true;
    }

    if (((_dY1 <= y1) && (y1 <= _dY2)) && ((_dY1 <= y2) && (y2 <= _dY2))) {
        return true;
    }

    double dSlope = (y2 - y1) / (x2 - x1);
    double _dYIntersectionAtX1 = dSlope * (_dX1 - x1) + y1;
    double _dYIntersectionAtX2 = dSlope * (_dX2 - x1) + y1;
    double _dXIntersectionAtY1 = (_dY1 - y1) / dSlope + x1;
    double _dXIntersectionAtY2 = (_dY2 - y1) / dSlope + x1;
    return (intersectsPoint (_dX1, _dYIntersectionAtX1)) || (intersectsPoint (_dX2, _dYIntersectionAtX2)) || (intersectsPoint (_dXIntersectionAtY1, _dY1)) || (intersectsPoint (_dXIntersectionAtY2, _dY2));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="310" endline="312">
{
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="314" endline="316">
{
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="318" endline="320">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="322" endline="324">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="326" endline="328">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="330" endline="332">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="334" endline="336">
{
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="338" endline="340">
{
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="355" endline="358">
{
    return intersectsLine (onePoint2D.getX (), onePoint2D.getY (), twoPoint2D.getX (), twoPoint2D.getY ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="362" endline="390">
{
    double dLesserX = aBounds.getLesserX ();
    double dGreaterX = aBounds.getGreaterX ();
    double dLesserY = aBounds.getLesserY ();
    double dGreaterY = aBounds.getGreaterY ();
    if (dLesserX < _dX1) {
        if (dLesserY < _dY1) {
            return ((dGreaterX >= _dX1) && (dGreaterY >= _dY1));
        }
        else {
            return ((dGreaterX >= _dX1) && (dLesserY <= _dY2));
        }

    }
    else {
        if (dLesserY < _dY1) {
            return ((dLesserX <= _dX2) && (dGreaterY >= _dY1));
        }
        else {
            return ((dLesserX <= _dX2) && (dLesserY <= _dY2));
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="369" endline="378">
{
    if (dLesserY < _dY1) {
        return ((dGreaterX >= _dX1) && (dGreaterY >= _dY1));
    }
    else {
        return ((dGreaterX >= _dX1) && (dLesserY <= _dY2));
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="371" endline="373">
{
    return ((dGreaterX >= _dX1) && (dGreaterY >= _dY1));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="375" endline="377">
{
    return ((dGreaterX >= _dX1) && (dLesserY <= _dY2));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="380" endline="389">
{
    if (dLesserY < _dY1) {
        return ((dLesserX <= _dX2) && (dGreaterY >= _dY1));
    }
    else {
        return ((dLesserX <= _dX2) && (dLesserY <= _dY2));
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="382" endline="384">
{
    return ((dLesserX <= _dX2) && (dGreaterY >= _dY1));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="386" endline="388">
{
    return ((dLesserX <= _dX2) && (dLesserY <= _dY2));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="393" endline="398">
{
    return (_dX1 > Math.min (x1, x2)) && (_dX2 < Math.max (x1, x2)) && (_dY1 > Math.min (y1, y2)) && (_dY2 < Math.max (y1, y2));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="401" endline="406">
{
    return (_dX1 > aBounds.getLesserX ()) && (_dX2 < aBounds.getGreaterX ()) && (_dY1 > aBounds.getLesserY ()) && (_dY2 < aBounds.getGreaterY ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="409" endline="546">
{
    if (! intersectsLine (x1, y1, x2, y2)) {
        return null;
    }

    Point2D [] resultLine = new Point2D [2];
    Point2D beginPoint2D = new Point2D.Double (x1, y1);
    Point2D endPoint2D = new Point2D.Double (x2, y2);
    if (beginPoint2D.getX () == endPoint2D.getX ()) {
        if (beginPoint2D.getY () > _dY2) {
            beginPoint2D.setLocation (beginPoint2D.getX (), _dY2);
        }

        if (endPoint2D.getY () > _dY2) {
            endPoint2D.setLocation (endPoint2D.getX (), _dY2);
        }

        if (beginPoint2D.getY () < _dY1) {
            beginPoint2D.setLocation (beginPoint2D.getX (), _dY1);
        }

        if (endPoint2D.getY () < _dY1) {
            endPoint2D.setLocation (endPoint2D.getX (), _dY1);
        }

    }
    else if (beginPoint2D.getY () == endPoint2D.getY ()) {
        if (beginPoint2D.getX () > _dX2) {
            beginPoint2D.setLocation (_dX2, beginPoint2D.getY ());
        }

        if (endPoint2D.getX () > _dX2) {
            endPoint2D.setLocation (_dX2, endPoint2D.getY ());
        }

        if (beginPoint2D.getX () < _dX1) {
            beginPoint2D.setLocation (_dX1, beginPoint2D.getY ());
        }

        if (endPoint2D.getX () < _dX1) {
            endPoint2D.setLocation (_dX1, endPoint2D.getY ());
        }

    }
    else {
        double dSlope = (beginPoint2D.getY () - endPoint2D.getY ()) / (beginPoint2D.getX () - endPoint2D.getX ());
        if (! intersectsPoint (beginPoint2D)) {
            if (beginPoint2D.getY () > _dY2) {
                double x = ((_dY2 - beginPoint2D.getY ()) / dSlope) + beginPoint2D.getX ();
                if ((x >= _dX1) && (x <= _dX2)) {
                    beginPoint2D.setLocation (x, beginPoint2D.getY ());
                    beginPoint2D.setLocation (beginPoint2D.getX (), _dY2);
                }

            }

            if (beginPoint2D.getY () < _dY1) {
                double x = ((_dY1 - beginPoint2D.getY ()) / dSlope) + beginPoint2D.getX ();
                if ((x >= _dX1) && (x <= _dX2)) {
                    beginPoint2D.setLocation (x, beginPoint2D.getY ());
                    beginPoint2D.setLocation (beginPoint2D.getX (), _dY1);
                }

            }

            if (beginPoint2D.getX () > _dX2) {
                double y = dSlope * (_dX2 - beginPoint2D.getX ()) + beginPoint2D.getY ();
                if ((y >= _dY1) && (y <= _dY2)) {
                    beginPoint2D.setLocation (_dX2, beginPoint2D.getY ());
                    beginPoint2D.setLocation (beginPoint2D.getX (), y);
                }

            }

            if (beginPoint2D.getX () < _dX1) {
                double y = dSlope * (_dX1 - beginPoint2D.getX ()) + beginPoint2D.getY ();
                if ((y >= _dY1) && (y <= _dY2)) {
                    beginPoint2D.setLocation (_dX1, beginPoint2D.getY ());
                    beginPoint2D.setLocation (beginPoint2D.getX (), y);
                }

            }

        }

        if (! intersectsPoint (endPoint2D)) {
            if (endPoint2D.getY () > _dY2) {
                double x = ((_dY2 - beginPoint2D.getY ()) / dSlope) + beginPoint2D.getX ();
                if ((x >= _dX1) && (x <= _dX2)) {
                    endPoint2D.setLocation (x, endPoint2D.getY ());
                    endPoint2D.setLocation (endPoint2D.getX (), _dY2);
                }

            }

            if (endPoint2D.getY () < _dY1) {
                double x = ((_dY1 - beginPoint2D.getY ()) / dSlope) + beginPoint2D.getX ();
                if ((x >= _dX1) && (x <= _dX2)) {
                    endPoint2D.setLocation (x, endPoint2D.getY ());
                    endPoint2D.setLocation (endPoint2D.getX (), _dY1);
                }

            }

            if (endPoint2D.getX () > _dX2) {
                double y = dSlope * (_dX2 - beginPoint2D.getX ()) + beginPoint2D.getY ();
                if ((y >= _dY1) && (y <= _dY2)) {
                    endPoint2D.setLocation (_dX2, endPoint2D.getY ());
                    endPoint2D.setLocation (endPoint2D.getX (), y);
                }

            }

            if (endPoint2D.getX () < _dX1) {
                double y = dSlope * (_dX1 - beginPoint2D.getX ()) + beginPoint2D.getY ();
                if ((y >= _dY1) && (y <= _dY2)) {
                    endPoint2D.setLocation (_dX1, endPoint2D.getY ());
                    endPoint2D.setLocation (endPoint2D.getX (), y);
                }

            }

        }

    }

    resultLine [0] = beginPoint2D;
    resultLine [1] = endPoint2D;
    return resultLine;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="411" endline="413">
{
    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="420" endline="437">
{
    if (beginPoint2D.getY () > _dY2) {
        beginPoint2D.setLocation (beginPoint2D.getX (), _dY2);
    }

    if (endPoint2D.getY () > _dY2) {
        endPoint2D.setLocation (endPoint2D.getX (), _dY2);
    }

    if (beginPoint2D.getY () < _dY1) {
        beginPoint2D.setLocation (beginPoint2D.getX (), _dY1);
    }

    if (endPoint2D.getY () < _dY1) {
        endPoint2D.setLocation (endPoint2D.getX (), _dY1);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="422" endline="424">
{
    beginPoint2D.setLocation (beginPoint2D.getX (), _dY2);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="426" endline="428">
{
    endPoint2D.setLocation (endPoint2D.getX (), _dY2);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="430" endline="432">
{
    beginPoint2D.setLocation (beginPoint2D.getX (), _dY1);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="434" endline="436">
{
    endPoint2D.setLocation (endPoint2D.getX (), _dY1);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="439" endline="456">
{
    if (beginPoint2D.getX () > _dX2) {
        beginPoint2D.setLocation (_dX2, beginPoint2D.getY ());
    }

    if (endPoint2D.getX () > _dX2) {
        endPoint2D.setLocation (_dX2, endPoint2D.getY ());
    }

    if (beginPoint2D.getX () < _dX1) {
        beginPoint2D.setLocation (_dX1, beginPoint2D.getY ());
    }

    if (endPoint2D.getX () < _dX1) {
        endPoint2D.setLocation (_dX1, endPoint2D.getY ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="441" endline="443">
{
    beginPoint2D.setLocation (_dX2, beginPoint2D.getY ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="445" endline="447">
{
    endPoint2D.setLocation (_dX2, endPoint2D.getY ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="449" endline="451">
{
    beginPoint2D.setLocation (_dX1, beginPoint2D.getY ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="453" endline="455">
{
    endPoint2D.setLocation (_dX1, endPoint2D.getY ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="458" endline="540">
{
    double dSlope = (beginPoint2D.getY () - endPoint2D.getY ()) / (beginPoint2D.getX () - endPoint2D.getX ());
    if (! intersectsPoint (beginPoint2D)) {
        if (beginPoint2D.getY () > _dY2) {
            double x = ((_dY2 - beginPoint2D.getY ()) / dSlope) + beginPoint2D.getX ();
            if ((x >= _dX1) && (x <= _dX2)) {
                beginPoint2D.setLocation (x, beginPoint2D.getY ());
                beginPoint2D.setLocation (beginPoint2D.getX (), _dY2);
            }

        }

        if (beginPoint2D.getY () < _dY1) {
            double x = ((_dY1 - beginPoint2D.getY ()) / dSlope) + beginPoint2D.getX ();
            if ((x >= _dX1) && (x <= _dX2)) {
                beginPoint2D.setLocation (x, beginPoint2D.getY ());
                beginPoint2D.setLocation (beginPoint2D.getX (), _dY1);
            }

        }

        if (beginPoint2D.getX () > _dX2) {
            double y = dSlope * (_dX2 - beginPoint2D.getX ()) + beginPoint2D.getY ();
            if ((y >= _dY1) && (y <= _dY2)) {
                beginPoint2D.setLocation (_dX2, beginPoint2D.getY ());
                beginPoint2D.setLocation (beginPoint2D.getX (), y);
            }

        }

        if (beginPoint2D.getX () < _dX1) {
            double y = dSlope * (_dX1 - beginPoint2D.getX ()) + beginPoint2D.getY ();
            if ((y >= _dY1) && (y <= _dY2)) {
                beginPoint2D.setLocation (_dX1, beginPoint2D.getY ());
                beginPoint2D.setLocation (beginPoint2D.getX (), y);
            }

        }

    }

    if (! intersectsPoint (endPoint2D)) {
        if (endPoint2D.getY () > _dY2) {
            double x = ((_dY2 - beginPoint2D.getY ()) / dSlope) + beginPoint2D.getX ();
            if ((x >= _dX1) && (x <= _dX2)) {
                endPoint2D.setLocation (x, endPoint2D.getY ());
                endPoint2D.setLocation (endPoint2D.getX (), _dY2);
            }

        }

        if (endPoint2D.getY () < _dY1) {
            double x = ((_dY1 - beginPoint2D.getY ()) / dSlope) + beginPoint2D.getX ();
            if ((x >= _dX1) && (x <= _dX2)) {
                endPoint2D.setLocation (x, endPoint2D.getY ());
                endPoint2D.setLocation (endPoint2D.getX (), _dY1);
            }

        }

        if (endPoint2D.getX () > _dX2) {
            double y = dSlope * (_dX2 - beginPoint2D.getX ()) + beginPoint2D.getY ();
            if ((y >= _dY1) && (y <= _dY2)) {
                endPoint2D.setLocation (_dX2, endPoint2D.getY ());
                endPoint2D.setLocation (endPoint2D.getX (), y);
            }

        }

        if (endPoint2D.getX () < _dX1) {
            double y = dSlope * (_dX1 - beginPoint2D.getX ()) + beginPoint2D.getY ();
            if ((y >= _dY1) && (y <= _dY2)) {
                endPoint2D.setLocation (_dX1, endPoint2D.getY ());
                endPoint2D.setLocation (endPoint2D.getX (), y);
            }

        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="463" endline="500">
{
    if (beginPoint2D.getY () > _dY2) {
        double x = ((_dY2 - beginPoint2D.getY ()) / dSlope) + beginPoint2D.getX ();
        if ((x >= _dX1) && (x <= _dX2)) {
            beginPoint2D.setLocation (x, beginPoint2D.getY ());
            beginPoint2D.setLocation (beginPoint2D.getX (), _dY2);
        }

    }

    if (beginPoint2D.getY () < _dY1) {
        double x = ((_dY1 - beginPoint2D.getY ()) / dSlope) + beginPoint2D.getX ();
        if ((x >= _dX1) && (x <= _dX2)) {
            beginPoint2D.setLocation (x, beginPoint2D.getY ());
            beginPoint2D.setLocation (beginPoint2D.getX (), _dY1);
        }

    }

    if (beginPoint2D.getX () > _dX2) {
        double y = dSlope * (_dX2 - beginPoint2D.getX ()) + beginPoint2D.getY ();
        if ((y >= _dY1) && (y <= _dY2)) {
            beginPoint2D.setLocation (_dX2, beginPoint2D.getY ());
            beginPoint2D.setLocation (beginPoint2D.getX (), y);
        }

    }

    if (beginPoint2D.getX () < _dX1) {
        double y = dSlope * (_dX1 - beginPoint2D.getX ()) + beginPoint2D.getY ();
        if ((y >= _dY1) && (y <= _dY2)) {
            beginPoint2D.setLocation (_dX1, beginPoint2D.getY ());
            beginPoint2D.setLocation (beginPoint2D.getX (), y);
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="465" endline="472">
{
    double x = ((_dY2 - beginPoint2D.getY ()) / dSlope) + beginPoint2D.getX ();
    if ((x >= _dX1) && (x <= _dX2)) {
        beginPoint2D.setLocation (x, beginPoint2D.getY ());
        beginPoint2D.setLocation (beginPoint2D.getX (), _dY2);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="468" endline="471">
{
    beginPoint2D.setLocation (x, beginPoint2D.getY ());
    beginPoint2D.setLocation (beginPoint2D.getX (), _dY2);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="474" endline="481">
{
    double x = ((_dY1 - beginPoint2D.getY ()) / dSlope) + beginPoint2D.getX ();
    if ((x >= _dX1) && (x <= _dX2)) {
        beginPoint2D.setLocation (x, beginPoint2D.getY ());
        beginPoint2D.setLocation (beginPoint2D.getX (), _dY1);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="477" endline="480">
{
    beginPoint2D.setLocation (x, beginPoint2D.getY ());
    beginPoint2D.setLocation (beginPoint2D.getX (), _dY1);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="483" endline="490">
{
    double y = dSlope * (_dX2 - beginPoint2D.getX ()) + beginPoint2D.getY ();
    if ((y >= _dY1) && (y <= _dY2)) {
        beginPoint2D.setLocation (_dX2, beginPoint2D.getY ());
        beginPoint2D.setLocation (beginPoint2D.getX (), y);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="486" endline="489">
{
    beginPoint2D.setLocation (_dX2, beginPoint2D.getY ());
    beginPoint2D.setLocation (beginPoint2D.getX (), y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="492" endline="499">
{
    double y = dSlope * (_dX1 - beginPoint2D.getX ()) + beginPoint2D.getY ();
    if ((y >= _dY1) && (y <= _dY2)) {
        beginPoint2D.setLocation (_dX1, beginPoint2D.getY ());
        beginPoint2D.setLocation (beginPoint2D.getX (), y);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="495" endline="498">
{
    beginPoint2D.setLocation (_dX1, beginPoint2D.getY ());
    beginPoint2D.setLocation (beginPoint2D.getX (), y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="502" endline="539">
{
    if (endPoint2D.getY () > _dY2) {
        double x = ((_dY2 - beginPoint2D.getY ()) / dSlope) + beginPoint2D.getX ();
        if ((x >= _dX1) && (x <= _dX2)) {
            endPoint2D.setLocation (x, endPoint2D.getY ());
            endPoint2D.setLocation (endPoint2D.getX (), _dY2);
        }

    }

    if (endPoint2D.getY () < _dY1) {
        double x = ((_dY1 - beginPoint2D.getY ()) / dSlope) + beginPoint2D.getX ();
        if ((x >= _dX1) && (x <= _dX2)) {
            endPoint2D.setLocation (x, endPoint2D.getY ());
            endPoint2D.setLocation (endPoint2D.getX (), _dY1);
        }

    }

    if (endPoint2D.getX () > _dX2) {
        double y = dSlope * (_dX2 - beginPoint2D.getX ()) + beginPoint2D.getY ();
        if ((y >= _dY1) && (y <= _dY2)) {
            endPoint2D.setLocation (_dX2, endPoint2D.getY ());
            endPoint2D.setLocation (endPoint2D.getX (), y);
        }

    }

    if (endPoint2D.getX () < _dX1) {
        double y = dSlope * (_dX1 - beginPoint2D.getX ()) + beginPoint2D.getY ();
        if ((y >= _dY1) && (y <= _dY2)) {
            endPoint2D.setLocation (_dX1, endPoint2D.getY ());
            endPoint2D.setLocation (endPoint2D.getX (), y);
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="504" endline="511">
{
    double x = ((_dY2 - beginPoint2D.getY ()) / dSlope) + beginPoint2D.getX ();
    if ((x >= _dX1) && (x <= _dX2)) {
        endPoint2D.setLocation (x, endPoint2D.getY ());
        endPoint2D.setLocation (endPoint2D.getX (), _dY2);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="507" endline="510">
{
    endPoint2D.setLocation (x, endPoint2D.getY ());
    endPoint2D.setLocation (endPoint2D.getX (), _dY2);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="513" endline="520">
{
    double x = ((_dY1 - beginPoint2D.getY ()) / dSlope) + beginPoint2D.getX ();
    if ((x >= _dX1) && (x <= _dX2)) {
        endPoint2D.setLocation (x, endPoint2D.getY ());
        endPoint2D.setLocation (endPoint2D.getX (), _dY1);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="516" endline="519">
{
    endPoint2D.setLocation (x, endPoint2D.getY ());
    endPoint2D.setLocation (endPoint2D.getX (), _dY1);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="522" endline="529">
{
    double y = dSlope * (_dX2 - beginPoint2D.getX ()) + beginPoint2D.getY ();
    if ((y >= _dY1) && (y <= _dY2)) {
        endPoint2D.setLocation (_dX2, endPoint2D.getY ());
        endPoint2D.setLocation (endPoint2D.getX (), y);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="525" endline="528">
{
    endPoint2D.setLocation (_dX2, endPoint2D.getY ());
    endPoint2D.setLocation (endPoint2D.getX (), y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="531" endline="538">
{
    double y = dSlope * (_dX1 - beginPoint2D.getX ()) + beginPoint2D.getY ();
    if ((y >= _dY1) && (y <= _dY2)) {
        endPoint2D.setLocation (_dX1, endPoint2D.getY ());
        endPoint2D.setLocation (endPoint2D.getX (), y);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="534" endline="537">
{
    endPoint2D.setLocation (_dX1, endPoint2D.getY ());
    endPoint2D.setLocation (endPoint2D.getX (), y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="549" endline="565">
{
    if ((anObject == null) || (! (anObject instanceof Bounds))) {
        return false;
    }

    Bounds aBounds = (Bounds) anObject;
    if ((_dX1 == aBounds.getLesserX ()) && (_dX2 == aBounds.getGreaterX ()) && (_dY1 == aBounds.getLesserY ()) && (_dY2 == aBounds.getGreaterY ())) {
        return true;
    }

    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="551" endline="553">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="560" endline="562">
{
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="568" endline="576">
{
    double temp = Math.abs (_dX1 + _dX2 + _dY1 + _dY2);
    while ((temp != 0) && (temp < 1)) {
        temp *= 4;
    }

    return (int) temp;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="571" endline="573">
{
    temp *= 4;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="579" endline="582">
{
    return Double.toString (_dX1) + " " + Double.toString (_dY1) + " " + Double.toString (_dX2) + " " + Double.toString (_dY2);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="585" endline="587">
{
    return Math.min (Math.min (x1, x2), x3);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Bounds.java" startline="590" endline="592">
{
    return Math.max (Math.max (x1, x2), x3);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Clipboard.java" startline="29" endline="31">
{
    return fgClipboard;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Clipboard.java" startline="36" endline="37">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Clipboard.java" startline="43" endline="45">
{
    fContents = contents;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Clipboard.java" startline="51" endline="53">
{
    return fContents;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/CollectionsFactory.java" startline="44" endline="46">
{
    return factory;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/CollectionsFactory.java" startline="49" endline="60">
{
    String jdkVersion = null;
    if (isJDK12 ()) {
        jdkVersion = "12";
    }
    else {
        jdkVersion = "11";
    }

    return createCollectionsFactory (jdkVersion);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/CollectionsFactory.java" startline="52" endline="54">
{
    jdkVersion = "12";
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/CollectionsFactory.java" startline="56" endline="58">
{
    jdkVersion = "11";
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/CollectionsFactory.java" startline="63" endline="74">
{
    try {
        Class.forName (JAVA_UTIL_LIST);
        return true;
    }
    catch (ClassNotFoundException e) {
    }

    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/CollectionsFactory.java" startline="65" endline="68">
{
    Class.forName (JAVA_UTIL_LIST);
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/CollectionsFactory.java" startline="70" endline="72">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/CollectionsFactory.java" startline="77" endline="95">
{
    try {
        Class factoryClass = Class.forName (COLLECTIONS_FACTORY_PACKAGE + jdkVersion + ".CollectionsFactoryJDK" + jdkVersion);
        return (CollectionsFactory) factoryClass.newInstance ();
    }
    catch (ClassNotFoundException e) {
        throw new JHotDrawRuntimeException (e);
    }
    catch (InstantiationException e) {
        throw new JHotDrawRuntimeException (e);
    }
    catch (IllegalAccessException e) {
        throw new JHotDrawRuntimeException (e);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/CollectionsFactory.java" startline="79" endline="82">
{
    Class factoryClass = Class.forName (COLLECTIONS_FACTORY_PACKAGE + jdkVersion + ".CollectionsFactoryJDK" + jdkVersion);
    return (CollectionsFactory) factoryClass.newInstance ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/CollectionsFactory.java" startline="84" endline="86">
{
    throw new JHotDrawRuntimeException (e);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/CollectionsFactory.java" startline="88" endline="90">
{
    throw new JHotDrawRuntimeException (e);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/CollectionsFactory.java" startline="92" endline="94">
{
    throw new JHotDrawRuntimeException (e);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/ColorMap.java" startline="22" endline="25">
{
    fColor = color;
    fName = name;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/ColorMap.java" startline="59" endline="61">
{
    return fMap.length;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/ColorMap.java" startline="64" endline="71">
{
    if (index < size () && index >= 0) {
        return fMap [index].fColor;
    }

    throw new ArrayIndexOutOfBoundsException ("Color index: " + index);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/ColorMap.java" startline="66" endline="68">
{
    return fMap [index].fColor;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/ColorMap.java" startline="74" endline="84">
{
    for (int i = 0;
    i < fMap.length; i ++) {
        if (fMap [i].fName.equals (name)) {
            return fMap [i].fColor;
        }

    }

    return Color.black;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/ColorMap.java" startline="76" endline="81">
{
    if (fMap [i].fName.equals (name)) {
        return fMap [i].fColor;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/ColorMap.java" startline="78" endline="80">
{
    return fMap [i].fColor;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/ColorMap.java" startline="87" endline="94">
{
    if (index < size () && index >= 0) {
        return fMap [index].fName;
    }

    throw new ArrayIndexOutOfBoundsException ("Color index: " + index);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/ColorMap.java" startline="89" endline="91">
{
    return fMap [index].fName;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/ColorMap.java" startline="97" endline="107">
{
    for (int i = 0;
    i < fMap.length; i ++) {
        if (fMap [i].fColor.equals (color)) {
            return i;
        }

    }

    return 0;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/ColorMap.java" startline="99" endline="104">
{
    if (fMap [i].fColor.equals (color)) {
        return i;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/ColorMap.java" startline="101" endline="103">
{
    return i;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/ColorMap.java" startline="110" endline="112">
{
    return color.equals (color ("None"));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/CommandButton.java" startline="36" endline="40">
{
    super (command.name ());
    fCommand = command;
    addActionListener (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/CommandButton.java" startline="48" endline="54">
{
    fCommand.execute ();
    if (! getLabel ().equals (fCommand.name ())) {
        setLabel (fCommand.name ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/CommandButton.java" startline="51" endline="53">
{
    setLabel (fCommand.name ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/CommandChoice.java" startline="33" endline="37">
{
    super ();
    fCommands = CollectionsFactory.current ().createList (10);
    addItemListener (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/CommandChoice.java" startline="43" endline="46">
{
    addItem (command.name ());
    fCommands.add (command);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/CommandChoice.java" startline="52" endline="61">
{
    if ((getSelectedIndex () >= 0) && (getSelectedIndex () < fCommands.size ())) {
        Command command = (Command) fCommands.get (getSelectedIndex ());
        if (command.isExecutable ()) {
            command.execute ();
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/CommandChoice.java" startline="54" endline="60">
{
    Command command = (Command) fCommands.get (getSelectedIndex ());
    if (command.isExecutable ()) {
        command.execute ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/CommandChoice.java" startline="57" endline="59">
{
    command.execute ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/CommandMenu.java" startline="35" endline="38">
{
    super (name);
    hm = new HashMap ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/CommandMenu.java" startline="45" endline="47">
{
    addMenuItem (command, new JMenuItem (command.name ()));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/CommandMenu.java" startline="54" endline="56">
{
    addMenuItem (command, new JMenuItem (command.name (), shortcut.getKey ()));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/CommandMenu.java" startline="63" endline="65">
{
    addMenuItem (command, new JCheckBoxMenuItem (command.name ()));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/CommandMenu.java" startline="68" endline="75">
{
    m.setName (command.name ());
    m.addActionListener (this);
    add (m);
    command.addCommandListener (this);
    hm.put (m, command);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/CommandMenu.java" startline="78" endline="80">
{
    throw new JHotDrawRuntimeException ("not implemented");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/CommandMenu.java" startline="83" endline="85">
{
    throw new JHotDrawRuntimeException ("not implemented");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/CommandMenu.java" startline="91" endline="101">
{
    for (int i = 0;
    i < getItemCount (); i ++) {
        JMenuItem item = getItem (i);
        if (name.equals (item.getLabel ())) {
            item.setEnabled (state);
            return;
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/CommandMenu.java" startline="93" endline="100">
{
    JMenuItem item = getItem (i);
    if (name.equals (item.getLabel ())) {
        item.setEnabled (state);
        return;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/CommandMenu.java" startline="96" endline="99">
{
    item.setEnabled (state);
    return;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/CommandMenu.java" startline="104" endline="115">
{
    for (int i = 0;
    i < getMenuComponentCount (); i ++) {
        Component c = getMenuComponent (i);
        Command cmd = (Command) hm.get (c);
        if (cmd != null) {
            c.setEnabled (cmd.isExecutable ());
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/CommandMenu.java" startline="107" endline="114">
{
    Component c = getMenuComponent (i);
    Command cmd = (Command) hm.get (c);
    if (cmd != null) {
        c.setEnabled (cmd.isExecutable ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/CommandMenu.java" startline="111" endline="113">
{
    c.setEnabled (cmd.isExecutable ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/CommandMenu.java" startline="121" endline="137">
{
    Object source = e.getSource ();
    for (int i = 0;
    i < getItemCount (); i ++) {
        JMenuItem item = getItem (i);
        if (source == item) {
            Command cmd = (Command) hm.get (item);
            if (cmd != null) {
                cmd.execute ();
            }

            break;
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/CommandMenu.java" startline="124" endline="136">
{
    JMenuItem item = getItem (i);
    if (source == item) {
        Command cmd = (Command) hm.get (item);
        if (cmd != null) {
            cmd.execute ();
        }

        break;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/CommandMenu.java" startline="128" endline="135">
{
    Command cmd = (Command) hm.get (item);
    if (cmd != null) {
        cmd.execute ();
    }

    break;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/CommandMenu.java" startline="131" endline="133">
{
    cmd.execute ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/CommandMenu.java" startline="140" endline="142">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/CommandMenu.java" startline="145" endline="147">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/CommandMenu.java" startline="150" endline="152">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Filler.java" startline="32" endline="34">
{
    this (width, height, null);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Filler.java" startline="37" endline="41">
{
    fWidth = width;
    fHeight = height;
    fBackground = background;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Filler.java" startline="44" endline="46">
{
    return new Dimension (fWidth, fHeight);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Filler.java" startline="49" endline="51">
{
    return getMinimumSize ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Filler.java" startline="54" endline="60">
{
    if (fBackground != null) {
        return fBackground;
    }

    return super.getBackground ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Filler.java" startline="56" endline="58">
{
    return fBackground;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/FloatingTextField.java" startline="35" endline="37">
{
    fEditWidget = new JTextField (20);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/FloatingTextField.java" startline="43" endline="45">
{
    createOverlay (container, null);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/FloatingTextField.java" startline="52" endline="59">
{
    container.add (fEditWidget, 0);
    if (font != null) {
        fEditWidget.setFont (font);
    }

    fContainer = container;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/FloatingTextField.java" startline="55" endline="57">
{
    fEditWidget.setFont (font);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/FloatingTextField.java" startline="65" endline="67">
{
    fEditWidget.addActionListener (listener);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/FloatingTextField.java" startline="73" endline="75">
{
    fEditWidget.removeActionListener (listener);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/FloatingTextField.java" startline="81" endline="87">
{
    fEditWidget.setText (text);
    fEditWidget.setBounds (r.x, r.y, r.width, r.height);
    fEditWidget.setVisible (true);
    fEditWidget.selectAll ();
    fEditWidget.requestFocus ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/FloatingTextField.java" startline="93" endline="95">
{
    return fEditWidget.getText ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/FloatingTextField.java" startline="101" endline="104">
{
    fEditWidget.setColumns (cols);
    return fEditWidget.getPreferredSize ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/FloatingTextField.java" startline="110" endline="120">
{
    fContainer.requestFocus ();
    if (fEditWidget != null) {
        fEditWidget.setVisible (false);
        fContainer.remove (fEditWidget);
        Rectangle bounds = fEditWidget.getBounds ();
        fContainer.repaint (bounds.x, bounds.y, bounds.width, bounds.height);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/FloatingTextField.java" startline="113" endline="119">
{
    fEditWidget.setVisible (false);
    fContainer.remove (fEditWidget);
    Rectangle bounds = fEditWidget.getBounds ();
    fContainer.repaint (bounds.x, bounds.y, bounds.width, bounds.height);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Geom.java" startline="26" endline="26">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Geom.java" startline="34" endline="61">
{
    Rectangle r = new Rectangle (new Point (x1, y1));
    r.add (x2, y2);
    r.grow (2, 2);
    if (! r.contains (px, py)) {
        return false;
    }

    double a, b, x, y;
    if (x1 == x2) {
        return (Math.abs (px - x1) < 3);
    }

    if (y1 == y2) {
        return (Math.abs (py - y1) < 3);
    }

    a = (double) (y1 - y2) / (double) (x1 - x2);
    b = (double) y1 - a * (double) x1;
    x = (py - b) / a;
    y = a * px + b;
    return (Math.min (Math.abs (x - px), Math.abs (y - py)) < 4);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Geom.java" startline="40" endline="42">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Geom.java" startline="47" endline="49">
{
    return (Math.abs (px - x1) < 3);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Geom.java" startline="51" endline="53">
{
    return (Math.abs (py - y1) < 3);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Geom.java" startline="73" endline="95">
{
    int direction = 0;
    int vx = x2 - x1;
    int vy = y2 - y1;
    if (vy < vx && vx > - vy) {
        direction = EAST;
    }
    else if (vy > vx && vy > - vx) {
        direction = NORTH;
    }
    else if (vx < vy && vx < - vy) {
        direction = WEST;
    }
    else {
        direction = SOUTH;
    }

    return direction;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Geom.java" startline="79" endline="81">
{
    direction = EAST;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Geom.java" startline="83" endline="85">
{
    direction = NORTH;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Geom.java" startline="87" endline="89">
{
    direction = WEST;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Geom.java" startline="91" endline="93">
{
    direction = SOUTH;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Geom.java" startline="98" endline="100">
{
    return new Point (r.x + r.width / 2, r.y + r.height);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Geom.java" startline="103" endline="105">
{
    return new Point (r.x + r.width / 2, r.y + r.height / 2);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Geom.java" startline="108" endline="110">
{
    return new Point (r.x, r.y + r.height / 2);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Geom.java" startline="113" endline="115">
{
    return new Point (r.x + r.width, r.y + r.height / 2);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Geom.java" startline="118" endline="120">
{
    return new Point (r.x + r.width / 2, r.y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Geom.java" startline="129" endline="131">
{
    return new Point ((int) r.getMaxX (), (int) r.getMaxY ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Geom.java" startline="141" endline="143">
{
    return r.getLocation ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Geom.java" startline="153" endline="155">
{
    return new Point ((int) r.getMaxX (), (int) r.getMinY ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Geom.java" startline="165" endline="167">
{
    return new Point ((int) r.getMinX (), (int) r.getMaxY ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Geom.java" startline="179" endline="181">
{
    return corner (r);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Geom.java" startline="188" endline="198">
{
    if (value < min) {
        value = min;
    }

    if (value > max) {
        value = max;
    }

    return value;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Geom.java" startline="190" endline="192">
{
    value = min;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Geom.java" startline="194" endline="196">
{
    value = max;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Geom.java" startline="204" endline="206">
{
    return (x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Geom.java" startline="212" endline="214">
{
    return (long) Math.sqrt (length2 (x1, y1, x2, y2));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Geom.java" startline="220" endline="224">
{
    int px = p.x - (r.x + r.width / 2);
    int py = p.y - (r.y + r.height / 2);
    return Math.atan2 (py * r.width, px * r.height);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Geom.java" startline="230" endline="255">
{
    double si = Math.sin (angle);
    double co = Math.cos (angle);
    double e = 0.0001;
    int x = 0, y = 0;
    if (Math.abs (si) > e) {
        x = (int) ((1.0 + co / Math.abs (si)) / 2.0 * r.width);
        x = range (0, r.width, x);
    }
    else if (co >= 0.0) {
        x = r.width;
    }

    if (Math.abs (co) > e) {
        y = (int) ((1.0 + si / Math.abs (co)) / 2.0 * r.height);
        y = range (0, r.height, y);
    }
    else if (si >= 0.0) {
        y = r.height;
    }

    return new Point (r.x + x, r.y + y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Geom.java" startline="237" endline="240">
{
    x = (int) ((1.0 + co / Math.abs (si)) / 2.0 * r.width);
    x = range (0, r.width, x);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Geom.java" startline="242" endline="244">
{
    x = r.width;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Geom.java" startline="246" endline="249">
{
    y = (int) ((1.0 + si / Math.abs (co)) / 2.0 * r.height);
    y = range (0, r.height, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Geom.java" startline="251" endline="253">
{
    y = r.height;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Geom.java" startline="261" endline="265">
{
    double si = Math.sin (angle);
    double co = Math.cos (angle);
    return new Point ((int) (fx * co + 0.5), (int) (fy * si + 0.5));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Geom.java" startline="271" endline="275">
{
    Point center = Geom.center (r);
    Point p = Geom.polarToPoint (angle, r.width / 2, r.height / 2);
    return new Point (center.x + p.x, center.y + p.y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Geom.java" startline="290" endline="342">
{
    double denom = ((xb - xa) * (yd - yc) - (yb - ya) * (xd - xc));
    double rnum = ((ya - yc) * (xd - xc) - (xa - xc) * (yd - yc));
    if (denom == 0.0) {
        if (rnum == 0.0) {
            if ((xa < xb && (xb < xc || xb < xd)) || (xa > xb && (xb > xc || xb > xd))) {
                return new Point (xb, yb);
            }
            else {
                return new Point (xa, ya);
            }

        }
        else {
            return null;
        }

    }

    double r = rnum / denom;
    double snum = ((ya - yc) * (xb - xa) - (xa - xc) * (yb - ya));
    double s = snum / denom;
    if (0.0 <= r && r <= 1.0 && 0.0 <= s && s <= 1.0) {
        int px = (int) (xa + (xb - xa) * r);
        int py = (int) (ya + (yb - ya) * r);
        return new Point (px, py);
    }
    else {
        return null;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Geom.java" startline="309" endline="326">
{
    if (rnum == 0.0) {
        if ((xa < xb && (xb < xc || xb < xd)) || (xa > xb && (xb > xc || xb > xd))) {
            return new Point (xb, yb);
        }
        else {
            return new Point (xa, ya);
        }

    }
    else {
        return null;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Geom.java" startline="311" endline="321">
{
    if ((xa < xb && (xb < xc || xb < xd)) || (xa > xb && (xb > xc || xb > xd))) {
        return new Point (xb, yb);
    }
    else {
        return new Point (xa, ya);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Geom.java" startline="314" endline="316">
{
    return new Point (xb, yb);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Geom.java" startline="318" endline="320">
{
    return new Point (xa, ya);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Geom.java" startline="323" endline="325">
{
    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Geom.java" startline="333" endline="337">
{
    int px = (int) (xa + (xb - xa) * r);
    int py = (int) (ya + (yb - ya) * r);
    return new Point (px, py);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Geom.java" startline="339" endline="341">
{
    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Geom.java" startline="353" endline="421">
{
    int xdiff = xb - xa;
    int ydiff = yb - ya;
    long l2 = xdiff * xdiff + ydiff * ydiff;
    if (l2 == 0) {
        return Geom.length (xa, ya, xc, yc);
    }

    double rnum = (ya - yc) * (ya - yb) - (xa - xc) * (xb - xa);
    double r = rnum / l2;
    if (r < 0.0 || r > 1.0) {
        return Double.MAX_VALUE;
    }

    double xi = xa + r * xdiff;
    double yi = ya + r * ydiff;
    double xd = xc - xi;
    double yd = yc - yi;
    return Math.sqrt (xd * xd + yd * yd);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Geom.java" startline="395" endline="397">
{
    return Geom.length (xa, ya, xc, yc);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Geom.java" startline="403" endline="405">
{
    return Double.MAX_VALUE;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Geom.java" startline="430" endline="433">
{
    Line2D.Double line = new Line2D.Double (xa, xb, ya, yb);
    return line.ptSegDist (xc, yc);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/GraphLayout.java" startline="56" endline="56">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/GraphLayout.java" startline="59" endline="61">
{
    return (GraphNode) nodes.get (node);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/GraphLayout.java" startline="64" endline="66">
{
    return ((Double) edges.get (edge)).doubleValue () * LENGTH_FACTOR;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/GraphLayout.java" startline="69" endline="72">
{
    nodes.put (node, new GraphNode (node));
    node.addFigureChangeListener (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/GraphLayout.java" startline="75" endline="81">
{
    Dimension d1 = edge.getStartConnector ().owner ().size ();
    Dimension d2 = edge.getEndConnector ().owner ().size ();
    int len = Math.max (d1.width, d1.height) / 2 + Math.max (d2.width, d2.height) / 2 + addlen;
    edges.put (edge, new Double (len));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/GraphLayout.java" startline="84" endline="198">
{
    if (nodes == null) return;

    Enumeration edgeEnum = edges.keys ();
    while (edgeEnum.hasMoreElements ()) {
        ConnectionFigure e = (ConnectionFigure) edgeEnum.nextElement ();
        double targetlen = len (e);
        GraphNode from = getGraphNode (e.getStartConnector ().owner ());
        GraphNode to = getGraphNode (e.getEndConnector ().owner ());
        double vx = to.x - from.x;
        double vy = to.y - from.y;
        double len = Math.sqrt (vx * vx + vy * vy);
        if (len > 0) {
            double f = SPRING_STRENGTH * (targetlen - len) / len;
            double dx = f * vx;
            double dy = f * vy;
            double phi = Math.atan2 (vx, vy);
            double dir = - Math.sin (4 * phi);
            dx += TORQUE_STRENGTH * vy * dir / len;
            dy += - TORQUE_STRENGTH * vx * dir / len;
            to.dx += dx;
            to.dy += dy;
            from.dx += - dx;
            from.dy += - dy;
        }

    }

    Enumeration nodeEnum1 = nodes.elements ();
    while (nodeEnum1.hasMoreElements ()) {
        GraphNode n1 = (GraphNode) nodeEnum1.nextElement ();
        double dx = 0;
        double dy = 0;
        Enumeration nodeEnum2 = nodes.elements ();
        while (nodeEnum2.hasMoreElements ()) {
            GraphNode n2 = (GraphNode) nodeEnum2.nextElement ();
            if (n1 == n2) {
                continue;
            }

            double vx = n1.x - n2.x;
            double vy = n1.y - n2.y;
            double lensqr = vx * vx + vy * vy;
            double len = Math.sqrt (lensqr);
            if (len == 0) {
                dx += REPULSION_STRENGTH * Math.random ();
                dy += REPULSION_STRENGTH * Math.random ();
            }
            else if (len < REPULSION_LIMIT) {
                vx = vx / REPULSION_LIMIT;
                vy = vy / REPULSION_LIMIT;
                len = len / REPULSION_LIMIT;
                double f = 0;
                switch (REPULSION_TYPE) {
                    case 0 :
                        f = 0.5 * (1 - len) / len;
                        break;
                    case 1 :
                        f = 1 - len;
                        break;
                    case 2 :
                        f = 2 * (1 - len) * (1 - len);
                        break;
                }
                f *= REPULSION_STRENGTH;
                dx += f * vx;
                dy += f * vy;
            }

        }

        n1.dx += dx;
        n1.dy += dy;
    }

    Enumeration nodeEnum = nodes.keys ();
    while (nodeEnum.hasMoreElements ()) {
        Figure node = (Figure) nodeEnum.nextElement ();
        GraphNode n = getGraphNode (node);
        if (! Boolean.TRUE.equals (node.getAttribute ("Location"))) {
            n.x += Math.max (- 5, Math.min (5, n.dx));
            n.y += Math.max (- 5, Math.min (5, n.dy));
            Point c = node.center ();
            node.moveBy ((int) Math.round (n.x) - c.x, (int) Math.round (n.y) - c.y);
            if (n.x < 0) {
                n.x = 0;
            }

            if (n.y < 0) {
                n.y = 0;
            }

        }

        n.dx *= FRICTION_FACTOR;
        n.dy *= FRICTION_FACTOR;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/GraphLayout.java" startline="89" endline="114">
{
    ConnectionFigure e = (ConnectionFigure) edgeEnum.nextElement ();
    double targetlen = len (e);
    GraphNode from = getGraphNode (e.getStartConnector ().owner ());
    GraphNode to = getGraphNode (e.getEndConnector ().owner ());
    double vx = to.x - from.x;
    double vy = to.y - from.y;
    double len = Math.sqrt (vx * vx + vy * vy);
    if (len > 0) {
        double f = SPRING_STRENGTH * (targetlen - len) / len;
        double dx = f * vx;
        double dy = f * vy;
        double phi = Math.atan2 (vx, vy);
        double dir = - Math.sin (4 * phi);
        dx += TORQUE_STRENGTH * vy * dir / len;
        dy += - TORQUE_STRENGTH * vx * dir / len;
        to.dx += dx;
        to.dy += dy;
        from.dx += - dx;
        from.dy += - dy;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/GraphLayout.java" startline="99" endline="113">
{
    double f = SPRING_STRENGTH * (targetlen - len) / len;
    double dx = f * vx;
    double dy = f * vy;
    double phi = Math.atan2 (vx, vy);
    double dir = - Math.sin (4 * phi);
    dx += TORQUE_STRENGTH * vy * dir / len;
    dy += - TORQUE_STRENGTH * vx * dir / len;
    to.dx += dx;
    to.dy += dy;
    from.dx += - dx;
    from.dy += - dy;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/GraphLayout.java" startline="118" endline="170">
{
    GraphNode n1 = (GraphNode) nodeEnum1.nextElement ();
    double dx = 0;
    double dy = 0;
    Enumeration nodeEnum2 = nodes.elements ();
    while (nodeEnum2.hasMoreElements ()) {
        GraphNode n2 = (GraphNode) nodeEnum2.nextElement ();
        if (n1 == n2) {
            continue;
        }

        double vx = n1.x - n2.x;
        double vy = n1.y - n2.y;
        double lensqr = vx * vx + vy * vy;
        double len = Math.sqrt (lensqr);
        if (len == 0) {
            dx += REPULSION_STRENGTH * Math.random ();
            dy += REPULSION_STRENGTH * Math.random ();
        }
        else if (len < REPULSION_LIMIT) {
            vx = vx / REPULSION_LIMIT;
            vy = vy / REPULSION_LIMIT;
            len = len / REPULSION_LIMIT;
            double f = 0;
            switch (REPULSION_TYPE) {
                case 0 :
                    f = 0.5 * (1 - len) / len;
                    break;
                case 1 :
                    f = 1 - len;
                    break;
                case 2 :
                    f = 2 * (1 - len) * (1 - len);
                    break;
            }
            f *= REPULSION_STRENGTH;
            dx += f * vx;
            dy += f * vy;
        }

    }

    n1.dx += dx;
    n1.dy += dy;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/GraphLayout.java" startline="125" endline="166">
{
    GraphNode n2 = (GraphNode) nodeEnum2.nextElement ();
    if (n1 == n2) {
        continue;
    }

    double vx = n1.x - n2.x;
    double vy = n1.y - n2.y;
    double lensqr = vx * vx + vy * vy;
    double len = Math.sqrt (lensqr);
    if (len == 0) {
        dx += REPULSION_STRENGTH * Math.random ();
        dy += REPULSION_STRENGTH * Math.random ();
    }
    else if (len < REPULSION_LIMIT) {
        vx = vx / REPULSION_LIMIT;
        vy = vy / REPULSION_LIMIT;
        len = len / REPULSION_LIMIT;
        double f = 0;
        switch (REPULSION_TYPE) {
            case 0 :
                f = 0.5 * (1 - len) / len;
                break;
            case 1 :
                f = 1 - len;
                break;
            case 2 :
                f = 2 * (1 - len) * (1 - len);
                break;
        }
        f *= REPULSION_STRENGTH;
        dx += f * vx;
        dy += f * vy;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/GraphLayout.java" startline="128" endline="130">
{
    continue;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/GraphLayout.java" startline="136" endline="139">
{
    dx += REPULSION_STRENGTH * Math.random ();
    dy += REPULSION_STRENGTH * Math.random ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/GraphLayout.java" startline="141" endline="165">
{
    vx = vx / REPULSION_LIMIT;
    vy = vy / REPULSION_LIMIT;
    len = len / REPULSION_LIMIT;
    double f = 0;
    switch (REPULSION_TYPE) {
        case 0 :
            f = 0.5 * (1 - len) / len;
            break;
        case 1 :
            f = 1 - len;
            break;
        case 2 :
            f = 2 * (1 - len) * (1 - len);
            break;
    }
    f *= REPULSION_STRENGTH;
    dx += f * vx;
    dy += f * vy;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/GraphLayout.java" startline="174" endline="197">
{
    Figure node = (Figure) nodeEnum.nextElement ();
    GraphNode n = getGraphNode (node);
    if (! Boolean.TRUE.equals (node.getAttribute ("Location"))) {
        n.x += Math.max (- 5, Math.min (5, n.dx));
        n.y += Math.max (- 5, Math.min (5, n.dy));
        Point c = node.center ();
        node.moveBy ((int) Math.round (n.x) - c.x, (int) Math.round (n.y) - c.y);
        if (n.x < 0) {
            n.x = 0;
        }

        if (n.y < 0) {
            n.y = 0;
        }

    }

    n.dx *= FRICTION_FACTOR;
    n.dy *= FRICTION_FACTOR;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/GraphLayout.java" startline="178" endline="194">
{
    n.x += Math.max (- 5, Math.min (5, n.dx));
    n.y += Math.max (- 5, Math.min (5, n.dy));
    Point c = node.center ();
    node.moveBy ((int) Math.round (n.x) - c.x, (int) Math.round (n.y) - c.y);
    if (n.x < 0) {
        n.x = 0;
    }

    if (n.y < 0) {
        n.y = 0;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/GraphLayout.java" startline="187" endline="189">
{
    n.x = 0;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/GraphLayout.java" startline="191" endline="193">
{
    n.y = 0;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/GraphLayout.java" startline="204" endline="213">
{
    if (nodes != null) {
        Figure node = e.getFigure ();
        if (nodes.containsKey (node)) {
            getGraphNode (node).update ();
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/GraphLayout.java" startline="206" endline="212">
{
    Figure node = e.getFigure ();
    if (nodes.containsKey (node)) {
        getGraphNode (node).update ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/GraphLayout.java" startline="209" endline="211">
{
    getGraphNode (node).update ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/GraphLayout.java" startline="216" endline="228">
{
    if (nodes != null) {
        Enumeration nodeEnum = nodes.keys ();
        while (nodeEnum.hasMoreElements ()) {
            Figure node = (Figure) nodeEnum.nextElement ();
            node.removeFigureChangeListener (this);
        }

        nodes = null;
        edges = null;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/GraphLayout.java" startline="218" endline="227">
{
    Enumeration nodeEnum = nodes.keys ();
    while (nodeEnum.hasMoreElements ()) {
        Figure node = (Figure) nodeEnum.nextElement ();
        node.removeFigureChangeListener (this);
    }

    nodes = null;
    edges = null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/GraphLayout.java" startline="221" endline="224">
{
    Figure node = (Figure) nodeEnum.nextElement ();
    node.removeFigureChangeListener (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/GraphLayout.java" startline="239" endline="242">
{
    this.node = node;
    update ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/GraphLayout.java" startline="245" endline="254">
{
    Point p = node.center ();
    if (Math.abs (p.x - Math.round (x)) > 1 || Math.abs (p.y - Math.round (y)) > 1) {
        x = p.x;
        y = p.y;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/GraphLayout.java" startline="249" endline="253">
{
    x = p.x;
    y = p.y;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Iconkit.java" startline="53" endline="58">
{
    fMap = new Hashtable (53);
    fRegisteredImages = CollectionsFactory.current ().createList (10);
    fComponent = component;
    fgIconkit = this;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Iconkit.java" startline="64" endline="66">
{
    return fgIconkit;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Iconkit.java" startline="73" endline="100">
{
    if (fRegisteredImages.size () == 0) return;

    MediaTracker tracker = new MediaTracker (component);
    Iterator iter = fRegisteredImages.iterator ();
    while (iter.hasNext ()) {
        String fileName = (String) iter.next ();
        if (basicGetImage (fileName) == null) {
            tracker.addImage (loadImage (fileName), ID);
        }

    }

    fRegisteredImages.clear ();
    try {
        tracker.waitForAll ();
    }
    catch (Exception e) {
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Iconkit.java" startline="82" endline="88">
{
    String fileName = (String) iter.next ();
    if (basicGetImage (fileName) == null) {
        tracker.addImage (loadImage (fileName), ID);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Iconkit.java" startline="85" endline="87">
{
    tracker.addImage (loadImage (fileName), ID);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Iconkit.java" startline="93" endline="95">
{
    tracker.waitForAll ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Iconkit.java" startline="97" endline="99">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Iconkit.java" startline="108" endline="110">
{
    fRegisteredImages.add (fileName);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Iconkit.java" startline="116" endline="120">
{
    registerImage (fileName);
    loadRegisteredImages (component);
    return getImage (fileName);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Iconkit.java" startline="126" endline="137">
{
    if (fMap.containsKey (filename)) {
        return (Image) fMap.get (filename);
    }

    Image image = loadImageResource (filename);
    if (image != null) {
        fMap.put (filename, image);
    }

    return image;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Iconkit.java" startline="128" endline="130">
{
    return (Image) fMap.get (filename);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Iconkit.java" startline="133" endline="135">
{
    fMap.put (filename, image);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Iconkit.java" startline="140" endline="148">
{
    Image image = loadImage (filename);
    if (image != null && waitForLoad) {
        ImageIcon icon = new ImageIcon (image);
        image = icon.getImage ();
    }

    return image;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Iconkit.java" startline="143" endline="146">
{
    ImageIcon icon = new ImageIcon (image);
    image = icon.getImage ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Iconkit.java" startline="151" endline="166">
{
    Toolkit toolkit = Toolkit.getDefaultToolkit ();
    try {
        URL url = getClass ().getResource (resourcename);
        if (fgDebug) {
            System.out.println (resourcename);
        }

        return toolkit.createImage ((ImageProducer) url.getContent ());
    }
    catch (Exception ex) {
        return null;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Iconkit.java" startline="154" endline="161">
{
    URL url = getClass ().getResource (resourcename);
    if (fgDebug) {
        System.out.println (resourcename);
    }

    return toolkit.createImage ((ImageProducer) url.getContent ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Iconkit.java" startline="157" endline="159">
{
    System.out.println (resourcename);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Iconkit.java" startline="163" endline="165">
{
    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Iconkit.java" startline="174" endline="184">
{
    Image image = basicGetImage (filename);
    if (image != null) {
        return image;
    }

    loadRegisteredImages (fComponent);
    return basicGetImage (filename);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Iconkit.java" startline="177" endline="179">
{
    return image;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Iconkit.java" startline="187" endline="193">
{
    if (fMap.containsKey (filename)) {
        return (Image) fMap.get (filename);
    }

    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/Iconkit.java" startline="189" endline="191">
{
    return (Image) fMap.get (filename);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/JDOStorageFormat.java" startline="41" endline="55">
{
    super ();
    pms = CollectionsFactory.current ().createMap ();
    Runtime.getRuntime ().addShutdownHook (new Thread () {

        public void run () {
            Iterator iter = pms.values ().iterator ();
        }

    }

    );
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/JDOStorageFormat.java" startline="48" endline="53">
{
    Iterator iter = pms.values ().iterator ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/JDOStorageFormat.java" startline="65" endline="67">
{
    return "j2";
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/JDOStorageFormat.java" startline="76" endline="78">
{
    return "Database (" + getFileExtension () + ")";
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/JDOStorageFormat.java" startline="88" endline="116">
{
    PersistenceManager pm = getPersistenceManager (fileName);
    String drawingName = null;
    Drawing txnDrawing = crossTxnBoundaries (storeDrawing);
    endTransaction (pm, false);
    startTransaction (pm);
    try {
        Extent extent = pm.getExtent (StandardDrawing.class, true);
        DrawingListModel listModel = new DrawingListModel (extent.iterator ());
        drawingName = showStoreDialog (listModel, storeDrawing);
        if (drawingName != null) {
            storeDrawing.setTitle (drawingName);
            txnDrawing.setTitle (drawingName);
            pm.makePersistent (txnDrawing);
        }

    }
    finally {
        endTransaction (pm, (drawingName != null));
    }

    startTransaction (pm);
    return drawingName;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/JDOStorageFormat.java" startline="97" endline="107">
{
    Extent extent = pm.getExtent (StandardDrawing.class, true);
    DrawingListModel listModel = new DrawingListModel (extent.iterator ());
    drawingName = showStoreDialog (listModel, storeDrawing);
    if (drawingName != null) {
        storeDrawing.setTitle (drawingName);
        txnDrawing.setTitle (drawingName);
        pm.makePersistent (txnDrawing);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/JDOStorageFormat.java" startline="102" endline="106">
{
    storeDrawing.setTitle (drawingName);
    txnDrawing.setTitle (drawingName);
    pm.makePersistent (txnDrawing);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/JDOStorageFormat.java" startline="109" endline="111">
{
    endTransaction (pm, (drawingName != null));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/JDOStorageFormat.java" startline="126" endline="154">
{
    PersistenceManager pm = getPersistenceManager (fileName);
    endTransaction (pm, false);
    startTransaction (pm);
    Drawing restoredDrawing = null;
    try {
        Extent extent = pm.getExtent (StandardDrawing.class, true);
        DrawingListModel listModel = new DrawingListModel (extent.iterator ());
        Drawing txnDrawing = showRestoreDialog (listModel);
        if (txnDrawing != null) {
            restoredDrawing = txnDrawing;
        }

    }
    finally {
        endTransaction (pm, false);
    }

    startTransaction (pm);
    return restoredDrawing;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/JDOStorageFormat.java" startline="134" endline="145">
{
    Extent extent = pm.getExtent (StandardDrawing.class, true);
    DrawingListModel listModel = new DrawingListModel (extent.iterator ());
    Drawing txnDrawing = showRestoreDialog (listModel);
    if (txnDrawing != null) {
        restoredDrawing = txnDrawing;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/JDOStorageFormat.java" startline="139" endline="144">
{
    restoredDrawing = txnDrawing;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/JDOStorageFormat.java" startline="147" endline="149">
{
    endTransaction (pm, false);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/JDOStorageFormat.java" startline="157" endline="164">
{
    pm.retrieve (figure);
    FigureEnumeration fe = figure.figures ();
    while (fe.hasNextFigure ()) {
        retrieveAll (pm, fe.nextFigure ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/JDOStorageFormat.java" startline="161" endline="163">
{
    retrieveAll (pm, fe.nextFigure ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/JDOStorageFormat.java" startline="167" endline="170">
{
    return (Drawing) ((StandardDrawing) originalDrawing).clone ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/JDOStorageFormat.java" startline="173" endline="181">
{
    PersistenceManager pm = (PersistenceManager) pms.get (fileName);
    if (pm == null) {
        pm = createPersistenceManagerFactory (fileName).getPersistenceManager ();
        pms.put (fileName, pm);
    }

    return pm;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/JDOStorageFormat.java" startline="176" endline="179">
{
    pm = createPersistenceManagerFactory (fileName).getPersistenceManager ();
    pms.put (fileName, pm);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/JDOStorageFormat.java" startline="184" endline="197">
{
    Properties pmfProps = new Properties ();
    pmfProps.put ("javax.jdo.PersistenceManagerFactoryClass", "com.poet.jdo.PersistenceManagerFactories");
    pmfProps.put ("javax.jdo.option.ConnectionURL", "fastobjects://LOCAL/MyBase.j1");
    final PersistenceManagerFactory pmf = JDOHelper.getPersistenceManagerFactory (pmfProps);
    return pmf;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/JDOStorageFormat.java" startline="200" endline="205">
{
    if (! pm.currentTransaction ().isActive ()) {
        pm.currentTransaction ().begin ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/JDOStorageFormat.java" startline="202" endline="204">
{
    pm.currentTransaction ().begin ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/JDOStorageFormat.java" startline="208" endline="220">
{
    if (pm.currentTransaction ().isActive ()) {
        if (doCommit) {
            pm.currentTransaction ().commit ();
        }
        else {
            pm.currentTransaction ().rollback ();
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/JDOStorageFormat.java" startline="210" endline="219">
{
    if (doCommit) {
        pm.currentTransaction ().commit ();
    }
    else {
        pm.currentTransaction ().rollback ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/JDOStorageFormat.java" startline="212" endline="214">
{
    pm.currentTransaction ().commit ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/JDOStorageFormat.java" startline="216" endline="218">
{
    pm.currentTransaction ().rollback ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/JDOStorageFormat.java" startline="223" endline="262">
{
    final String msgString = "Specify a name for the drawing";
    final JTextField nameTextField = new JTextField (storeDrawing.getTitle ());
    final JList dataList = new JList (listModel);
    final JScrollPane dbContentScrollPane = new JScrollPane (dataList);
    Object [] guiComponents = {msgString, dbContentScrollPane, nameTextField};
    dataList.setSelectionMode (ListSelectionModel.SINGLE_SELECTION);
    dataList.setValueIsAdjusting (true);
    dataList.addListSelectionListener (new ListSelectionListener () {

        public void valueChanged (ListSelectionEvent e) {
            nameTextField.setText (dataList.getSelectedValue ().toString ());
        }

    }

    );
    final JOptionPane optionPane = new JOptionPane (guiComponents, JOptionPane.PLAIN_MESSAGE, JOptionPane.OK_CANCEL_OPTION);
    final JDialog dialog = optionPane.createDialog (null, "Restore a drawing from the database");
    dialog.setVisible (true);
    if ((optionPane.getValue () != null) && (optionPane.getValue ().equals (new Integer (JOptionPane.OK_OPTION)))) {
        return nameTextField.getText ();
    }
    else {
        return null;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/JDOStorageFormat.java" startline="236" endline="238">
{
    nameTextField.setText (dataList.getSelectedValue ().toString ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/JDOStorageFormat.java" startline="255" endline="257">
{
    return nameTextField.getText ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/JDOStorageFormat.java" startline="259" endline="261">
{
    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/JDOStorageFormat.java" startline="265" endline="293">
{
    final String msgString = "Select a drawing";
    final JList dataList = new JList (listModel);
    final JScrollPane dbContentScrollPane = new JScrollPane (dataList);
    Object [] guiComponents = {msgString, dbContentScrollPane};
    dataList.setSelectionMode (ListSelectionModel.SINGLE_SELECTION);
    dataList.setValueIsAdjusting (true);
    final JOptionPane optionPane = new JOptionPane (guiComponents, JOptionPane.PLAIN_MESSAGE, JOptionPane.OK_CANCEL_OPTION);
    final JDialog dialog = optionPane.createDialog (null, "Restore a drawing from the database");
    dialog.setVisible (true);
    if ((optionPane.getValue () != null) && (optionPane.getValue ().equals (new Integer (JOptionPane.OK_OPTION))) && (dataList.getSelectedIndex () >= 0) && (dataList.getSelectedIndex () < dataList.getModel ().getSize ())) {
        return listModel.getDrawingAt (dataList.getSelectedIndex ());
    }
    else {
        return null;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/JDOStorageFormat.java" startline="286" endline="288">
{
    return listModel.getDrawingAt (dataList.getSelectedIndex ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/JDOStorageFormat.java" startline="290" endline="292">
{
    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/JDOStorageFormat.java" startline="300" endline="308">
{
    myList = CollectionsFactory.current ().createList ();
    while (iter.hasNext ()) {
        Object o = iter.next ();
        System.out.println ("extent: " + o + " .. " + ((Drawing) o).getTitle ());
        myList.add (o);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/JDOStorageFormat.java" startline="303" endline="307">
{
    Object o = iter.next ();
    System.out.println ("extent: " + o + " .. " + ((Drawing) o).getTitle ());
    myList.add (o);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/JDOStorageFormat.java" startline="311" endline="313">
{
    return getDrawingAt (index).getTitle ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/JDOStorageFormat.java" startline="316" endline="318">
{
    return ((Drawing) myList.get (index));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/JDOStorageFormat.java" startline="321" endline="323">
{
    return myList.size ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/JDOStorageFormat.java" startline="329" endline="331">
{
    init ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/JDOStorageFormat.java" startline="334" endline="339">
{
    setTitle ("Select Drawing");
    getContentPane ().setLayout (new BorderLayout ());
    getContentPane ().add (new JLabel ("Database content"), BorderLayout.NORTH);
    setSize (200, 200);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/JDOStorageFormat.java" startline="343" endline="357">
{
    DrawingSelector frame = new DrawingSelector ();
    try {
        Drawing newDrawing = new StandardDrawing ();
        newDrawing.setTitle ("TestDrawingName" + new Random (System.currentTimeMillis ()).nextLong ());
        new JDOStorageFormat ().store ("base.j2", newDrawing);
        System.exit (0);
    }
    catch (IOException e) {
        e.printStackTrace ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/JDOStorageFormat.java" startline="346" endline="351">
{
    Drawing newDrawing = new StandardDrawing ();
    newDrawing.setTitle ("TestDrawingName" + new Random (System.currentTimeMillis ()).nextLong ());
    new JDOStorageFormat ().store ("base.j2", newDrawing);
    System.exit (0);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/JDOStorageFormat.java" startline="353" endline="355">
{
    e.printStackTrace ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/PaletteButton.java" startline="46" endline="51">
{
    fListener = listener;
    fState = fOldState = NORMAL;
    addMouseListener (this);
    addMouseMotionListener (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/PaletteButton.java" startline="54" endline="56">
{
    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/PaletteButton.java" startline="59" endline="61">
{
    return "";
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/PaletteButton.java" startline="64" endline="71">
{
    if (isEnabled ()) {
        fState = NORMAL;
        setSelected (false);
        repaint ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/PaletteButton.java" startline="66" endline="70">
{
    fState = NORMAL;
    setSelected (false);
    repaint ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/PaletteButton.java" startline="74" endline="81">
{
    if (isEnabled ()) {
        fState = SELECTED;
        setSelected (true);
        repaint ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/PaletteButton.java" startline="76" endline="80">
{
    fState = SELECTED;
    setSelected (true);
    repaint ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/PaletteButton.java" startline="84" endline="91">
{
    if (isEnabled ()) {
        fOldState = fState;
        fState = PRESSED;
        repaint ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/PaletteButton.java" startline="86" endline="90">
{
    fOldState = fState;
    fState = PRESSED;
    repaint ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/PaletteButton.java" startline="94" endline="107">
{
    if (isEnabled ()) {
        if (contains (e.getX (), e.getY ())) {
            fState = PRESSED;
        }
        else {
            fState = fOldState;
        }

        repaint ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/PaletteButton.java" startline="96" endline="106">
{
    if (contains (e.getX (), e.getY ())) {
        fState = PRESSED;
    }
    else {
        fState = fOldState;
    }

    repaint ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/PaletteButton.java" startline="98" endline="100">
{
    fState = PRESSED;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/PaletteButton.java" startline="102" endline="104">
{
    fState = fOldState;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/PaletteButton.java" startline="110" endline="120">
{
    if (isEnabled ()) {
        fState = fOldState;
        repaint ();
        if (contains (e.getX (), e.getY ())) {
            fListener.paletteUserSelected (this);
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/PaletteButton.java" startline="112" endline="119">
{
    fState = fOldState;
    repaint ();
    if (contains (e.getX (), e.getY ())) {
        fListener.paletteUserSelected (this);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/PaletteButton.java" startline="116" endline="118">
{
    fListener.paletteUserSelected (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/PaletteButton.java" startline="123" endline="125">
{
    fListener.paletteUserOver (this, true);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/PaletteButton.java" startline="128" endline="135">
{
    if (fState == PRESSED) {
        mouseDragged (e);
    }

    fListener.paletteUserOver (this, false);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/PaletteButton.java" startline="130" endline="133">
{
    mouseDragged (e);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/PaletteButton.java" startline="137" endline="137">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/PaletteButton.java" startline="138" endline="138">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/PaletteIcon.java" startline="32" endline="37">
{
    fSize = size;
    fNormal = normal;
    fPressed = pressed;
    fSelected = selected;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/PaletteIcon.java" startline="40" endline="42">
{
    return fNormal;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/PaletteIcon.java" startline="44" endline="46">
{
    return fPressed;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/PaletteIcon.java" startline="48" endline="50">
{
    return fSelected;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/PaletteIcon.java" startline="53" endline="55">
{
    return fSize.width;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/PaletteIcon.java" startline="57" endline="59">
{
    return fSize.height;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/PaletteLayout.java" startline="35" endline="37">
{
    this (gap, new Point (0, 0), true);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/PaletteLayout.java" startline="40" endline="42">
{
    this (gap, border, true);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/PaletteLayout.java" startline="45" endline="49">
{
    fGap = gap;
    fBorder = border;
    fVerticalLayout = vertical;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/PaletteLayout.java" startline="52" endline="53">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/PaletteLayout.java" startline="56" endline="57">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/PaletteLayout.java" startline="60" endline="62">
{
    return minimumLayoutSize (target);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/PaletteLayout.java" startline="65" endline="102">
{
    Dimension dim = new Dimension (0, 0);
    int nmembers = target.getComponentCount ();
    for (int i = 0;
    i < nmembers; i ++) {
        Component m = target.getComponent (i);
        if (m.isVisible ()) {
            Dimension d = m.getMinimumSize ();
            if (fVerticalLayout) {
                dim.width = Math.max (dim.width, d.width);
                if (i > 0) {
                    dim.height += fGap;
                }

                dim.height += d.height;
            }
            else {
                dim.height = Math.max (dim.height, d.height);
                if (i > 0) {
                    dim.width += fGap;
                }

                dim.width += d.width;
            }

        }

    }

    Insets insets = target.getInsets ();
    dim.width += insets.left + insets.right;
    dim.width += 2 * fBorder.x;
    dim.height += insets.top + insets.bottom;
    dim.height += 2 * fBorder.y;
    return dim;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/PaletteLayout.java" startline="70" endline="94">
{
    Component m = target.getComponent (i);
    if (m.isVisible ()) {
        Dimension d = m.getMinimumSize ();
        if (fVerticalLayout) {
            dim.width = Math.max (dim.width, d.width);
            if (i > 0) {
                dim.height += fGap;
            }

            dim.height += d.height;
        }
        else {
            dim.height = Math.max (dim.height, d.height);
            if (i > 0) {
                dim.width += fGap;
            }

            dim.width += d.width;
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/PaletteLayout.java" startline="73" endline="93">
{
    Dimension d = m.getMinimumSize ();
    if (fVerticalLayout) {
        dim.width = Math.max (dim.width, d.width);
        if (i > 0) {
            dim.height += fGap;
        }

        dim.height += d.height;
    }
    else {
        dim.height = Math.max (dim.height, d.height);
        if (i > 0) {
            dim.width += fGap;
        }

        dim.width += d.width;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/PaletteLayout.java" startline="76" endline="83">
{
    dim.width = Math.max (dim.width, d.width);
    if (i > 0) {
        dim.height += fGap;
    }

    dim.height += d.height;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/PaletteLayout.java" startline="79" endline="81">
{
    dim.height += fGap;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/PaletteLayout.java" startline="85" endline="92">
{
    dim.height = Math.max (dim.height, d.height);
    if (i > 0) {
        dim.width += fGap;
    }

    dim.width += d.width;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/PaletteLayout.java" startline="88" endline="90">
{
    dim.width += fGap;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/PaletteLayout.java" startline="105" endline="130">
{
    Insets insets = target.getInsets ();
    int nmembers = target.getComponentCount ();
    int x = insets.left + fBorder.x;
    int y = insets.top + fBorder.y;
    for (int i = 0;
    i < nmembers; i ++) {
        Component m = target.getComponent (i);
        if (m.isVisible ()) {
            Dimension d = m.getMinimumSize ();
            m.setBounds (x, y, d.width, d.height);
            if (fVerticalLayout) {
                y += d.height;
                y += fGap;
            }
            else {
                x += d.width;
                x += fGap;
            }

        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/PaletteLayout.java" startline="112" endline="129">
{
    Component m = target.getComponent (i);
    if (m.isVisible ()) {
        Dimension d = m.getMinimumSize ();
        m.setBounds (x, y, d.width, d.height);
        if (fVerticalLayout) {
            y += d.height;
            y += fGap;
        }
        else {
            x += d.width;
            x += fGap;
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/PaletteLayout.java" startline="115" endline="128">
{
    Dimension d = m.getMinimumSize ();
    m.setBounds (x, y, d.width, d.height);
    if (fVerticalLayout) {
        y += d.height;
        y += fGap;
    }
    else {
        x += d.width;
        x += fGap;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/PaletteLayout.java" startline="119" endline="122">
{
    y += d.height;
    y += fGap;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/PaletteLayout.java" startline="124" endline="127">
{
    x += d.width;
    x += fGap;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/RedoCommand.java" startline="31" endline="33">
{
    super (name, newDrawingEditor);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/RedoCommand.java" startline="36" endline="56">
{
    super.execute ();
    UndoManager um = getDrawingEditor ().getUndoManager ();
    if ((um == null) || ! um.isRedoable ()) {
        return;
    }

    Undoable lastRedoable = um.popRedo ();
    boolean hasBeenUndone = lastRedoable.redo ();
    if (hasBeenUndone && lastRedoable.isUndoable ()) {
        um.pushUndo (lastRedoable);
    }

    lastRedoable.getDrawingView ().checkDamage ();
    getDrawingEditor ().figureSelectionChanged (lastRedoable.getDrawingView ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/RedoCommand.java" startline="40" endline="42">
{
    return;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/RedoCommand.java" startline="49" endline="51">
{
    um.pushUndo (lastRedoable);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/RedoCommand.java" startline="64" endline="72">
{
    UndoManager um = getDrawingEditor ().getUndoManager ();
    if ((um != null) && (um.getRedoSize () > 0)) {
        return true;
    }

    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/RedoCommand.java" startline="67" endline="69">
{
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/ReverseListEnumerator.java" startline="30" endline="33">
{
    myList = l;
    count = myList.size () - 1;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/ReverseListEnumerator.java" startline="36" endline="38">
{
    return count >= 0;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/ReverseListEnumerator.java" startline="41" endline="47">
{
    if (count >= 0) {
        return myList.get (count --);
    }

    throw new NoSuchElementException ("ReverseListEnumerator");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/ReverseListEnumerator.java" startline="43" endline="45">
{
    return myList.get (count --);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/ReverseListEnumerator.java" startline="50" endline="53">
{
    myList.remove (count);
    count --;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/ReverseVectorEnumerator.java" startline="28" endline="31">
{
    vector = v;
    count = vector.size () - 1;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/ReverseVectorEnumerator.java" startline="34" endline="36">
{
    return count >= 0;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/ReverseVectorEnumerator.java" startline="39" endline="45">
{
    if (count >= 0) {
        return vector.elementAt (count --);
    }

    throw new NoSuchElementException ("ReverseVectorEnumerator");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/ReverseVectorEnumerator.java" startline="41" endline="43">
{
    return vector.elementAt (count --);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/SerializationStorageFormat.java" startline="32" endline="34">
{
    super ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/SerializationStorageFormat.java" startline="44" endline="46">
{
    return "ser";
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/SerializationStorageFormat.java" startline="55" endline="57">
{
    return "Serialization (" + getFileExtension () + ")";
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/SerializationStorageFormat.java" startline="67" endline="73">
{
    FileOutputStream stream = new FileOutputStream (adjustFileName (fileName));
    ObjectOutput output = new ObjectOutputStream (stream);
    output.writeObject (saveDrawing);
    output.close ();
    return adjustFileName (fileName);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/SerializationStorageFormat.java" startline="83" endline="94">
{
    try {
        FileInputStream stream = new FileInputStream (fileName);
        ObjectInput input = new ObjectInputStream (stream);
        return (Drawing) input.readObject ();
    }
    catch (ClassNotFoundException exception) {
        throw new IOException ("Could not restore drawing '" + fileName + "': class not found!");
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/SerializationStorageFormat.java" startline="85" endline="89">
{
    FileInputStream stream = new FileInputStream (fileName);
    ObjectInput input = new ObjectInputStream (stream);
    return (Drawing) input.readObject ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/SerializationStorageFormat.java" startline="91" endline="93">
{
    throw new IOException ("Could not restore drawing '" + fileName + "': class not found!");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StandardStorageFormat.java" startline="53" endline="57">
{
    setFileExtension (createFileExtension ());
    setFileDescription (createFileDescription ());
    setFileFilter (createFileFilter ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StandardStorageFormat.java" startline="67" endline="69">
{
    return myFileExtension = "draw";
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StandardStorageFormat.java" startline="77" endline="79">
{
    myFileExtension = newFileExtension;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StandardStorageFormat.java" startline="87" endline="89">
{
    return myFileExtension;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StandardStorageFormat.java" startline="98" endline="100">
{
    return "Internal Format (" + getFileExtension () + ")";
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StandardStorageFormat.java" startline="108" endline="110">
{
    myFileDescription = newFileDescription;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StandardStorageFormat.java" startline="118" endline="120">
{
    return myFileDescription;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StandardStorageFormat.java" startline="130" endline="151">
{
    return new FileFilter () {

        public boolean accept (File checkFile) {
            if (checkFile.isDirectory ()) {
                return true;
            }
            else {
                return checkFile.getName ().endsWith ("." + myFileExtension);
            }

        }

        public String getDescription () {
            return getFileDescription ();
        }

    }

    ;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StandardStorageFormat.java" startline="134" endline="144">
{
    if (checkFile.isDirectory ()) {
        return true;
    }
    else {
        return checkFile.getName ().endsWith ("." + myFileExtension);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StandardStorageFormat.java" startline="137" endline="139">
{
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StandardStorageFormat.java" startline="141" endline="143">
{
    return checkFile.getName ().endsWith ("." + myFileExtension);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StandardStorageFormat.java" startline="147" endline="149">
{
    return getFileDescription ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StandardStorageFormat.java" startline="160" endline="162">
{
    myFileFilter = newFileFilter;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StandardStorageFormat.java" startline="171" endline="173">
{
    return myFileFilter;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StandardStorageFormat.java" startline="184" endline="190">
{
    FileOutputStream stream = new FileOutputStream (adjustFileName (fileName));
    StorableOutput output = new StorableOutput (stream);
    output.writeStorable (saveDrawing);
    output.close ();
    return adjustFileName (fileName);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StandardStorageFormat.java" startline="199" endline="210">
{
    if (! hasCorrectFileExtension (fileName)) {
        return null;
    }
    else {
        FileInputStream stream = new FileInputStream (fileName);
        StorableInput input = new StorableInput (stream);
        return (Drawing) input.readStorable ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StandardStorageFormat.java" startline="201" endline="203">
{
    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StandardStorageFormat.java" startline="205" endline="209">
{
    FileInputStream stream = new FileInputStream (fileName);
    StorableInput input = new StorableInput (stream);
    return (Drawing) input.readStorable ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StandardStorageFormat.java" startline="219" endline="228">
{
    if (compareObject instanceof StandardStorageFormat) {
        return getFileExtension ().equals (((StandardStorageFormat) compareObject).getFileExtension ());
    }
    else {
        return false;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StandardStorageFormat.java" startline="221" endline="223">
{
    return getFileExtension ().equals (((StandardStorageFormat) compareObject).getFileExtension ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StandardStorageFormat.java" startline="225" endline="227">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StandardStorageFormat.java" startline="237" endline="246">
{
    if (! hasCorrectFileExtension (testFileName)) {
        return testFileName + "." + getFileExtension ();
    }
    else {
        return testFileName;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StandardStorageFormat.java" startline="239" endline="241">
{
    return testFileName + "." + getFileExtension ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StandardStorageFormat.java" startline="243" endline="245">
{
    return testFileName;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StandardStorageFormat.java" startline="254" endline="256">
{
    return testFileName.endsWith ("." + getFileExtension ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StandardVersionControlStrategy.java" startline="25" endline="27">
{
    setVersionRequester (newVersionRequester);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StandardVersionControlStrategy.java" startline="34" endline="51">
{
    String [] requiredVersions = getVersionRequester ().getRequiredVersions ();
    if (requiredVersions.length == 0) {
        return;
    }

    for (int i = 0;
    i < requiredVersions.length; i ++) {
        if (isCompatibleVersion (requiredVersions [i])) {
            return;
        }

    }

    handleIncompatibleVersions ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StandardVersionControlStrategy.java" startline="38" endline="40">
{
    return;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StandardVersionControlStrategy.java" startline="42" endline="48">
{
    if (isCompatibleVersion (requiredVersions [i])) {
        return;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StandardVersionControlStrategy.java" startline="44" endline="47">
{
    return;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StandardVersionControlStrategy.java" startline="60" endline="78">
{
    String [] requiredVersions = getVersionRequester ().getRequiredVersions ();
    StringBuffer expectedVersions = new StringBuffer ("[");
    for (int i = 0;
    i < requiredVersions.length - 1; i ++) {
        expectedVersions.append (requiredVersions [i] + ", ");
    }

    if (requiredVersions.length > 0) {
        expectedVersions.append (requiredVersions [requiredVersions.length - 1]);
    }

    expectedVersions.append ("]");
    throw new JHotDrawRuntimeException ("Incompatible version of JHotDraw found: " + VersionManagement.getJHotDrawVersion () + " (expected: " + expectedVersions + ")");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StandardVersionControlStrategy.java" startline="65" endline="67">
{
    expectedVersions.append (requiredVersions [i] + ", ");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StandardVersionControlStrategy.java" startline="69" endline="71">
{
    expectedVersions.append (requiredVersions [requiredVersions.length - 1]);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StandardVersionControlStrategy.java" startline="91" endline="93">
{
    return VersionManagement.isCompatibleVersion (compareVersionString);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StandardVersionControlStrategy.java" startline="96" endline="98">
{
    myVersionRequester = newVersionRequester;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StandardVersionControlStrategy.java" startline="101" endline="103">
{
    return myVersionRequester;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorableInput.java" startline="37" endline="43">
{
    Reader r = new BufferedReader (new InputStreamReader (stream));
    fTokenizer = new StreamTokenizer (r);
    fTokenizer.wordChars ('$', '$');
    fMap = CollectionsFactory.current ().createList ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorableInput.java" startline="49" endline="68">
{
    Storable storable;
    String s = readString ();
    if (s.equals ("NULL")) {
        return null;
    }

    if (s.equals ("REF")) {
        int ref = readInt ();
        return (Storable) retrieve (ref);
    }

    storable = (Storable) makeInstance (s);
    map (storable);
    storable.read (this);
    return storable;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorableInput.java" startline="54" endline="56">
{
    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorableInput.java" startline="59" endline="62">
{
    int ref = readInt ();
    return (Storable) retrieve (ref);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorableInput.java" startline="74" endline="83">
{
    int token = fTokenizer.nextToken ();
    if (token == StreamTokenizer.TT_WORD || token == '"') {
        return fTokenizer.sval;
    }

    String msg = "String expected in line: " + fTokenizer.lineno ();
    throw new IOException (msg);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorableInput.java" startline="77" endline="79">
{
    return fTokenizer.sval;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorableInput.java" startline="89" endline="100">
{
    int token = fTokenizer.nextToken ();
    if (token == StreamTokenizer.TT_NUMBER) {
        return (int) fTokenizer.nval;
    }

    String msg = "Integer expected in line: " + fTokenizer.lineno ();
    IOException exception = new IOException (msg);
    exception.printStackTrace ();
    throw new IOException (msg);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorableInput.java" startline="92" endline="94">
{
    return (int) fTokenizer.nval;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorableInput.java" startline="106" endline="116">
{
    long token = fTokenizer.nextToken ();
    if (token == StreamTokenizer.TT_NUMBER) {
        return (long) fTokenizer.nval;
    }

    String msg = "Long expected in line: " + fTokenizer.lineno ();
    IOException exception = new IOException (msg);
    throw exception;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorableInput.java" startline="109" endline="111">
{
    return (long) fTokenizer.nval;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorableInput.java" startline="122" endline="124">
{
    return new Color (readInt (), readInt (), readInt ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorableInput.java" startline="130" endline="139">
{
    int token = fTokenizer.nextToken ();
    if (token == StreamTokenizer.TT_NUMBER) {
        return fTokenizer.nval;
    }

    String msg = "Double expected in line: " + fTokenizer.lineno ();
    throw new IOException (msg);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorableInput.java" startline="133" endline="135">
{
    return fTokenizer.nval;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorableInput.java" startline="145" endline="154">
{
    int token = fTokenizer.nextToken ();
    if (token == StreamTokenizer.TT_NUMBER) {
        return ((int) fTokenizer.nval) == 1;
    }

    String msg = "Integer expected in line: " + fTokenizer.lineno ();
    throw new IOException (msg);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorableInput.java" startline="148" endline="150">
{
    return ((int) fTokenizer.nval) == 1;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorableInput.java" startline="157" endline="180">
{
    try {
        Class cl = Class.forName (className);
        return cl.newInstance ();
    }
    catch (NoSuchMethodError e) {
        throw new IOException ("Class " + className + " does not seem to have a no-arg constructor");
    }
    catch (ClassNotFoundException e) {
        throw new IOException ("No class: " + className);
    }
    catch (InstantiationException e) {
        throw new IOException ("Cannot instantiate: " + className);
    }
    catch (IllegalAccessException e) {
        throw new IOException ("Class (" + className + ") not accessible");
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorableInput.java" startline="159" endline="162">
{
    Class cl = Class.forName (className);
    return cl.newInstance ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorableInput.java" startline="164" endline="167">
{
    throw new IOException ("Class " + className + " does not seem to have a no-arg constructor");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorableInput.java" startline="169" endline="171">
{
    throw new IOException ("No class: " + className);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorableInput.java" startline="173" endline="175">
{
    throw new IOException ("Cannot instantiate: " + className);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorableInput.java" startline="177" endline="179">
{
    throw new IOException ("Class (" + className + ") not accessible");
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorableInput.java" startline="183" endline="188">
{
    if (! fMap.contains (storable)) {
        fMap.add (storable);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorableInput.java" startline="185" endline="187">
{
    fMap.add (storable);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorableInput.java" startline="191" endline="193">
{
    return (Storable) fMap.get (ref);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorableOutput.java" startline="38" endline="42">
{
    fStream = new PrintWriter (stream);
    fMap = CollectionsFactory.current ().createList ();
    fIndent = 0;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorableOutput.java" startline="48" endline="70">
{
    if (storable == null) {
        fStream.print ("NULL");
        space ();
        return;
    }

    if (mapped (storable)) {
        writeRef (storable);
        return;
    }

    incrementIndent ();
    startNewLine ();
    map (storable);
    fStream.print (storable.getClass ().getName ());
    space ();
    storable.write (this);
    space ();
    decrementIndent ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorableOutput.java" startline="50" endline="54">
{
    fStream.print ("NULL");
    space ();
    return;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorableOutput.java" startline="57" endline="60">
{
    writeRef (storable);
    return;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorableOutput.java" startline="76" endline="79">
{
    fStream.print (i);
    space ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorableOutput.java" startline="85" endline="88">
{
    fStream.print (l);
    space ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorableOutput.java" startline="91" endline="95">
{
    writeInt (c.getRed ());
    writeInt (c.getGreen ());
    writeInt (c.getBlue ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorableOutput.java" startline="101" endline="104">
{
    fStream.print (d);
    space ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorableOutput.java" startline="110" endline="120">
{
    if (b) {
        fStream.print (1);
    }
    else {
        fStream.print (0);
    }

    space ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorableOutput.java" startline="112" endline="114">
{
    fStream.print (1);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorableOutput.java" startline="116" endline="118">
{
    fStream.print (0);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorableOutput.java" startline="127" endline="157">
{
    fStream.print ('"');
    for (int i = 0;
    i < s.length (); i ++) {
        char c = s.charAt (i);
        switch (c) {
            case '\n' :
                fStream.print ('\\');
                fStream.print ('n');
                break;
            case '"' :
                fStream.print ('\\');
                fStream.print ('"');
                break;
            case '\\' :
                fStream.print ('\\');
                fStream.print ('\\');
                break;
            case '\t' :
                fStream.print ('\\');
                fStream.print ('\t');
                break;
            default :
                fStream.print (c);
        }
    }

    fStream.print ('"');
    space ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorableOutput.java" startline="130" endline="154">
{
    char c = s.charAt (i);
    switch (c) {
        case '\n' :
            fStream.print ('\\');
            fStream.print ('n');
            break;
        case '"' :
            fStream.print ('\\');
            fStream.print ('"');
            break;
        case '\\' :
            fStream.print ('\\');
            fStream.print ('\\');
            break;
        case '\t' :
            fStream.print ('\\');
            fStream.print ('\t');
            break;
        default :
            fStream.print (c);
    }
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorableOutput.java" startline="163" endline="165">
{
    fStream.close ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorableOutput.java" startline="168" endline="170">
{
    return fMap.contains (storable);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorableOutput.java" startline="173" endline="178">
{
    if (! fMap.contains (storable)) {
        fMap.add (storable);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorableOutput.java" startline="175" endline="177">
{
    fMap.add (storable);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorableOutput.java" startline="181" endline="188">
{
    int ref = fMap.indexOf (storable);
    fStream.print ("REF");
    space ();
    fStream.print (ref);
    space ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorableOutput.java" startline="191" endline="193">
{
    fIndent += 4;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorableOutput.java" startline="196" endline="199">
{
    fIndent -= 4;
    if (fIndent < 0) fIndent = 0;

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorableOutput.java" startline="202" endline="208">
{
    fStream.println ();
    for (int i = 0;
    i < fIndent; i ++) {
        space ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorableOutput.java" startline="205" endline="207">
{
    space ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorableOutput.java" startline="211" endline="213">
{
    fStream.print (' ');
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorageFormatManager.java" startline="48" endline="50">
{
    myStorageFormats = CollectionsFactory.current ().createList ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorageFormatManager.java" startline="58" endline="60">
{
    myStorageFormats.add (newStorageFormat);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorageFormatManager.java" startline="69" endline="71">
{
    myStorageFormats.remove (oldStorageFormat);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorageFormatManager.java" startline="77" endline="79">
{
    return myStorageFormats.contains (checkStorageFormat);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorageFormatManager.java" startline="91" endline="93">
{
    myDefaultStorageFormat = newDefaultStorageFormat;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorageFormatManager.java" startline="101" endline="103">
{
    return myDefaultStorageFormat;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorageFormatManager.java" startline="111" endline="123">
{
    Iterator formatsIterator = myStorageFormats.iterator ();
    while (formatsIterator.hasNext ()) {
        fileChooser.addChoosableFileFilter (((StorageFormat) formatsIterator.next ()).getFileFilter ());
    }

    if (getDefaultStorageFormat () != null) {
        fileChooser.setFileFilter (getDefaultStorageFormat ().getFileFilter ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorageFormatManager.java" startline="114" endline="116">
{
    fileChooser.addChoosableFileFilter (((StorageFormat) formatsIterator.next ()).getFileFilter ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorageFormatManager.java" startline="120" endline="122">
{
    fileChooser.setFileFilter (getDefaultStorageFormat ().getFileFilter ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorageFormatManager.java" startline="133" endline="146">
{
    Iterator formatsIterator = myStorageFormats.iterator ();
    StorageFormat currentStorageFormat = null;
    while (formatsIterator.hasNext ()) {
        currentStorageFormat = (StorageFormat) formatsIterator.next ();
        if (currentStorageFormat.getFileFilter ().equals (findFileFilter)) {
            return currentStorageFormat;
        }

    }

    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorageFormatManager.java" startline="137" endline="143">
{
    currentStorageFormat = (StorageFormat) formatsIterator.next ();
    if (currentStorageFormat.getFileFilter ().equals (findFileFilter)) {
        return currentStorageFormat;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/StorageFormatManager.java" startline="140" endline="142">
{
    return currentStorageFormat;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoCommand.java" startline="37" endline="39">
{
    super (name, newDrawingEditor);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoCommand.java" startline="42" endline="63">
{
    super.execute ();
    UndoManager um = getDrawingEditor ().getUndoManager ();
    if ((um == null) || ! um.isUndoable ()) {
        return;
    }

    Undoable lastUndoable = um.popUndo ();
    boolean hasBeenUndone = lastUndoable.undo ();
    if (hasBeenUndone && lastUndoable.isRedoable ()) {
        um.pushRedo (lastUndoable);
    }

    lastUndoable.getDrawingView ().checkDamage ();
    getDrawingEditor ().figureSelectionChanged (lastUndoable.getDrawingView ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoCommand.java" startline="47" endline="49">
{
    return;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoCommand.java" startline="57" endline="59">
{
    um.pushRedo (lastUndoable);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoCommand.java" startline="71" endline="80">
{
    UndoManager um = getDrawingEditor ().getUndoManager ();
    if ((um != null) && (um.getUndoSize () > 0)) {
        return true;
    }

    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoCommand.java" startline="75" endline="77">
{
    return true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoManager.java" startline="45" endline="47">
{
    this (DEFAULT_BUFFER_SIZE);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoManager.java" startline="50" endline="54">
{
    maxStackCapacity = newUndoStackSize;
    undoStack = CollectionsFactory.current ().createList (maxStackCapacity);
    redoStack = CollectionsFactory.current ().createList (maxStackCapacity);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoManager.java" startline="57" endline="70">
{
    if (undoActivity.isUndoable ()) {
        removeFirstElementInFullList (undoStack);
        undoStack.add (undoActivity);
    }
    else {
        undoStack = CollectionsFactory.current ().createList (maxStackCapacity);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoManager.java" startline="59" endline="62">
{
    removeFirstElementInFullList (undoStack);
    undoStack.add (undoActivity);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoManager.java" startline="64" endline="69">
{
    undoStack = CollectionsFactory.current ().createList (maxStackCapacity);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoManager.java" startline="73" endline="93">
{
    if (redoActivity.isRedoable ()) {
        removeFirstElementInFullList (redoStack);
        if ((getRedoSize () == 0) || (peekRedo () != redoActivity)) {
            redoStack.add (redoActivity);
        }

    }
    else {
        redoStack = CollectionsFactory.current ().createList (maxStackCapacity);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoManager.java" startline="75" endline="85">
{
    removeFirstElementInFullList (redoStack);
    if ((getRedoSize () == 0) || (peekRedo () != redoActivity)) {
        redoStack.add (redoActivity);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoManager.java" startline="82" endline="84">
{
    redoStack.add (redoActivity);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoManager.java" startline="87" endline="92">
{
    redoStack = CollectionsFactory.current ().createList (maxStackCapacity);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoManager.java" startline="99" endline="105">
{
    if (l.size () >= maxStackCapacity) {
        Undoable removedActivity = (Undoable) l.remove (0);
        removedActivity.release ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoManager.java" startline="101" endline="104">
{
    Undoable removedActivity = (Undoable) l.remove (0);
    removedActivity.release ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoManager.java" startline="108" endline="117">
{
    if (l.size () > 0) {
        return (Undoable) l.get (l.size () - 1);
    }
    else {
        return null;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoManager.java" startline="110" endline="112">
{
    return (Undoable) l.get (l.size () - 1);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoManager.java" startline="114" endline="116">
{
    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoManager.java" startline="119" endline="128">
{
    if (getUndoSize () > 0) {
        return getLastElement (undoStack).isUndoable ();
    }
    else {
        return false;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoManager.java" startline="121" endline="123">
{
    return getLastElement (undoStack).isUndoable ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoManager.java" startline="125" endline="127">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoManager.java" startline="131" endline="140">
{
    if (getRedoSize () > 0) {
        return getLastElement (redoStack).isRedoable ();
    }
    else {
        return false;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoManager.java" startline="133" endline="135">
{
    return getLastElement (redoStack).isRedoable ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoManager.java" startline="137" endline="139">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoManager.java" startline="143" endline="152">
{
    if (getUndoSize () > 0) {
        return getLastElement (undoStack);
    }
    else {
        return null;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoManager.java" startline="145" endline="147">
{
    return getLastElement (undoStack);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoManager.java" startline="149" endline="151">
{
    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoManager.java" startline="155" endline="164">
{
    if (getRedoSize () > 0) {
        return getLastElement (redoStack);
    }
    else {
        return null;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoManager.java" startline="157" endline="159">
{
    return getLastElement (redoStack);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoManager.java" startline="161" endline="163">
{
    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoManager.java" startline="170" endline="172">
{
    return undoStack.size ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoManager.java" startline="178" endline="180">
{
    return redoStack.size ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoManager.java" startline="186" endline="194">
{
    Undoable lastUndoable = peekUndo ();
    undoStack.remove (getUndoSize () - 1);
    return lastUndoable;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoManager.java" startline="200" endline="208">
{
    Undoable lastUndoable = peekRedo ();
    redoStack.remove (getRedoSize () - 1);
    return lastUndoable;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoManager.java" startline="211" endline="213">
{
    clearStack (undoStack);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoManager.java" startline="216" endline="218">
{
    clearStack (redoStack);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoManager.java" startline="221" endline="223">
{
    clearStack.clear ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoManager.java" startline="230" endline="240">
{
    Iterator iter = undoStack.iterator ();
    while (iter.hasNext ()) {
        Undoable currentUndo = (Undoable) iter.next ();
        if (currentUndo.getDrawingView () == checkDV) {
            iter.remove ();
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoManager.java" startline="233" endline="239">
{
    Undoable currentUndo = (Undoable) iter.next ();
    if (currentUndo.getDrawingView () == checkDV) {
        iter.remove ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoManager.java" startline="236" endline="238">
{
    iter.remove ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoManager.java" startline="247" endline="257">
{
    Iterator iter = redoStack.iterator ();
    while (iter.hasNext ()) {
        Undoable currentRedo = (Undoable) iter.next ();
        if (currentRedo.getDrawingView () == checkDV) {
            iter.remove ();
        }

    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoManager.java" startline="250" endline="256">
{
    Undoable currentRedo = (Undoable) iter.next ();
    if (currentRedo.getDrawingView () == checkDV) {
        iter.remove ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoManager.java" startline="253" endline="255">
{
    iter.remove ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoRedoActivity.java" startline="29" endline="31">
{
    setReversedActivity (newReversedActivity);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoRedoActivity.java" startline="38" endline="45">
{
    if (isRedoable ()) {
        return getReversedActivity ().redo ();
    }

    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoRedoActivity.java" startline="40" endline="42">
{
    return getReversedActivity ().redo ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoRedoActivity.java" startline="52" endline="59">
{
    if (isUndoable ()) {
        return getReversedActivity ().undo ();
    }

    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoRedoActivity.java" startline="54" endline="56">
{
    return getReversedActivity ().undo ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoRedoActivity.java" startline="65" endline="67">
{
    return getReversedActivity ().isRedoable ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoRedoActivity.java" startline="73" endline="75">
{
    getReversedActivity ().setRedoable (newIsUndoable);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoRedoActivity.java" startline="81" endline="83">
{
    return getReversedActivity ().isUndoable ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoRedoActivity.java" startline="89" endline="91">
{
    getReversedActivity ().setUndoable (newIsRedoable);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoRedoActivity.java" startline="94" endline="96">
{
    getReversedActivity ().setAffectedFigures (newAffectedFigures);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoRedoActivity.java" startline="99" endline="101">
{
    return getReversedActivity ().getAffectedFigures ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoRedoActivity.java" startline="104" endline="106">
{
    return getReversedActivity ().getAffectedFiguresCount ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoRedoActivity.java" startline="109" endline="111">
{
    return getReversedActivity ().getDrawingView ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoRedoActivity.java" startline="114" endline="116">
{
    getReversedActivity ().release ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoRedoActivity.java" startline="119" endline="121">
{
    myReversedActivity = newReversedActivity;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoRedoActivity.java" startline="124" endline="126">
{
    return myReversedActivity;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoRedoActivity.java" startline="129" endline="139">
{
    if (toBeReversed instanceof UndoRedoActivity) {
        return ((UndoRedoActivity) toBeReversed).getReversedActivity ();
    }
    else {
        return new UndoRedoActivity (toBeReversed);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoRedoActivity.java" startline="132" endline="134">
{
    return ((UndoRedoActivity) toBeReversed).getReversedActivity ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoRedoActivity.java" startline="136" endline="138">
{
    return new UndoRedoActivity (toBeReversed);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableAdapter.java" startline="36" endline="38">
{
    setDrawingView (newDrawingView);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableAdapter.java" startline="45" endline="47">
{
    return isUndoable ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableAdapter.java" startline="54" endline="56">
{
    return isRedoable ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableAdapter.java" startline="59" endline="61">
{
    return myIsUndoable;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableAdapter.java" startline="64" endline="66">
{
    myIsUndoable = newIsUndoable;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableAdapter.java" startline="69" endline="71">
{
    return myIsRedoable;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableAdapter.java" startline="74" endline="76">
{
    myIsRedoable = newIsRedoable;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableAdapter.java" startline="79" endline="83">
{
    rememberFigures (newAffectedFigures);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableAdapter.java" startline="86" endline="88">
{
    return new FigureEnumerator (CollectionsFactory.current ().createList (myAffectedFigures));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableAdapter.java" startline="91" endline="93">
{
    return myAffectedFigures.size ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableAdapter.java" startline="96" endline="102">
{
    myAffectedFigures = CollectionsFactory.current ().createList ();
    while (toBeRemembered.hasNextFigure ()) {
        myAffectedFigures.add (toBeRemembered.nextFigure ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableAdapter.java" startline="99" endline="101">
{
    myAffectedFigures.add (toBeRemembered.nextFigure ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableAdapter.java" startline="108" endline="115">
{
    FigureEnumeration fe = getAffectedFigures ();
    while (fe.hasNextFigure ()) {
        fe.nextFigure ().release ();
    }

    setAffectedFigures (FigureEnumerator.getEmptyEnumeration ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableAdapter.java" startline="111" endline="113">
{
    fe.nextFigure ().release ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableAdapter.java" startline="125" endline="128">
{
    setAffectedFigures (StandardFigureSelection.duplicateFigures (getAffectedFigures (), getAffectedFiguresCount ()));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableAdapter.java" startline="131" endline="133">
{
    return myDrawingView;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableAdapter.java" startline="136" endline="138">
{
    myDrawingView = newDrawingView;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableCommand.java" startline="30" endline="34">
{
    setWrappedCommand (newWrappedCommand);
    getWrappedCommand ().addCommandListener (this);
    setEventDispatcher (createEventDispatcher ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableCommand.java" startline="40" endline="64">
{
    hasSelectionChanged = false;
    view ().addFigureSelectionListener (this);
    getWrappedCommand ().execute ();
    Undoable undoableCommand = getWrappedCommand ().getUndoActivity ();
    if ((undoableCommand != null) && (undoableCommand.isUndoable ())) {
        getDrawingEditor ().getUndoManager ().pushUndo (undoableCommand);
        getDrawingEditor ().getUndoManager ().clearRedos ();
    }

    if (! hasSelectionChanged || (getDrawingEditor ().getUndoManager ().getUndoSize () == 1)) {
        getDrawingEditor ().figureSelectionChanged (view ());
    }

    view ().removeFigureSelectionListener (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableCommand.java" startline="49" endline="52">
{
    getDrawingEditor ().getUndoManager ().pushUndo (undoableCommand);
    getDrawingEditor ().getUndoManager ().clearRedos ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableCommand.java" startline="57" endline="59">
{
    getDrawingEditor ().figureSelectionChanged (view ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableCommand.java" startline="70" endline="72">
{
    return getWrappedCommand ().isExecutable ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableCommand.java" startline="75" endline="77">
{
    myWrappedCommand = newWrappedCommand;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableCommand.java" startline="80" endline="82">
{
    return myWrappedCommand;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableCommand.java" startline="88" endline="90">
{
    return getWrappedCommand ().name ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableCommand.java" startline="93" endline="95">
{
    return getWrappedCommand ().getDrawingEditor ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableCommand.java" startline="98" endline="100">
{
    return getDrawingEditor ().view ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableCommand.java" startline="103" endline="105">
{
    hasSelectionChanged = true;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableCommand.java" startline="108" endline="110">
{
    return new UndoableAdapter (view ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableCommand.java" startline="113" endline="115">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableCommand.java" startline="118" endline="120">
{
    getEventDispatcher ().addCommandListener (newCommandListener);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableCommand.java" startline="123" endline="125">
{
    getEventDispatcher ().removeCommandListener (oldCommandListener);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableCommand.java" startline="128" endline="130">
{
    myEventDispatcher = newEventDispatcher;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableCommand.java" startline="133" endline="135">
{
    return myEventDispatcher;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableCommand.java" startline="138" endline="140">
{
    return new AbstractCommand.EventDispatcher (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableCommand.java" startline="143" endline="145">
{
    getEventDispatcher ().fireCommandExecutedEvent ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableCommand.java" startline="148" endline="150">
{
    getEventDispatcher ().fireCommandExecutableEvent ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableCommand.java" startline="153" endline="155">
{
    getEventDispatcher ().fireCommandNotExecutableEvent ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableHandle.java" startline="28" endline="31">
{
    setWrappedHandle (newWrappedHandle);
    setDrawingView (newDrawingView);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableHandle.java" startline="38" endline="40">
{
    return getWrappedHandle ().locate ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableHandle.java" startline="51" endline="53">
{
    getWrappedHandle ().invokeStart (x, y, drawing);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableHandle.java" startline="65" endline="67">
{
    getWrappedHandle ().invokeStart (x, y, view);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableHandle.java" startline="78" endline="80">
{
    getWrappedHandle ().invokeStep (dx, dy, drawing);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableHandle.java" startline="90" endline="92">
{
    getWrappedHandle ().invokeStep (x, y, anchorX, anchorY, view);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableHandle.java" startline="102" endline="111">
{
    getWrappedHandle ().invokeEnd (x, y, anchorX, anchorY, view);
    Undoable undoableActivity = getWrappedHandle ().getUndoActivity ();
    if ((undoableActivity != null) && (undoableActivity.isUndoable ())) {
        getDrawingView ().editor ().getUndoManager ().pushUndo (undoableActivity);
        getDrawingView ().editor ().getUndoManager ().clearRedos ();
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableHandle.java" startline="107" endline="110">
{
    getDrawingView ().editor ().getUndoManager ().pushUndo (undoableActivity);
    getDrawingView ().editor ().getUndoManager ().clearRedos ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableHandle.java" startline="120" endline="122">
{
    getWrappedHandle ().invokeEnd (dx, dy, drawing);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableHandle.java" startline="128" endline="130">
{
    return getWrappedHandle ().owner ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableHandle.java" startline="136" endline="138">
{
    return getWrappedHandle ().displayBox ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableHandle.java" startline="144" endline="146">
{
    return getWrappedHandle ().containsPoint (x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableHandle.java" startline="152" endline="154">
{
    getWrappedHandle ().draw (g);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableHandle.java" startline="157" endline="159">
{
    myWrappedHandle = newWrappedHandle;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableHandle.java" startline="162" endline="164">
{
    return myWrappedHandle;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableHandle.java" startline="167" endline="169">
{
    return myDrawingView;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableHandle.java" startline="172" endline="174">
{
    myDrawingView = newDrawingView;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableHandle.java" startline="177" endline="179">
{
    return new UndoableAdapter (getDrawingView ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableHandle.java" startline="182" endline="184">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableTool.java" startline="31" endline="35">
{
    setEventDispatcher (createEventDispatcher ());
    setWrappedTool (newWrappedTool);
    getWrappedTool ().addToolListener (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableTool.java" startline="43" endline="45">
{
    getWrappedTool ().activate ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableTool.java" startline="54" endline="64">
{
    getWrappedTool ().deactivate ();
    Undoable undoActivity = getWrappedTool ().getUndoActivity ();
    if ((undoActivity != null) && (undoActivity.isUndoable ())) {
        editor ().getUndoManager ().pushUndo (undoActivity);
        editor ().getUndoManager ().clearRedos ();
        editor ().figureSelectionChanged (getActiveView ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableTool.java" startline="58" endline="63">
{
    editor ().getUndoManager ().pushUndo (undoActivity);
    editor ().getUndoManager ().clearRedos ();
    editor ().figureSelectionChanged (getActiveView ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableTool.java" startline="70" endline="72">
{
    getWrappedTool ().mouseDown (e, x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableTool.java" startline="78" endline="80">
{
    getWrappedTool ().mouseDrag (e, x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableTool.java" startline="90" endline="92">
{
    getWrappedTool ().mouseUp (e, x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableTool.java" startline="98" endline="100">
{
    getWrappedTool ().mouseMove (evt, x, y);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableTool.java" startline="106" endline="108">
{
    getWrappedTool ().keyDown (evt, key);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableTool.java" startline="111" endline="113">
{
    return getWrappedTool ().isUsable ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableTool.java" startline="116" endline="119">
{
    return editor ().tool () == this;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableTool.java" startline="122" endline="124">
{
    return getWrappedTool ().isEnabled ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableTool.java" startline="127" endline="129">
{
    getWrappedTool ().setUsable (newIsUsable);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableTool.java" startline="132" endline="134">
{
    getWrappedTool ().setEnabled (newIsEnabled);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableTool.java" startline="137" endline="139">
{
    myWrappedTool = newWrappedTool;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableTool.java" startline="142" endline="144">
{
    return myWrappedTool;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableTool.java" startline="147" endline="149">
{
    return getWrappedTool ().editor ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableTool.java" startline="152" endline="154">
{
    return editor ().view ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableTool.java" startline="157" endline="159">
{
    return new UndoableAdapter (view ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableTool.java" startline="162" endline="164">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableTool.java" startline="167" endline="169">
{
    getEventDispatcher ().fireToolUsableEvent ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableTool.java" startline="172" endline="174">
{
    getEventDispatcher ().fireToolUnusableEvent ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableTool.java" startline="177" endline="179">
{
    getEventDispatcher ().fireToolActivatedEvent ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableTool.java" startline="182" endline="184">
{
    getEventDispatcher ().fireToolDeactivatedEvent ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableTool.java" startline="187" endline="189">
{
    getEventDispatcher ().fireToolEnabledEvent ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableTool.java" startline="192" endline="194">
{
    getEventDispatcher ().fireToolDisabledEvent ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableTool.java" startline="197" endline="199">
{
    getEventDispatcher ().addToolListener (newToolListener);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableTool.java" startline="202" endline="204">
{
    getEventDispatcher ().removeToolListener (oldToolListener);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableTool.java" startline="207" endline="209">
{
    myEventDispatcher = newEventDispatcher;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableTool.java" startline="212" endline="214">
{
    return myEventDispatcher;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableTool.java" startline="217" endline="219">
{
    return new AbstractTool.EventDispatcher (this);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/UndoableTool.java" startline="222" endline="224">
{
    return editor ().view ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/VersionManagement.java" startline="49" endline="53">
{
    Package pack = packages [4];
    return pack.getSpecificationVersion ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/VersionManagement.java" startline="59" endline="77">
{
    if (lookupPackage == null) {
        return null;
    }

    String specVersion = lookupPackage.getSpecificationVersion ();
    if (specVersion != null) {
        return specVersion;
    }
    else {
        String normalizedPackageName = normalizePackageName (lookupPackage.getName ());
        String nextPackageName = getNextPackage (normalizedPackageName);
        return getPackageVersion (Package.getPackage (nextPackageName));
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/VersionManagement.java" startline="61" endline="63">
{
    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/VersionManagement.java" startline="67" endline="69">
{
    return specVersion;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/VersionManagement.java" startline="71" endline="76">
{
    String normalizedPackageName = normalizePackageName (lookupPackage.getName ());
    String nextPackageName = getNextPackage (normalizedPackageName);
    return getPackageVersion (Package.getPackage (nextPackageName));
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/VersionManagement.java" startline="86" endline="97">
{
    Package pack = packages [4];
    if (compareVersionString == null) {
        return pack.getSpecificationVersion () == null;
    }
    else {
        return pack.isCompatibleWith (compareVersionString);
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/VersionManagement.java" startline="90" endline="92">
{
    return pack.getSpecificationVersion () == null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/VersionManagement.java" startline="94" endline="96">
{
    return pack.isCompatibleWith (compareVersionString);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/VersionManagement.java" startline="108" endline="136">
{
    try {
        FileInputStream fileInput = new FileInputStream (versionFileName);
        Manifest manifest = new Manifest ();
        manifest.read (fileInput);
        Map entries = manifest.getEntries ();
        Iterator entryIterator = entries.entrySet ().iterator ();
        while (entryIterator.hasNext ()) {
            Map.Entry currentEntry = (Map.Entry) entryIterator.next ();
            String packageName = currentEntry.getKey ().toString ();
            packageName = normalizePackageName (packageName);
            Attributes attributes = (Attributes) currentEntry.getValue ();
            String packageSpecVersion = attributes.getValue (Attributes.Name.SPECIFICATION_VERSION);
            packageSpecVersion = extractVersionInfo (packageSpecVersion);
            return packageSpecVersion;
        }

    }
    catch (IOException exception) {
        exception.printStackTrace ();
    }

    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/VersionManagement.java" startline="110" endline="128">
{
    FileInputStream fileInput = new FileInputStream (versionFileName);
    Manifest manifest = new Manifest ();
    manifest.read (fileInput);
    Map entries = manifest.getEntries ();
    Iterator entryIterator = entries.entrySet ().iterator ();
    while (entryIterator.hasNext ()) {
        Map.Entry currentEntry = (Map.Entry) entryIterator.next ();
        String packageName = currentEntry.getKey ().toString ();
        packageName = normalizePackageName (packageName);
        Attributes attributes = (Attributes) currentEntry.getValue ();
        String packageSpecVersion = attributes.getValue (Attributes.Name.SPECIFICATION_VERSION);
        packageSpecVersion = extractVersionInfo (packageSpecVersion);
        return packageSpecVersion;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/VersionManagement.java" startline="119" endline="127">
{
    Map.Entry currentEntry = (Map.Entry) entryIterator.next ();
    String packageName = currentEntry.getKey ().toString ();
    packageName = normalizePackageName (packageName);
    Attributes attributes = (Attributes) currentEntry.getValue ();
    String packageSpecVersion = attributes.getValue (Attributes.Name.SPECIFICATION_VERSION);
    packageSpecVersion = extractVersionInfo (packageSpecVersion);
    return packageSpecVersion;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/VersionManagement.java" startline="130" endline="132">
{
    exception.printStackTrace ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/VersionManagement.java" startline="147" endline="162">
{
    if (searchPackage == null) {
        return null;
    }

    int foundNextPackage = searchPackage.lastIndexOf ('.');
    if (foundNextPackage > 0) {
        return searchPackage.substring (0, foundNextPackage);
    }
    else {
        return null;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/VersionManagement.java" startline="149" endline="151">
{
    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/VersionManagement.java" startline="155" endline="157">
{
    return searchPackage.substring (0, foundNextPackage);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/VersionManagement.java" startline="159" endline="161">
{
    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/VersionManagement.java" startline="173" endline="187">
{
    String replaced = toBeNormalized.replace ('/', '.');
    replaced = replaced.replace (File.pathSeparatorChar, '.');
    if (replaced.endsWith (".")) {
        int lastSeparator = replaced.lastIndexOf ('.');
        return replaced.substring (0, lastSeparator);
    }
    else {
        return replaced;
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/VersionManagement.java" startline="179" endline="182">
{
    int lastSeparator = replaced.lastIndexOf ('.');
    return replaced.substring (0, lastSeparator);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/VersionManagement.java" startline="184" endline="186">
{
    return replaced;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/VersionManagement.java" startline="197" endline="226">
{
    if (versionString == null) {
        return null;
    }

    if (versionString.length () == 0) {
        return "";
    }

    int startIndex = versionString.indexOf ("\"");
    if (startIndex < 0) {
        startIndex = 0;
    }
    else {
        startIndex ++;
    }

    int endIndex = versionString.lastIndexOf ("\"");
    if (endIndex < 0) {
        endIndex = versionString.length ();
    }

    return versionString.substring (startIndex, endIndex);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/VersionManagement.java" startline="200" endline="202">
{
    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/VersionManagement.java" startline="204" endline="206">
{
    return "";
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/VersionManagement.java" startline="210" endline="212">
{
    startIndex = 0;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/VersionManagement.java" startline="214" endline="217">
{
    startIndex ++;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/VersionManagement.java" startline="221" endline="223">
{
    endIndex = versionString.length ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/CollectionsFactoryJDK11.java" startline="24" endline="26">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/CollectionsFactoryJDK11.java" startline="29" endline="31">
{
    return new ListWrapper ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/CollectionsFactoryJDK11.java" startline="34" endline="36">
{
    return new ListWrapper (initList);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/CollectionsFactoryJDK11.java" startline="39" endline="41">
{
    return new ListWrapper (initSize);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/CollectionsFactoryJDK11.java" startline="44" endline="46">
{
    return new MapWrapper ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/CollectionsFactoryJDK11.java" startline="49" endline="51">
{
    return new MapWrapper (initMap);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/CollectionsFactoryJDK11.java" startline="54" endline="56">
{
    return new SetWrapper ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/CollectionsFactoryJDK11.java" startline="59" endline="61">
{
    return new SetWrapper (initSet);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/IteratorWrapper.java" startline="25" endline="27">
{
    myEnumeration = enumeration;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/IteratorWrapper.java" startline="30" endline="32">
{
    return myEnumeration.hasMoreElements ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/IteratorWrapper.java" startline="35" endline="37">
{
    return myEnumeration.nextElement ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/IteratorWrapper.java" startline="40" endline="43">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/ListWrapper.java" startline="25" endline="27">
{
    myDelegee = new Vector ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/ListWrapper.java" startline="30" endline="32">
{
    myDelegee = new Vector (initialSize);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/ListWrapper.java" startline="35" endline="37">
{
    myDelegee = new Vector (copyCollection);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/ListWrapper.java" startline="40" endline="42">
{
    return myDelegee.size ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/ListWrapper.java" startline="45" endline="47">
{
    return myDelegee.isEmpty ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/ListWrapper.java" startline="50" endline="52">
{
    return myDelegee.contains (o);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/ListWrapper.java" startline="55" endline="57">
{
    return new IteratorWrapper (myDelegee.elements ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/ListWrapper.java" startline="60" endline="62">
{
    return myDelegee.toArray ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/ListWrapper.java" startline="65" endline="67">
{
    return myDelegee.toArray (a);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/ListWrapper.java" startline="70" endline="72">
{
    return myDelegee.add (o);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/ListWrapper.java" startline="75" endline="77">
{
    return myDelegee.removeElement (o);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/ListWrapper.java" startline="80" endline="82">
{
    return myDelegee.containsAll (c);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/ListWrapper.java" startline="85" endline="87">
{
    return myDelegee.addAll (c);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/ListWrapper.java" startline="90" endline="92">
{
    return myDelegee.addAll (index, c);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/ListWrapper.java" startline="95" endline="97">
{
    return myDelegee.removeAll (c);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/ListWrapper.java" startline="100" endline="102">
{
    return myDelegee.retainAll (c);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/ListWrapper.java" startline="105" endline="107">
{
    myDelegee.clear ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/ListWrapper.java" startline="110" endline="112">
{
    return myDelegee.elementAt (index);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/ListWrapper.java" startline="115" endline="117">
{
    return myDelegee.set (index, element);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/ListWrapper.java" startline="120" endline="122">
{
    myDelegee.add (index, element);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/ListWrapper.java" startline="125" endline="127">
{
    return myDelegee.remove (index);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/ListWrapper.java" startline="130" endline="132">
{
    return myDelegee.indexOf (o);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/ListWrapper.java" startline="135" endline="137">
{
    return myDelegee.lastIndexOf (o);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/ListWrapper.java" startline="140" endline="142">
{
    return myDelegee.listIterator ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/ListWrapper.java" startline="145" endline="147">
{
    return myDelegee.listIterator (index);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/ListWrapper.java" startline="150" endline="152">
{
    return null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/MapWrapper.java" startline="25" endline="27">
{
    myDelegee = new Hashtable ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/MapWrapper.java" startline="30" endline="32">
{
    myDelegee = new Hashtable (copyMap);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/MapWrapper.java" startline="35" endline="37">
{
    return myDelegee.size ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/MapWrapper.java" startline="40" endline="42">
{
    return myDelegee.isEmpty ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/MapWrapper.java" startline="45" endline="47">
{
    return myDelegee.containsKey (key);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/MapWrapper.java" startline="50" endline="52">
{
    return myDelegee.containsKey (value);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/MapWrapper.java" startline="55" endline="57">
{
    return myDelegee.get (key);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/MapWrapper.java" startline="60" endline="62">
{
    return myDelegee.put (key, value);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/MapWrapper.java" startline="65" endline="67">
{
    return myDelegee.remove (key);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/MapWrapper.java" startline="70" endline="72">
{
    myDelegee.putAll (t);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/MapWrapper.java" startline="75" endline="77">
{
    myDelegee.clear ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/MapWrapper.java" startline="80" endline="82">
{
    return myDelegee.keySet ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/MapWrapper.java" startline="85" endline="87">
{
    return myDelegee.values ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/MapWrapper.java" startline="90" endline="92">
{
    return myDelegee.entrySet ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/SetWrapper.java" startline="24" endline="26">
{
    myDelegee = new Hashtable ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/SetWrapper.java" startline="29" endline="36">
{
    myDelegee = new Hashtable ();
    Iterator iter = initSet.iterator ();
    while (iter.hasNext ()) {
        add (iter.next ());
    }

}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/SetWrapper.java" startline="33" endline="35">
{
    add (iter.next ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/SetWrapper.java" startline="39" endline="41">
{
    return myDelegee.size ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/SetWrapper.java" startline="44" endline="46">
{
    return myDelegee.isEmpty ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/SetWrapper.java" startline="49" endline="51">
{
    return myDelegee.containsKey (o);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/SetWrapper.java" startline="54" endline="56">
{
    return new IteratorWrapper (myDelegee.elements ());
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/SetWrapper.java" startline="59" endline="61">
{
    return new Object [0];
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/SetWrapper.java" startline="64" endline="66">
{
    return new Object [0];
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/SetWrapper.java" startline="69" endline="71">
{
    return myDelegee.put (o, o) == null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/SetWrapper.java" startline="74" endline="76">
{
    return myDelegee.remove (o) != null;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/SetWrapper.java" startline="79" endline="81">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/SetWrapper.java" startline="84" endline="86">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/SetWrapper.java" startline="89" endline="91">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/SetWrapper.java" startline="94" endline="96">
{
    return false;
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk11/SetWrapper.java" startline="99" endline="101">
{
    myDelegee.clear ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk12/CollectionsFactoryJDK12.java" startline="24" endline="26">
{
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk12/CollectionsFactoryJDK12.java" startline="29" endline="31">
{
    return new ArrayList ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk12/CollectionsFactoryJDK12.java" startline="34" endline="36">
{
    return new ArrayList (initList);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk12/CollectionsFactoryJDK12.java" startline="39" endline="41">
{
    return new ArrayList (initSize);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk12/CollectionsFactoryJDK12.java" startline="44" endline="46">
{
    return new Hashtable ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk12/CollectionsFactoryJDK12.java" startline="49" endline="51">
{
    return new Hashtable (initMap);
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk12/CollectionsFactoryJDK12.java" startline="54" endline="56">
{
    return new HashSet ();
}
</source>
<source file="JHotDraw54b1/src/CH/ifa/draw/util/collections/jdk12/CollectionsFactoryJDK12.java" startline="59" endline="61">
{
    return new HashSet (initSet);
}
</source>
